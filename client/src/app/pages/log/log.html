<div class="page-container">
  <div class="page-header">
    <h2><i class="fas fa-calendar-days"></i> Feeding Log</h2>
  </div>

  @if (dateGroups().length === 0) {
    <div class="empty-state">
      <i class="fas fa-calendar-xmark"></i>
      <p>No feeding entries yet.</p>
      <small>Start tracking on the Today page!</small>
    </div>
  }

  <!-- Modal Overlay -->
  @if (editingEntry()) {
    <div class="modal-overlay" (click)="onCancelEdit()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h3>
            <i class="fas fa-pen"></i>
            Edit Feeding
          </h3>
          <button class="btn-close" (click)="onCancelEdit()">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <app-feeding-form
            [entry]="editingEntry()"
            (submitForm)="onSubmit($event)"
            (cancel)="onCancelEdit()"
          ></app-feeding-form>
        </div>
      </div>
    </div>
  }

  <div class="log-list">
    @for (group of dateGroups(); track group.date) {
      <div class="date-group">
        <div class="date-header">
          <div class="date-header-row">
            <i class="fas fa-calendar"></i>
            <h3>{{ formatDate(group.date) }}</h3>
          </div>
          <div class="date-header-row date-header-bottom">
            <span class="date-badge">{{ formatDateBadge(group.date) }}</span>
            <div class="date-header-stats">
              <span class="stat-badge" title="Total feedings">
                <i class="fas fa-hashtag"></i>
                {{ group.totalFeedings }}
              </span>
              <span class="stat-badge" title="Total milk (ml)">
                <i class="fas fa-bottle-droplet"></i>
                {{ group.totalMilk }} ml
              </span>
            </div>
          </div>
        </div>
        <app-feeding-list
          [entries]="group.entries"
          (editEntry)="onEdit($event)"
          (deleteEntry)="onDelete($event)"
        ></app-feeding-list>
      </div>
    }
  </div>
</div>
