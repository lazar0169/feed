<div class="reset-password-container">
  <div class="reset-password-card">
    <div class="logo-section">
      <i class="fas fa-key"></i>
      <h1>Reset Your Password</h1>
      <p class="subtitle">Enter your new password below</p>
    </div>

    @if (!hasValidToken() && !errorMessage()) {
      <div class="loading-state">
        <i class="fas fa-spinner fa-spin"></i>
        <p>Verifying reset link...</p>
      </div>
    }

    @if (errorMessage() && !hasValidToken()) {
      <div class="error-message">
        <i class="fas fa-exclamation-circle"></i>
        {{ errorMessage() }}
      </div>
      <div class="back-link">
        <button type="button" (click)="goToLogin()" class="btn-link">
          <i class="fas fa-arrow-left"></i>
          Back to Login
        </button>
      </div>
    }

    @if (hasValidToken()) {
      <form [formGroup]="resetForm" (ngSubmit)="onResetPassword()" class="reset-form">
      <div class="form-group">
        <label for="new-password">
          <i class="fas fa-lock"></i>
          NEW PASSWORD
        </label>
        <input
          type="password"
          id="new-password"
          formControlName="password"
          class="form-control"
          placeholder="Enter new password (min 6 characters)"
          [class.error]="resetForm.get('password')?.invalid && resetForm.get('password')?.touched"
        />
      </div>

      <div class="form-group">
        <label for="confirm-password">
          <i class="fas fa-lock"></i>
          CONFIRM PASSWORD
        </label>
        <input
          type="password"
          id="confirm-password"
          formControlName="confirmPassword"
          class="form-control"
          placeholder="Confirm your new password"
          [class.error]="resetForm.get('confirmPassword')?.invalid && resetForm.get('confirmPassword')?.touched"
        />
      </div>

      @if (errorMessage()) {
        <div class="error-message">
          <i class="fas fa-exclamation-circle"></i>
          {{ errorMessage() }}
        </div>
      }

      @if (successMessage()) {
        <div class="success-message">
          <i class="fas fa-check-circle"></i>
          {{ successMessage() }}
        </div>
      }

      <button type="submit" class="btn-primary" [disabled]="isLoading()">
        <i class="fas"
           [class.fa-spinner]="isLoading()"
           [class.fa-spin]="isLoading()"
           [class.fa-check]="!isLoading()"></i>
        {{ isLoading() ? 'Updating...' : 'Update Password' }}
      </button>

      <div class="back-link">
        <button type="button" (click)="goToLogin()" class="btn-link">
          <i class="fas fa-arrow-left"></i>
          Back to Login
        </button>
      </div>
    </form>
    }
  </div>
</div>
