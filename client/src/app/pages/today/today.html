<div class="page-container">
  <div class="page-header">
    <h2><i class="fas fa-sun"></i> Today's Feedings</h2>
    <div class="today-stats">
      <div class="stat">
        <i class="fas fa-bottle-droplet"></i>
        <span class="stat-label">Total</span>
        <span class="stat-value">{{ totalAmount() }} ml</span>
      </div>
      <div class="stat">
        <i class="fas fa-list-check"></i>
        <span class="stat-label">Count</span>
        <span class="stat-value">{{ todayEntries().length }}</span>
      </div>
      @if (nextFeedCountdown()) {
        <div class="stat next-feed-stat" [ngClass]="feedingStatusClass()">
          <i class="fas" [ngClass]="feedingStatusIcon()"></i>
          <span class="stat-label">{{ feedingStatusLabel() }}</span>
          <span class="stat-value">{{ nextFeedCountdown() }}</span>
        </div>
      }
    </div>
  </div>

  <!-- Floating Action Button -->
  @if (!showFormModal()) {
    <button class="fab" (click)="openFormModal()">
      <i class="fas fa-plus"></i>
    </button>
  }

  <!-- Modal Overlay -->
  @if (showFormModal()) {
    <div class="modal-overlay" (click)="closeFormModal()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h3>
            <i class="fas" [ngClass]="editingEntry() ? 'fa-pen' : 'fa-plus-circle'"></i>
            {{ editingEntry() ? 'Edit' : 'Add New' }} Feeding
          </h3>
          <button class="btn-close" (click)="closeFormModal()">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <app-feeding-form
            [entry]="editingEntry()"
            [defaultDate]="todayDate"
            (submitForm)="onSubmit($event)"
            (cancel)="closeFormModal()"
          ></app-feeding-form>
        </div>
      </div>
    </div>
  }

  <div class="list-section">
    <h3><i class="fas fa-clock"></i> Today's Entries</h3>
    <app-feeding-list
      [entries]="todayEntries()"
      (editEntry)="onEdit($event)"
      (deleteEntry)="onDelete($event)"
    ></app-feeding-list>
  </div>
</div>
