var vC=Object.create;var Co=Object.defineProperty,yC=Object.defineProperties,_C=Object.getOwnPropertyDescriptor,bC=Object.getOwnPropertyDescriptors,wC=Object.getOwnPropertyNames,kg=Object.getOwnPropertySymbols,CC=Object.getPrototypeOf,Lg=Object.prototype.hasOwnProperty,EC=Object.prototype.propertyIsEnumerable;var Fg=(n,t,e)=>t in n?Co(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,D=(n,t)=>{for(var e in t||={})Lg.call(t,e)&&Fg(n,e,t[e]);if(kg)for(var e of kg(t))EC.call(t,e)&&Fg(n,e,t[e]);return n},Y=(n,t)=>yC(n,bC(t));var DC=(n,t)=>()=>(n&&(t=n(n=0)),t);var tr=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),SC=(n,t)=>{for(var e in t)Co(n,e,{get:t[e],enumerable:!0})},jg=(n,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of wC(t))!Lg.call(n,i)&&i!==e&&Co(n,i,{get:()=>t[i],enumerable:!(r=_C(t,i))||r.enumerable});return n};var IC=(n,t,e)=>(e=n!=null?vC(CC(n)):{},jg(t||!n||!n.__esModule?Co(e,"default",{value:n,enumerable:!0}):e,n)),ri=n=>jg(Co({},"__esModule",{value:!0}),n);var ar={};SC(ar,{__addDisposableResource:()=>Cm,__assign:()=>Ia,__asyncDelegator:()=>gm,__asyncGenerator:()=>Ta,__asyncValues:()=>Oa,__await:()=>Qt,__awaiter:()=>S,__classPrivateFieldGet:()=>_m,__classPrivateFieldIn:()=>wm,__classPrivateFieldSet:()=>bm,__createBinding:()=>Ma,__decorate:()=>rm,__disposeResources:()=>Em,__esDecorate:()=>om,__exportStar:()=>dm,__extends:()=>nm,__generator:()=>um,__importDefault:()=>ym,__importStar:()=>vm,__makeTemplateObject:()=>mm,__metadata:()=>lm,__param:()=>im,__propKey:()=>am,__read:()=>yd,__rest:()=>pn,__rewriteRelativeImportExtension:()=>Dm,__runInitializers:()=>sm,__setFunctionName:()=>cm,__spread:()=>fm,__spreadArray:()=>pm,__spreadArrays:()=>hm,__values:()=>xa,default:()=>BC});function nm(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");md(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function pn(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e}function rm(n,t,e,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o}function im(n,t){return function(e,r){t(e,r,n)}}function om(n,t,e,r,i,o){function s(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var a=r.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&n?r.static?n:n.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),d,h=!1,f=e.length-1;f>=0;f--){var p={};for(var m in r)p[m]=m==="access"?{}:r[m];for(var m in r.access)p.access[m]=r.access[m];p.addInitializer=function(w){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(w||null))};var C=(0,e[f])(a==="accessor"?{get:u.get,set:u.set}:u[c],p);if(a==="accessor"){if(C===void 0)continue;if(C===null||typeof C!="object")throw new TypeError("Object expected");(d=s(C.get))&&(u.get=d),(d=s(C.set))&&(u.set=d),(d=s(C.init))&&i.unshift(d)}else(d=s(C))&&(a==="field"?i.unshift(d):u[c]=d)}l&&Object.defineProperty(l,r.name,u),h=!0}function sm(n,t,e){for(var r=arguments.length>2,i=0;i<t.length;i++)e=r?t[i].call(n,e):t[i].call(n);return r?e:void 0}function am(n){return typeof n=="symbol"?n:"".concat(n)}function cm(n,t,e){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:e?"".concat(e," ",t):t})}function lm(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)}function S(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})}function um(n,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(e=0)),e;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){e.label=l[1];break}if(l[0]===6&&e.label<o[1]){e.label=o[1],o=l;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(l);break}o[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(n,e)}catch(u){l=[6,u],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function dm(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&Ma(t,n,e)}function xa(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function yd(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return o}function fm(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(yd(arguments[t]));return n}function hm(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var r=Array(n),i=0,t=0;t<e;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function pm(n,t,e){if(e||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return n.concat(o||Array.prototype.slice.call(t))}function Qt(n){return this instanceof Qt?(this.v=n,this):new Qt(n)}function Ta(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){r[f]&&(i[f]=function(m){return new Promise(function(C,w){o.push([f,m,C,w])>1||c(f,m)})},p&&(i[f]=p(i[f])))}function c(f,p){try{l(r[f](p))}catch(m){h(o[0][3],m)}}function l(f){f.value instanceof Qt?Promise.resolve(f.value.v).then(u,d):h(o[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,p){f(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function gm(n){var t,e;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,o){t[i]=n[i]?function(s){return(e=!e)?{value:Qt(n[i](s)),done:!1}:o?o(s):s}:o}}function Oa(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof xa=="function"?xa(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(o){e[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}function mm(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n}function vm(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e=vd(n),r=0;r<e.length;r++)e[r]!=="default"&&Ma(t,n,e[r]);return UC(t,n),t}function ym(n){return n&&n.__esModule?n:{default:n}}function _m(n,t,e,r){if(e==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?r:e==="a"?r.call(n):r?r.value:t.get(n)}function bm(n,t,e,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,e):i?i.value=e:t.set(n,e),e}function wm(n,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?t===n:n.has(t)}function Cm(n,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],e&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),n.stack.push({value:t,dispose:r,async:e})}else e&&n.stack.push({async:!0});return t}function Em(n){function t(o){n.error=n.hasError?new $C(o,n.error,"An error was suppressed during disposal."):o,n.hasError=!0}var e,r=0;function i(){for(;e=n.stack.pop();)try{if(!e.async&&r===1)return r=0,n.stack.push(e),Promise.resolve().then(i);if(e.dispose){var o=e.dispose.call(e.value);if(e.async)return r|=2,Promise.resolve(o).then(i,function(s){return t(s),i()})}else r|=1}catch(s){t(s)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return i()}function Dm(n,t){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,r,i,o,s){return r?t?".jsx":".js":i&&(!o||!s)?e:i+o+"."+s.toLowerCase()+"js"}):n}var md,Ia,Ma,UC,vd,$C,BC,be=DC(()=>{"use strict";md=function(n,t){return md=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},md(n,t)};Ia=function(){return Ia=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Ia.apply(this,arguments)};Ma=Object.create?function(n,t,e,r){r===void 0&&(r=e);var i=Object.getOwnPropertyDescriptor(t,e);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,r,i)}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]};UC=Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t},vd=function(n){return vd=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},vd(n)};$C=typeof SuppressedError=="function"?SuppressedError:function(n,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=n,r.suppressed=t,r};BC={__extends:nm,__assign:Ia,__rest:pn,__decorate:rm,__param:im,__esDecorate:om,__runInitializers:sm,__propKey:am,__setFunctionName:cm,__metadata:lm,__awaiter:S,__generator:um,__createBinding:Ma,__exportStar:dm,__values:xa,__read:yd,__spread:fm,__spreadArrays:hm,__spreadArray:pm,__await:Qt,__asyncGenerator:Ta,__asyncDelegator:gm,__asyncValues:Oa,__makeTemplateObject:mm,__importStar:vm,__importDefault:ym,__classPrivateFieldGet:_m,__classPrivateFieldSet:bm,__classPrivateFieldIn:wm,__addDisposableResource:Cm,__disposeResources:Em,__rewriteRelativeImportExtension:Dm}});var Fp=tr(kp=>{"use strict";Object.defineProperty(kp,"__esModule",{value:!0});var Pp=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};kp.default=Pp});var Vp=tr(jp=>{"use strict";Object.defineProperty(jp,"__esModule",{value:!0});var hO=(be(),ri(ar)),pO=hO.__importDefault(Fp()),Lp=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var s,a,c,l;let u=null,d=null,h=null,f=o.status,p=o.statusText;if(o.ok){if(this.method!=="HEAD"){let z=await o.text();z===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((s=this.headers.get("Accept"))===null||s===void 0)&&s.includes("application/vnd.pgrst.plan+text"))?d=z:d=JSON.parse(z))}let C=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),w=(c=o.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");C&&w&&w.length>1&&(h=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{let C=await o.text();try{u=JSON.parse(C),Array.isArray(u)&&o.status===404&&(d=[],u=null,f=200,p="OK")}catch{o.status===404&&C===""?(f=204,p="No Content"):u={message:C}}if(u&&this.isMaybeSingle&&(!((l=u?.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,f=200,p="OK"),u&&this.shouldThrowOnError)throw new pO.default(u)}return{error:u,data:d,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(i=i.catch(o=>{var s,a,c,l,u,d;let h="",f=o?.cause;if(f){let p=(s=f?.message)!==null&&s!==void 0?s:"",m=(a=f?.code)!==null&&a!==void 0?a:"";h=`${(c=o?.name)!==null&&c!==void 0?c:"FetchError"}: ${o?.message}`,h+=`

Caused by: ${(l=f?.name)!==null&&l!==void 0?l:"Error"}: ${p}`,m&&(h+=` (${m})`),f?.stack&&(h+=`
${f.stack}`)}else h=(u=o?.stack)!==null&&u!==void 0?u:"";return{error:{message:`${(d=o?.name)!==null&&d!==void 0?d:"FetchError"}: ${o?.message}`,details:h,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}};jp.default=Lp});var Bp=tr($p=>{"use strict";Object.defineProperty($p,"__esModule",{value:!0});var gO=(be(),ri(ar)),mO=gO.__importDefault(Vp()),Up=class extends mO.default{select(t){let e=!1,r=(t??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:i,referencedTable:o=i}={}){let s=o?`${o}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){let i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:i=r}={}){let o=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:i=!1,wal:o=!1,format:s="text"}={}){var a;let c=[t?"analyze":null,e?"verbose":null,r?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${c};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};$p.default=Up});var Bl=tr(zp=>{"use strict";Object.defineProperty(zp,"__esModule",{value:!0});var vO=(be(),ri(ar)),yO=vO.__importDefault(Bp()),_O=new RegExp("[,()]"),Hp=class extends yO.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){let r=Array.from(new Set(e)).map(i=>typeof i=="string"&&_O.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");let s=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${o}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){let i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}};zp.default=Hp});var Wp=tr(qp=>{"use strict";Object.defineProperty(qp,"__esModule",{value:!0});var bO=(be(),ri(ar)),$s=bO.__importDefault(Bl()),Gp=class{constructor(t,{headers:e={},schema:r,fetch:i}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=i}select(t,e){let{head:r=!1,count:i}=e??{},o=r?"HEAD":"GET",s=!1,a=(t??"*").split("").map(c=>/\s/.test(c)&&!s?"":(c==='"'&&(s=!s),c)).join("");return this.url.searchParams.set("select",a),i&&this.headers.append("Prefer",`count=${i}`),new $s.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var i;let o="POST";if(e&&this.headers.append("Prefer",`count=${e}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){let s=t.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(s.length>0){let a=[...new Set(s)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new $s.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:i,defaultToNull:o=!0}={}){var s;let a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(t)){let c=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){let l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new $s.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(t,{count:e}={}){var r;let i="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new $s.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;let r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new $s.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}};qp.default=Gp});var _0=tr(Yp=>{"use strict";Object.defineProperty(Yp,"__esModule",{value:!0});var y0=(be(),ri(ar)),wO=y0.__importDefault(Wp()),CO=y0.__importDefault(Bl()),Kp=class n{constructor(t,{headers:e={},schema:r,fetch:i}={}){this.url=t,this.headers=new Headers(e),this.schemaName=r,this.fetch=i}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");let e=new URL(`${this.url}/${t}`);return new wO.default(e,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new n(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:r=!1,get:i=!1,count:o}={}){var s;let a,c=new URL(`${this.url}/rpc/${t}`),l;r||i?(a=r?"HEAD":"GET",Object.entries(e).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{c.searchParams.append(d,h)})):(a="POST",l=e);let u=new Headers(this.headers);return o&&u.set("Prefer",`count=${o}`),new CO.default({method:a,url:c,headers:u,schema:this.schemaName,body:l,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};Yp.default=Kp});var I0=tr(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.PostgrestError=dt.PostgrestBuilder=dt.PostgrestTransformBuilder=dt.PostgrestFilterBuilder=dt.PostgrestQueryBuilder=dt.PostgrestClient=void 0;var Ji=(be(),ri(ar)),b0=Ji.__importDefault(_0());dt.PostgrestClient=b0.default;var w0=Ji.__importDefault(Wp());dt.PostgrestQueryBuilder=w0.default;var C0=Ji.__importDefault(Bl());dt.PostgrestFilterBuilder=C0.default;var E0=Ji.__importDefault(Bp());dt.PostgrestTransformBuilder=E0.default;var D0=Ji.__importDefault(Vp());dt.PostgrestBuilder=D0.default;var S0=Ji.__importDefault(Fp());dt.PostgrestError=S0.default;dt.default={PostgrestClient:b0.default,PostgrestQueryBuilder:w0.default,PostgrestFilterBuilder:C0.default,PostgrestTransformBuilder:E0.default,PostgrestBuilder:D0.default,PostgrestError:S0.default}});var Ke=null,da=!1,Ku=1,xC=null,ft=Symbol("SIGNAL");function F(n){let t=Ke;return Ke=n,t}function ha(){return Ke}var ii={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Eo(n){if(da)throw new Error("");if(Ke===null)return;Ke.consumerOnSignalRead(n);let t=Ke.producersTail;if(t!==void 0&&t.producer===n)return;let e,r=Ke.recomputing;if(r&&(e=t!==void 0?t.nextProducer:Ke.producers,e!==void 0&&e.producer===n)){Ke.producersTail=e,e.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Ke&&(!r||TC(i,Ke)))return;let o=si(Ke),s={producer:n,consumer:Ke,nextProducer:e,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Ke.producersTail=s,t!==void 0?t.nextProducer=s:Ke.producers=s,o&&Bg(n,s)}function Vg(){Ku++}function Yu(n){if(!(si(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ku)){if(!n.producerMustRecompute(n)&&!So(n)){Wu(n);return}n.producerRecomputeValue(n),Wu(n)}}function Zu(n){if(n.consumers===void 0)return;let t=da;da=!0;try{for(let e=n.consumers;e!==void 0;e=e.nextConsumer){let r=e.consumer;r.dirty||MC(r)}}finally{da=t}}function Qu(){return Ke?.consumerAllowSignalWrites!==!1}function MC(n){n.dirty=!0,Zu(n),n.consumerMarkedDirty?.(n)}function Wu(n){n.dirty=!1,n.lastCleanEpoch=Ku}function oi(n){return n&&Ug(n),F(n)}function Ug(n){n.producersTail=void 0,n.recomputing=!0}function Do(n,t){F(t),n&&$g(n)}function $g(n){n.recomputing=!1;let t=n.producersTail,e=t!==void 0?t.nextProducer:n.producers;if(e!==void 0){if(si(n))do e=Ju(e);while(e!==void 0);t!==void 0?t.nextProducer=void 0:n.producers=void 0}}function So(n){for(let t=n.producers;t!==void 0;t=t.nextProducer){let e=t.producer,r=t.lastReadVersion;if(r!==e.version||(Yu(e),r!==e.version))return!0}return!1}function nr(n){if(si(n)){let t=n.producers;for(;t!==void 0;)t=Ju(t)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function Bg(n,t){let e=n.consumersTail,r=si(n);if(e!==void 0?(t.nextConsumer=e.nextConsumer,e.nextConsumer=t):(t.nextConsumer=void 0,n.consumers=t),t.prevConsumer=e,n.consumersTail=t,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)Bg(i.producer,i)}function Ju(n){let t=n.producer,e=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:t.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(t.consumers=r,!si(t)){let o=t.producers;for(;o!==void 0;)o=Ju(o)}return e}function si(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Xu(n){xC?.(n)}function TC(n,t){let e=t.producersTail;if(e!==void 0){let r=t.producers;do{if(r===n)return!0;if(r===e)break;r=r.nextProducer}while(r!==void 0)}return!1}function ed(n,t){return Object.is(n,t)}function pa(n,t){let e=Object.create(OC);e.computation=n,t!==void 0&&(e.equal=t);let r=()=>{if(Yu(e),Eo(e),e.value===fa)throw e.error;return e.value};return r[ft]=e,Xu(e),r}var Gu=Symbol("UNSET"),qu=Symbol("COMPUTING"),fa=Symbol("ERRORED"),OC=Y(D({},ii),{value:Gu,dirty:!0,error:null,equal:ed,kind:"computed",producerMustRecompute(n){return n.value===Gu||n.value===qu},producerRecomputeValue(n){if(n.value===qu)throw new Error("");let t=n.value;n.value=qu;let e=oi(n),r,i=!1;try{r=n.computation(),F(null),i=t!==Gu&&t!==fa&&r!==fa&&n.equal(t,r)}catch(o){r=fa,n.error=o}finally{Do(n,e)}if(i){n.value=t;return}n.value=r,n.version++}});function AC(){throw new Error}var Hg=AC;function zg(n){Hg(n)}function td(n){Hg=n}var RC=null;function nd(n,t){let e=Object.create(ga);e.value=n,t!==void 0&&(e.equal=t);let r=()=>Gg(e);return r[ft]=e,Xu(e),[r,s=>Io(e,s),s=>qg(e,s)]}function Gg(n){return Eo(n),n.value}function Io(n,t){Qu()||zg(n),n.equal(n.value,t)||(n.value=t,NC(n))}function qg(n,t){Qu()||zg(n),Io(n,t(n.value))}var ga=Y(D({},ii),{equal:ed,value:void 0,kind:"signal"});function NC(n){n.version++,Vg(),Zu(n),RC?.(n)}function rd(n){let t=F(null);try{return n()}finally{F(t)}}var id=Y(D({},ii),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function od(n){if(n.dirty=!1,n.version>0&&!So(n))return;n.version++;let t=oi(n);try{n.cleanup(),n.fn()}finally{Do(n,t)}}function W(n){return typeof n=="function"}function ai(n){let e=n(r=>{Error.call(r),r.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var ma=ai(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function rr(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var Re=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:r}=this;if(W(r))try{r()}catch(o){t=o instanceof ma?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Wg(o)}catch(s){t=t??[],s instanceof ma?t=[...t,...s.errors]:t.push(s)}}if(t)throw new ma(t)}}add(t){var e;if(t&&t!==this)if(this.closed)Wg(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&rr(e,t)}remove(t){let{_finalizers:e}=this;e&&rr(e,t),t instanceof n&&t._removeParent(this)}};Re.EMPTY=(()=>{let n=new Re;return n.closed=!0,n})();var sd=Re.EMPTY;function va(n){return n instanceof Re||n&&"closed"in n&&W(n.remove)&&W(n.add)&&W(n.unsubscribe)}function Wg(n){W(n)?n():n.unsubscribe()}var Nt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ci={setTimeout(n,t,...e){let{delegate:r}=ci;return r?.setTimeout?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=ci;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ya(n){ci.setTimeout(()=>{let{onUnhandledError:t}=Nt;if(t)t(n);else throw n})}function ir(){}var Kg=ad("C",void 0,void 0);function Yg(n){return ad("E",void 0,n)}function Zg(n){return ad("N",n,void 0)}function ad(n,t,e){return{kind:n,value:t,error:e}}var or=null;function li(n){if(Nt.useDeprecatedSynchronousErrorHandling){let t=!or;if(t&&(or={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:r}=or;if(or=null,e)throw r}}else n()}function Qg(n){Nt.useDeprecatedSynchronousErrorHandling&&or&&(or.errorThrown=!0,or.error=n)}var sr=class extends Re{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,va(t)&&t.add(this)):this.destination=FC}static create(t,e,r){return new ui(t,e,r)}next(t){this.isStopped?ld(Zg(t),this):this._next(t)}error(t){this.isStopped?ld(Yg(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?ld(Kg,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},PC=Function.prototype.bind;function cd(n,t){return PC.call(n,t)}var ud=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){_a(r)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){_a(r)}else _a(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){_a(e)}}},ui=class extends sr{constructor(t,e,r){super();let i;if(W(t)||!t)i={next:t??void 0,error:e??void 0,complete:r??void 0};else{let o;this&&Nt.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&cd(t.next,o),error:t.error&&cd(t.error,o),complete:t.complete&&cd(t.complete,o)}):i=t}this.destination=new ud(i)}};function _a(n){Nt.useDeprecatedSynchronousErrorHandling?Qg(n):ya(n)}function kC(n){throw n}function ld(n,t){let{onStoppedNotification:e}=Nt;e&&ci.setTimeout(()=>e(n,t))}var FC={closed:!0,next:ir,error:kC,complete:ir};var di=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Pt(n){return n}function dd(...n){return fd(n)}function fd(n){return n.length===0?Pt:n.length===1?n[0]:function(e){return n.reduce((r,i)=>i(r),e)}}var K=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,i){let o=jC(e)?e:new ui(e,r,i);return li(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return r=Jg(r),new r((i,o)=>{let s=new ui({next:a=>{try{e(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)}[di](){return this}pipe(...e){return fd(e)(this)}toPromise(e){return e=Jg(e),new e((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=t=>new n(t),n})();function Jg(n){var t;return(t=n??Nt.Promise)!==null&&t!==void 0?t:Promise}function LC(n){return n&&W(n.next)&&W(n.error)&&W(n.complete)}function jC(n){return n&&n instanceof sr||LC(n)&&va(n)}function VC(n){return W(n?.lift)}function ce(n){return t=>{if(VC(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function le(n,t,e,r,i){return new hd(n,t,e,r,i)}var hd=class extends sr{constructor(t,e,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var Xg=ai(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var _e=(()=>{class n extends K{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let r=new ba(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new Xg}next(e){li(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(e)}})}error(e){li(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){li(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:r,isStopped:i,observers:o}=this;return r||i?sd:(this.currentObservers=null,o.push(e),new Re(()=>{this.currentObservers=null,rr(o,e)}))}_checkFinalizedStatuses(e){let{hasError:r,thrownError:i,isStopped:o}=this;r?e.error(i):o&&e.complete()}asObservable(){let e=new K;return e.source=this,e}}return n.create=(t,e)=>new ba(t,e),n})(),ba=class extends _e{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.next)===null||r===void 0||r.call(e,t)}error(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.error)===null||r===void 0||r.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,r;return(r=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&r!==void 0?r:sd}};var Ne=class extends _e{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var pd={now(){return(pd.delegate||Date).now()},delegate:void 0};var wa=class extends Re{constructor(t,e){super()}schedule(t,e=0){return this}};var xo={setInterval(n,t,...e){let{delegate:r}=xo;return r?.setInterval?r.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=xo;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var Ca=class extends wa{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,e)),this.pending=!0,this.delay=e,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,r=0){return xo.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,e,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return e;e!=null&&xo.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,e);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,rr(r,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var fi=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,r){return new this.schedulerActionCtor(this,t).schedule(r,e)}};fi.now=pd.now;var Ea=class extends fi{constructor(t,e=fi.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}};var gd=new Ea(Ca),em=gd;var ht=new K(n=>n.complete());function Da(n){return n&&W(n.schedule)}function tm(n){return n[n.length-1]}function Sa(n){return W(tm(n))?n.pop():void 0}function On(n){return Da(tm(n))?n.pop():void 0}be();var Aa=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ra(n){return W(n?.then)}function Na(n){return W(n[di])}function Pa(n){return Symbol.asyncIterator&&W(n?.[Symbol.asyncIterator])}function ka(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function HC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Fa=HC();function La(n){return W(n?.[Fa])}be();function ja(n){return Ta(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:r,done:i}=yield Qt(e.read());if(i)return yield Qt(void 0);yield yield Qt(r)}}finally{e.releaseLock()}})}function Va(n){return W(n?.getReader)}function Ae(n){if(n instanceof K)return n;if(n!=null){if(Na(n))return zC(n);if(Aa(n))return GC(n);if(Ra(n))return qC(n);if(Pa(n))return Sm(n);if(La(n))return WC(n);if(Va(n))return KC(n)}throw ka(n)}function zC(n){return new K(t=>{let e=n[di]();if(W(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function GC(n){return new K(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function qC(n){return new K(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,ya)})}function WC(n){return new K(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function Sm(n){return new K(t=>{YC(n,t).catch(e=>t.error(e))})}function KC(n){return Sm(ja(n))}function YC(n,t){var e,r,i,o;return S(this,void 0,void 0,function*(){try{for(e=Oa(n);r=yield e.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=e.return)&&(yield o.call(e))}finally{if(i)throw i.error}}t.complete()})}function pt(n,t,e,r=0,i=!1){let o=t.schedule(function(){e(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ua(n,t=0){return ce((e,r)=>{e.subscribe(le(r,i=>pt(r,n,()=>r.next(i),t),()=>pt(r,n,()=>r.complete(),t),i=>pt(r,n,()=>r.error(i),t)))})}function $a(n,t=0){return ce((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function Im(n,t){return Ae(n).pipe($a(t),Ua(t))}function xm(n,t){return Ae(n).pipe($a(t),Ua(t))}function Mm(n,t){return new K(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}function Tm(n,t){return new K(e=>{let r;return pt(e,t,()=>{r=n[Fa](),pt(e,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){e.error(s);return}o?e.complete():e.next(i)},0,!0)}),()=>W(r?.return)&&r.return()})}function Ba(n,t){if(!n)throw new Error("Iterable cannot be null");return new K(e=>{pt(e,t,()=>{let r=n[Symbol.asyncIterator]();pt(e,t,()=>{r.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function Om(n,t){return Ba(ja(n),t)}function Am(n,t){if(n!=null){if(Na(n))return Im(n,t);if(Aa(n))return Mm(n,t);if(Ra(n))return xm(n,t);if(Pa(n))return Ba(n,t);if(La(n))return Tm(n,t);if(Va(n))return Om(n,t)}throw ka(n)}function xe(n,t){return t?Am(n,t):Ae(n)}function J(...n){let t=On(n);return xe(n,t)}function _d(n,t){let e=W(n)?n:()=>n,r=i=>i.error(e());return new K(t?i=>t.schedule(r,0,i):r)}function Ha(n){return!!n&&(n instanceof K||W(n.lift)&&W(n.subscribe))}var cr=ai(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Rm(n){return n instanceof Date&&!isNaN(n)}function te(n,t){return ce((e,r)=>{let i=0;e.subscribe(le(r,o=>{r.next(n.call(t,o,i++))}))})}var{isArray:ZC}=Array;function QC(n,t){return ZC(t)?n(...t):n(t)}function za(n){return te(t=>QC(n,t))}var{isArray:JC}=Array,{getPrototypeOf:XC,prototype:eE,keys:tE}=Object;function Ga(n){if(n.length===1){let t=n[0];if(JC(t))return{args:t,keys:null};if(nE(t)){let e=tE(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}function nE(n){return n&&typeof n=="object"&&XC(n)===eE}function qa(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}function bd(...n){let t=On(n),e=Sa(n),{args:r,keys:i}=Ga(n);if(r.length===0)return xe([],t);let o=new K(rE(r,t,i?s=>qa(i,s):Pt));return e?o.pipe(za(e)):o}function rE(n,t,e=Pt){return r=>{Nm(t,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)Nm(t,()=>{let l=xe(n[c],t),u=!1;l.subscribe(le(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(e(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Nm(n,t,e){n?pt(e,n,t):t()}function Pm(n,t,e,r,i,o,s,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&t.complete()},f=m=>l<r?p(m):c.push(m),p=m=>{o&&t.next(m),l++;let C=!1;Ae(e(m,u++)).subscribe(le(t,w=>{i?.(w),o?f(w):t.next(w)},()=>{C=!0},void 0,()=>{if(C)try{for(l--;c.length&&l<r;){let w=c.shift();s?pt(t,s,()=>p(w)):p(w)}h()}catch(w){t.error(w)}}))};return n.subscribe(le(t,f,()=>{d=!0,h()})),()=>{a?.()}}function Ye(n,t,e=1/0){return W(t)?Ye((r,i)=>te((o,s)=>t(r,o,i,s))(Ae(n(r,i))),e):(typeof t=="number"&&(e=t),ce((r,i)=>Pm(r,i,n,e)))}function hi(n=1/0){return Ye(Pt,n)}function km(){return hi(1)}function pi(...n){return km()(xe(n,On(n)))}function Mo(n){return new K(t=>{Ae(n()).subscribe(t)})}function wd(...n){let t=Sa(n),{args:e,keys:r}=Ga(n),i=new K(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;Ae(e[u]).subscribe(le(o,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?qa(r,a):a),o.complete())}))}});return t?i.pipe(za(t)):i}function Fm(n=0,t,e=em){let r=-1;return t!=null&&(Da(t)?e=t:r=t),new K(i=>{let o=Rm(n)?+n-e.now():n;o<0&&(o=0);let s=0;return e.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Cd(n=0,t=gd){return n<0&&(n=0),Fm(n,n,t)}var gn=new K(ir);function Ze(n,t){return ce((e,r)=>{let i=0;e.subscribe(le(r,o=>n.call(t,o,i++)&&r.next(o)))})}function gi(n){return ce((t,e)=>{let r=null,i=!1,o;r=t.subscribe(le(e,void 0,void 0,s=>{o=Ae(n(s,gi(n)(t))),r?(r.unsubscribe(),r=null,o.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(e))})}function To(n,t){return W(t)?Ye(n,t,1):Ye(n,1)}function Ed(n){return ce((t,e)=>{let r=!1;t.subscribe(le(e,i=>{r=!0,e.next(i)},()=>{r||e.next(n),e.complete()}))})}function nt(n){return n<=0?()=>ht:ce((t,e)=>{let r=0;t.subscribe(le(e,i=>{++r<=n&&(e.next(i),n<=r&&e.complete())}))})}function Lm(n=iE){return ce((t,e)=>{let r=!1;t.subscribe(le(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(n())))})}function iE(){return new cr}function Dd(n){return ce((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function mn(n,t){let e=arguments.length>=2;return r=>r.pipe(n?Ze((i,o)=>n(i,o,r)):Pt,nt(1),e?Ed(t):Lm(()=>new cr))}function Wa(n){return n<=0?()=>ht:ce((t,e)=>{let r=[];t.subscribe(le(e,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function Sd(...n){let t=On(n);return ce((e,r)=>{(t?pi(n,e,t):pi(n,e)).subscribe(r)})}function rt(n,t){return ce((e,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();e.subscribe(le(r,c=>{i?.unsubscribe();let l=0,u=o++;Ae(n(c,u)).subscribe(i=le(r,d=>r.next(t?t(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function lr(n){return ce((t,e)=>{Ae(n).subscribe(le(e,()=>e.complete(),ir)),!e.closed&&t.subscribe(e)})}function it(n,t,e){let r=W(n)||t||e?{next:n,error:t,complete:e}:n;return r?ce((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(le(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Pt}var Id;function Ka(){return Id}function Jt(n){let t=Id;return Id=n,t}var jm=Symbol("NotFound");function mi(n){return n===jm||n?.name==="\u0275NotFound"}var tc="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",M=class extends Error{code;constructor(t,e){super(mr(t,e)),this.code=t}};function oE(n){return`NG0${Math.abs(n)}`}function mr(n,t){return`${oE(n)}${t?": "+t:""}`}var Fo=globalThis;function ue(n){for(let t in n)if(n[t]===ue)return t;throw Error("")}function Hm(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function yn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(yn).join(", ")}]`;if(n==null)return""+n;let t=n.overriddenName||n.name;if(t)return`${t}`;let e=n.toString();if(e==null)return""+e;let r=e.indexOf(`
`);return r>=0?e.slice(0,r):e}function nc(n,t){return n?t?`${n} ${t}`:n:t||""}var sE=ue({__forward_ref__:ue});function kt(n){return n.__forward_ref__=kt,n.toString=function(){return yn(this())},n}function Be(n){return Vd(n)?n():n}function Vd(n){return typeof n=="function"&&n.hasOwnProperty(sE)&&n.__forward_ref__===kt}function R(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Dt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Lo(n){return aE(n,rc)}function Ud(n){return Lo(n)!==null}function aE(n,t){return n.hasOwnProperty(t)&&n[t]||null}function cE(n){let t=n?.[rc]??null;return t||null}function Md(n){return n&&n.hasOwnProperty(Za)?n[Za]:null}var rc=ue({\u0275prov:ue}),Za=ue({\u0275inj:ue}),P=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=R({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function $d(n){return n&&!!n.\u0275providers}var Bd=ue({\u0275cmp:ue}),Hd=ue({\u0275dir:ue}),zd=ue({\u0275pipe:ue}),Gd=ue({\u0275mod:ue}),Ao=ue({\u0275fac:ue}),vr=ue({__NG_ELEMENT_ID__:ue}),Vm=ue({__NG_ENV_ID__:ue});function jo(n){return typeof n=="string"?n:n==null?"":String(n)}function zm(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():jo(n)}var Gm=ue({ngErrorCode:ue}),lE=ue({ngErrorMessage:ue}),uE=ue({ngTokenPath:ue});function qd(n,t){return qm("",-200,t)}function ic(n,t){throw new M(-201,!1)}function qm(n,t,e){let r=new M(t,n);return r[Gm]=t,r[lE]=n,e&&(r[uE]=e),r}function dE(n){return n[Gm]}var Td;function Wm(){return Td}function mt(n){let t=Td;return Td=n,t}function Wd(n,t,e){let r=Lo(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(e&8)return null;if(t!==void 0)return t;ic(n,"Injector")}var fE={},ur=fE,hE="__NG_DI_FLAG__",Od=class{injector;constructor(t){this.injector=t}retrieve(t,e){let r=dr(e)||0;try{return this.injector.get(t,r&8?null:ur,r)}catch(i){if(mi(i))return i;throw i}}};function pE(n,t=0){let e=Ka();if(e===void 0)throw new M(-203,!1);if(e===null)return Wd(n,void 0,t);{let r=gE(t),i=e.retrieve(n,r);if(mi(i)){if(r.optional)return null;throw i}return i}}function L(n,t=0){return(Wm()||pE)(Be(n),t)}function b(n,t){return L(n,dr(t))}function dr(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function gE(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Ad(n){let t=[];for(let e=0;e<n.length;e++){let r=Be(n[e]);if(Array.isArray(r)){if(r.length===0)throw new M(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=mE(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(L(i,o))}else t.push(L(r))}return t}function mE(n){return n[hE]}function fr(n,t){let e=n.hasOwnProperty(Ao);return e?n[Ao]:null}function Km(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=t[r];if(e&&(i=e(i),o=e(o)),o!==i)return!1}return!0}function Ym(n){return n.flat(Number.POSITIVE_INFINITY)}function oc(n,t){n.forEach(e=>Array.isArray(e)?oc(e,t):t(e))}function Kd(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function Vo(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Zm(n,t,e,r){let i=n.length;if(i==t)n.push(e,r);else if(i===1)n.push(r,n[0]),n[0]=e;else{for(i--,n.push(n[i-1],n[i]);i>t;){let o=i-2;n[i]=n[o],i--}n[t]=e,n[t+1]=r}}function sc(n,t,e){let r=yi(n,t);return r>=0?n[r|1]=e:(r=~r,Zm(n,r,t,e)),r}function ac(n,t){let e=yi(n,t);if(e>=0)return n[e|1]}function yi(n,t){return vE(n,t,1)}function vE(n,t,e){let r=0,i=n.length>>e;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<e];if(t===s)return o<<e;s>t?i=o:r=o+1}return~(i<<e)}var Nn={},ot=[],yr=new P(""),Yd=new P("",-1),Zd=new P(""),Ro=class{get(t,e=ur){if(e===ur){let i=qm("",-201);throw i.name="\u0275NotFound",i}return e}};function Qd(n){return n[Gd]||null}function Pn(n){return n[Bd]||null}function Jd(n){return n[Hd]||null}function Qm(n){return n[zd]||null}function Xt(n){return{\u0275providers:n}}function Jm(n){return Xt([{provide:yr,multi:!0,useValue:n}])}function Xm(...n){return{\u0275providers:Xd(!0,n),\u0275fromNgModule:!0}}function Xd(n,...t){let e=[],r=new Set,i,o=s=>{e.push(s)};return oc(t,s=>{let a=s;Qa(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&ev(i,o),e}function ev(n,t){for(let e=0;e<n.length;e++){let{ngModule:r,providers:i}=n[e];ef(i,o=>{t(o,r)})}}function Qa(n,t,e,r){if(n=Be(n),!n)return!1;let i=null,o=Md(n),s=!o&&Pn(n);if(!o&&!s){let c=n.ngModule;if(o=Md(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Qa(l,t,e,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{oc(o.imports,u=>{Qa(u,t,e,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&ev(l,t)}if(!a){let l=fr(i)||(()=>new i);t({provide:i,useFactory:l,deps:ot},i),t({provide:Zd,useValue:i,multi:!0},i),t({provide:yr,useValue:()=>L(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;ef(c,u=>{t(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function ef(n,t){for(let e of n)$d(e)&&(e=e.\u0275providers),Array.isArray(e)?ef(e,t):t(e)}var yE=ue({provide:String,useValue:ue});function tv(n){return n!==null&&typeof n=="object"&&yE in n}function _E(n){return!!(n&&n.useExisting)}function bE(n){return!!(n&&n.useFactory)}function hr(n){return typeof n=="function"}function nv(n){return!!n.useClass}var Uo=new P(""),Ya={},Um={},xd;function $o(){return xd===void 0&&(xd=new Ro),xd}var Ve=class{},pr=class extends Ve{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,r,i){super(),this.parent=e,this.source=r,this.scopes=i,Nd(t,s=>this.processProvider(s)),this.records.set(Yd,vi(void 0,this)),i.has("environment")&&this.records.set(Ve,vi(void 0,this));let o=this.records.get(Uo);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Zd,ot,{self:!0}))}retrieve(t,e){let r=dr(e)||0;try{return this.get(t,ur,r)}catch(i){if(mi(i))return i;throw i}}destroy(){Oo(this),this._destroyed=!0;let t=F(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of e)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),F(t)}}onDestroy(t){return Oo(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Oo(this);let e=Jt(this),r=mt(void 0),i;try{return t()}finally{Jt(e),mt(r)}}get(t,e=ur,r){if(Oo(this),t.hasOwnProperty(Vm))return t[Vm](this);let i=dr(r),o,s=Jt(this),a=mt(void 0);try{if(!(i&4)){let l=this.records.get(t);if(l===void 0){let u=SE(t)&&Lo(t);u&&this.injectableDefInScope(u)?l=vi(Rd(t),Ya):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l,i)}let c=i&2?$o():this.parent;return e=i&8&&e===ur?null:e,c.get(t,e)}catch(c){let l=dE(c);throw l===-200||l===-201?new M(l,null):c}finally{mt(a),Jt(s)}}resolveInjectorInitializers(){let t=F(null),e=Jt(this),r=mt(void 0),i;try{let o=this.get(yr,ot,{self:!0});for(let s of o)s()}finally{Jt(e),mt(r),F(t)}}toString(){let t=[],e=this.records;for(let r of e.keys())t.push(yn(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Be(t);let e=hr(t)?t:Be(t&&t.provide),r=CE(t);if(!hr(t)&&t.multi===!0){let i=this.records.get(e);i||(i=vi(void 0,Ya,!0),i.factory=()=>Ad(i.multi),this.records.set(e,i)),e=t,i.multi.push(t)}this.records.set(e,r)}hydrate(t,e,r){let i=F(null);try{if(e.value===Um)throw qd(yn(t));return e.value===Ya&&(e.value=Um,e.value=e.factory(void 0,r)),typeof e.value=="object"&&e.value&&DE(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{F(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=Be(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function Rd(n){let t=Lo(n),e=t!==null?t.factory:fr(n);if(e!==null)return e;if(n instanceof P)throw new M(204,!1);if(n instanceof Function)return wE(n);throw new M(204,!1)}function wE(n){if(n.length>0)throw new M(204,!1);let e=cE(n);return e!==null?()=>e.factory(n):()=>new n}function CE(n){if(tv(n))return vi(void 0,n.useValue);{let t=tf(n);return vi(t,Ya)}}function tf(n,t,e){let r;if(hr(n)){let i=Be(n);return fr(i)||Rd(i)}else if(tv(n))r=()=>Be(n.useValue);else if(bE(n))r=()=>n.useFactory(...Ad(n.deps||[]));else if(_E(n))r=(i,o)=>L(Be(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Be(n&&(n.useClass||n.provide));if(EE(n))r=()=>new i(...Ad(n.deps));else return fr(i)||Rd(i)}return r}function Oo(n){if(n.destroyed)throw new M(205,!1)}function vi(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function EE(n){return!!n.deps}function DE(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function SE(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Nd(n,t){for(let e of n)Array.isArray(e)?Nd(e,t):e&&$d(e)?Nd(e.\u0275providers,t):t(e)}function ct(n,t){let e;n instanceof pr?(Oo(n),e=n):e=new Od(n);let r,i=Jt(e),o=mt(void 0);try{return t()}finally{Jt(i),mt(o)}}function rv(){return Wm()!==void 0||Ka()!=null}var Ft=0,j=1,G=2,Pe=3,St=4,It=5,_i=6,bi=7,Me=8,bn=9,en=10,we=11,wi=12,nf=13,_r=14,vt=15,kn=16,br=17,tn=18,Bo=19,rf=20,vn=21,cc=22,An=23,yt=24,lc=25,wr=26,He=27,iv=1,of=6,Fn=7,Ho=8,Cr=9,De=10;function nn(n){return Array.isArray(n)&&typeof n[iv]=="object"}function Lt(n){return Array.isArray(n)&&n[iv]===!0}function sf(n){return(n.flags&4)!==0}function Ln(n){return n.componentOffset>-1}function uc(n){return(n.flags&1)===1}function rn(n){return!!n.template}function Ci(n){return(n[G]&512)!==0}function Er(n){return(n[G]&256)===256}var ov="svg",sv="math";function xt(n){for(;Array.isArray(n);)n=n[Ft];return n}function af(n,t){return xt(t[n])}function jt(n,t){return xt(t[n.index])}function zo(n,t){return n.data[t]}function Mt(n,t){let e=t[n];return nn(e)?e:e[Ft]}function av(n){return(n[G]&4)===4}function dc(n){return(n[G]&128)===128}function cv(n){return Lt(n[Pe])}function on(n,t){return t==null?null:n[t]}function cf(n){n[br]=0}function lf(n){n[G]&1024||(n[G]|=1024,dc(n)&&Ei(n))}function lv(n,t){for(;n>0;)t=t[_r],n--;return t}function Go(n){return!!(n[G]&9216||n[yt]?.dirty)}function fc(n){n[en].changeDetectionScheduler?.notify(8),n[G]&64&&(n[G]|=1024),Go(n)&&Ei(n)}function Ei(n){n[en].changeDetectionScheduler?.notify(0);let t=Rn(n);for(;t!==null&&!(t[G]&8192||(t[G]|=8192,!dc(t)));)t=Rn(t)}function uf(n,t){if(Er(n))throw new M(911,!1);n[vn]===null&&(n[vn]=[]),n[vn].push(t)}function uv(n,t){if(n[vn]===null)return;let e=n[vn].indexOf(t);e!==-1&&n[vn].splice(e,1)}function Rn(n){let t=n[Pe];return Lt(t)?t[Pe]:t}function df(n){return n[bi]??=[]}function ff(n){return n.cleanup??=[]}function dv(n,t,e,r){let i=df(t);i.push(e),n.firstCreatePass&&ff(n).push(r,i.length-1)}var X={lFrame:Dv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Pd=!1;function fv(){return X.lFrame.elementDepthCount}function hv(){X.lFrame.elementDepthCount++}function hf(){X.lFrame.elementDepthCount--}function pv(){return X.bindingsEnabled}function gv(){return X.skipHydrationRootTNode!==null}function pf(n){return X.skipHydrationRootTNode===n}function gf(){X.skipHydrationRootTNode=null}function ee(){return X.lFrame.lView}function ze(){return X.lFrame.tView}function B(n){return X.lFrame.contextLView=n,n[Me]}function H(n){return X.lFrame.contextLView=null,n}function Ge(){let n=mf();for(;n!==null&&n.type===64;)n=n.parent;return n}function mf(){return X.lFrame.currentTNode}function mv(){let n=X.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function Di(n,t){let e=X.lFrame;e.currentTNode=n,e.isParent=t}function vf(){return X.lFrame.isParent}function vv(){X.lFrame.isParent=!1}function yf(){return Pd}function No(n){let t=Pd;return Pd=n,t}function yv(n){return X.lFrame.bindingIndex=n}function Si(){return X.lFrame.bindingIndex++}function _f(n){let t=X.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function _v(){return X.lFrame.inI18n}function bv(n,t){let e=X.lFrame;e.bindingIndex=e.bindingRootIndex=n,hc(t)}function wv(){return X.lFrame.currentDirectiveIndex}function hc(n){X.lFrame.currentDirectiveIndex=n}function Cv(n){let t=X.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function bf(){return X.lFrame.currentQueryIndex}function pc(n){X.lFrame.currentQueryIndex=n}function IE(n){let t=n[j];return t.type===2?t.declTNode:t.type===1?n[It]:null}function wf(n,t,e){if(e&4){let i=t,o=n;for(;i=i.parent,i===null&&!(e&1);)if(i=IE(o),i===null||(o=o[_r],i.type&10))break;if(i===null)return!1;t=i,n=o}let r=X.lFrame=Ev();return r.currentTNode=t,r.lView=n,!0}function gc(n){let t=Ev(),e=n[j];X.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Ev(){let n=X.lFrame,t=n===null?null:n.child;return t===null?Dv(n):t}function Dv(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function Sv(){let n=X.lFrame;return X.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Cf=Sv;function mc(){let n=Sv();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Iv(n){return(X.lFrame.contextLView=lv(n,X.lFrame.contextLView))[Me]}function wn(){return X.lFrame.selectedIndex}function jn(n){X.lFrame.selectedIndex=n}function Ef(){let n=X.lFrame;return zo(n.tView,n.selectedIndex)}function xv(){return X.lFrame.currentNamespace}var Mv=!0;function vc(){return Mv}function yc(n){Mv=n}function kd(n,t=null,e=null,r){let i=Df(n,t,e,r);return i.resolveInjectorInitializers(),i}function Df(n,t=null,e=null,r,i=new Set){let o=[e||ot,Xm(n)];return r=r||(typeof n=="object"?void 0:yn(n)),new pr(o,t||$o(),r||null,i)}var st=class n{static THROW_IF_NOT_FOUND=ur;static NULL=new Ro;static create(t,e){if(Array.isArray(t))return kd({name:""},e,t,"");{let r=t.name??"";return kd({name:r},t.parent,t.providers,r)}}static \u0275prov=R({token:n,providedIn:"any",factory:()=>L(Yd)});static __NG_ELEMENT_ID__=-1},ke=new P(""),lt=(()=>{class n{static __NG_ELEMENT_ID__=xE;static __NG_ENV_ID__=e=>e}return n})(),Ja=class extends lt{_lView;constructor(t){super(),this._lView=t}get destroyed(){return Er(this._lView)}onDestroy(t){let e=this._lView;return uf(e,t),()=>uv(e,t)}};function xE(){return new Ja(ee())}var Tv=!1,Vn=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ne(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new K(e=>{e.next(!1),e.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=R({token:n,providedIn:"root",factory:()=>new n})}return n})(),Fd=class extends _e{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,rv()&&(this.destroyRef=b(lt,{optional:!0})??void 0,this.pendingTasks=b(Vn,{optional:!0})??void 0)}emit(t){let e=F(null);try{super.next(t)}finally{F(e)}}subscribe(t,e,r){let i=t,o=e||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof Re&&t.add(a),a}wrapInTimeout(t){return e=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(e)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},he=Fd;function Xa(...n){}function Sf(n){let t,e;function r(){n=Xa;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),r()})),()=>r()}function If(n){return queueMicrotask(()=>n()),()=>{n=Xa}}var xf="isAngularZone",Po=xf+"_ID",ME=0,at=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new he(!1);onMicrotaskEmpty=new he(!1);onStable=new he(!1);onError=new he(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Tv}=t;if(typeof Zone>"u")throw new M(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,AE(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(xf)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new M(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new M(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,TE,Xa,Xa);try{return o.runTask(s,e,r)}finally{o.cancelTask(s)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}},TE={};function Mf(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function OE(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){Sf(()=>{n.callbackScheduled=!1,Ld(n),n.isCheckStableRunning=!0,Mf(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),Ld(n)}function AE(n){let t=()=>{OE(n)},e=ME++;n._inner=n._inner.fork({name:"angular",properties:{[xf]:!0,[Po]:e,[Po+e]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(RE(c))return r.invokeTask(o,s,a,c);try{return $m(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),Bm(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return $m(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!NE(c)&&t(),Bm(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Ld(n),Mf(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Ld(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function $m(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Bm(n){n._nesting--,Mf(n)}var ko=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new he;onMicrotaskEmpty=new he;onStable=new he;onError=new he;run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,i){return t.apply(e,r)}};function RE(n){return Ov(n,"__ignore_ng_zone__")}function NE(n){return Ov(n,"__scheduler_tick__")}function Ov(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var _n=class{_console=console;handleError(t){this._console.error("ERROR",t)}},Vt=new P("",{factory:()=>{let n=b(at),t=b(Ve),e;return r=>{n.runOutsideAngular(()=>{t.destroyed&&!e?setTimeout(()=>{throw r}):(e??=t.get(_n),e.handleError(r))})}}}),Av={provide:yr,useValue:()=>{let n=b(_n,{optional:!0})},multi:!0},PE=new P("",{factory:()=>{let n=b(ke).defaultView;if(!n)return;let t=b(Vt),e=o=>{t(o.reason),o.preventDefault()},r=o=>{o.error?t(o.error):t(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",e),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),b(lt).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",e)})}});function Tf(){return Xt([Jm(()=>void b(PE))])}function N(n,t){let[e,r,i]=nd(n,t?.equal),o=e,s=o[ft];return o.set=r,o.update=i,o.asReadonly=Rv.bind(o),o}function Rv(){let n=this[ft];if(n.readonlyFn===void 0){let t=()=>this();t[ft]=n,n.readonlyFn=t}return n.readonlyFn}var _c=(()=>{class n{view;node;constructor(e,r){this.view=e,this.node=r}static __NG_ELEMENT_ID__=kE}return n})();function kE(){return new _c(ee(),Ge())}var gr=class{},qo=new P("",{factory:()=>!0});var Of=new P("");var bc=(()=>{class n{static \u0275prov=R({token:n,providedIn:"root",factory:()=>new jd})}return n})(),jd=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let e=t.zone,r=this.queues.get(e);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let r=this.queues.get(e);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[e,r]of this.queues)e===null?t||=this.flushQueue(r):t||=e.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let e=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,e=!0,r.run());return e}},ec=class{[ft];constructor(t){this[ft]=t}destroy(){this[ft].destroy()}};function Qe(n,t){let e=t?.injector??b(st),r=t?.manualCleanup!==!0?e.get(lt):null,i,o=e.get(_c,null,{optional:!0}),s=e.get(gr);return o!==null?(i=jE(o.view,s,n),r instanceof Ja&&r._lView===o.view&&(r=null)):i=VE(n,e.get(bc),s),i.injector=e,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new ec(i)}var Nv=Y(D({},id),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=No(!1);try{od(this)}finally{No(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=F(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],F(n)}}}),FE=Y(D({},Nv),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(nr(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),LE=Y(D({},Nv),{consumerMarkedDirty(){this.view[G]|=8192,Ei(this.view),this.notifier.notify(13)},destroy(){if(nr(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[An]?.delete(this)}});function jE(n,t,e){let r=Object.create(LE);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=t,r.fn=Pv(r,e),n[An]??=new Set,n[An].add(r),r.consumerMarkedDirty(r),r}function VE(n,t,e){let r=Object.create(FE);return r.fn=Pv(r,n),r.scheduler=t,r.notifier=e,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function Pv(n,t){return()=>{t(e=>(n.cleanupFns??=[]).push(e))}}function Fe(n){return rd(n)}function ts(n){return{toString:n}.toString()}function KE(n){return typeof n=="function"}function uy(n,t,e,r){t!==null?t.applyValueToInputSignal(t,r):n[e]=r}var Mc=class{previousValue;currentValue;firstChange;constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}},_t=(()=>{let n=()=>dy;return n.ngInherit=!0,n})();function dy(n){return n.type.prototype.ngOnChanges&&(n.setInput=ZE),YE}function YE(){let n=hy(this),t=n?.current;if(t){let e=n.previous;if(e===Nn)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function ZE(n,t,e,r,i){let o=this.declaredInputs[r],s=hy(n)||QE(n,{previous:Nn,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Mc(l&&l.currentValue,e,c===Nn),uy(n,t,i,e)}var fy="__ngSimpleChanges__";function hy(n){return n[fy]||null}function QE(n,t){return n[fy]=t}var kv=[];var de=function(n,t=null,e){for(let r=0;r<kv.length;r++){let i=kv[r];i(n,t,e)}},ie=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(ie||{});function JE(n,t,e){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=dy(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}i&&(e.preOrderHooks??=[]).push(0-n,i),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}function XE(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){let o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-e,s),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),c&&(n.viewHooks??=[]).push(-e,c),l&&((n.viewHooks??=[]).push(e,l),(n.viewCheckHooks??=[]).push(e,l)),u!=null&&(n.destroyHooks??=[]).push(e,u)}}function Ec(n,t,e){py(n,t,3,e)}function Dc(n,t,e,r){(n[G]&3)===e&&py(n,t,e,r)}function Af(n,t){let e=n[G];(e&3)===t&&(e&=16383,e+=1,n[G]=e)}function py(n,t,e,r){let i=r!==void 0?n[br]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(n[br]+=65536),(a<o||o==-1)&&(eD(n,e,t,c),n[br]=(n[br]&4294901760)+c+2),c++}function Fv(n,t){de(ie.LifecycleHookStart,n,t);let e=F(null);try{t.call(n)}finally{F(e),de(ie.LifecycleHookEnd,n,t)}}function eD(n,t,e,r){let i=e[r]<0,o=e[r+1],s=i?-e[r]:e[r],a=n[s];i?n[G]>>14<n[br]>>16&&(n[G]&3)===t&&(n[G]+=16384,Fv(a,o)):Fv(a,o)}var xi=-1,Sr=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,r,i){this.factory=t,this.name=i,this.canSeeViewProviders=e,this.injectImpl=r}};function tD(n){return(n.flags&8)!==0}function nD(n){return(n.flags&16)!==0}function rD(n,t,e){let r=0;for(;r<e.length;){let i=e[r];if(typeof i=="number"){if(i!==0)break;r++;let o=e[r++],s=e[r++],a=e[r++];n.setAttribute(t,s,a,o)}else{let o=i,s=e[++r];iD(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),r++}}return r}function gy(n){return n===3||n===4||n===6}function iD(n){return n.charCodeAt(0)===64}function Mi(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?e=i:e===0||(e===-1||e===2?Lv(n,e,i,null,t[++r]):Lv(n,e,i,null,null))}}return n}function Lv(n,t,e,r,i){let o=0,s=n.length;if(t===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===e){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),i!==null&&n.splice(o++,0,i)}function my(n){return n!==xi}function Tc(n){return n&32767}function oD(n){return n>>16}function Oc(n,t){let e=oD(n),r=t;for(;e>0;)r=r[_r],e--;return r}var $f=!0;function jv(n){let t=$f;return $f=n,t}var sD=256,vy=sD-1,yy=5,aD=0,sn={};function cD(n,t,e){let r;typeof e=="string"?r=e.charCodeAt(0)||0:e.hasOwnProperty(vr)&&(r=e[vr]),r==null&&(r=e[vr]=aD++);let i=r&vy,o=1<<i;t.data[n+(i>>yy)]|=o}function Ac(n,t){let e=_y(n,t);if(e!==-1)return e;let r=t[j];r.firstCreatePass&&(n.injectorIndex=t.length,Rf(r.data,n),Rf(t,null),Rf(r.blueprint,null));let i=gh(n,t),o=n.injectorIndex;if(my(i)){let s=Tc(i),a=Oc(i,t),c=a[j].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=i,o}function Rf(n,t){n.push(0,0,0,0,0,0,0,0,t)}function _y(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function gh(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,r=null,i=t;for(;i!==null;){if(r=Dy(i),r===null)return xi;if(e++,i=i[_r],r.injectorIndex!==-1)return r.injectorIndex|e<<16}return xi}function Bf(n,t,e){cD(n,t,e)}function lD(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let r=e.length,i=0;for(;i<r;){let o=e[i];if(gy(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof e[i]=="string";)i++;else{if(o===t)return e[i+1];i=i+2}}}return null}function by(n,t,e){if(e&8||n!==void 0)return n;ic(t,"NodeInjector")}function wy(n,t,e,r){if(e&8&&r===void 0&&(r=null),(e&3)===0){let i=n[bn],o=mt(void 0);try{return i?i.get(t,r,e&8):Wd(t,r,e&8)}finally{mt(o)}}return by(r,t,e)}function Cy(n,t,e,r=0,i){if(n!==null){if(t[G]&2048&&!(r&2)){let s=hD(n,t,e,r,sn);if(s!==sn)return s}let o=Ey(n,t,e,r,sn);if(o!==sn)return o}return wy(t,e,r,i)}function Ey(n,t,e,r,i){let o=dD(e);if(typeof o=="function"){if(!wf(t,n,r))return r&1?by(i,e,r):wy(t,e,r,i);try{let s;if(s=o(r),s==null&&!(r&8))ic(e);else return s}finally{Cf()}}else if(typeof o=="number"){let s=null,a=_y(n,t),c=xi,l=r&1?t[vt][It]:null;for((a===-1||r&4)&&(c=a===-1?gh(n,t):t[a+8],c===xi||!Uv(r,!1)?a=-1:(s=t[j],a=Tc(c),t=Oc(c,t)));a!==-1;){let u=t[j];if(Vv(o,a,u.data)){let d=uD(a,t,e,s,r,l);if(d!==sn)return d}c=t[a+8],c!==xi&&Uv(r,t[j].data[a+8]===l)&&Vv(o,a,t)?(s=u,a=Tc(c),t=Oc(c,t)):a=-1}}return i}function uD(n,t,e,r,i,o){let s=t[j],a=s.data[n+8],c=r==null?Ln(a)&&$f:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=Sc(a,s,e,c,l);return u!==null?Yo(t,s,u,a,i):sn}function Sc(n,t,e,r,i){let o=n.providerIndexes,s=t.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,u=o>>20,d=r?a:a+u,h=i?a+u:l;for(let f=d;f<h;f++){let p=s[f];if(f<c&&e===p||f>=c&&p.type===e)return f}if(i){let f=s[c];if(f&&rn(f)&&f.type===e)return c}return null}function Yo(n,t,e,r,i){let o=n[e],s=t.data;if(o instanceof Sr){let a=o;if(a.resolving){let f=zm(s[e]);throw qd(f)}let c=jv(a.canSeeViewProviders);a.resolving=!0;let l=s[e].type||s[e],u,d=a.injectImpl?mt(a.injectImpl):null,h=wf(n,r,0);try{o=n[e]=a.factory(void 0,i,s,n,r),t.firstCreatePass&&e>=r.directiveStart&&JE(e,s[e],t)}finally{d!==null&&mt(d),jv(c),a.resolving=!1,Cf()}}return o}function dD(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(vr)?n[vr]:void 0;return typeof t=="number"?t>=0?t&vy:fD:t}function Vv(n,t,e){let r=1<<n;return!!(e[t+(n>>yy)]&r)}function Uv(n,t){return!(n&2)&&!(n&1&&t)}var Dr=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return Cy(this._tNode,this._lView,t,dr(r),e)}};function fD(){return new Dr(Ge(),ee())}function Ht(n){return ts(()=>{let t=n.prototype.constructor,e=t[Ao]||Hf(t),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Ao]||Hf(i);if(o&&o!==e)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Hf(n){return Vd(n)?()=>{let t=Hf(Be(n));return t&&t()}:fr(n)}function hD(n,t,e,r,i){let o=n,s=t;for(;o!==null&&s!==null&&s[G]&2048&&!Ci(s);){let a=Ey(o,s,e,r|2,sn);if(a!==sn)return a;let c=o.parent;if(!c){let l=s[rf];if(l){let u=l.get(e,sn,r);if(u!==sn)return u}c=Dy(s),s=s[_r]}o=c}return i}function Dy(n){let t=n[j],e=t.type;return e===2?t.declTNode:e===1?n[It]:null}function ns(n){return lD(Ge(),n)}function pD(){return Pi(Ge(),ee())}function Pi(n,t){return new bt(jt(n,t))}var bt=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=pD}return n})();function gD(n){return n instanceof bt?n.nativeElement:n}function mD(){return this._results[Symbol.iterator]()}var Rc=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new _e}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let r=Ym(t);(this._changesDetected=!Km(this._results,r,e))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=mD};function Sy(n){return(n.flags&128)===128}var mh=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(mh||{}),Iy=new Map,vD=0;function yD(){return vD++}function _D(n){Iy.set(n[Bo],n)}function zf(n){Iy.delete(n[Bo])}var $v="__ngContext__";function Ti(n,t){nn(t)?(n[$v]=t[Bo],_D(t)):n[$v]=t}function xy(n){return Ty(n[wi])}function My(n){return Ty(n[St])}function Ty(n){for(;n!==null&&!Lt(n);)n=n[St];return n}var bD;function vh(n){bD=n}var Gc=new P("",{factory:()=>wD}),wD="ng";var qc=new P(""),rs=new P("",{providedIn:"platform",factory:()=>"unknown"});var Wc=new P("",{factory:()=>b(ke).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Oy="r";var Ay="di";var Ry=!1,Ny=new P("",{factory:()=>Ry});var CD=(n,t,e,r)=>{};function ED(n,t,e,r){CD(n,t,e,r)}function yh(n){return(n.flags&32)===32}var DD=()=>null;function Py(n,t,e=!1){return DD(n,t,e)}function ky(n,t){let e=n.contentQueries;if(e!==null){let r=F(null);try{for(let i=0;i<e.length;i+=2){let o=e[i],s=e[i+1];if(s!==-1){let a=n.data[s];pc(o),a.contentQueries(2,t[s],s)}}}finally{F(r)}}}function Gf(n,t,e){pc(0);let r=F(null);try{t(n,e)}finally{F(r)}}function Fy(n,t,e){if(sf(t)){let r=F(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=e[s];a.contentQueries(1,c,s)}}}finally{F(r)}}}var Bt=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Bt||{});var wc;function SD(){if(wc===void 0&&(wc=null,Fo.trustedTypes))try{wc=Fo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return wc}function Bv(n){return SD()?.createScriptURL(n)||n}var Nc=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${tc})`}};function is(n){return n instanceof Nc?n.changingThisBreaksApplicationSecurity:n}function _h(n,t){let e=Ly(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${tc})`)}return e===t}function Ly(n){return n instanceof Nc&&n.getTypeName()||null}var ID=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function jy(n){return n=String(n),n.match(ID)?n:"unsafe:"+n}function xD(n,t){return n.createText(t)}function MD(n,t,e){n.setValue(t,e)}function Vy(n,t,e){return n.createElement(t,e)}function Pc(n,t,e,r,i){n.insertBefore(t,e,r,i)}function Uy(n,t,e){n.appendChild(t,e)}function Hv(n,t,e,r,i){r!==null?Pc(n,t,e,r,i):Uy(n,t,e)}function $y(n,t,e,r){n.removeChild(null,t,e,r)}function TD(n,t,e){n.setAttribute(t,"style",e)}function OD(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function By(n,t,e){let{mergedAttrs:r,classes:i,styles:o}=e;r!==null&&rD(n,t,r),i!==null&&OD(n,t,i),o!==null&&TD(n,t,o)}var Kc=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Kc||{});function Hy(n){let t=Gy();return t?t.sanitize(Kc.URL,n)||"":_h(n,"URL")?is(n):jy(jo(n))}function zy(n){let t=Gy();if(t)return Bv(t.sanitize(Kc.RESOURCE_URL,n)||"");if(_h(n,"ResourceURL"))return Bv(is(n));throw new M(904,!1)}function AD(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?zy:Hy}function bh(n,t,e){return AD(t,e)(n)}function Gy(){let n=ee();return n&&n[en].sanitizer}function qy(n){return n instanceof Function?n():n}function RD(n,t,e){let r=n.length;for(;;){let i=n.indexOf(t,e);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}e=i+1}}var Wy="ng-template";function ND(n,t,e,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&RD(t[i+1].toLowerCase(),e,0)!==-1)return!0}else if(wh(n))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===e)return!0}return!1}function wh(n){return n.type===4&&n.value!==Wy}function PD(n,t,e){let r=n.type===4&&!e?Wy:n.value;return t===r}function kD(n,t,e){let r=4,i=n.attrs,o=i!==null?jD(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!Ut(r)&&!Ut(c))return!1;if(s&&Ut(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!PD(n,c,e)||c===""&&t.length===1){if(Ut(r))return!1;s=!0}}else if(r&8){if(i===null||!ND(n,i,c,e)){if(Ut(r))return!1;s=!0}}else{let l=t[++a],u=FD(c,i,wh(n),e);if(u===-1){if(Ut(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Ut(r))return!1;s=!0}}}}return Ut(r)||s}function Ut(n){return(n&1)===0}function FD(n,t,e,r){if(t===null)return-1;let i=0;if(r||!e){let o=!1;for(;i<t.length;){let s=t[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return VD(t,n)}function LD(n,t,e=!1){for(let r=0;r<t.length;r++)if(kD(n,t[r],e))return!0;return!1}function jD(n){for(let t=0;t<n.length;t++){let e=n[t];if(gy(e))return t}return n.length}function VD(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let r=n[e];if(typeof r=="number")return-1;if(r===t)return e;e++}return-1}function zv(n,t){return n?":not("+t.trim()+")":t}function UD(n){let t=n[0],e=1,r=2,i="",o=!1;for(;e<n.length;){let s=n[e];if(typeof s=="string")if(r&2){let a=n[++e];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Ut(s)&&(t+=zv(o,i),i=""),r=s,o=o||!Ut(r);e++}return i!==""&&(t+=zv(o,i)),t}function $D(n){return n.map(UD).join(",")}function BD(n){let t=[],e=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&t.push(o,n[++r]):i===8&&e.push(o);else{if(!Ut(i))break;i=o}r++}return e.length&&t.push(1,...e),t}var zt={};function Ch(n,t,e,r,i,o,s,a,c,l,u){let d=He+r,h=d+i,f=HD(d,h),p=typeof l=="function"?l():l;return f[j]={type:n,blueprint:f,template:e,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function HD(n,t){let e=[];for(let r=0;r<t;r++)e.push(r<n?null:zt);return e}function zD(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=Ch(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function Eh(n,t,e,r,i,o,s,a,c,l,u){let d=t.blueprint.slice();return d[Ft]=i,d[G]=r|4|128|8|64|1024,(l!==null||n&&n[G]&2048)&&(d[G]|=2048),cf(d),d[Pe]=d[_r]=n,d[Me]=e,d[en]=s||n&&n[en],d[we]=a||n&&n[we],d[bn]=c||n&&n[bn]||null,d[It]=o,d[Bo]=yD(),d[_i]=u,d[rf]=l,d[vt]=t.type==2?n[vt]:d,d}function GD(n,t,e){let r=jt(t,n),i=zD(e),o=n[en].rendererFactory,s=Dh(n,Eh(n,i,null,Ky(e),r,t,null,o.createRenderer(r,e),null,null,null));return n[t.index]=s}function Ky(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function Yy(n,t,e,r){if(e===0)return-1;let i=t.length;for(let o=0;o<e;o++)t.push(r),n.blueprint.push(r),n.data.push(null);return i}function Dh(n,t){return n[wi]?n[nf][St]=t:n[wi]=t,n[nf]=t,t}function _(n=1){Zy(ze(),ee(),wn()+n,!1)}function Zy(n,t,e,r){if(!r)if((t[G]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Ec(t,o,e)}else{let o=n.preOrderHooks;o!==null&&Dc(t,o,0,e)}jn(e)}var Yc=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Yc||{});function qf(n,t,e,r){let i=F(null);try{let[o,s,a]=n.inputs[e],c=null;(s&Yc.SignalBased)!==0&&(c=t[o][ft]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(t,r)),n.setInput!==null?n.setInput(t,c,r,e,o):uy(t,c,o,r)}finally{F(i)}}var Cn=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Cn||{}),qD;function Sh(n,t){return qD(n,t)}var Ir=new Set,Ih=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Ih||{}),os=new P(""),Gv=new Set;function Tr(n){Gv.has(n)||(Gv.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Qy=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=R({token:n,providedIn:"root",factory:()=>new n})}return n})();var Jy=new P("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:b(Ve)})});function Xy(n,t,e){let r=n.get(Jy);if(Array.isArray(t))for(let i of t)r.queue.add(i),e?.detachedLeaveAnimationFns?.push(i);else r.queue.add(t),e?.detachedLeaveAnimationFns?.push(t);r.scheduler&&r.scheduler(n)}function WD(n,t){let e=n.get(Jy);if(t.detachedLeaveAnimationFns){for(let r of t.detachedLeaveAnimationFns)e.queue.delete(r);t.detachedLeaveAnimationFns=void 0}}function KD(n,t){for(let[e,r]of t)Xy(n,r.animateFns)}function qv(n,t,e,r){let i=n?.[wr]?.enter;t!==null&&i&&i.has(e.index)&&KD(r,i)}function Ii(n,t,e,r,i,o,s,a){if(i!=null){let c,l=!1;Lt(i)?c=i:nn(i)&&(l=!0,i=i[Ft]);let u=xt(i);n===0&&r!==null?(qv(a,r,o,e),s==null?Uy(t,r,u):Pc(t,r,u,s||null,!0)):n===1&&r!==null?(qv(a,r,o,e),Pc(t,r,u,s||null,!0)):n===2?Wv(a,o,e,d=>{$y(t,u,l,d)}):n===3&&Wv(a,o,e,()=>{t.destroyNode(u)}),c!=null&&aS(t,n,e,c,o,r,s)}}function YD(n,t){e_(n,t),t[Ft]=null,t[It]=null}function ZD(n,t,e,r,i,o){r[Ft]=i,r[It]=t,Qc(n,r,e,1,i,o)}function e_(n,t){t[en].changeDetectionScheduler?.notify(9),Qc(n,t,t[we],2,null,null)}function QD(n){let t=n[wi];if(!t)return Nf(n[j],n);for(;t;){let e=null;if(nn(t))e=t[wi];else{let r=t[De];r&&(e=r)}if(!e){for(;t&&!t[St]&&t!==n;)nn(t)&&Nf(t[j],t),t=t[Pe];t===null&&(t=n),nn(t)&&Nf(t[j],t),e=t&&t[St]}t=e}}function xh(n,t){let e=n[Cr],r=e.indexOf(t);e.splice(r,1)}function Zc(n,t){if(Er(t))return;let e=t[we];e.destroyNode&&Qc(n,t,e,3,null,null),QD(t)}function Nf(n,t){if(Er(t))return;let e=F(null);try{t[G]&=-129,t[G]|=256,t[yt]&&nr(t[yt]),eS(n,t),XD(n,t),t[j].type===1&&t[we].destroy();let r=t[kn];if(r!==null&&Lt(t[Pe])){r!==t[Pe]&&xh(r,t);let i=t[tn];i!==null&&i.detachView(n)}zf(t)}finally{F(e)}}function Wv(n,t,e,r){let i=n?.[wr];if(i==null||i.leave==null||!i.leave.has(t.index))return r(!1);n&&Ir.add(n),Xy(e,()=>{if(i.leave&&i.leave.has(t.index)){let s=i.leave.get(t.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),JD(n,r)}else n&&Ir.delete(n),r(!1)},i)}function JD(n,t){let e=n[wr]?.running;if(e){e.then(()=>{n[wr].running=void 0,Ir.delete(n),t(!0)});return}t(!1)}function XD(n,t){let e=n.cleanup,r=t[bi];if(e!==null)for(let s=0;s<e.length-1;s+=2)if(typeof e[s]=="string"){let a=e[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[e[s+1]];e[s].call(a)}r!==null&&(t[bi]=null);let i=t[vn];if(i!==null){t[vn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[An];if(o!==null){t[An]=null;for(let s of o)s.destroy()}}function eS(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let r=0;r<e.length;r+=2){let i=t[e[r]];if(!(i instanceof Sr)){let o=e[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];de(ie.LifecycleHookStart,a,c);try{c.call(a)}finally{de(ie.LifecycleHookEnd,a,c)}}else{de(ie.LifecycleHookStart,i,o);try{o.call(i)}finally{de(ie.LifecycleHookEnd,i,o)}}}}}function tS(n,t,e){return nS(n,t.parent,e)}function nS(n,t,e){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return e[Ft];if(Ln(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Bt.None||i===Bt.Emulated)return null}return jt(r,e)}function rS(n,t,e){return oS(n,t,e)}function iS(n,t,e){return n.type&40?jt(n,e):null}var oS=iS,Kv;function Mh(n,t,e,r){let i=tS(n,r,t),o=t[we],s=r.parent||t[It],a=rS(s,r,t);if(i!=null)if(Array.isArray(e))for(let c=0;c<e.length;c++)Hv(o,i,e[c],a,!1);else Hv(o,i,e,a,!1);Kv!==void 0&&Kv(o,r,t,e,i)}function Wo(n,t){if(t!==null){let e=t.type;if(e&3)return jt(t,n);if(e&4)return Wf(-1,n[t.index]);if(e&8){let r=t.child;if(r!==null)return Wo(n,r);{let i=n[t.index];return Lt(i)?Wf(-1,i):xt(i)}}else{if(e&128)return Wo(n,t.next);if(e&32)return Sh(t,n)()||xt(n[t.index]);{let r=t_(n,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Rn(n[vt]);return Wo(i,r)}else return Wo(n,t.next)}}}return null}function t_(n,t){if(t!==null){let r=n[vt][It],i=t.projection;return r.projection[i]}return null}function Wf(n,t){let e=De+n+1;if(e<t.length){let r=t[e],i=r[j].firstChild;if(i!==null)return Wo(r,i)}return t[Fn]}function Th(n,t,e,r,i,o,s){for(;e!=null;){let a=r[bn];if(e.type===128){e=e.next;continue}let c=r[e.index],l=e.type;if(s&&t===0&&(c&&Ti(xt(c),r),e.flags|=2),!yh(e))if(l&8)Th(n,t,e.child,r,i,o,!1),Ii(t,n,a,i,c,e,o,r);else if(l&32){let u=Sh(e,r),d;for(;d=u();)Ii(t,n,a,i,d,e,o,r);Ii(t,n,a,i,c,e,o,r)}else l&16?sS(n,t,r,e,i,o):Ii(t,n,a,i,c,e,o,r);e=s?e.projectionNext:e.next}}function Qc(n,t,e,r,i,o){Th(e,r,n.firstChild,t,i,o,!1)}function sS(n,t,e,r,i,o){let s=e[vt],c=s[It].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Ii(t,n,e[bn],i,u,r,o,e)}else{let l=c,u=s[Pe];Sy(r)&&(l.flags|=128),Th(n,t,l,u,i,o,!0)}}function aS(n,t,e,r,i,o,s){let a=r[Fn],c=xt(r);a!==c&&Ii(t,n,e,o,a,i,s);for(let l=De;l<r.length;l++){let u=r[l];Qc(u[j],u,n,t,o,a)}}function cS(n,t,e,r,i){if(t)i?n.addClass(e,r):n.removeClass(e,r);else{let o=r.indexOf("-")===-1?void 0:Cn.DashCase;i==null?n.removeStyle(e,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Cn.Important),n.setStyle(e,r,i,o))}}function n_(n,t,e,r,i){let o=wn(),s=r&2;try{jn(-1),s&&t.length>He&&Zy(n,t,He,!1);let a=s?ie.TemplateUpdateStart:ie.TemplateCreateStart;de(a,i,e),e(r,i)}finally{jn(o);let a=s?ie.TemplateUpdateEnd:ie.TemplateCreateEnd;de(a,i,e)}}function r_(n,t,e){mS(n,t,e),(e.flags&64)===64&&vS(n,t,e)}function Oh(n,t,e=jt){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?e(t,n):n[s];n[i++]=a}}}function lS(n,t,e,r){let o=r.get(Ny,Ry)||e===Bt.ShadowDom||e===Bt.ExperimentalIsolatedShadowDom,s=n.selectRootElement(t,o);return uS(s),s}function uS(n){dS(n)}var dS=()=>null;function fS(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function hS(n,t,e,r,i,o){let s=t[j];if(Ah(n,s,t,e,r)){Ln(n)&&gS(t,n.index);return}n.type&3&&(e=fS(e)),pS(n,t,e,r,i,o)}function pS(n,t,e,r,i,o){if(n.type&3){let s=jt(n,t);r=o!=null?o(r,n.value||"",e):r,i.setProperty(s,e,r)}else n.type&12}function gS(n,t){let e=Mt(t,n);e[G]&16||(e[G]|=64)}function mS(n,t,e){let r=e.directiveStart,i=e.directiveEnd;Ln(e)&&GD(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||Ac(e,t);let o=e.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=Yo(t,n,s,e);if(Ti(c,t),o!==null&&CS(t,s-r,c,a,e,o),rn(a)){let l=Mt(e.index,t);l[Me]=Yo(t,n,s,e)}}}function vS(n,t,e){let r=e.directiveStart,i=e.directiveEnd,o=e.index,s=wv();try{jn(o);for(let a=r;a<i;a++){let c=n.data[a],l=t[a];hc(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&yS(c,l)}}finally{jn(-1),hc(s)}}function yS(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function _S(n,t){let e=n.directiveRegistry,r=null;if(e)for(let i=0;i<e.length;i++){let o=e[i];LD(t,o.selectors,!1)&&(r??=[],rn(o)?r.unshift(o):r.push(o))}return r}function bS(n,t,e,r,i,o){let s=jt(n,t);wS(t[we],s,o,n.value,e,r,i)}function wS(n,t,e,r,i,o,s){if(o==null)n.removeAttribute(t,i,e);else{let a=s==null?jo(o):s(o,r||"",i);n.setAttribute(t,i,a,e)}}function CS(n,t,e,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];qf(r,e,c,l)}}function i_(n,t,e,r,i){let o=He+e,s=t[j],a=i(s,t,n,r,e);t[o]=a,Di(n,!0);let c=n.type===2;return c?(By(t[we],a,n),(fv()===0||uc(n))&&Ti(a,t),hv()):Ti(a,t),vc()&&(!c||!yh(n))&&Mh(s,t,a,n),n}function o_(n){let t=n;return vf()?vv():(t=t.parent,Di(t,!1)),t}function ES(n,t){let e=n[bn];if(!e)return;let r;try{r=e.get(Vt,null)}catch{r=null}r?.(t)}function Ah(n,t,e,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],d=t.data[l];qf(d,e[l],u,i),a=!0}if(o)for(let c of o){let l=e[c],u=t.data[c];qf(u,l,r,i),a=!0}return a}function DS(n,t){let e=Mt(t,n),r=e[j];SS(r,e);let i=e[Ft];i!==null&&e[_i]===null&&(e[_i]=Py(i,e[bn])),de(ie.ComponentStart);try{Rh(r,e,e[Me])}finally{de(ie.ComponentEnd,e[Me])}}function SS(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function Rh(n,t,e){gc(t);try{let r=n.viewQuery;r!==null&&Gf(1,r,e);let i=n.template;i!==null&&n_(n,t,i,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[tn]?.finishViewCreation(n),n.staticContentQueries&&ky(n,t),n.staticViewQueries&&Gf(2,n.viewQuery,e);let o=n.components;o!==null&&IS(t,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[G]&=-5,mc()}}function IS(n,t){for(let e=0;e<t.length;e++)DS(n,t[e])}function Jc(n,t,e,r){let i=F(null);try{let o=t.tView,a=n[G]&4096?4096:16,c=Eh(n,o,e,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[t.index];c[kn]=l;let u=n[tn];return u!==null&&(c[tn]=u.createEmbeddedView(o)),Rh(o,c,e),c}finally{F(i)}}function Zo(n,t){return!t||t.firstChild===null||Sy(n)}function Qo(n,t,e,r,i=!1){for(;e!==null;){if(e.type===128){e=i?e.projectionNext:e.next;continue}let o=t[e.index];o!==null&&r.push(xt(o)),Lt(o)&&s_(o,r);let s=e.type;if(s&8)Qo(n,t,e.child,r);else if(s&32){let a=Sh(e,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=t_(t,e);if(Array.isArray(a))r.push(...a);else{let c=Rn(t[vt]);Qo(c[j],c,a,r,!0)}}e=i?e.projectionNext:e.next}return r}function s_(n,t){for(let e=De;e<n.length;e++){let r=n[e],i=r[j].firstChild;i!==null&&Qo(r[j],r,i,t)}n[Fn]!==n[Ft]&&t.push(n[Fn])}function a_(n){if(n[lc]!==null){for(let t of n[lc])t.impl.addSequence(t);n[lc].length=0}}var c_=[];function xS(n){return n[yt]??MS(n)}function MS(n){let t=c_.pop()??Object.create(OS);return t.lView=n,t}function TS(n){n.lView[yt]!==n&&(n.lView=null,c_.push(n))}var OS=Y(D({},ii),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Ei(n.lView)},consumerOnSignalRead(){this.lView[yt]=this}});function AS(n){let t=n[yt]??Object.create(RS);return t.lView=n,t}var RS=Y(D({},ii),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=Rn(n.lView);for(;t&&!l_(t[j]);)t=Rn(t);t&&lf(t)},consumerOnSignalRead(){this.lView[yt]=this}});function l_(n){return n.type!==2}function u_(n){if(n[An]===null)return;let t=!0;for(;t;){let e=!1;for(let r of n[An])r.dirty&&(e=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=e&&!!(n[G]&8192)}}var NS=100;function d_(n,t=0){let r=n[en].rendererFactory,i=!1;i||r.begin?.();try{PS(n,t)}finally{i||r.end?.()}}function PS(n,t){let e=yf();try{No(!0),Kf(n,t);let r=0;for(;Go(n);){if(r===NS)throw new M(103,!1);r++,Kf(n,1)}}finally{No(e)}}function kS(n,t,e,r){if(Er(t))return;let i=t[G],o=!1,s=!1;gc(t);let a=!0,c=null,l=null;o||(l_(n)?(l=xS(t),c=oi(l)):ha()===null?(a=!1,l=AS(t),c=oi(l)):t[yt]&&(nr(t[yt]),t[yt]=null));try{cf(t),yv(n.bindingStartIndex),e!==null&&n_(n,t,e,2,r);let u=(i&3)===3;if(!o)if(u){let f=n.preOrderCheckHooks;f!==null&&Ec(t,f,null)}else{let f=n.preOrderHooks;f!==null&&Dc(t,f,0,null),Af(t,0)}if(s||FS(t),u_(t),f_(t,0),n.contentQueries!==null&&ky(n,t),!o)if(u){let f=n.contentCheckHooks;f!==null&&Ec(t,f)}else{let f=n.contentHooks;f!==null&&Dc(t,f,1),Af(t,1)}jS(n,t);let d=n.components;d!==null&&p_(t,d,0);let h=n.viewQuery;if(h!==null&&Gf(2,h,r),!o)if(u){let f=n.viewCheckHooks;f!==null&&Ec(t,f)}else{let f=n.viewHooks;f!==null&&Dc(t,f,2),Af(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[cc]){for(let f of t[cc])f();t[cc]=null}o||(a_(t),t[G]&=-73)}catch(u){throw o||Ei(t),u}finally{l!==null&&(Do(l,c),a&&TS(l)),mc()}}function f_(n,t){for(let e=xy(n);e!==null;e=My(e))for(let r=De;r<e.length;r++){let i=e[r];h_(i,t)}}function FS(n){for(let t=xy(n);t!==null;t=My(t)){if(!(t[G]&2))continue;let e=t[Cr];for(let r=0;r<e.length;r++){let i=e[r];lf(i)}}}function LS(n,t,e){de(ie.ComponentStart);let r=Mt(t,n);try{h_(r,e)}finally{de(ie.ComponentEnd,r[Me])}}function h_(n,t){dc(n)&&Kf(n,t)}function Kf(n,t){let r=n[j],i=n[G],o=n[yt],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&So(o)),s||=!1,o&&(o.dirty=!1),n[G]&=-9217,s)kS(r,n,r.template,n[Me]);else if(i&8192){let a=F(null);try{u_(n),f_(n,1);let c=r.components;c!==null&&p_(n,c,1),a_(n)}finally{F(a)}}}function p_(n,t,e){for(let r=0;r<t.length;r++)LS(n,t[r],e)}function jS(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let r=0;r<e.length;r++){let i=e[r];if(i<0)jn(~i);else{let o=i,s=e[++r],a=e[++r];bv(s,o);let c=t[o];de(ie.HostBindingsUpdateStart,c);try{a(2,c)}finally{de(ie.HostBindingsUpdateEnd,c)}}}}finally{jn(-1)}}function Nh(n,t){let e=yf()?64:1088;for(n[en].changeDetectionScheduler?.notify(t);n;){n[G]|=e;let r=Rn(n);if(Ci(n)&&!r)return n;n=r}return null}function g_(n,t,e,r){return[n,!0,0,t,null,r,null,e,null,null]}function m_(n,t){let e=De+t;if(e<n.length)return n[e]}function Xc(n,t,e,r=!0){let i=t[j];if(VS(i,t,n,e),r){let s=Wf(e,n),a=t[we],c=a.parentNode(n[Fn]);c!==null&&ZD(i,n[It],a,t,c,s)}let o=t[_i];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function v_(n,t){let e=Jo(n,t);return e!==void 0&&Zc(e[j],e),e}function Jo(n,t){if(n.length<=De)return;let e=De+t,r=n[e];if(r){let i=r[kn];i!==null&&i!==n&&xh(i,r),t>0&&(n[e-1][St]=r[St]);let o=Vo(n,De+t);YD(r[j],r);let s=o[tn];s!==null&&s.detachView(o[j]),r[Pe]=null,r[St]=null,r[G]&=-129}return r}function VS(n,t,e,r){let i=De+r,o=e.length;r>0&&(e[i-1][St]=t),r<o-De?(t[St]=e[i],Kd(e,De+r,t)):(e.push(t),t[St]=null),t[Pe]=e;let s=t[kn];s!==null&&e!==s&&y_(s,t);let a=t[tn];a!==null&&a.insertView(n),fc(t),t[G]|=128}function y_(n,t){let e=n[Cr],r=t[Pe];if(nn(r))n[G]|=2;else{let i=r[Pe][vt];t[vt]!==i&&(n[G]|=2)}e===null?n[Cr]=[t]:e.push(t)}var Un=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,e=t[j];return Qo(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e}get context(){return this._lView[Me]}set context(t){this._lView[Me]=t}get destroyed(){return Er(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Pe];if(Lt(t)){let e=t[Ho],r=e?e.indexOf(this):-1;r>-1&&(Jo(t,r),Vo(e,r))}this._attachedToViewContainer=!1}Zc(this._lView[j],this._lView)}onDestroy(t){uf(this._lView,t)}markForCheck(){Nh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[G]&=-129}reattach(){fc(this._lView),this._lView[G]|=128}detectChanges(){this._lView[G]|=1024,d_(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new M(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Ci(this._lView),e=this._lView[kn];e!==null&&!t&&xh(e,this._lView),e_(this._lView[j],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new M(902,!1);this._appRef=t;let e=Ci(this._lView),r=this._lView[kn];r!==null&&!e&&y_(r,this._lView),fc(this._lView)}};var Oi=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=US;constructor(e,r,i){this._declarationLView=e,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,r){return this.createEmbeddedViewImpl(e,r)}createEmbeddedViewImpl(e,r,i){let o=Jc(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:r,dehydratedView:i});return new Un(o)}}return n})();function US(){return Ph(Ge(),ee())}function Ph(n,t){return n.type&4?new Oi(t,n,Pi(n,t)):null}function el(n,t,e,r,i){let o=n.data[t];if(o===null)o=$S(n,t,e,r,i),_v()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=r,o.attrs=i;let s=mv();o.injectorIndex=s===null?-1:s.injectorIndex}return Di(o,!0),o}function $S(n,t,e,r,i){let o=mf(),s=vf(),a=s?o:o&&o.parent,c=n.data[t]=HS(n,a,e,t,r,i);return BS(n,c,o,s),c}function BS(n,t,e,r){n.firstChild===null&&(n.firstChild=t),e!==null&&(r?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function HS(n,t,e,r,i,o){let s=t?t.injectorIndex:-1,a=0;return gv()&&(a|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function zS(n){let t=n[of]??[],r=n[Pe][we],i=[];for(let o of t)o.data[Ay]!==void 0?i.push(o):GS(o,r);n[of]=i}function GS(n,t){let e=0,r=n.firstChild;if(r){let i=n.data[Oy];for(;e<i;){let o=r.nextSibling;$y(t,r,!1),r=o,e++}}}var qS=()=>null,WS=()=>null;function Yf(n,t){return qS(n,t)}function __(n,t,e){return WS(n,t,e)}var b_=class{},tl=class{},Zf=class{resolveComponentFactory(t){throw new M(917,!1)}},ss=class{static NULL=new Zf},xr=class{},En=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>KS()}return n})();function KS(){let n=ee(),t=Ge(),e=Mt(t.index,n);return(nn(e)?e:n)[we]}var w_=(()=>{class n{static \u0275prov=R({token:n,providedIn:"root",factory:()=>null})}return n})();var Ic={},Qf=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){let i=this.injector.get(t,Ic,r);return i!==Ic||e===Ic?i:this.parentInjector.get(t,e,r)}};function kc(n,t,e){let r=e?n.styles:null,i=e?n.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=nc(i,a);else if(o==2){let c=a,l=t[++s];r=nc(r,c+": "+l+";")}}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=i:n.classesWithoutHost=i}function U(n,t=0){let e=ee();if(e===null)return L(n,t);let r=Ge();return Cy(r,e,Be(n),t)}function YS(n,t,e,r,i){let o=r===null?null:{"":-1},s=i(n,e);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}JS(n,t,e,a,o,c,l)}o!==null&&r!==null&&ZS(e,r,o)}function ZS(n,t,e){let r=n.localNames=[];for(let i=0;i<t.length;i+=2){let o=e[t[i+1]];if(o==null)throw new M(-301,!1);r.push(t[i],o)}}function QS(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function JS(n,t,e,r,i,o,s){let a=r.length,c=null;for(let h=0;h<a;h++){let f=r[h];c===null&&rn(f)&&(c=f,QS(n,e,h)),Bf(Ac(e,t),n,f.type)}iI(e,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let h=0;h<a;h++){let f=r[h];f.providersResolver&&f.providersResolver(f)}let l=!1,u=!1,d=Yy(n,t,a,null);a>0&&(e.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=r[h];if(e.mergedAttrs=Mi(e.mergedAttrs,f.hostAttrs),eI(n,e,t,d,f),rI(d,f,i),s!==null&&s.has(f)){let[m,C]=s.get(f);e.directiveToIndex.set(f.type,[d,m+e.directiveStart,C+e.directiveStart])}else(o===null||!o.has(f))&&e.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(e.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(e.flags|=64);let p=f.type.prototype;!l&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),l=!0),!u&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),u=!0),d++}XS(n,e,o)}function XS(n,t,e){for(let r=t.directiveStart;r<t.directiveEnd;r++){let i=n.data[r];if(e===null||!e.has(i))Yv(0,t,i,r),Yv(1,t,i,r),Qv(t,r,!1);else{let o=e.get(i);Zv(0,t,o,r),Zv(1,t,o,r),Qv(t,r,!0)}}}function Yv(n,t,e,r){let i=n===0?e.inputs:e.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(r),C_(t,o)}}function Zv(n,t,e,r){let i=n===0?e.inputs:e.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),C_(t,s)}}function C_(n,t){t==="class"?n.flags|=8:t==="style"&&(n.flags|=16)}function Qv(n,t,e){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!e&&i===null||e&&o===null||wh(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!e&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===t){s??=[],s.push(c,r[a+1]);break}}else if(e&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===t){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function eI(n,t,e,r,i){n.data[r]=i;let o=i.factory||(i.factory=fr(i.type,!0)),s=new Sr(o,rn(i),U,null);n.blueprint[r]=s,e[r]=s,tI(n,t,r,Yy(n,e,i.hostVars,zt),i)}function tI(n,t,e,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~t.index;nI(s)!=a&&s.push(a),s.push(e,r,o)}}function nI(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function rI(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;rn(t)&&(e[""]=n)}}function iI(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function E_(n,t,e,r,i,o,s,a){let c=t[j],l=c.consts,u=on(l,s),d=el(c,n,e,r,u);return o&&YS(c,t,d,on(l,a),i),d.mergedAttrs=Mi(d.mergedAttrs,d.attrs),d.attrs!==null&&kc(d,d.attrs,!1),d.mergedAttrs!==null&&kc(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function D_(n,t){XE(n,t),sf(t)&&n.queries.elementEnd(t)}function oI(n,t,e,r,i,o){let s=t.consts,a=on(s,i),c=el(t,n,e,r,a);if(c.mergedAttrs=Mi(c.mergedAttrs,c.attrs),o!=null){let l=on(s,o);c.localNames=[];for(let u=0;u<l.length;u+=2)c.localNames.push(l[u],-1)}return c.attrs!==null&&kc(c,c.attrs,!1),c.mergedAttrs!==null&&kc(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function Or(n,t,e){if(e===zt)return!1;let r=n[t];return Object.is(r,e)?!1:(n[t]=e,!0)}function xc(n,t,e){return function r(i){let o=Ln(n)?Mt(n.index,t):t;Nh(o,5);let s=t[Me],a=Jv(t,s,e,i),c=r.__ngNextListenerFn__;for(;c;)a=Jv(t,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function Jv(n,t,e,r){let i=F(null);try{return de(ie.OutputStart,t,e),e(r)!==!1}catch(o){return ES(n,o),!1}finally{de(ie.OutputEnd,t,e),F(i)}}function S_(n,t,e,r,i,o,s,a){let c=uc(n),l=!1,u=null;if(!r&&c&&(u=aI(t,e,o,n.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let d=jt(n,e),h=r?r(d):d;ED(e,h,o,a);let f=i.listen(h,o,a);if(!sI(o)){let p=r?m=>r(xt(m[n.index])):n.index;I_(p,t,e,o,a,f,!1)}}return l}function sI(n){return n.startsWith("animation")||n.startsWith("transition")}function aI(n,t,e,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===e&&i[o+1]===r){let a=t[bi],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function I_(n,t,e,r,i,o,s){let a=t.firstCreatePass?ff(t):null,c=df(e),l=c.length;c.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function Xv(n,t,e,r,i,o){let s=t[e],a=t[j],l=a.data[e].outputs[r],d=s[l].subscribe(o);I_(n.index,a,t,i,o,d,!0)}var Jf=Symbol("BINDING");var Fc=class extends ss{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=Pn(t);return new Ai(e,this.ngModule)}};function cI(n){return Object.keys(n).map(t=>{let[e,r,i]=n[t],o={propName:e,templateName:t,isSignal:(r&Yc.SignalBased)!==0};return i&&(o.transform=i),o})}function lI(n){return Object.keys(n).map(t=>({propName:n[t],templateName:t}))}function uI(n,t,e){let r=t instanceof Ve?t:t?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Qf(e,r):e}function dI(n){let t=n.get(xr,null);if(t===null)throw new M(407,!1);let e=n.get(w_,null),r=n.get(gr,null);return{rendererFactory:t,sanitizer:e,changeDetectionScheduler:r,ngReflect:!1}}function fI(n,t){let e=x_(n);return Vy(t,e,e==="svg"?ov:e==="math"?sv:null)}function x_(n){return(n.selectors[0][0]||"div").toLowerCase()}var Ai=class extends tl{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=cI(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=lI(this.componentDef.outputs),this.cachedOutputs}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=$D(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,r,i,o,s){de(ie.DynamicComponentStart);let a=F(null);try{let c=this.componentDef,l=hI(r,c,s,o),u=uI(c,i||this.ngModule,t),d=dI(u),h=d.rendererFactory.createRenderer(null,c),f=r?lS(h,r,c.encapsulation,u):fI(c,h),p=s?.some(ey)||o?.some(w=>typeof w!="function"&&w.bindings.some(ey)),m=Eh(null,l,null,512|Ky(c),null,null,d,h,u,null,Py(f,u,!0));m[He]=f,gc(m);let C=null;try{let w=E_(He,m,2,"#host",()=>l.directiveRegistry,!0,0);By(h,f,w),Ti(f,m),r_(l,m,w),Fy(l,w,m),D_(l,w),e!==void 0&&gI(w,this.ngContentSelectors,e),C=Mt(w.index,m),m[Me]=C[Me],Rh(l,m,null)}catch(w){throw C!==null&&zf(C),zf(m),w}finally{de(ie.DynamicComponentEnd),mc()}return new Lc(this.componentType,m,!!p)}finally{F(a)}}};function hI(n,t,e,r){let i=n?["ng-version","21.0.3"]:BD(t.selectors[0]),o=null,s=null,a=0;if(e)for(let u of e)a+=u[Jf].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let h of d.bindings){a+=h[Jf].requiredVars;let f=u+1;h.create&&(h.targetIdx=f,(o??=[]).push(h)),h.update&&(h.targetIdx=f,(s??=[]).push(h))}}let c=[t];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,h=Jd(d);c.push(h)}return Ch(0,null,pI(o,s),1,a,c,null,null,null,[i],null)}function pI(n,t){return!n&&!t?null:e=>{if(e&1&&n)for(let r of n)r.create();if(e&2&&t)for(let r of t)r.update()}}function ey(n){let t=n[Jf].kind;return t==="input"||t==="twoWay"}var Lc=class extends b_{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e,r){super(),this._rootLView=e,this._hasInputBindings=r,this._tNode=zo(e[j],He),this.location=Pi(this._tNode,e),this.instance=Mt(this._tNode.index,e)[Me],this.hostView=this.changeDetectorRef=new Un(e,void 0),this.componentType=t}setInput(t,e){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let i=this._rootLView,o=Ah(r,i[j],i,t,e);this.previousInputValues.set(t,e);let s=Mt(r.index,i);Nh(s,1)}get injector(){return new Dr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function gI(n,t,e){let r=n.projection=[];for(let i=0;i<t.length;i++){let o=e[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ar=(()=>{class n{static __NG_ELEMENT_ID__=mI}return n})();function mI(){let n=Ge();return T_(n,ee())}var vI=Ar,M_=class extends vI{_lContainer;_hostTNode;_hostLView;constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return Pi(this._hostTNode,this._hostLView)}get injector(){return new Dr(this._hostTNode,this._hostLView)}get parentInjector(){let t=gh(this._hostTNode,this._hostLView);if(my(t)){let e=Oc(t,this._hostLView),r=Tc(t),i=e[j].data[r+8];return new Dr(i,e)}else return new Dr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=ty(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-De}createEmbeddedView(t,e,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Yf(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,i,Zo(this._hostTNode,s)),a}createComponent(t,e,r,i,o,s,a){let c=t&&!KE(t),l;if(c)l=e;else{let C=e||{};l=C.index,r=C.injector,i=C.projectableNodes,o=C.environmentInjector||C.ngModuleRef,s=C.directives,a=C.bindings}let u=c?t:new Ai(Pn(t)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let w=(c?d:this.parentInjector).get(Ve,null);w&&(o=w)}let h=Pn(u.componentType??{}),f=Yf(this._lContainer,h?.id??null),p=f?.firstChild??null,m=u.create(d,i,p,o,s,a);return this.insertImpl(m.hostView,l,Zo(this._hostTNode,f)),m}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,r){let i=t._lView;if(cv(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[Pe],l=new M_(c,c[It],c[Pe]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return Xc(s,i,o,r),t.attachToViewContainerRef(),Kd(Pf(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=ty(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),r=Jo(this._lContainer,e);r&&(Vo(Pf(this._lContainer),e),Zc(r[j],r))}detach(t){let e=this._adjustIndex(t,-1),r=Jo(this._lContainer,e);return r&&Vo(Pf(this._lContainer),e)!=null?new Un(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function ty(n){return n[Ho]}function Pf(n){return n[Ho]||(n[Ho]=[])}function T_(n,t){let e,r=t[n.index];return Lt(r)?e=r:(e=g_(r,t,null,n),t[n.index]=e,Dh(t,e)),_I(e,t,n,r),new M_(e,n,t)}function yI(n,t){let e=n[we],r=e.createComment(""),i=jt(t,n),o=e.parentNode(i);return Pc(e,o,r,e.nextSibling(i),!1),r}var _I=CI,bI=()=>!1;function wI(n,t,e){return bI(n,t,e)}function CI(n,t,e,r){if(n[Fn])return;let i;e.type&8?i=xt(r):i=yI(t,e),n[Fn]=i}var Xf=class n{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},eh=class n{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let r=t.contentQueries!==null?t.contentQueries[0]:e.length,i=[];for(let o=0;o<r;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)kh(t,e).matches!==null&&this.queries[e].setDirty()}},th=class{flags;read;predicate;constructor(t,e,r=null){this.flags=e,this.read=r,typeof t=="string"?this.predicate=OI(t):this.predicate=t}},nh=class n{queries;constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){let i=e!==null?e.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,e!==null?e.push(o):e=[o])}return e!==null?new n(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},rh=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,e=-1){this.metadata=t,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==e;)r=r.parent;return e===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,e,EI(e,o)),this.matchTNodeWithReadOption(t,e,Sc(e,t,o,!1,!1))}else r===Oi?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Sc(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===bt||i===Ar||i===Oi&&e.type&4)this.addMatch(e.index,-2);else{let o=Sc(e,t,i,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,r)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function EI(n,t){let e=n.localNames;if(e!==null){for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1]}return null}function DI(n,t){return n.type&11?Pi(n,t):n.type&4?Ph(n,t):null}function SI(n,t,e,r){return e===-1?DI(t,n):e===-2?II(n,t,r):Yo(n,n[j],e,t)}function II(n,t,e){if(e===bt)return Pi(t,n);if(e===Oi)return Ph(t,n);if(e===Ar)return T_(t,n)}function O_(n,t,e,r){let i=t[tn].queries[r];if(i.matches===null){let o=n.data,s=e.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(SI(t,u,s[c+1],e.metadata.read))}}i.matches=a}return i.matches}function ih(n,t,e,r){let i=n.queries.getByIndex(e),o=i.matches;if(o!==null){let s=O_(n,t,i,e);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],u=t[-c];for(let d=De;d<u.length;d++){let h=u[d];h[kn]===h[Pe]&&ih(h[j],h,l,r)}if(u[Cr]!==null){let d=u[Cr];for(let h=0;h<d.length;h++){let f=d[h];ih(f[j],f,l,r)}}}}}return r}function xI(n,t){return n[tn].queries[t].queryList}function MI(n,t,e){let r=new Rc((e&4)===4);return dv(n,t,r,r.destroy),(t[tn]??=new eh).queries.push(new Xf(r))-1}function TI(n,t,e,r){let i=ze();if(i.firstCreatePass){let o=Ge();AI(i,new th(t,e,r),o.index),RI(i,n),(e&2)===2&&(i.staticContentQueries=!0)}return MI(i,ee(),e)}function OI(n){return n.split(",").map(t=>t.trim())}function AI(n,t,e){n.queries===null&&(n.queries=new nh),n.queries.track(new rh(t,e))}function RI(n,t){let e=n.contentQueries||(n.contentQueries=[]),r=e.length?e[e.length-1]:-1;t!==r&&e.push(n.queries.length-1,t)}function kh(n,t){return n.queries.getByIndex(t)}function NI(n,t){let e=n[j],r=kh(e,t);return r.crossesNgTemplate?ih(e,n,t,[]):O_(e,n,r,t)}var Ri=class{},nl=class{};var jc=class extends Ri{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Fc(this);constructor(t,e,r,i=!0){super(),this.ngModuleType=t,this._parent=e;let o=Qd(t);this._bootstrapComponents=qy(o.bootstrap),this._r3Injector=Df(t,e,[{provide:Ri,useValue:this},{provide:ss,useValue:this.componentFactoryResolver},...r],yn(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Vc=class extends nl{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new jc(this.moduleType,t,[])}};var Xo=class extends Ri{injector;componentFactoryResolver=new Fc(this);instance=null;constructor(t){super();let e=new pr([...t.providers,{provide:Ri,useValue:this},{provide:ss,useValue:this.componentFactoryResolver}],t.parent||$o(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function as(n,t,e=null){return new Xo({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var PI=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let r=Xd(!1,e.type),i=r.length>0?as([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,i)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=R({token:n,providedIn:"environment",factory:()=>new n(L(Ve))})}return n})();function Te(n){return ts(()=>{let t=A_(n),e=Y(D({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===mh.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(PI).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Bt.Emulated,styles:n.styles||ot,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&Tr("NgStandalone"),R_(e);let r=n.dependencies;return e.directiveDefs=ny(r,kI),e.pipeDefs=ny(r,Qm),e.id=jI(e),e})}function kI(n){return Pn(n)||Jd(n)}function Gt(n){return ts(()=>({type:n.type,bootstrap:n.bootstrap||ot,declarations:n.declarations||ot,imports:n.imports||ot,exports:n.exports||ot,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function FI(n,t){if(n==null)return Nn;let e={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Yc.None,c=null),e[o]=[r,a,c],t[o]=s}return e}function LI(n){if(n==null)return Nn;let t={};for(let e in n)n.hasOwnProperty(e)&&(t[n[e]]=e);return t}function Se(n){return ts(()=>{let t=A_(n);return R_(t),t})}function A_(n){let t={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputConfig:n.inputs||Nn,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||ot,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:FI(n.inputs,t),outputs:LI(n.outputs),debugInfo:null}}function R_(n){n.features?.forEach(t=>t(n))}function ny(n,t){return n?()=>{let e=typeof n=="function"?n():n,r=[];for(let i of e){let o=t(i);o!==null&&r.push(o)}return r}:null}function jI(n){let t=0,e=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function VI(n){return Object.getPrototypeOf(n.prototype).constructor}function wt(n){let t=VI(n.type),e=!0,r=[n];for(;t;){let i;if(rn(n))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new M(903,!1);i=t.\u0275dir}if(i){if(e){r.push(i);let s=n;s.inputs=kf(n.inputs),s.declaredInputs=kf(n.declaredInputs),s.outputs=kf(n.outputs);let a=i.hostBindings;a&&zI(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&BI(n,c),l&&HI(n,l),UI(n,i),Hm(n.outputs,i.outputs),rn(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===wt&&(e=!1)}}t=Object.getPrototypeOf(t)}$I(r)}function UI(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let r=t.inputs[e];r!==void 0&&(n.inputs[e]=r,n.declaredInputs[e]=t.declaredInputs[e])}}function $I(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Mi(i.hostAttrs,e=Mi(e,i.hostAttrs))}}function kf(n){return n===Nn?{}:n===ot?[]:n}function BI(n,t){let e=n.viewQuery;e?n.viewQuery=(r,i)=>{t(r,i),e(r,i)}:n.viewQuery=t}function HI(n,t){let e=n.contentQueries;e?n.contentQueries=(r,i,o)=>{t(r,i,o),e(r,i,o)}:n.contentQueries=t}function zI(n,t){let e=n.hostBindings;e?n.hostBindings=(r,i)=>{t(r,i),e(r,i)}:n.hostBindings=t}function GI(n,t,e,r,i,o,s,a){if(e.firstCreatePass){n.mergedAttrs=Mi(n.mergedAttrs,n.attrs);let u=n.tView=Ch(2,n,i,o,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,e.consts,null);e.queries!==null&&(e.queries.template(e,n),u.queries=e.queries.embeddedTView(n))}a&&(n.flags|=a),Di(n,!1);let c=qI(e,t,n,r);vc()&&Mh(e,t,c,n),Ti(c,t);let l=g_(c,t,c,n);t[r+He]=l,Dh(t,l),wI(l,n,t)}function Uc(n,t,e,r,i,o,s,a,c,l,u){let d=e+He,h;if(t.firstCreatePass){if(h=el(t,d,4,s||null,a||null),l!=null){let f=on(t.consts,l);h.localNames=[];for(let p=0;p<f.length;p+=2)h.localNames.push(f[p],-1)}}else h=t.data[d];return GI(h,n,t,e,r,i,o,c),l!=null&&Oh(n,h,u),h}var qI=WI;function WI(n,t,e,r){return yc(!0),t[we].createComment("")}var Fh=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Lh=new P("");function Rr(n){return!!n&&typeof n.then=="function"}function N_(n){return!!n&&typeof n.subscribe=="function"}var jh=new P("");function rl(n){return Xt([{provide:jh,multi:!0,useValue:n}])}var Vh=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,r)=>{this.resolve=e,this.reject=r});appInits=b(jh,{optional:!0})??[];injector=b(st);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let i of this.appInits){let o=ct(this.injector,i);if(Rr(o))e.push(o);else if(N_(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});e.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{r()}).catch(i=>{this.reject(i)}),e.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),il=new P("");function P_(){td(()=>{let n="";throw new M(600,n)})}function k_(n){return n.isBoundToModule}var KI=10;var an=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=b(Vt);afterRenderManager=b(Qy);zonelessEnabled=b(qo);rootEffectScheduler=b(bc);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new _e;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=b(Vn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(te(e=>!e))}constructor(){b(os,{optional:!0})}whenStable(){let e;return new Promise(r=>{e=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{e.unsubscribe()})}_injector=b(Ve);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,r){return this.bootstrapImpl(e,r)}bootstrapImpl(e,r,i=st.NULL){return this._injector.get(at).run(()=>{de(ie.BootstrapComponentStart);let s=e instanceof tl;if(!this._injector.get(Vh).done){let p="";throw new M(405,p)}let c;s?c=e:c=this._injector.get(ss).resolveComponentFactory(e),this.componentTypes.push(c.componentType);let l=k_(c)?void 0:this._injector.get(Ri),u=r||c.selector,d=c.create(i,[],u,l),h=d.location.nativeElement,f=d.injector.get(Lh,null);return f?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),Ko(this.components,d),f?.unregisterApplication(h)}),this._loadComponent(d),de(ie.BootstrapComponentEnd,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){de(ie.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ih.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw de(ie.ChangeDetectionEnd),new M(101,!1);let e=F(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,F(e),this.afterTick.next(),de(ie.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(xr,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<KI;){de(ie.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{de(ie.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let e=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Go(i))continue;let o=r&&!this.zonelessEnabled?0:1;d_(i,o),e=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}e||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>Go(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){let r=e;Ko(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(e),this._injector.get(il,[]).forEach(i=>i(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Ko(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new M(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ko(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Nr(n,t,e,r){let i=ee(),o=Si();if(Or(i,o,t)){let s=ze(),a=Ef();bS(a,i,n,t,e,r)}return Nr}var u2=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var oh=class{destroy(t){}updateValue(t,e){}swap(t,e){let r=Math.min(t,e),i=Math.max(t,e),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(t,e){this.attach(e,this.detach(t))}};function Ff(n,t,e,r,i){return n===e&&Object.is(t,r)?1:Object.is(i(n,t),i(e,r))?-1:0}function YI(n,t,e,r){let i,o,s=0,a=n.length-1,c=void 0;if(Array.isArray(t)){F(r);let l=t.length-1;for(F(null);s<=a&&s<=l;){let u=n.at(s),d=t[s],h=Ff(s,u,s,d,e);if(h!==0){h<0&&n.updateValue(s,d),s++;continue}let f=n.at(a),p=t[l],m=Ff(a,f,l,p,e);if(m!==0){m<0&&n.updateValue(a,p),a--,l--;continue}let C=e(s,u),w=e(a,f),z=e(s,d);if(Object.is(z,w)){let T=e(l,p);Object.is(T,C)?(n.swap(s,a),n.updateValue(a,p),l--,a--):n.move(a,s),n.updateValue(s,d),s++;continue}if(i??=new $c,o??=iy(n,s,a,e),sh(n,i,s,z))n.updateValue(s,d),s++,a++;else if(o.has(z))i.set(C,n.detach(s)),a--;else{let T=n.create(s,t[s]);n.attach(s,T),s++,a++}}for(;s<=l;)ry(n,i,e,s,t[s]),s++}else if(t!=null){F(r);let l=t[Symbol.iterator]();F(null);let u=l.next();for(;!u.done&&s<=a;){let d=n.at(s),h=u.value,f=Ff(s,d,s,h,e);if(f!==0)f<0&&n.updateValue(s,h),s++,u=l.next();else{i??=new $c,o??=iy(n,s,a,e);let p=e(s,h);if(sh(n,i,s,p))n.updateValue(s,h),s++,a++,u=l.next();else if(!o.has(p))n.attach(s,n.create(s,h)),s++,a++,u=l.next();else{let m=e(s,d);i.set(m,n.detach(s)),a--}}}for(;!u.done;)ry(n,i,e,n.length,u.value),u=l.next()}for(;s<=a;)n.destroy(n.detach(a--));i?.forEach(l=>{n.destroy(l)})}function sh(n,t,e,r){return t!==void 0&&t.has(r)?(n.attach(e,t.get(r)),t.delete(r),!0):!1}function ry(n,t,e,r,i){if(sh(n,t,r,e(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function iy(n,t,e,r){let i=new Set;for(let o=t;o<=e;o++)i.add(r(o,n.at(o)));return i}var $c=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let e=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(e)?(this.kvMap.set(t,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,e){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,e)}else this.kvMap.set(t,e)}forEach(t){for(let[e,r]of this.kvMap)if(t(r,e),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),t(r,e)}}};function Z(n,t,e,r,i,o,s,a){Tr("NgControlFlow");let c=ee(),l=ze(),u=on(l.consts,o);return Uc(c,l,n,t,e,r,i,u,256,s,a),Uh}function Uh(n,t,e,r,i,o,s,a){Tr("NgControlFlow");let c=ee(),l=ze(),u=on(l.consts,o);return Uc(c,l,n,t,e,r,i,u,512,s,a),Uh}function Q(n,t){Tr("NgControlFlow");let e=ee(),r=Si(),i=e[r]!==zt?e[r]:-1,o=i!==-1?Bc(e,He+i):void 0,s=0;if(Or(e,r,n)){let a=F(null);try{if(o!==void 0&&v_(o,s),n!==-1){let c=He+n,l=Bc(e,c),u=uh(e[j],c),d=__(l,u,e),h=Jc(e,u,t,{dehydratedView:d});Xc(l,h,s,Zo(u,d))}}finally{F(a)}}else if(o!==void 0){let a=m_(o,s);a!==void 0&&(a[Me]=t)}}var ah=class{lContainer;$implicit;$index;constructor(t,e,r){this.lContainer=t,this.$implicit=e,this.$index=r}get $count(){return this.lContainer.length-De}};var ch=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,e,r){this.hasEmptyBlock=t,this.trackByFn=e,this.liveCollection=r}};function cs(n,t,e,r,i,o,s,a,c,l,u,d,h){Tr("NgControlFlow");let f=ee(),p=ze(),m=c!==void 0,C=ee(),w=a?s.bind(C[vt][Me]):s,z=new ch(m,w);C[He+n]=z,Uc(f,p,n+1,t,e,r,i,on(p.consts,o),256),m&&Uc(f,p,n+2,c,l,u,d,on(p.consts,h),512)}var lh=class extends oh{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,e,r){super(),this.lContainer=t,this.hostLView=e,this.templateTNode=r}get length(){return this.lContainer.length-De}at(t){return this.getLView(t)[Me].$implicit}attach(t,e){let r=e[_i];this.needsIndexUpdate||=t!==this.length,Xc(this.lContainer,e,t,Zo(this.templateTNode,r)),ZI(this.lContainer,t)}detach(t){return this.needsIndexUpdate||=t!==this.length-1,QI(this.lContainer,t),JI(this.lContainer,t)}create(t,e){let r=Yf(this.lContainer,this.templateTNode.tView.ssrId),i=Jc(this.hostLView,this.templateTNode,new ah(this.lContainer,e,t),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(t){Zc(t[j],t),this.operationsCounter?.recordDestroy()}updateValue(t,e){this.getLView(t)[Me].$implicit=e}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[Me].$index=t}getLView(t){return XI(this.lContainer,t)}};function ls(n){let t=F(null),e=wn();try{let r=ee(),i=r[j],o=r[e],s=e+1,a=Bc(r,s);if(o.liveCollection===void 0){let l=uh(i,s);o.liveCollection=new lh(a,r,l)}else o.liveCollection.reset();let c=o.liveCollection;if(YI(c,n,o.trackByFn,t),c.updateIndexes(),o.hasEmptyBlock){let l=Si(),u=c.length===0;if(Or(r,l,u)){let d=e+2,h=Bc(r,d);if(u){let f=uh(i,d),p=__(h,f,r),m=Jc(r,f,void 0,{dehydratedView:p});Xc(h,m,0,Zo(f,p))}else i.firstUpdatePass&&zS(h),v_(h,0)}}}finally{F(t)}}function Bc(n,t){return n[t]}function ZI(n,t){if(n.length<=De)return;let e=De+t,r=n[e],i=r?r[wr]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[bn];WD(o,i),Ir.delete(r),i.detachedLeaveAnimationFns=void 0}}function QI(n,t){if(n.length<=De)return;let e=De+t,r=n[e],i=r?r[wr]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function JI(n,t){return Jo(n,t)}function XI(n,t){return m_(n,t)}function uh(n,t){return zo(n,t)}function ne(n,t,e){let r=ee(),i=Si();if(Or(r,i,t)){let o=ze(),s=Ef();hS(s,r,n,t,r[we],e)}return ne}function dh(n,t,e,r,i){Ah(t,n,e,i?"class":"style",r)}function g(n,t,e,r){let i=ee(),o=i[j],s=n+He,a=o.firstCreatePass?E_(s,i,2,t,_S,pv(),e,r):o.data[s];if(i_(a,i,n,t,F_),uc(a)){let c=i[j];r_(c,i,a),Fy(c,a,i)}return r!=null&&Oh(i,a),g}function y(){let n=ze(),t=Ge(),e=o_(t);return n.firstCreatePass&&D_(n,e),pf(e)&&gf(),hf(),e.classesWithoutHost!=null&&tD(e)&&dh(n,e,ee(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&nD(e)&&dh(n,e,ee(),e.stylesWithoutHost,!1),y}function E(n,t,e,r){return g(n,t,e,r),y(),E}function x(n,t,e,r){let i=ee(),o=i[j],s=n+He,a=o.firstCreatePass?oI(s,o,2,t,e,r):o.data[s];return i_(a,i,n,t,F_),r!=null&&Oh(i,a),x}function $(){let n=Ge(),t=o_(n);return pf(t)&&gf(),hf(),$}function pe(n,t,e,r){return x(n,t,e,r),$(),pe}var F_=(n,t,e,r,i)=>(yc(!0),Vy(t[we],r,xv()));function Ie(){return ee()}var us="en-US";var ex=us;function L_(n){typeof n=="string"&&(ex=n.toLowerCase().replace(/_/g,"-"))}function V(n,t,e){let r=ee(),i=ze(),o=Ge();return tx(i,r,r[we],o,n,t,e),V}function ki(n,t,e){let r=ee(),i=ze(),o=Ge();return(o.type&3||e)&&S_(o,i,r,e,r[we],n,t,xc(o,r,t)),ki}function tx(n,t,e,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=xc(r,t,o),S_(r,n,t,s,e,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let d=0;d<u.length;d+=2){let h=u[d],f=u[d+1];c??=xc(r,t,o),Xv(r,t,h,f,i,c)}if(l&&l.length)for(let d of l)c??=xc(r,t,o),Xv(r,t,d,i,i,c)}}function I(n=1){return Iv(n)}function $h(n,t,e,r){TI(n,t,e,r)}function Bh(n){let t=ee(),e=ze(),r=bf();pc(r+1);let i=kh(e,r);if(n.dirty&&av(t)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=NI(t,r);n.reset(o,gD),n.notifyOnChanges()}return!0}return!1}function Hh(){return xI(ee(),bf())}function Cc(n,t){return n<<17|t<<2}function Mr(n){return n>>17&32767}function nx(n){return(n&2)==2}function rx(n,t){return n&131071|t<<17}function fh(n){return n|2}function Ni(n){return(n&131068)>>2}function Lf(n,t){return n&-131069|t<<2}function ix(n){return(n&1)===1}function hh(n){return n|1}function ox(n,t,e,r,i,o){let s=o?t.classBindings:t.styleBindings,a=Mr(s),c=Ni(s);n[r]=e;let l=!1,u;if(Array.isArray(e)){let d=e;u=d[1],(u===null||yi(d,u)>0)&&(l=!0)}else u=e;if(i)if(c!==0){let h=Mr(n[a+1]);n[r+1]=Cc(h,a),h!==0&&(n[h+1]=Lf(n[h+1],r)),n[a+1]=rx(n[a+1],r)}else n[r+1]=Cc(a,0),a!==0&&(n[a+1]=Lf(n[a+1],r)),a=r;else n[r+1]=Cc(c,0),a===0?a=r:n[c+1]=Lf(n[c+1],r),c=r;l&&(n[r+1]=fh(n[r+1])),oy(n,u,r,!0),oy(n,u,r,!1),sx(t,u,n,r,o),s=Cc(a,c),o?t.classBindings=s:t.styleBindings=s}function sx(n,t,e,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof t=="string"&&yi(o,t)>=0&&(e[r+1]=hh(e[r+1]))}function oy(n,t,e,r){let i=n[e+1],o=t===null,s=r?Mr(i):Ni(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];ax(c,t)&&(a=!0,n[s+1]=r?hh(l):fh(l)),s=r?Mr(l):Ni(l)}a&&(n[e+1]=r?fh(i):hh(i))}function ax(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?yi(n,t)>=0:!1}var $t={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function cx(n){return n.substring($t.key,$t.keyEnd)}function lx(n){return ux(n),j_(n,V_(n,0,$t.textEnd))}function j_(n,t){let e=$t.textEnd;return e===t?-1:(t=$t.keyEnd=dx(n,$t.key=t,e),V_(n,t,e))}function ux(n){$t.key=0,$t.keyEnd=0,$t.value=0,$t.valueEnd=0,$t.textEnd=n.length}function V_(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function dx(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function oe(n,t){return hx(n,t,null,!0),oe}function zh(n){px(bx,fx,n,!0)}function fx(n,t){for(let e=lx(t);e>=0;e=j_(t,e))sc(n,cx(t),!0)}function hx(n,t,e,r){let i=ee(),o=ze(),s=_f(2);if(o.firstUpdatePass&&$_(o,n,s,r),t!==zt&&Or(i,s,t)){let a=o.data[wn()];B_(o,a,i,i[we],n,i[s+1]=Cx(t,e),r,s)}}function px(n,t,e,r){let i=ze(),o=_f(2);i.firstUpdatePass&&$_(i,null,o,r);let s=ee();if(e!==zt&&Or(s,o,e)){let a=i.data[wn()];if(H_(a,r)&&!U_(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(e=nc(c,e||"")),dh(i,a,s,e,r)}else wx(i,a,s,s[we],s[o+1],s[o+1]=_x(n,t,e),r,o)}}function U_(n,t){return t>=n.expandoStartIndex}function $_(n,t,e,r){let i=n.data;if(i[e+1]===null){let o=i[wn()],s=U_(n,e);H_(o,r)&&t===null&&!s&&(t=!1),t=gx(i,o,t,r),ox(i,o,t,e,s,r)}}function gx(n,t,e,r){let i=Cv(n),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(e=jf(null,n,t,e,r),e=es(e,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||n[s]!==i)if(e=jf(i,n,t,e,r),o===null){let c=mx(n,t,r);c!==void 0&&Array.isArray(c)&&(c=jf(null,n,t,c[1],r),c=es(c,t.attrs,r),vx(n,t,r,c))}else o=yx(n,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),e}function mx(n,t,e){let r=e?t.classBindings:t.styleBindings;if(Ni(r)!==0)return n[Mr(r)]}function vx(n,t,e,r){let i=e?t.classBindings:t.styleBindings;n[Mr(i)]=r}function yx(n,t,e){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=es(r,s,e)}return es(r,t.attrs,e)}function jf(n,t,e,r,i){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=t[a],r=es(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(e.directiveStylingLast=a),r}function es(n,t,e){let r=e?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),sc(n,s,e?!0:t[++o]))}return n===void 0?null:n}function _x(n,t,e){if(e==null||e==="")return ot;let r=[],i=is(e);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&t(r,i);return r}function bx(n,t,e){let r=String(t);r!==""&&!r.includes(" ")&&sc(n,r,e)}function wx(n,t,e,r,i,o,s,a){i===zt&&(i=ot);let c=0,l=0,u=0<i.length?i[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let h=c<i.length?i[c+1]:void 0,f=l<o.length?o[l+1]:void 0,p=null,m;u===d?(c+=2,l+=2,h!==f&&(p=d,m=f)):d===null||u!==null&&u<d?(c+=2,p=u):(l+=2,p=d,m=f),p!==null&&B_(n,t,e,r,p,m,s,a),u=c<i.length?i[c]:null,d=l<o.length?o[l]:null}}function B_(n,t,e,r,i,o,s,a){if(!(t.type&3))return;let c=n.data,l=c[a+1],u=ix(l)?sy(c,t,e,i,Ni(l),s):void 0;if(!Hc(u)){Hc(o)||nx(l)&&(o=sy(c,null,e,i,a,s));let d=af(wn(),e);cS(r,s,d,i,o)}}function sy(n,t,e,r,i,o){let s=t===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=e[i+1];h===zt&&(h=d?ot:void 0);let f=d?ac(h,r):u===r?h:void 0;if(l&&!Hc(f)&&(f=ac(c,r)),Hc(f)&&(a=f,s))return a;let p=n[i+1];i=s?Mr(p):Ni(p)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=ac(c,r))}return a}function Hc(n){return n!==void 0}function Cx(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=yn(is(n)))),n}function H_(n,t){return(n.flags&(t?8:16))!==0}function v(n,t=""){let e=ee(),r=ze(),i=n+He,o=r.firstCreatePass?el(r,i,1,t,null):r.data[i],s=Ex(r,e,o,t,n);e[i]=s,vc()&&Mh(r,e,s,o),Di(o,!1)}var Ex=(n,t,e,r,i)=>(yc(!0),xD(t[we],r));function Dx(n,t,e,r=""){return Or(n,Si(),e)?t+jo(e)+r:zt}function Oe(n){return re("",n),Oe}function re(n,t,e){let r=ee(),i=Dx(r,n,t,e);return i!==zt&&Sx(r,wn(),i),re}function Sx(n,t,e){let r=af(t,n);MD(n[we],r,e)}function ay(n,t,e){let r=ze();r.firstCreatePass&&z_(t,r.data,r.blueprint,rn(n),e)}function z_(n,t,e,r,i){if(n=Be(n),Array.isArray(n))for(let o=0;o<n.length;o++)z_(n[o],t,e,r,i);else{let o=ze(),s=ee(),a=Ge(),c=hr(n)?n:Be(n.provide),l=tf(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(hr(n)||!n.multi){let f=new Sr(l,i,U,null),p=Uf(c,t,i?u:u+h,d);p===-1?(Bf(Ac(a,s),o,c),Vf(o,n,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(f),s.push(f)):(e[p]=f,s[p]=f)}else{let f=Uf(c,t,u+h,d),p=Uf(c,t,u,u+h),m=f>=0&&e[f],C=p>=0&&e[p];if(i&&!C||!i&&!m){Bf(Ac(a,s),o,c);let w=Mx(i?xx:Ix,e.length,i,r,l,n);!i&&C&&(e[p].providerFactory=w),Vf(o,n,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(w),s.push(w)}else{let w=G_(e[i?p:f],l,!i&&r);Vf(o,n,f>-1?f:p,w)}!i&&r&&C&&e[p].componentProviders++}}}function Vf(n,t,e,r){let i=hr(t),o=nv(t);if(i||o){let c=(o?Be(t.useClass):t).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(e);u===-1?l.push(e,[r,c]):l[u+1].push(r,c)}else l.push(e,c)}}}function G_(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function Uf(n,t,e,r){for(let i=e;i<r;i++)if(t[i]===n)return i;return-1}function Ix(n,t,e,r,i){return ph(this.multi,[])}function xx(n,t,e,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Yo(r,r[j],this.providerFactory.index,i);s=c.slice(0,a),ph(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],ph(o,s);return s}function ph(n,t){for(let e=0;e<n.length;e++){let r=n[e];t.push(r())}return t}function Mx(n,t,e,r,i,o){let s=new Sr(n,e,U,null);return s.multi=[],s.index=t,s.componentProviders=0,G_(s,i,r&&!e),s}function $n(n,t){return e=>{e.providersResolver=(r,i)=>ay(r,i?i(n):n,!1),t&&(e.viewProvidersResolver=(r,i)=>ay(r,i?i(t):t,!0))}}var zc=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},Gh=(()=>{class n{compileModuleSync(e){return new Vc(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let r=this.compileModuleSync(e),i=Qd(e),o=qy(i.declarations).reduce((s,a)=>{let c=Pn(a);return c&&s.push(new Ai(c)),s},[]);return new zc(r,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var q_=(()=>{class n{applicationErrorHandler=b(Vt);appRef=b(an);taskService=b(Vn);ngZone=b(at);zonelessEnabled=b(qo);tracing=b(os,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Re;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Po):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(b(Of,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(e){if(!this.zonelessEnabled&&e===5)return;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?If:Sf;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Po+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(e),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,If(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function W_(){return[{provide:gr,useExisting:q_},{provide:at,useClass:ko},{provide:qo,useValue:!0}]}function Tx(){return typeof $localize<"u"&&$localize.locale||us}var qh=new P("",{factory:()=>b(qh,{optional:!0,skipSelf:!0})||Tx()});function qe(n,t){return pa(n,t?.equal)}var Z_=Symbol("InputSignalNode#UNSET"),Bx=Y(D({},ga),{transformFn:void 0,applyValueToInputSignal(n,t){Io(n,t)}});function Q_(n,t){let e=Object.create(Bx);e.value=n,e.transformFn=t?.transform;function r(){if(Eo(e),e.value===Z_){let i=null;throw new M(-950,i)}return e.value}return r[ft]=e,r}var sl=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>ns(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function K_(n,t){return Q_(n,t)}function Hx(n){return Q_(Z_,n)}var J_=(K_.required=Hx,K_);var Wh=new P(""),zx=new P("");function ds(n){return!n.moduleRef}function Gx(n){let t=ds(n)?n.r3Injector:n.moduleRef.injector,e=t.get(at);return e.run(()=>{ds(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=t.get(Vt),i;if(e.runOutsideAngular(()=>{i=e.onError.subscribe({next:r})}),ds(n)){let o=()=>t.destroy(),s=n.platformInjector.get(Wh);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Wh);s.add(o),n.moduleRef.onDestroy(()=>{Ko(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return Wx(r,e,()=>{let o=t.get(Vn),s=o.add(),a=t.get(Vh);return a.runInitializers(),a.donePromise.then(()=>{let c=t.get(qh,us);if(L_(c||us),!t.get(zx,!0))return ds(n)?t.get(an):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(ds(n)){let u=t.get(an);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return qx?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var qx;function Wx(n,t,e){try{let r=e();return Rr(r)?r.catch(i=>{throw t.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>n(r)),r}}var ol=null;function Kx(n=[],t){return st.create({name:t,providers:[{provide:Uo,useValue:"platform"},{provide:Wh,useValue:new Set([()=>ol=null])},...n]})}function Yx(n=[]){if(ol)return ol;let t=Kx(n);return ol=t,P_(),Zx(t),t}function Zx(n){let t=n.get(qc,null);ct(n,()=>{t?.forEach(e=>e())})}function X_(){return!1}var Fi=(()=>{class n{static __NG_ELEMENT_ID__=Qx}return n})();function Qx(n){return Jx(Ge(),ee(),(n&16)===16)}function Jx(n,t,e){if(Ln(n)&&!e){let r=Mt(n.index,t);return new Un(r,r)}else if(n.type&175){let r=t[vt];return new Un(r,t)}return null}function eb(n){let{rootComponent:t,appProviders:e,platformProviders:r,platformRef:i}=n;de(ie.BootstrapApplicationStart);try{let o=i?.injector??Yx(r),s=[W_(),Av,...e||[]],a=new Xo({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return Gx({r3Injector:a.injector,platformInjector:o,rootComponent:t})}catch(o){return Promise.reject(o)}finally{de(ie.BootstrapApplicationEnd)}}function fs(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var tb=null;function Tt(){return tb}function Kh(n){tb??=n}var hs=class{},al=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:()=>b(nb),providedIn:"platform"})}return n})();var nb=(()=>{class n extends al{_location;_history;_doc=b(ke);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Tt().getBaseHref(this._doc)}onPopState(e){let r=Tt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){let r=Tt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,i){this._history.pushState(e,r,i)}replaceState(e,r,i){this._history.replaceState(e,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function ob(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function rb(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function Bn(n){return n&&n[0]!=="?"?`?${n}`:n}var Li=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:()=>b(eM),providedIn:"root"})}return n})(),Xx=new P(""),eM=(()=>{class n extends Li{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??b(ke).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return ob(this._baseHref,e)}path(e=!1){let r=this._platformLocation.pathname+Bn(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,o){let s=this.prepareExternalUrl(i+Bn(o));this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){let s=this.prepareExternalUrl(i+Bn(o));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(L(al),L(Xx,8))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ji=(()=>{class n{_subject=new _e;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let r=this._locationStrategy.getBaseHref();this._basePath=rM(rb(ib(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Bn(r))}normalize(e){return n.stripTrailingSlash(nM(this._basePath,ib(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._locationStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Bn(r)),i)}replaceState(e,r="",i=null){this._locationStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Bn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Bn;static joinWithSlash=ob;static stripTrailingSlash=rb;static \u0275fac=function(r){return new(r||n)(L(Li))};static \u0275prov=R({token:n,factory:()=>tM(),providedIn:"root"})}return n})();function tM(){return new ji(L(Li))}function nM(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function ib(n){return n.replace(/\/index.html$/,"")}function rM(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var Yh=/\s+/,sb=[],Pr=(()=>{class n{_ngEl;_renderer;initialClasses=sb;rawClass;stateMap=new Map;constructor(e,r){this._ngEl=e,this._renderer=r}set klass(e){this.initialClasses=e!=null?e.trim().split(Yh):sb}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(Yh):e}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let r of e)this._updateState(r,!0);else if(e!=null)for(let r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){let i=this.stateMap.get(e);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let r=e[0],i=e[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(e,r){e=e.trim(),e.length>0&&e.split(Yh).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(U(bt),U(En))};static \u0275dir=Se({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Je=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gt({type:n});static \u0275inj=Dt({})}return n})();function Zh(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let r=e.indexOf("="),[i,o]=r==-1?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var ps=class{};var ab="browser";var gs=class{_doc;constructor(t){this._doc=t}manager},ll=(()=>{class n extends gs{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i,o){return e.addEventListener(r,i,o),()=>this.removeEventListener(e,r,i,o)}removeEventListener(e,r,i,o){return e.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(L(ke))};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})(),fl=new P(""),ep=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(s=>{s.manager=this});let i=e.filter(s=>!(s instanceof ll));this._plugins=i.slice().reverse();let o=e.find(s=>s instanceof ll);o&&this._plugins.push(o)}addEventListener(e,r,i,o){return this._findPluginFor(r).addEventListener(e,r,i,o)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(o=>o.supports(e)),!r)throw new M(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||n)(L(fl),L(at))};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})(),Qh="ng-app-id";function cb(n){for(let t of n)t.remove()}function lb(n,t){let e=t.createElement("style");return e.textContent=n,e}function oM(n,t,e,r){let i=n.head?.querySelectorAll(`style[${Qh}="${t}"],link[${Qh}="${t}"]`);if(i)for(let o of i)o.removeAttribute(Qh),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&e.set(o.textContent,{usage:0,elements:[o]})}function Xh(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var tp=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(e,r,i,o={}){this.doc=e,this.appId=r,this.nonce=i,oM(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let i of e)this.addUsage(i,this.inline,lb);r?.forEach(i=>this.addUsage(i,this.external,Xh))}removeStyles(e,r){for(let i of e)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,r,i){let o=r.get(e);o?o.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(e,this.doc)))})}removeUsage(e,r){let i=r.get(e);i&&(i.usage--,i.usage<=0&&(cb(i.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])cb(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(e,lb(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(e,Xh(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),e.appendChild(r)}static \u0275fac=function(r){return new(r||n)(L(ke),L(Gc),L(Wc,8),L(rs))};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})(),Jh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},np=/%COMP%/g;var db="%COMP%",sM=`_nghost-${db}`,aM=`_ngcontent-${db}`,cM=!0,lM=new P("",{factory:()=>cM});function uM(n){return aM.replace(np,n)}function dM(n){return sM.replace(np,n)}function fb(n,t){return t.map(e=>e.replace(np,n))}var rp=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,i,o,s,a,c=null,l=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new ms(e,s,a,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(e,r);return i instanceof dl?i.applyToHost(e):i instanceof vs&&i.applyStyles(),i}getOrCreateRenderer(e,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(r.encapsulation){case Bt.Emulated:o=new dl(c,l,r,this.appId,u,s,a,d,h);break;case Bt.ShadowDom:return new ul(c,e,r,s,a,this.nonce,d,h,l);case Bt.ExperimentalIsolatedShadowDom:return new ul(c,e,r,s,a,this.nonce,d,h);default:o=new vs(c,l,r,u,s,a,d,h);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||n)(L(ep),L(tp),L(Gc),L(lM),L(ke),L(at),L(Wc),L(os,8))};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})(),ms=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,r,i,o){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(Jh[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(ub(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(ub(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){e.remove()}selectRootElement(t,e){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new M(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;let o=Jh[i];o?t.setAttributeNS(o,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){let i=Jh[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(Cn.DashCase|Cn.Important)?t.style.setProperty(e,r,i&Cn.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&Cn.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t!=null&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r,i){if(typeof t=="string"&&(t=Tt().getGlobalEventTarget(this.doc,t),!t))throw new M(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,e,o)),this.eventManager.addEventListener(t,e,o,i)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;t(e)===!1&&e.preventDefault()}}};function ub(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ul=class extends ms{hostEl;sharedStylesHost;shadowRoot;constructor(t,e,r,i,o,s,a,c,l){super(t,i,o,a,c),this.hostEl=e,this.sharedStylesHost=l,this.shadowRoot=e.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=fb(r.id,u);for(let h of u){let f=document.createElement("style");s&&f.setAttribute("nonce",s),f.textContent=h,this.shadowRoot.appendChild(f)}let d=r.getExternalStyles?.();if(d)for(let h of d){let f=Xh(h,i);s&&f.setAttribute("nonce",s),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},vs=class extends ms{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,r,i,o,s,a,c,l){super(t,o,s,a,c),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?fb(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Ir.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},dl=class extends vs{contentAttr;hostAttr;constructor(t,e,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(t,e,r,o,s,a,c,l,u),this.contentAttr=uM(u),this.hostAttr=dM(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}};var hl=class n extends hs{supportsDOMEvents=!0;static makeCurrent(){Kh(new n)}onAndCancel(t,e,r,i){return t.addEventListener(e,r,i),()=>{t.removeEventListener(e,r,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=fM();return e==null?null:hM(e)}resetBaseElement(){ys=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Zh(document.cookie,t)}},ys=null;function fM(){return ys=ys||document.head.querySelector("base"),ys?ys.getAttribute("href"):null}function hM(n){return new URL(n,document.baseURI).pathname}var pM=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})(),hb=["alt","control","meta","shift"],gM={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mM={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},pb=(()=>{class n extends gs{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Tt().onAndCancel(e,s.domEventName,a,o))}static parseEventName(e){let r=e.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),hb.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(e,r){let i=gM[e.key]||e.key,o="";return r.indexOf("code.")>-1&&(i=e.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),hb.forEach(s=>{if(s!==i){let a=mM[s];a(e)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(e,r,i){return o=>{n.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||n)(L(ke))};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})();function ip(n,t,e){let r=D({rootComponent:n,platformRef:e?.platformRef},vM(t));return eb(r)}function vM(n){return{appProviders:[...CM,...n?.providers??[]],platformProviders:wM}}function yM(){hl.makeCurrent()}function _M(){return new _n}function bM(){return vh(document),document}var wM=[{provide:rs,useValue:ab},{provide:qc,useValue:yM,multi:!0},{provide:ke,useFactory:bM}];var CM=[{provide:Uo,useValue:"root"},{provide:_n,useFactory:_M},{provide:fl,useClass:ll,multi:!0},{provide:fl,useClass:pb,multi:!0},rp,tp,ep,{provide:xr,useExisting:rp},{provide:ps,useClass:pM},[]];var gb=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||n)(L(ke))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var q="primary",As=Symbol("RouteTitle"),lp=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function jr(n){return new lp(n)}function Db(n,t,e){let r=e.path.split("/");if(r.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function _l(n){return new Promise((t,e)=>{n.pipe(mn()).subscribe({next:r=>t(r),error:r=>e(r)})})}function DM(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!cn(n[e],t[e]))return!1;return!0}function cn(n,t){let e=n?up(n):void 0,r=t?up(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!Sb(n[i],t[i]))return!1;return!0}function up(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Sb(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),r=[...t].sort();return e.every((i,o)=>r[o]===i)}else return n===t}function Ib(n){return n.length>0?n[n.length-1]:null}function Ur(n){return Ha(n)?n:Rr(n)?xe(Promise.resolve(n)):J(n)}function xb(n){return Ha(n)?_l(n):Promise.resolve(n)}var SM={exact:Tb,subset:Ob},Mb={exact:IM,subset:xM,ignored:()=>!0};function mb(n,t,e){return SM[e.paths](n.root,t.root,e.matrixParams)&&Mb[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function IM(n,t){return cn(n,t)}function Tb(n,t,e){if(!Fr(n.segments,t.segments)||!ml(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!n.children[r]||!Tb(n.children[r],t.children[r],e))return!1;return!0}function xM(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Sb(n[e],t[e]))}function Ob(n,t,e){return Ab(n,t,t.segments,e)}function Ab(n,t,e,r){if(n.segments.length>e.length){let i=n.segments.slice(0,e.length);return!(!Fr(i,e)||t.hasChildren()||!ml(i,e,r))}else if(n.segments.length===e.length){if(!Fr(n.segments,e)||!ml(n.segments,e,r))return!1;for(let i in t.children)if(!n.children[i]||!Ob(n.children[i],t.children[i],r))return!1;return!0}else{let i=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!Fr(n.segments,i)||!ml(n.segments,i,r)||!n.children[q]?!1:Ab(n.children[q],t,o,r)}}function ml(n,t,e){return t.every((r,i)=>Mb[e](n[i].parameters,r.parameters))}var Wt=class{root;queryParams;fragment;_queryParamMap;constructor(t=new se([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=jr(this.queryParams),this._queryParamMap}toString(){return OM.serialize(this)}},se=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vl(this)}},Hn=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=jr(this.parameters),this._parameterMap}toString(){return Nb(this)}};function MM(n,t){return Fr(n,t)&&n.every((e,r)=>cn(e.parameters,t[r].parameters))}function Fr(n,t){return n.length!==t.length?!1:n.every((e,r)=>e.path===t[r].path)}function TM(n,t){let e=[];return Object.entries(n.children).forEach(([r,i])=>{r===q&&(e=e.concat(t(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==q&&(e=e.concat(t(i,r)))}),e}var Rs=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:()=>new zn,providedIn:"root"})}return n})(),zn=class{parse(t){let e=new fp(t);return new Wt(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${_s(t.root,!0)}`,r=NM(t.queryParams),i=typeof t.fragment=="string"?`#${AM(t.fragment)}`:"";return`${e}${r}${i}`}},OM=new zn;function vl(n){return n.segments.map(t=>Nb(t)).join("/")}function _s(n,t){if(!n.hasChildren())return vl(n);if(t){let e=n.children[q]?_s(n.children[q],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==q&&r.push(`${i}:${_s(o,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=TM(n,(r,i)=>i===q?[_s(n.children[q],!1)]:[`${i}:${_s(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[q]!=null?`${vl(n)}/${e[0]}`:`${vl(n)}/(${e.join("//")})`}}function Rb(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pl(n){return Rb(n).replace(/%3B/gi,";")}function AM(n){return encodeURI(n)}function dp(n){return Rb(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yl(n){return decodeURIComponent(n)}function vb(n){return yl(n.replace(/\+/g,"%20"))}function Nb(n){return`${dp(n.path)}${RM(n.parameters)}`}function RM(n){return Object.entries(n).map(([t,e])=>`;${dp(t)}=${dp(e)}`).join("")}function NM(n){let t=Object.entries(n).map(([e,r])=>Array.isArray(r)?r.map(i=>`${pl(e)}=${pl(i)}`).join("&"):`${pl(e)}=${pl(r)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var PM=/^[^\/()?;#]+/;function op(n){let t=n.match(PM);return t?t[0]:""}var kM=/^[^\/()?;=#]+/;function FM(n){let t=n.match(kM);return t?t[0]:""}var LM=/^[^=?&#]+/;function jM(n){let t=n.match(LM);return t?t[0]:""}var VM=/^[^&#]+/;function UM(n){let t=n.match(VM);return t?t[0]:""}var fp=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new se([],{}):new se([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[q]=new se(t,e)),r}parseSegment(){let t=op(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new M(4009,!1);return this.capture(t),new Hn(yl(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=FM(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let i=op(this.remaining);i&&(r=i,this.capture(r))}t[yl(e)]=yl(r)}parseQueryParam(t){let e=jM(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let s=UM(this.remaining);s&&(r=s,this.capture(r))}let i=vb(e),o=vb(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=op(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new M(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=q);let s=this.parseChildren();e[o??q]=Object.keys(s).length===1&&s[q]?s[q]:new se([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new M(4011,!1)}};function Pb(n){return n.segments.length>0?new se([],{[q]:n}):n}function kb(n){let t={};for(let[r,i]of Object.entries(n.children)){let o=kb(i);if(r===q&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let e=new se(n.segments,t);return $M(e)}function $M(n){if(n.numberOfChildren===1&&n.children[q]){let t=n.children[q];return new se(n.segments.concat(t.segments),t.children)}return n}function Gn(n){return n instanceof Wt}function Fb(n,t,e=null,r=null,i=new zn){let o=Lb(n);return jb(o,t,e,r,i)}function Lb(n){let t;function e(o){let s={};for(let c of o.children){let l=e(c);s[c.outlet]=l}let a=new se(o.url,s);return o===n&&(t=a),a}let r=e(n.root),i=Pb(r);return t??i}function jb(n,t,e,r,i){let o=n;for(;o.parent;)o=o.parent;if(t.length===0)return sp(o,o,o,e,r,i);let s=BM(t);if(s.toRoot())return sp(o,o,new se([],{}),e,r,i);let a=HM(s,o,n),c=a.processChildren?ws(a.segmentGroup,a.index,s.commands):Ub(a.segmentGroup,a.index,s.commands);return sp(o,a.segmentGroup,c,e,r,i)}function bl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ds(n){return typeof n=="object"&&n!=null&&n.outlets}function yb(n,t,e){n||="\u0275";let r=new Wt;return r.queryParams={[n]:t},e.parse(e.serialize(r)).queryParams[n]}function sp(n,t,e,r,i,o){let s={};for(let[l,u]of Object.entries(r??{}))s[l]=Array.isArray(u)?u.map(d=>yb(l,d,o)):yb(l,u,o);let a;n===t?a=e:a=Vb(n,t,e);let c=Pb(kb(a));return new Wt(c,s,i)}function Vb(n,t,e){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===t?r[i]=e:r[i]=Vb(o,t,e)}),new se(n.segments,r)}var wl=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&bl(r[0]))throw new M(4003,!1);let i=r.find(Ds);if(i&&i!==Ib(r))throw new M(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function BM(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new wl(!0,0,n);let t=0,e=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?e=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new wl(e,t,r)}var Ui=class{segmentGroup;processChildren;index;constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}};function HM(n,t,e){if(n.isAbsolute)return new Ui(t,!0,0);if(!e)return new Ui(t,!1,NaN);if(e.parent===null)return new Ui(e,!0,0);let r=bl(n.commands[0])?0:1,i=e.segments.length-1+r;return zM(e,i,n.numberOfDoubleDots)}function zM(n,t,e){let r=n,i=t,o=e;for(;o>i;){if(o-=i,r=r.parent,!r)throw new M(4005,!1);i=r.segments.length}return new Ui(r,!1,i-o)}function GM(n){return Ds(n[0])?n[0].outlets:{[q]:n}}function Ub(n,t,e){if(n??=new se([],{}),n.segments.length===0&&n.hasChildren())return ws(n,t,e);let r=qM(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new se(n.segments.slice(0,r.pathIndex),{});return o.children[q]=new se(n.segments.slice(r.pathIndex),n.children),ws(o,0,i)}else return r.match&&i.length===0?new se(n.segments,{}):r.match&&!n.hasChildren()?hp(n,t,e):r.match?ws(n,0,i):hp(n,t,e)}function ws(n,t,e){if(e.length===0)return new se(n.segments,{});{let r=GM(e),i={};if(Object.keys(r).some(o=>o!==q)&&n.children[q]&&n.numberOfChildren===1&&n.children[q].segments.length===0){let o=ws(n.children[q],t,e);return new se(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Ub(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new se(n.segments,i)}}function qM(n,t,e){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return o;let s=n.segments[i],a=e[r];if(Ds(a))break;let c=`${a}`,l=r<e.length-1?e[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!bb(c,l,s))return o;r+=2}else{if(!bb(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function hp(n,t,e){let r=n.segments.slice(0,t),i=0;for(;i<e.length;){let o=e[i];if(Ds(o)){let c=WM(o.outlets);return new se(r,c)}if(i===0&&bl(e[0])){let c=n.segments[t];r.push(new Hn(c.path,_b(e[0]))),i++;continue}let s=Ds(o)?o.outlets[q]:`${o}`,a=i<e.length-1?e[i+1]:null;s&&a&&bl(a)?(r.push(new Hn(s,_b(a))),i+=2):(r.push(new Hn(s,{})),i++)}return new se(r,{})}function WM(n){let t={};return Object.entries(n).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[e]=hp(new se([],{}),0,r))}),t}function _b(n){let t={};return Object.entries(n).forEach(([e,r])=>t[e]=`${r}`),t}function bb(n,t,e){return n==e.path&&cn(t,e.parameters)}var Cs="imperative",Ue=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Ue||{}),Et=class{id;url;constructor(t,e){this.id=t,this.url=e}},Vr=class extends Et{type=Ue.NavigationStart;navigationTrigger;restoredState;constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Kt=class extends Et{urlAfterRedirects;type=Ue.NavigationEnd;constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ut=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(ut||{}),Ss=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Ss||{}),ln=class extends Et{reason;code;type=Ue.NavigationCancel;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Sn=class extends Et{reason;code;type=Ue.NavigationSkipped;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}},Bi=class extends Et{error;target;type=Ue.NavigationError;constructor(t,e,r,i){super(t,e),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Is=class extends Et{urlAfterRedirects;state;type=Ue.RoutesRecognized;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cl=class extends Et{urlAfterRedirects;state;type=Ue.GuardsCheckStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},El=class extends Et{urlAfterRedirects;state;shouldActivate;type=Ue.GuardsCheckEnd;constructor(t,e,r,i,o){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Dl=class extends Et{urlAfterRedirects;state;type=Ue.ResolveStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sl=class extends Et{urlAfterRedirects;state;type=Ue.ResolveEnd;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Il=class{route;type=Ue.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},xl=class{route;type=Ue.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ml=class{snapshot;type=Ue.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tl=class{snapshot;type=Ue.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ol=class{snapshot;type=Ue.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Al=class{snapshot;type=Ue.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var xs=class{},Hi=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function KM(n){return!(n instanceof xs)&&!(n instanceof Hi)}function YM(n,t){return n.providers&&!n._injector&&(n._injector=as(n.providers,t,`Route: ${n.path}`)),n._injector??t}function qt(n){return n.outlet||q}function ZM(n,t){let e=n.filter(r=>qt(r)===t);return e.push(...n.filter(r=>qt(r)!==t)),e}function qi(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Rl=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return qi(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Wi(this.rootInjector)}},Wi=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new Rl(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||n)(L(Ve))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Nl=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=pp(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){let e=pp(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=gp(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return gp(t,this._root).map(e=>e.value)}};function pp(n,t){if(n===t.value)return t;for(let e of t.children){let r=pp(n,e);if(r)return r}return null}function gp(n,t){if(n===t.value)return[t];for(let e of t.children){let r=gp(n,e);if(r.length)return r.unshift(t),r}return[]}var Ct=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Vi(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Ms=class extends Nl{snapshot;constructor(t,e){super(t),this.snapshot=e,wp(this,t)}toString(){return this.snapshot.toString()}};function $b(n){let t=QM(n),e=new Ne([new Hn("",{})]),r=new Ne({}),i=new Ne({}),o=new Ne({}),s=new Ne(""),a=new Yt(e,r,o,s,i,q,n,t.root);return a.snapshot=t.root,new Ms(new Ct(a,[]),t)}function QM(n){let t={},e={},r={},o=new Lr([],t,r,"",e,q,n,null,{});return new Ts("",new Ct(o,[]))}var Yt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(te(l=>l[As]))??J(void 0),this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(te(t=>jr(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(te(t=>jr(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Pl(n,t,e="emptyOnly"){let r,{routeConfig:i}=n;return t!==null&&(e==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:D(D({},t.params),n.params),data:D(D({},t.data),n.data),resolve:D(D(D(D({},n.data),t.data),i?.data),n._resolvedData)}:r={params:D({},n.params),data:D({},n.data),resolve:D(D({},n.data),n._resolvedData??{})},i&&Hb(i)&&(r.resolve[As]=i.title),r}var Lr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[As]}constructor(t,e,r,i,o,s,a,c,l){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=jr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=jr(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Ts=class extends Nl{url;constructor(t,e){super(e),this.url=t,wp(this,e)}toString(){return Bb(this._root)}};function wp(n,t){t.value._routerState=n,t.children.forEach(e=>wp(n,e))}function Bb(n){let t=n.children.length>0?` { ${n.children.map(Bb).join(", ")} } `:"";return`${n.value}${t}`}function ap(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,cn(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),cn(t.params,e.params)||n.paramsSubject.next(e.params),DM(t.url,e.url)||n.urlSubject.next(e.url),cn(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function mp(n,t){let e=cn(n.params,t.params)&&MM(n.url,t.url),r=!n.parent!=!t.parent;return e&&!r&&(!n.parent||mp(n.parent,t.parent))}function Hb(n){return typeof n.title=="string"||n.title===null}var zb=new P(""),Ns=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=q;activateEvents=new he;deactivateEvents=new he;attachEvents=new he;detachEvents=new he;routerOutletData=J_();parentContexts=b(Wi);location=b(Ar);changeDetector=b(Fi);inputBinder=b(jl,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new M(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new M(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new M(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new M(4013,!1);this._activatedRoute=e;let i=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new vp(e,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Se({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[_t]})}return n})(),vp=class{route;childContexts;parent;outletData;constructor(t,e,r,i){this.route=t,this.childContexts=e,this.parent=r,this.outletData=i}get(t,e){return t===Yt?this.route:t===Wi?this.childContexts:t===zb?this.outletData:this.parent.get(t,e)}},jl=new P("");var Cp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Te({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&E(0,"router-outlet")},dependencies:[Ns],encapsulation:2})}return n})();function Ep(n){let t=n.children&&n.children.map(Ep),e=t?Y(D({},n),{children:t}):D({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==q&&(e.component=Cp),e}function JM(n,t,e){let r=Os(n,t._root,e?e._root:void 0);return new Ms(r,t)}function Os(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=t.value;let i=XM(n,t,e);return new Ct(r,i)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Os(n,a)),s}}let r=eT(t.value),i=t.children.map(o=>Os(n,o));return new Ct(r,i)}}function XM(n,t,e){return t.children.map(r=>{for(let i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Os(n,r,i);return Os(n,r)})}function eT(n){return new Yt(new Ne(n.url),new Ne(n.params),new Ne(n.queryParams),new Ne(n.fragment),new Ne(n.data),n.outlet,n.component,n)}var zi=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},Gb="ngNavigationCancelingError";function kl(n,t){let{redirectTo:e,navigationBehaviorOptions:r}=Gn(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=qb(!1,ut.Redirect);return i.url=e,i.navigationBehaviorOptions=r,i}function qb(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[Gb]=!0,e.cancellationCode=t,e}function tT(n){return Wb(n)&&Gn(n.url)}function Wb(n){return!!n&&n[Gb]}var nT=(n,t,e,r)=>te(i=>(new yp(t,i.targetRouterState,i.currentRouterState,e,r).activate(n),i)),yp=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,r,i,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),ap(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){let i=Vi(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,r);else o&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=Vi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=Vi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,e,r){let i=Vi(e);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Al(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Tl(t.value.snapshot))}activateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(ap(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ap(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},Fl=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},$i=class{component;route;constructor(t,e){this.component=t,this.route=e}};function rT(n,t,e){let r=n._root,i=t?t._root:null;return bs(r,i,e,[r.value])}function iT(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function Ki(n,t){let e=Symbol(),r=t.get(n,e);return r===e?typeof n=="function"&&!Ud(n)?n:t.get(n):r}function bs(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Vi(t);return n.children.forEach(s=>{oT(s,o[s.value.outlet],e,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Es(a,e.getContext(s),i)),i}function oT(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=sT(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Fl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?bs(n,t,a?a.children:null,r,i):bs(n,t,e,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new $i(a.outlet.component,s))}else s&&Es(t,a,i),i.canActivateChecks.push(new Fl(r)),o.component?bs(n,null,a?a.children:null,r,i):bs(n,null,e,r,i);return i}function sT(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Fr(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Fr(n.url,t.url)||!cn(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mp(n,t)||!cn(n.queryParams,t.queryParams);case"paramsChange":default:return!mp(n,t)}}function Es(n,t,e){let r=Vi(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?t?Es(s,t.children.getContext(o),e):Es(s,null,e):Es(s,t,e)}),i.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new $i(t.outlet.component,i)):e.canDeactivateChecks.push(new $i(null,i)):e.canDeactivateChecks.push(new $i(null,i))}function Ps(n){return typeof n=="function"}function aT(n){return typeof n=="boolean"}function cT(n){return n&&Ps(n.canLoad)}function lT(n){return n&&Ps(n.canActivate)}function uT(n){return n&&Ps(n.canActivateChild)}function dT(n){return n&&Ps(n.canDeactivate)}function fT(n){return n&&Ps(n.canMatch)}function Kb(n){return n instanceof cr||n?.name==="EmptyError"}var gl=Symbol("INITIAL_VALUE");function Gi(){return rt(n=>bd(n.map(t=>t.pipe(nt(1),Sd(gl)))).pipe(te(t=>{for(let e of t)if(e!==!0){if(e===gl)return gl;if(e===!1||hT(e))return e}return!0}),Ze(t=>t!==gl),nt(1)))}function hT(n){return Gn(n)||n instanceof zi}function Yb(n){return n.aborted?J(void 0).pipe(nt(1)):new K(t=>{let e=()=>{t.next(),t.complete()};return n.addEventListener("abort",e),()=>n.removeEventListener("abort",e)})}function Zb(n){return lr(Yb(n))}function pT(n,t){return Ye(e=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?J(Y(D({},e),{guardsResult:!0})):gT(s,r,i,n).pipe(Ye(a=>a&&aT(a)?mT(r,o,n,t):J(a)),te(a=>Y(D({},e),{guardsResult:a})))})}function gT(n,t,e,r){return xe(n).pipe(Ye(i=>wT(i.component,i.route,e,t,r)),mn(i=>i!==!0,!0))}function mT(n,t,e,r){return xe(t).pipe(To(i=>pi(yT(i.route.parent,r),vT(i.route,r),bT(n,i.path,e),_T(n,i.route,e))),mn(i=>i!==!0,!0))}function vT(n,t){return n!==null&&t&&t(new Ol(n)),J(!0)}function yT(n,t){return n!==null&&t&&t(new Ml(n)),J(!0)}function _T(n,t,e){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return J(!0);let i=r.map(o=>Mo(()=>{let s=qi(t)??e,a=Ki(o,s),c=lT(a)?a.canActivate(t,n):ct(s,()=>a(t,n));return Ur(c).pipe(mn())}));return J(i).pipe(Gi())}function bT(n,t,e){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>iT(s)).filter(s=>s!==null).map(s=>Mo(()=>{let a=s.guards.map(c=>{let l=qi(s.node)??e,u=Ki(c,l),d=uT(u)?u.canActivateChild(r,n):ct(l,()=>u(r,n));return Ur(d).pipe(mn())});return J(a).pipe(Gi())}));return J(o).pipe(Gi())}function wT(n,t,e,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return J(!0);let s=o.map(a=>{let c=qi(t)??i,l=Ki(a,c),u=dT(l)?l.canDeactivate(n,t,e,r):ct(c,()=>l(n,t,e,r));return Ur(u).pipe(mn())});return J(s).pipe(Gi())}function CT(n,t,e,r,i){let o=t.canLoad;if(o===void 0||o.length===0)return J(!0);let s=o.map(a=>{let c=Ki(a,n),l=cT(c)?c.canLoad(t,e):ct(n,()=>c(t,e)),u=Ur(l);return i?u.pipe(Zb(i)):u});return J(s).pipe(Gi(),Qb(r))}function Qb(n){return dd(it(t=>{if(typeof t!="boolean")throw kl(n,t)}),te(t=>t===!0))}function ET(n,t,e,r,i){let o=t.canMatch;if(!o||o.length===0)return J(!0);let s=o.map(a=>{let c=Ki(a,n),l=fT(c)?c.canMatch(t,e):ct(n,()=>c(t,e)),u=Ur(l);return i?u.pipe(Zb(i)):u});return J(s).pipe(Gi(),Qb(r))}var kr=class Jb extends Error{segmentGroup;constructor(t){super(),this.segmentGroup=t||null,Object.setPrototypeOf(this,Jb.prototype)}},_p=class Xb extends Error{urlTree;constructor(t){super(),this.urlTree=t,Object.setPrototypeOf(this,Xb.prototype)}};function DT(n){throw new M(4e3,!1)}function ST(n){throw qb(!1,ut.GuardRejected)}var IT=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}async lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[q])throw DT(`${t.redirectTo}`);i=i.children[q]}}async applyRedirectCommands(t,e,r,i,o){let s=await xT(e,i,o);if(s instanceof Wt)throw new _p(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,r);if(s[0]==="/")throw new _p(a);return a}applyRedirectCreateUrlTree(t,e,r,i){let o=this.createSegmentGroup(t,e.root,r,i);return new Wt(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=e[a]}else r[i]=o}),r}createSegmentGroup(t,e,r,i){let o=this.createSegments(t,e.segments,r,i),s={};return Object.entries(e.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new se(o,s)}createSegments(t,e,r,i){return e.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,e,r){let i=r[e.path.substring(1)];if(!i)throw new M(4001,!1);return i}findOrReturn(t,e){let r=0;for(let i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}};function xT(n,t,e){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:d}=t;return _l(Ur(ct(e,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:d}))))}var bp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function MT(n,t,e,r,i,o){let s=e0(n,t,e);return s.matched?(r=YM(t,r),ET(r,t,e,i,o).pipe(te(a=>a===!0?s:D({},bp)))):J(s)}function e0(n,t,e){if(t.path==="**")return TT(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?D({},bp):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(t.matcher||Db)(e,n,t);if(!i)return D({},bp);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?D(D({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function TT(n){return{matched:!0,parameters:n.length>0?Ib(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function wb(n,t,e,r){return e.length>0&&RT(n,e,r)?{segmentGroup:new se(t,AT(r,new se(e,n.children))),slicedSegments:[]}:e.length===0&&NT(n,e,r)?{segmentGroup:new se(n.segments,OT(n,e,r,n.children)),slicedSegments:e}:{segmentGroup:new se(n.segments,n.children),slicedSegments:e}}function OT(n,t,e,r){let i={};for(let o of e)if(Vl(n,t,o)&&!r[qt(o)]){let s=new se([],{});i[qt(o)]=s}return D(D({},r),i)}function AT(n,t){let e={};e[q]=t;for(let r of n)if(r.path===""&&qt(r)!==q){let i=new se([],{});e[qt(r)]=i}return e}function RT(n,t,e){return e.some(r=>Vl(n,t,r)&&qt(r)!==q)}function NT(n,t,e){return e.some(r=>Vl(n,t,r))}function Vl(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function PT(n,t,e){return t.length===0&&!n.children[e]}var kT=class{};async function FT(n,t,e,r,i,o,s="emptyOnly",a){return new jT(n,t,e,r,i,s,o,a).recognize()}var LT=31,jT=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,r,i,o,s,a,c){this.injector=t,this.configLoader=e,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new IT(this.urlSerializer,this.urlTree)}noMatchError(t){return new M(4002,`'${t.segmentGroup}'`)}async recognize(){let t=wb(this.urlTree.root,[],[],this.config).segmentGroup,{children:e,rootSnapshot:r}=await this.match(t),i=new Ct(r,e),o=new Ts("",i),s=Fb(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(t){let e=new Lr([],Object.freeze({}),Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),q,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,t,q,e),rootSnapshot:e}}catch(r){if(r instanceof _p)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof kr?this.noMatchError(r):r}}async processSegmentGroup(t,e,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(t,e,r,o);let s=await this.processSegment(t,e,r,r.segments,i,!0,o);return s instanceof Ct?[s]:[]}async processChildren(t,e,r,i){let o=[];for(let c of Object.keys(r.children))c==="primary"?o.unshift(c):o.push(c);let s=[];for(let c of o){let l=r.children[c],u=ZM(e,c),d=await this.processSegmentGroup(t,u,l,c,i);s.push(...d)}let a=t0(s);return VT(a),a}async processSegment(t,e,r,i,o,s,a){for(let c of e)try{return await this.processSegmentAgainstRoute(c._injector??t,e,c,r,i,o,s,a)}catch(l){if(l instanceof kr||Kb(l))continue;throw l}if(PT(r,i,o))return new kT;throw new kr(r)}async processSegmentAgainstRoute(t,e,r,i,o,s,a,c){if(qt(r)!==s&&(s===q||!Vl(i,o,r)))throw new kr(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(t,i,r,o,s,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(t,i,e,r,o,s,c);throw new kr(i)}async expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=e0(e,i,o);if(!c)throw new kr(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>LT&&(this.allowRedirects=!1));let f=new Lr(o,l,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,Cb(i),qt(i),i.component??i._loadedComponent??null,i,Eb(i)),p=Pl(f,a,this.paramsInheritanceStrategy);if(f.params=Object.freeze(p.params),f.data=Object.freeze(p.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let m=await this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,f,t),C=await this.applyRedirects.lineralizeSegments(i,m);return this.processSegment(t,r,e,C.concat(h),s,!1,a)}async matchSegmentAgainstRoute(t,e,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await _l(MT(e,r,i,t,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(e.children={}),!a?.matched)throw new kr(e);t=r._injector??t;let{routes:c}=await this.getChildConfig(t,r,i),l=r._loadedInjector??t,{parameters:u,consumedSegments:d,remainingSegments:h}=a,f=new Lr(d,u,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,Cb(r),qt(r),r.component??r._loadedComponent??null,r,Eb(r)),p=Pl(f,s,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let{segmentGroup:m,slicedSegments:C}=wb(e,d,h,c);if(C.length===0&&m.hasChildren()){let T=await this.processChildren(l,c,m,f);return new Ct(f,T)}if(c.length===0&&C.length===0)return new Ct(f,[]);let w=qt(r)===o,z=await this.processSegment(l,c,m,C,w?q:o,!0,f);return new Ct(f,z instanceof Ct?[z]:[])}async getChildConfig(t,e,r){if(e.children)return{routes:e.children,injector:t};if(e.loadChildren){if(e._loadedRoutes!==void 0)return{routes:e._loadedRoutes,injector:e._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await _l(CT(t,e,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(t,e);return e._loadedRoutes=o.routes,e._loadedInjector=o.injector,o}throw ST(e)}return{routes:[],injector:t}}};function VT(n){n.sort((t,e)=>t.value.outlet===q?-1:e.value.outlet===q?1:t.value.outlet.localeCompare(e.value.outlet))}function UT(n){let t=n.value.routeConfig;return t&&t.path===""}function t0(n){let t=[],e=new Set;for(let r of n){if(!UT(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),e.add(i)):t.push(r)}for(let r of e){let i=t0(r.children);t.push(new Ct(r.value,i))}return t.filter(r=>!e.has(r))}function Cb(n){return n.data||{}}function Eb(n){return n.resolve||{}}var $T=new P("",{factory:()=>FT});function BT(n,t,e,r,i,o,s){let a=n.get($T);return Ye(c=>J(c).pipe(rt(l=>a(n,t,e,r,l.extractedUrl,i,o,s)),te(({state:l,tree:u})=>Y(D({},c),{targetSnapshot:l,urlAfterRedirects:u}))))}function HT(n,t){return Ye(e=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return J(e);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of n0(c))s.add(l);let a=0;return xe(s).pipe(To(c=>o.has(c)?zT(c,r,n,t):(c.data=Pl(c,c.parent,n).resolve,J(void 0))),it(()=>a++),Wa(1),Ye(c=>a===s.size?J(e):ht))})}function n0(n){let t=n.children.map(e=>n0(e)).flat();return[n,...t]}function zT(n,t,e,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!Hb(i)&&(o[As]=i.title),Mo(()=>(n.data=Pl(n,n.parent,e).resolve,GT(o,n,t,r).pipe(te(s=>(n._resolvedData=s,n.data=D(D({},n.data),s),null)))))}function GT(n,t,e,r){let i=up(n);if(i.length===0)return J({});let o={};return xe(i).pipe(Ye(s=>qT(n[s],t,e,r).pipe(mn(),it(a=>{if(a instanceof zi)throw kl(new zn,a);o[s]=a}))),Wa(1),te(()=>o),gi(s=>Kb(s)?ht:_d(s)))}function qT(n,t,e,r){let i=qi(t)??r,o=Ki(n,i),s=o.resolve?o.resolve(t,e):ct(i,()=>o(t,e));return Ur(s)}function cp(n){return rt(t=>{let e=n(t);return e?xe(e).pipe(te(()=>t)):J(t)})}var Dp=(()=>{class n{buildTitle(e){let r,i=e.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===q);return r}getResolvedTitleForRoute(e){return e.data[As]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:()=>b(r0),providedIn:"root"})}return n})(),r0=(()=>{class n extends Dp{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(L(gb))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Yi=new P("",{factory:()=>({})}),ks=new P(""),i0=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=b(Gh);async loadComponent(e,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await xb(ct(e,()=>r.loadComponent())),s=await a0(s0(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await o0(r,this.compiler,e,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function o0(n,t,e,r){let i=await xb(ct(e,()=>n.loadChildren())),o=await a0(s0(i)),s;o instanceof nl||Array.isArray(o)?s=o:s=await t.compileModuleAsync(o),r&&r(n);let a,c,l=!1;return Array.isArray(s)?(c=s,l=!0):(a=s.create(e).injector,c=a.get(ks,[],{optional:!0,self:!0}).flat()),{routes:c.map(Ep),injector:a}}function WT(n){return n&&typeof n=="object"&&"default"in n}function s0(n){return WT(n)?n.default:n}async function a0(n){return n}var Ul=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:()=>b(KT),providedIn:"root"})}return n})(),KT=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),c0=new P("");var YT=()=>{},l0=new P(""),u0=(()=>{class n{currentNavigation=N(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=N(null);events=new _e;transitionAbortWithErrorSubject=new _e;configLoader=b(i0);environmentInjector=b(Ve);destroyRef=b(lt);urlSerializer=b(Rs);rootContexts=b(Wi);location=b(ji);inputBindingEnabled=b(jl,{optional:!0})!==null;titleStrategy=b(Dp);options=b(Yi,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=b(Ul);createViewTransition=b(c0,{optional:!0});navigationErrorHandler=b(l0,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>J(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=i=>this.events.next(new Il(i)),r=i=>this.events.next(new xl(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;Fe(()=>{this.transitions?.next(Y(D({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(e){return this.transitions=new Ne(null),this.transitions.pipe(Ze(r=>r!==null),rt(r=>{let i=!1,o=new AbortController;return J(r).pipe(rt(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",ut.SupersededByNewNavigation),ht;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?Y(D({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!c&&l!=="reload")return this.events.next(new Sn(s.id,this.urlSerializer.serialize(s.rawUrl),"",Ss.IgnoredSameUrlNavigation)),s.resolve(!1),ht;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return J(s).pipe(rt(u=>(this.events.next(new Vr(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?ht:Promise.resolve(u))),BT(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),it(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let d=new Is(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:u,extractedUrl:d,source:h,restoredState:f,extras:p}=s,m=new Vr(u,this.urlSerializer.serialize(d),h,f);this.events.next(m);let C=$b(this.rootComponentType).snapshot;return this.currentTransition=r=Y(D({},s),{targetSnapshot:C,urlAfterRedirects:d,extras:Y(D({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(w=>(w.finalUrl=d,w)),J(r)}else return this.events.next(new Sn(s.id,this.urlSerializer.serialize(s.extractedUrl),"",Ss.IgnoredByUrlHandlingStrategy)),s.resolve(!1),ht}),it(s=>{let a=new Cl(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),te(s=>(this.currentTransition=r=Y(D({},s),{guards:rT(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),pT(this.environmentInjector,s=>this.events.next(s)),it(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw kl(this.urlSerializer,s.guardsResult);let a=new El(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Ze(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",ut.GuardRejected),!1)),cp(s=>{if(s.guards.canActivateChecks.length!==0)return J(s).pipe(it(a=>{let c=new Dl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),rt(a=>{let c=!1;return J(a).pipe(HT(this.paramsInheritanceStrategy,this.environmentInjector),it({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",ut.NoDataFromResolver)}}))}),it(a=>{let c=new Sl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),cp(s=>{let a=l=>{let u=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let d=qi(l)??this.environmentInjector;u.push(this.configLoader.loadComponent(d,l.routeConfig).then(h=>{l.component=h}))}for(let d of l.children)u.push(...a(d));return u},c=a(s.targetSnapshot.root);return c.length===0?J(s):xe(Promise.all(c).then(()=>s))}),cp(()=>this.afterPreactivation()),rt(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?xe(c).pipe(te(()=>r)):J(r)}),te(s=>{let a=JM(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=Y(D({},s),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),it(()=>{this.events.next(new xs)}),nT(this.rootContexts,e.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),nt(1),lr(Yb(o.signal).pipe(Ze(()=>!i&&!r.targetRouterState),it(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",ut.Aborted)}))),it({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=YT,a)),this.lastSuccessfulNavigation.set(Fe(this.currentNavigation)),this.events.next(new Kt(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),lr(this.transitionAbortWithErrorSubject.pipe(it(s=>{throw s}))),Dd(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",ut.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),gi(s=>{if(this.destroyed)return r.resolve(!1),ht;if(i=!0,Wb(s))this.events.next(new ln(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),tT(s)?this.events.next(new Hi(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Bi(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=ct(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof zi){let{message:l,cancellationCode:u}=kl(this.urlSerializer,c);this.events.next(new ln(r.id,this.urlSerializer.serialize(r.extractedUrl),l,u)),this.events.next(new Hi(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return ht}))}))}cancelNavigationTransition(e,r,i){let o=new ln(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Fe(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return e.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ZT(n){return n!==Cs}var d0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:()=>b(QT),providedIn:"root"})}return n})(),Ll=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},QT=(()=>{class n extends Ll{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(n)))(i||n)}})();static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Sp=(()=>{class n{urlSerializer=b(Rs);options=b(Yi,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=b(ji);urlHandlingStrategy=b(Ul);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Wt;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:r,targetBrowserUrl:i}){let o=e!==void 0?this.urlHandlingStrategy.merge(e,r):r,s=i??o;return s instanceof Wt?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:e,finalUrl:r,initialUrl:i}){r&&e?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=e):this.rawUrlTree=i}routerState=$b(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:()=>b(f0),providedIn:"root"})}return n})(),f0=(()=>{class n extends Sp{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{e(r.url,r.state,"popstate")})})}handleRouterEvent(e,r){e instanceof Vr?this.updateStateMemento():e instanceof Sn?this.commitTransition(r):e instanceof Is?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof xs?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof ln&&e.code!==ut.SupersededByNewNavigation&&e.code!==ut.Redirect?this.restoreHistory(r):e instanceof Bi?this.restoreHistory(r,!0):e instanceof Kt&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(e)||o){let a=this.browserPageId,c=D(D({},s),this.generateNgRouterState(i,a));this.location.replaceState(e,"",c)}else{let a=D(D({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===e.finalUrl&&o===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(n)))(i||n)}})();static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ip(n,t){n.events.pipe(Ze(e=>e instanceof Kt||e instanceof ln||e instanceof Bi||e instanceof Sn),te(e=>e instanceof Kt||e instanceof Sn?0:(e instanceof ln?e.code===ut.Redirect||e.code===ut.SupersededByNewNavigation:!1)?2:1),Ze(e=>e!==2),nt(1)).subscribe(()=>{t()})}var JT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},XT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Xe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=b(Fh);stateManager=b(Sp);options=b(Yi,{optional:!0})||{};pendingTasks=b(Vn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=b(u0);urlSerializer=b(Rs);location=b(ji);urlHandlingStrategy=b(Ul);injector=b(Ve);_events=new _e;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=b(d0);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=b(ks,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!b(jl,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Re;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Fe(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ln&&r.code!==ut.Redirect&&r.code!==ut.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Kt)this.navigated=!0;else if(r instanceof Hi){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=D({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||ZT(i.source)},s);this.scheduleNavigation(a,Cs,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}KM(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Cs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r,i)=>{this.navigateToSyncWithBrowser(e,i,r)})}navigateToSyncWithBrowser(e,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=D({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(e);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(Vt)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Fe(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Ep),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=D(D({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=Lb(h)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),d=this.currentUrlTree.root}return jb(d,e,u,l??null,this.urlSerializer)}navigateByUrl(e,r={skipLocationChange:!1}){let i=Gn(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Cs,null,r)}navigate(e,r={skipLocationChange:!1}){return eO(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.console.warn(mr(4018,!1)),this.urlSerializer.parse("/")}}isActive(e,r){let i;if(r===!0?i=D({},JT):r===!1?i=D({},XT):i=r,Gn(e))return mb(this.currentUrlTree,e,i);let o=this.parseUrl(e);return mb(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.entries(e).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(e,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,h)=>{a=d,c=h});let u=this.pendingTasks.add();return Ip(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eO(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new M(4008,!1)}var Zi=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=N(null);get href(){return Fe(this.reactiveHref)}set href(e){this.reactiveHref.set(e)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new _e;applicationErrorHandler=b(Vt);options=b(Yi,{optional:!0});constructor(e,r,i,o,s,a){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(b(new sl("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let e=this.preserveFragment,r=i=>i==="merge"||i==="preserve";e||=r(this.queryParamsHandling),e||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),e&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Kt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Gn(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.reactiveHref.set(e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e))??"":null)}applyAttributeValue(e,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,e,r):i.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:Gn(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(U(Xe),U(Yt),ns("tabindex"),U(En),U(bt),U(Li))};static \u0275dir=Se({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&V("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Nr("href",i.reactiveHref(),bh)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",fs],skipLocationChange:[2,"skipLocationChange","skipLocationChange",fs],replaceUrl:[2,"replaceUrl","replaceUrl",fs],routerLink:"routerLink"},features:[_t]})}return n})(),xp=(()=>{class n{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new he;link=b(Zi,{optional:!0});constructor(e,r,i,o){this.router=e,this.element=r,this.renderer=i,this.cdr=o,this.routerEventsSubscription=e.events.subscribe(s=>{s instanceof Kt&&this.update()})}ngAfterContentInit(){J(this.links.changes,J(null)).pipe(hi()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=xe(e).pipe(hi()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){let r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let r=nO(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?e.isActive(o,r):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static \u0275fac=function(r){return new(r||n)(U(Xe),U(bt),U(En),U(Fi))};static \u0275dir=Se({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&$h(o,Zi,5),r&2){let s;Bh(s=Hh())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[_t]})}return n})();function nO(n){return!!n.paths}var rO=new P("");function Mp(n,...t){return Xt([{provide:ks,multi:!0,useValue:n},[],{provide:Yt,useFactory:iO},{provide:il,multi:!0,useFactory:oO},t.map(e=>e.\u0275providers)])}function iO(){return b(Xe).routerState.root}function oO(){let n=b(st);return t=>{let e=n.get(an);if(t!==e.components[0])return;let r=n.get(Xe),i=n.get(sO);n.get(aO)===1&&r.initialNavigation(),n.get(cO,null,{optional:!0})?.setUpPreloading(),n.get(rO,null,{optional:!0})?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var sO=new P("",{factory:()=>new _e}),aO=new P("",{factory:()=>1});var cO=new P("");var Op="Service workers are disabled or not supported by this browser",Qi=class{serviceWorker;worker;registration;events;constructor(t,e){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=new K(r=>r.error(new M(5601,!1)));else{let r=null,i=new _e;this.worker=new K(l=>(r!==null&&l.next(r),i.subscribe(u=>l.next(u))));let o=()=>{let{controller:l}=t;l!==null&&(r=l,i.next(r))};t.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(rt(()=>t.getRegistration().then(l=>{if(!l)throw new M(5601,!1);return l})));let s=new _e;this.events=s.asObservable();let a=l=>{let{data:u}=l;u?.type&&s.next(u)};t.addEventListener("message",a),e?.get(an,null,{optional:!0})?.onDestroy(()=>{t.removeEventListener("controllerchange",o),t.removeEventListener("message",a)})}}postMessage(t,e){return new Promise(r=>{this.worker.pipe(nt(1)).subscribe(i=>{i.postMessage(D({action:t},e)),r()})})}postMessageWithOperation(t,e,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(t,e);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let e;return typeof t=="string"?e=r=>r.type===t:e=r=>t.includes(r.type),this.events.pipe(Ze(e))}nextEventOfType(t){return this.eventsOfType(t).pipe(nt(1))}waitForOperationCompleted(t){return new Promise((e,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(Ze(i=>i.nonce===t),nt(1),te(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:e,error:r})})}get isEnabled(){return!!this.serviceWorker}},lO=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new _e;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=gn,this.notificationClicks=gn,this.notificationCloses=gn,this.pushSubscriptionChanges=gn,this.subscription=gn;return}this.messages=this.sw.eventsOfType("PUSH").pipe(te(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(te(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(te(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(te(i=>i.data)),this.pushManager=this.sw.registration.pipe(te(i=>i.pushManager));let r=this.pushManager.pipe(rt(i=>i.getSubscription()));this.subscription=new K(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Op));let r={userVisibleOnly:!0},i=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,a)=>{this.pushManager.pipe(rt(c=>c.subscribe(r)),nt(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),s(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Op));let e=r=>{if(r===null)throw new M(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new M(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(nt(1),rt(e)).subscribe({next:r,error:i})})}decodeBase64(e){return atob(e)}static \u0275fac=function(r){return new(r||n)(L(Qi))};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})(),Ap=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=gn,this.unrecoverable=gn;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Op));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let e=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new M(5601,!1));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(r){return new(r||n)(L(Qi))};static \u0275prov=R({token:n,factory:n.\u0275fac})}return n})(),p0=new P("");function uO(){let n=b(Fs);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let t=b(p0),e=b(at),r=b(an);e.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),e.runOutsideAngular(()=>{let i,{registrationStrategy:o}=n;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...a]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=h0(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),h0(+a[0])]);break;default:throw new M(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(t,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(s=>console.error(mr(5604,!1)))})})}function h0(n){return new Promise(t=>setTimeout(t,n))}function dO(){let n=b(Fs),t=b(st),e=!0;return new Qi(e&&n.enabled!==!1?navigator.serviceWorker:void 0,t)}var Fs=class{enabled;updateViaCache;type;scope;registrationStrategy};function g0(n,t={}){return Xt([lO,Ap,{provide:p0,useValue:n},{provide:Fs,useValue:t},{provide:Qi,useFactory:dO},rl(uO)])}function Rp(n){n||(n=b(lt));let t=new K(e=>{if(n.destroyed){e.next();return}return n.onDestroy(e.next.bind(e))});return e=>e.pipe(lr(t))}function m0(n,t){let r=!t?.manualCleanup?t?.injector?.get(lt)??b(lt):null,i=fO(t?.equal),o;t?.requireSync?o=N({kind:0},{equal:i}):o=N({kind:1,value:t?.initialValue},{equal:i});let s,a=n.subscribe({next:c=>o.set({kind:1,value:c}),error:c=>{o.set({kind:2,error:c}),s?.()},complete:()=>{s?.()}});if(t?.requireSync&&o().kind===0)throw new M(601,!1);return s=r?.onDestroy(a.unsubscribe.bind(a)),qe(()=>{let c=o();switch(c.kind){case 1:return c.value;case 2:throw c.error;case 0:throw new M(601,!1)}},{equal:t?.equal})}function fO(n=Object.is){return(t,e)=>t.kind===1&&e.kind===1&&n(t.value,e.value)}be();var v0=n=>n?(...t)=>n(...t):(...t)=>fetch(...t);var Ls=class extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}},$l=class extends Ls{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},js=class extends Ls{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},Vs=class extends Ls{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},Np=(function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n})(Np||{});var Us=class{constructor(t,{headers:e={},customFetch:r,region:i=Np.Any}={}){this.url=t,this.headers=e,this.region=i,this.fetch=v0(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return S(this,arguments,void 0,function*(e,r={}){var i;let o,s;try{let{headers:a,method:c,body:l,signal:u,timeout:d}=r,h={},{region:f}=r;f||(f=this.region);let p=new URL(`${this.url}/${e}`);f&&f!=="any"&&(h["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let m;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",m=l):typeof l=="string"?(h["Content-Type"]="text/plain",m=l):typeof FormData<"u"&&l instanceof FormData?m=l:(h["Content-Type"]="application/json",m=JSON.stringify(l)):m=l;let C=u;d&&(s=new AbortController,o=setTimeout(()=>s.abort(),d),u?(C=s.signal,u.addEventListener("abort",()=>s.abort())):C=s.signal);let w=yield this.fetch(p.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:m,signal:C}).catch(ae=>{throw new $l(ae)}),z=w.headers.get("x-relay-error");if(z&&z==="true")throw new js(w);if(!w.ok)throw new Vs(w);let T=((i=w.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),O;return T==="application/json"?O=yield w.json():T==="application/octet-stream"||T==="application/pdf"?O=yield w.blob():T==="text/event-stream"?O=w:T==="multipart/form-data"?O=yield w.formData():O=yield w.text(),{data:O,error:null,response:w}}catch(a){return{data:null,error:a,response:a instanceof Vs||a instanceof js?a.context:void 0}}finally{o&&clearTimeout(o)}})}};var Zp=IC(I0(),1),{PostgrestClient:x0,PostgrestQueryBuilder:Sz,PostgrestFilterBuilder:Iz,PostgrestTransformBuilder:xz,PostgrestBuilder:Mz,PostgrestError:EO}=Zp.default||Zp;var Qp=class{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){let e=process.versions;if(e&&e.node){let r=e.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let t=this.detectEnvironment();if(t.constructor)return t.constructor;let e=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(e+=`

Suggested solution: ${t.workaround}`),new Error(e)}static createWebSocket(t,e){let r=this.getWebSocketConstructor();return new r(t,e)}static isWebSocketSupported(){try{let t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}},Jp=Qp;var M0="2.86.0";var T0=`realtime-js/${M0}`,Xp="1.0.0",O0="2.0.0",eg=Xp;var Bs=1e4,A0=1e3,R0=100,$r=(function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n})($r||{}),Le=(function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n})(Le||{}),Ot=(function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n})(Ot||{}),tg=(function(n){return n.websocket="websocket",n})(tg||{}),Br=(function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n})(Br||{});var Hl=class{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,e){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return e(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return e(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var e;return this._isArrayBuffer((e=t.payload)===null||e===void 0?void 0:e.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var e,r;let i=(r=(e=t.payload)===null||e===void 0?void 0:e.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var e,r;let i=(r=(e=t.payload)===null||e===void 0?void 0:e.payload)!==null&&r!==void 0?r:{},s=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(t,e,r){var i,o;let s=t.topic,a=(i=t.ref)!==null&&i!==void 0?i:"",c=(o=t.join_ref)!==null&&o!==void 0?o:"",l=t.payload.event,u=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(u).length===0?"":JSON.stringify(u);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);let h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+s.length+l.length+d.length,f=new ArrayBuffer(this.HEADER_LENGTH+h),p=new DataView(f),m=0;p.setUint8(m++,this.KINDS.userBroadcastPush),p.setUint8(m++,c.length),p.setUint8(m++,a.length),p.setUint8(m++,s.length),p.setUint8(m++,l.length),p.setUint8(m++,d.length),p.setUint8(m++,e),Array.from(c,w=>p.setUint8(m++,w.charCodeAt(0))),Array.from(a,w=>p.setUint8(m++,w.charCodeAt(0))),Array.from(s,w=>p.setUint8(m++,w.charCodeAt(0))),Array.from(l,w=>p.setUint8(m++,w.charCodeAt(0))),Array.from(d,w=>p.setUint8(m++,w.charCodeAt(0)));var C=new Uint8Array(f.byteLength+r.byteLength);return C.set(new Uint8Array(f),0),C.set(new Uint8Array(r),f.byteLength),C.buffer}decode(t,e){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return e(r)}if(typeof t=="string"){let r=JSON.parse(t),[i,o,s,a,c]=r;return e({join_ref:i,ref:o,topic:s,event:a,payload:c})}return e({})}_binaryDecode(t){let e=new DataView(t),r=e.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,e,i)}}_decodeUserBroadcast(t,e,r){let i=e.getUint8(1),o=e.getUint8(2),s=e.getUint8(3),a=e.getUint8(4),c=this.HEADER_LENGTH+4,l=r.decode(t.slice(c,c+i));c=c+i;let u=r.decode(t.slice(c,c+o));c=c+o;let d=r.decode(t.slice(c,c+s));c=c+s;let h=t.slice(c,t.byteLength),f=a===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,p={type:this.BROADCAST_EVENT,event:u,payload:f};return s>0&&(p.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(t){var e;return t instanceof ArrayBuffer||((e=t?.constructor)===null||e===void 0?void 0:e.name)==="ArrayBuffer"}_pick(t,e){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>e.includes(r)))}};var Xi=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var me=(function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n})(me||{}),rg=(n,t,e={})=>{var r;let i=(r=e.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,s)=>(o[s]=DO(s,n,t,i),o),{}):{}},DO=(n,t,e,r)=>{let i=t.find(a=>a.name===n),o=i?.type,s=e[n];return o&&!r.includes(o)?N0(o,s):ng(s)},N0=(n,t)=>{if(n.charAt(0)==="_"){let e=n.slice(1,n.length);return MO(t,e)}switch(n){case me.bool:return SO(t);case me.float4:case me.float8:case me.int2:case me.int4:case me.int8:case me.numeric:case me.oid:return IO(t);case me.json:case me.jsonb:return xO(t);case me.timestamp:return TO(t);case me.abstime:case me.date:case me.daterange:case me.int4range:case me.int8range:case me.money:case me.reltime:case me.text:case me.time:case me.timestamptz:case me.timetz:case me.tsrange:case me.tstzrange:return ng(t);default:return ng(t)}},ng=n=>n,SO=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},IO=n=>{if(typeof n=="string"){let t=parseFloat(n);if(!Number.isNaN(t))return t}return n},xO=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},MO=(n,t)=>{if(typeof n!="string")return n;let e=n.length-1,r=n[e];if(n[0]==="{"&&r==="}"){let o,s=n.slice(1,e);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>N0(t,a))}return n},TO=n=>typeof n=="string"?n.replace(" ","T"):n,zl=n=>{let t=new URL(n);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};var eo=class{constructor(t,e,r={},i=Bs){this.channel=t,this.event=e,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var Hs=class n{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,i,o,s),this.pendingDiffs.forEach(c=>{this.state=n.syncDiff(this.state,c,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=n.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,i){let o=this.cloneDeep(t),s=this.transformState(e),a={},c={};return this.map(o,(l,u)=>{s[l]||(c[l]=u)}),this.map(s,(l,u)=>{let d=o[l];if(d){let h=u.map(C=>C.presence_ref),f=d.map(C=>C.presence_ref),p=u.filter(C=>f.indexOf(C.presence_ref)<0),m=d.filter(C=>h.indexOf(C.presence_ref)<0);p.length>0&&(a[l]=p),m.length>0&&(c[l]=m)}else a[l]=u}),this.syncDiff(o,{joins:a,leaves:c},r,i)}static syncDiff(t,e,r,i){let{joins:o,leaves:s}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,c)=>{var l;let u=(l=t[a])!==null&&l!==void 0?l:[];if(t[a]=this.cloneDeep(c),u.length>0){let d=t[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...h)}r(a,u,c)}),this.map(s,(a,c)=>{let l=t[a];if(!l)return;let u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=l,i(a,l,c),l.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{let i=t[r];return"metas"in i?e[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):e[r]=i,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var zs=(function(n){return n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system",n})(zs||{}),In=(function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n})(In||{});var Gs=class n{constructor(t,e={config:{}},r){var i,o;if(this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=Le.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new eo(this,Ot.join,this.params,this.timeout),this.rejoinTimer=new Xi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Le.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Le.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Le.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ot.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Hs(this),this.broadcastEndpointURL=zl(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,e=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Le.closed){let{config:{broadcast:s,presence:a,private:c}}=this.params,l=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[zs.PRESENCE]&&this.bindings[zs.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},h={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:l,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>t?.(In.CHANNEL_ERROR,f)),this._onClose(()=>t?.(In.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket.setAuth(),f===void 0){t?.(In.SUBSCRIBED);return}else{let m=this.bindings.postgres_changes,C=(p=m?.length)!==null&&p!==void 0?p:0,w=[];for(let z=0;z<C;z++){let T=m[z],{filter:{event:O,schema:ae,table:Zt,filter:ge}}=T,ye=f&&f[z];if(ye&&ye.event===O&&ye.schema===ae&&ye.table===Zt&&ye.filter===ge)w.push(Object.assign(Object.assign({},T),{id:ye.id}));else{this.unsubscribe(),this.state=Le.errored,t?.(In.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t(In.SUBSCRIBED);return}}).receive("error",f=>{this.state=Le.errored,t?.(In.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t?.(In.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,e={}){return await this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,e,r){return this.state===Le.joined&&t===zs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,e,r)}async httpSend(t,e,r={}){var i;let o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(e==null)return Promise.reject("Payload is required for httpSend()");let s={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:e,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let c=a.statusText;try{let l=await a.json();c=l.error||l.message||c}catch{}return Promise.reject(new Error(c))}async send(t,e={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:o,payload:s}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{let l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=e.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=l.body)===null||i===void 0?void 0:i.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var s,a,c;let l=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(a=(s=this.params)===null||s===void 0?void 0:s.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),l.receive("ok",()=>o("ok")),l.receive("error",()=>o("error")),l.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Le.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ot.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new eo(this,Ot.leave,{},t),r.receive("ok",()=>{e(),i("ok")}).receive("timeout",()=>{e(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Le.closed,this.bindings={}}async _fetchWithTimeout(t,e,r){let i=new AbortController,o=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(o),s}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new eo(this,t,e,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>R0){let e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var i,o;let s=t.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=Ot;if(r&&[a,c,l,u].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,e,r);if(e&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var p,m,C;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((C=(m=f.filter)===null||m===void 0?void 0:m.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===s}).map(f=>f.callback(h,r)):(o=this.bindings[s])===null||o===void 0||o.filter(f=>{var p,m,C,w,z,T;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in f){let O=f.id,ae=(p=f.filter)===null||p===void 0?void 0:p.event;return O&&((m=e.ids)===null||m===void 0?void 0:m.includes(O))&&(ae==="*"||ae?.toLocaleLowerCase()===((C=e.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{let O=(z=(w=f?.filter)===null||w===void 0?void 0:w.event)===null||z===void 0?void 0:z.toLocaleLowerCase();return O==="*"||O===((T=e?.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===s}).map(f=>{if(typeof h=="object"&&"ids"in h){let p=h.data,{schema:m,table:C,commit_timestamp:w,type:z,errors:T}=p;h=Object.assign(Object.assign({},{schema:m,table:C,commit_timestamp:w,eventType:z,new:{},old:{},errors:T}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===Le.closed}_isJoined(){return this.state===Le.joined}_isJoining(){return this.state===Le.joining}_isLeaving(){return this.state===Le.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){let i=t.toLocaleLowerCase(),o={type:i,filter:e,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,e){let r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&n.isEqual(i.filter,e))})),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ot.close,{},t)}_onError(t){this._on(Ot.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Le.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=rg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=rg(t.columns,t.old_record)),e}};var ig=()=>{},Gl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},AO=[1e3,2e3,5e3,1e4],RO=1e4,NO=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,qs=class{constructor(t,e){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Bs,this.transport=null,this.heartbeatIntervalMs=Gl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ig,this.ref=0,this.reconnectTimer=null,this.vsn=eg,this.logger=ig,this.conn=null,this.sendBuffer=[],this.serializer=new Hl,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=e?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${t}/${tg.websocket}`,this.httpEndpoint=zl(t),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Jp.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let e=t.message;throw e.includes("Node.js")?new Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,e??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){let e=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),e}async removeAllChannels(){let t=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case $r.connecting:return Br.Connecting;case $r.open:return Br.Open;case $r.closing:return Br.Closing;default:return Br.Closed}}isConnected(){return this.connectionState()===Br.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,e={config:{}}){let r=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{let o=new Gs(`realtime:${t}`,e,this);return this.channels.push(o),o}}push(t){let{topic:e,event:r,payload:i,ref:o}=t,s=()=>{this.encode(t,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${e} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(A0,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout()},Gl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,e=>{if(e.topic==="phoenix"&&e.event==="phx_reply")try{this.heartbeatCallback(e.payload.status==="ok"?"ok":"error")}catch(l){this.log("error","error in heartbeat callback",l)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:r,event:i,payload:o,ref:s}=e,a=s?`(${s})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${i} ${a}`.trim(),o),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(i,o,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(t){var e;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((e=this.reconnectTimer)===null||e===void 0||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===$r.open||this.conn.readyState===$r.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var e;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ot.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;let r=t.match(/\?/)?"&":"?",i=new URLSearchParams(e);return`${t}${r}${i}`}_workerObjectUrl(t){let e;if(t)e=t;else{let r=new Blob([NO],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}_setConnectionState(t,e=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=e)}async _performAuth(t=null){let e;t?e=t:this.accessToken?e=await this.accessToken():e=this.accessTokenValue,this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(r=>{let i={access_token:e,version:T0};e&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Ot.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(e=>{this.log("error",`error setting auth in ${t}`,e)})}_triggerStateCallbacks(t,e){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(e)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Xi(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Gl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var e,r,i,o,s,a,c,l,u,d,h,f;switch(this.transport=(e=t?.transport)!==null&&e!==void 0?e:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:Bs,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:Gl.HEARTBEAT_INTERVAL,this.worker=(o=t?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(s=t?.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(a=t?.heartbeatCallback)!==null&&a!==void 0?a:ig,this.vsn=(c=t?.vsn)!==null&&c!==void 0?c:eg,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t?.reconnectAfterMs)!==null&&l!==void 0?l:p=>AO[p-1]||RO,this.vsn){case Xp:this.encode=(u=t?.encode)!==null&&u!==void 0?u:(p,m)=>m(JSON.stringify(p)),this.decode=(d=t?.decode)!==null&&d!==void 0?d:(p,m)=>m(JSON.parse(p));break;case O0:this.encode=(h=t?.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(f=t?.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};be();var qn=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function fe(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var ql=class extends qn{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Hr=class extends qn{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};be();var to=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),P0=()=>Response,Wl=n=>{if(Array.isArray(n))return n.map(e=>Wl(e));if(typeof n=="function"||n!==Object(n))return n;let t={};return Object.entries(n).forEach(([e,r])=>{let i=e.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=Wl(r)}),t},k0=n=>{if(typeof n!="object"||n===null)return!1;let t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},F0=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);var og=n=>{var t;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(t=n.error)===null||t===void 0?void 0:t.message)||JSON.stringify(n)},PO=(n,t,e)=>S(void 0,void 0,void 0,function*(){let r=yield P0();n instanceof r&&!e?.noResolveJson?n.json().then(i=>{let o=n.status||500,s=i?.statusCode||o+"";t(new ql(og(i),o,s))}).catch(i=>{t(new Hr(og(i),i))}):t(new Hr(og(n),n))}),kO=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"||!r?i:(k0(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),e))};function Ws(n,t,e,r,i,o){return S(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(e,kO(t,r,i,o)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>PO(c,a,r))})})}function Wn(n,t,e,r){return S(this,void 0,void 0,function*(){return Ws(n,"GET",t,e,r)})}function gt(n,t,e,r,i){return S(this,void 0,void 0,function*(){return Ws(n,"POST",t,r,i,e)})}function Ks(n,t,e,r,i){return S(this,void 0,void 0,function*(){return Ws(n,"PUT",t,r,i,e)})}function L0(n,t,e,r){return S(this,void 0,void 0,function*(){return Ws(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}function no(n,t,e,r,i){return S(this,void 0,void 0,function*(){return Ws(n,"DELETE",t,r,i,e)})}be();be();var Kl=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}execute(){return S(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(fe(t))return{data:null,error:t};throw t}})}};var j0,sg=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[j0]="BlobDownloadBuilder",this.promise=null}asStream(){return new Kl(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return S(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(fe(t))return{data:null,error:t};throw t}})}};j0=Symbol.toStringTag;var V0=sg;var FO={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},U0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},Yl=class{constructor(t,e={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=to(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,e,r,i){return S(this,void 0,void 0,function*(){try{let o,s=Object.assign(Object.assign({},U0),i),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)}),c=s.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.has("cacheControl")||o.append("cacheControl",s.cacheControl),c&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(c))):(o=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!s.duplex&&(s.duplex="half")),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));let l=this._removeEmptyFolders(e),u=this._getFinalPath(l),d=yield(t=="PUT"?Ks:gt)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(fe(o))return{data:null,error:o};throw o}})}upload(t,e,r){return S(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,i){return S(this,void 0,void 0,function*(){let o=this._removeEmptyFolders(t),s=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",e);try{let c,l=Object.assign({upsert:U0.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);let d=yield Ks(this.fetch,a.toString(),c,{headers:u});return{data:{path:o,fullPath:d.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(fe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,e){return S(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),i=Object.assign({},this.headers);e?.upsert&&(i["x-upsert"]="true");let o=yield gt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+o.url),a=s.searchParams.get("token");if(!a)throw new qn("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fe(r))return{data:null,error:r};throw r}})}update(t,e,r){return S(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e,r){return S(this,void 0,void 0,function*(){try{return{data:yield gt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(fe(i))return{data:null,error:i};throw i}})}copy(t,e,r){return S(this,void 0,void 0,function*(){try{return{data:{path:(yield gt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(fe(i))return{data:null,error:i};throw i}})}createSignedUrl(t,e,r){return S(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield gt(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(fe(i))return{data:null,error:i};throw i}})}createSignedUrls(t,e,r){return S(this,void 0,void 0,function*(){try{let i=yield gt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(fe(i))return{data:null,error:i};throw i}})}download(t,e){let i=typeof e?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(e?.transform||{}),s=o?`?${o}`:"",a=this._getFinalPath(t),c=()=>Wn(this.fetch,`${this.url}/${i}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new V0(c,this.shouldThrowOnError)}info(t){return S(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{let r=yield Wn(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:Wl(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fe(r))return{data:null,error:r};throw r}})}exists(t){return S(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{return yield L0(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fe(r)&&r instanceof Hr){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,e){let r=this._getFinalPath(t),i=[],o=e?.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&i.push(o);let a=typeof e?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(e?.transform||{});c!==""&&i.push(c);let l=i.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(t){return S(this,void 0,void 0,function*(){try{return{data:yield no(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(fe(e))return{data:null,error:e};throw e}})}list(t,e,r){return S(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},FO),e),{prefix:t||""});return{data:yield gt(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(fe(i))return{data:null,error:i};throw i}})}listV2(t,e){return S(this,void 0,void 0,function*(){try{let r=Object.assign({},t);return{data:yield gt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fe(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};be();var Zl="2.86.0";var Ql={"X-Client-Info":`storage-js/${Zl}`};var Jl=class{constructor(t,e={},r,i){this.shouldThrowOnError=!1;let o=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ql),e),this.fetch=to(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return S(this,void 0,void 0,function*(){try{let e=this.listBucketOptionsToQueryString(t);return{data:yield Wn(this.fetch,`${this.url}/bucket${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(fe(e))return{data:null,error:e};throw e}})}getBucket(t){return S(this,void 0,void 0,function*(){try{return{data:yield Wn(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(fe(e))return{data:null,error:e};throw e}})}createBucket(t){return S(this,arguments,void 0,function*(e,r={public:!1}){try{return{data:yield gt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(fe(i))return{data:null,error:i};throw i}})}updateBucket(t,e){return S(this,void 0,void 0,function*(){try{return{data:yield Ks(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fe(r))return{data:null,error:r};throw r}})}emptyBucket(t){return S(this,void 0,void 0,function*(){try{return{data:yield gt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(fe(e))return{data:null,error:e};throw e}})}deleteBucket(t){return S(this,void 0,void 0,function*(){try{return{data:yield no(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(fe(e))return{data:null,error:e};throw e}})}listBucketOptionsToQueryString(t){let e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}};be();var Ys=class extends Error{constructor(n,t){super(n),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function LO(n,t,e){let r=new URL(t,n);if(e)for(let[i,o]of Object.entries(e))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function jO(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function VO(n){let t=n.fetchImpl??globalThis.fetch;return{async request({method:e,path:r,query:i,body:o,headers:s}){let a=LO(n.baseUrl,r,i),c=await jO(n.auth),l=await t(a,{method:e,headers:D(D(D({},o?{"Content-Type":"application/json"}:{}),c),s),body:o?JSON.stringify(o):void 0}),u=await l.text(),d=(l.headers.get("content-type")||"").includes("application/json"),h=d&&u?JSON.parse(u):u;if(!l.ok){let f=d?h:void 0,p=f?.error;throw new Ys(p?.message??`Request failed with status ${l.status}`,{status:l.status,icebergType:p?.type,icebergCode:p?.code,details:f})}return{status:l.status,headers:l.headers,data:h}}}}function Xl(n){return n.join("")}var UO=class{constructor(n,t=""){this.client=n,this.prefix=t}async listNamespaces(n){let t=n?{parent:Xl(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(n,t){let e={namespace:n.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:e})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Xl(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Xl(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Xl(n.namespace)}`}),!0}catch(t){if(t instanceof Ys&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(n,t){try{return await this.createNamespace(n,t)}catch(e){if(e instanceof Ys&&e.status===409)return;throw e}}};function ro(n){return n.join("")}var $O=class{constructor(n,t="",e){this.client=n,this.prefix=t,this.accessDelegation=e}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ro(n.namespace)}/tables`})).data.identifiers}async createTable(n,t){let e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ro(n.namespace)}/tables`,body:t,headers:e})).data.metadata}async updateTable(n,t){let e=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ro(n.namespace)}/tables/${n.name}`,body:t});return{"metadata-location":e.data["metadata-location"],metadata:e.data.metadata}}async dropTable(n,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ro(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(n){let t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ro(n.namespace)}/tables/${n.name}`,headers:t})).data.metadata}async tableExists(n){let t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ro(n.namespace)}/tables/${n.name}`,headers:t}),!0}catch(e){if(e instanceof Ys&&e.status===404)return!1;throw e}}async createTableIfNotExists(n,t){try{return await this.createTable(n,t)}catch(e){if(e instanceof Ys&&e.status===409)return await this.loadTable({namespace:n.namespace,name:t.name});throw e}}},$0=class{constructor(n){let t="v1";n.catalogName&&(t+=`/${n.catalogName}`);let e=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=VO({baseUrl:e,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=n.accessDelegation?.join(","),this.namespaceOps=new UO(this.client,t),this.tableOps=new $O(this.client,t,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,t){return this.namespaceOps.createNamespace(n,t)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,t){return this.tableOps.createTable(n,t)}async updateTable(n,t){return this.tableOps.updateTable(n,t)}async dropTable(n,t){await this.tableOps.dropTable(n,t)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,t){return this.namespaceOps.createNamespaceIfNotExists(n,t)}async createTableIfNotExists(n,t){return this.tableOps.createTableIfNotExists(n,t)}};var eu=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ql),e),this.fetch=to(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return S(this,void 0,void 0,function*(){try{return{data:yield gt(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(fe(e))return{data:null,error:e};throw e}})}listBuckets(t){return S(this,void 0,void 0,function*(){try{let e=new URLSearchParams;t?.limit!==void 0&&e.set("limit",t.limit.toString()),t?.offset!==void 0&&e.set("offset",t.offset.toString()),t?.sortColumn&&e.set("sortColumn",t.sortColumn),t?.sortOrder&&e.set("sortOrder",t.sortOrder),t?.search&&e.set("search",t.search);let r=e.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Wn(this.fetch,i,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(fe(e))return{data:null,error:e};throw e}})}deleteBucket(t){return S(this,void 0,void 0,function*(){try{return{data:yield no(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(fe(e))return{data:null,error:e};throw e}})}from(t){if(!F0(t))throw new qn("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new $0({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>S(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}};be();be();var io={"X-Client-Info":`storage-js/${Zl}`,"Content-Type":"application/json"};var tu=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function et(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var oo=class extends tu{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},nu=class extends tu{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};be();var so=n=>n?(...t)=>n(...t):(...t)=>fetch(...t);var B0=n=>{if(typeof n!="object"||n===null)return!1;let t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var H0=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),BO=(n,t,e)=>S(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!e?.noResolveJson){let i=n.status||500,o=n;if(typeof o.json=="function")o.json().then(s=>{let a=s?.statusCode||s?.code||i+"";t(new oo(H0(s),i,a))}).catch(()=>{let s=i+"",a=o.statusText||`HTTP ${i} error`;t(new oo(a,i,s))});else{let s=i+"",a=o.statusText||`HTTP ${i} error`;t(new oo(a,i,s))}}else t(new nu(H0(n),n))}),HO=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"||!r?i:(B0(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),e))};function zO(n,t,e,r,i,o){return S(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(e,HO(t,r,i,o)).then(c=>{if(!c.ok)throw c;if(r?.noResolveJson)return c;let l=c.headers.get("content-type");return!l||!l.includes("application/json")?{}:c.json()}).then(c=>s(c)).catch(c=>BO(c,a,r))})})}function tt(n,t,e,r,i){return S(this,void 0,void 0,function*(){return zO(n,"POST",t,r,i,e)})}var ru=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},io),e),this.fetch=so(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return S(this,void 0,void 0,function*(){try{return{data:(yield tt(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(et(e))return{data:null,error:e};throw e}})}getIndex(t,e){return S(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}})}listIndexes(t){return S(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(et(e))return{data:null,error:e};throw e}})}deleteIndex(t,e){return S(this,void 0,void 0,function*(){try{return{data:(yield tt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}})}};be();var iu=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},io),e),this.fetch=so(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return S(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield tt(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(et(e))return{data:null,error:e};throw e}})}getVectors(t){return S(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(et(e))return{data:null,error:e};throw e}})}listVectors(t){return S(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield tt(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(et(e))return{data:null,error:e};throw e}})}queryVectors(t){return S(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(et(e))return{data:null,error:e};throw e}})}deleteVectors(t){return S(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield tt(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(et(e))return{data:null,error:e};throw e}})}};be();var ou=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},io),e),this.fetch=so(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return S(this,void 0,void 0,function*(){try{return{data:(yield tt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(et(e))return{data:null,error:e};throw e}})}getBucket(t){return S(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(et(e))return{data:null,error:e};throw e}})}listBuckets(){return S(this,arguments,void 0,function*(t={}){try{return{data:yield tt(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(et(e))return{data:null,error:e};throw e}})}deleteBucket(t){return S(this,void 0,void 0,function*(){try{return{data:(yield tt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(et(e))return{data:null,error:e};throw e}})}};var Zs=class extends ou{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new su(this.url,this.headers,t,this.fetch)}createBucket(t){let e=Object.create(null,{createBucket:{get:()=>super.createBucket}});return S(this,void 0,void 0,function*(){return e.createBucket.call(this,t)})}getBucket(t){let e=Object.create(null,{getBucket:{get:()=>super.getBucket}});return S(this,void 0,void 0,function*(){return e.getBucket.call(this,t)})}listBuckets(){let t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return S(this,arguments,void 0,function*(e={}){return t.listBuckets.call(this,e)})}deleteBucket(t){let e=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return S(this,void 0,void 0,function*(){return e.deleteBucket.call(this,t)})}},su=class extends ru{constructor(t,e,r,i){super(t,e,i),this.vectorBucketName=r}createIndex(t){let e=Object.create(null,{createIndex:{get:()=>super.createIndex}});return S(this,void 0,void 0,function*(){return e.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){let t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return S(this,arguments,void 0,function*(e={}){return t.listIndexes.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){let e=Object.create(null,{getIndex:{get:()=>super.getIndex}});return S(this,void 0,void 0,function*(){return e.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){let e=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return S(this,void 0,void 0,function*(){return e.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new au(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},au=class extends iu{constructor(t,e,r,i,o){super(t,e,o),this.vectorBucketName=r,this.indexName=i}putVectors(t){let e=Object.create(null,{putVectors:{get:()=>super.putVectors}});return S(this,void 0,void 0,function*(){return e.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){let e=Object.create(null,{getVectors:{get:()=>super.getVectors}});return S(this,void 0,void 0,function*(){return e.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){let t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return S(this,arguments,void 0,function*(e={}){return t.listVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){let e=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return S(this,void 0,void 0,function*(){return e.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){let e=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return S(this,void 0,void 0,function*(){return e.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}};var Qs=class extends Jl{constructor(t,e={},r,i){super(t,e,r,i)}from(t){return new Yl(this.url,this.headers,t,this.fetch)}get vectors(){return new Zs(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new eu(this.url+"/iceberg",this.headers,this.fetch)}};var z0="2.86.0";var Js="";typeof Deno<"u"?Js="deno":typeof document<"u"?Js="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Js="react-native":Js="node";var GO={"X-Client-Info":`supabase-js-${Js}/${z0}`},G0={headers:GO},q0={schema:"public"},W0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},K0={};var qO=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),WO=()=>Headers,Y0=(n,t,e)=>{let r=qO(e),i=WO();return async(o,s)=>{var a;let c=(a=await t())!==null&&a!==void 0?a:n,l=new i(s?.headers);return l.has("apikey")||l.set("apikey",n),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},s),{headers:l}))}};function KO(n){return n.endsWith("/")?n:n+"/"}function Z0(n,t){var e,r;let{db:i,auth:o,realtime:s,global:a}=n,{db:c,auth:l,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},l),o),realtime:Object.assign(Object.assign({},u),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(e=d?.headers)!==null&&e!==void 0?e:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?h.accessToken=n.accessToken:delete h.accessToken,h}function Q0(n){let t=n?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(KO(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}be();be();var cu="2.86.0";var zr=30*1e3,lu=3,uu=lu*zr,J0="http://localhost:9999",X0="supabase.auth.token";var ew={"X-Client-Info":`gotrue-js/${cu}`};var Xs="X-Supabase-Api-Version",ag={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},tw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,nw=600*1e3;var Kn=class extends Error{constructor(t,e,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=r}};function A(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var du=class extends Kn{constructor(t,e,r){super(t,e,r),this.name="AuthApiError",this.status=e,this.code=r}};function rw(n){return A(n)&&n.name==="AuthApiError"}var At=class extends Kn{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},un=class extends Kn{constructor(t,e,r,i){super(t,r,i),this.name=e,this.status=r}},We=class extends un{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function iw(n){return A(n)&&n.name==="AuthSessionMissingError"}var xn=class extends un{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Gr=class extends un{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},qr=class extends un{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function ow(n){return A(n)&&n.name==="AuthImplicitGrantRedirectError"}var ea=class extends un{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},ao=class extends un{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}};function fu(n){return A(n)&&n.name==="AuthRetryableFetchError"}var ta=class extends un{constructor(t,e,r){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=r}};var Wr=class extends un{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};var hu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),sw=` 	
\r=`.split(""),YO=(()=>{let n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<sw.length;t+=1)n[sw[t].charCodeAt(0)]=-2;for(let t=0;t<hu.length;t+=1)n[hu[t].charCodeAt(0)]=t;return n})();function aw(n,t,e){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;e(hu[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;e(hu[r]),t.queuedBits-=6}}function cw(n,t,e){let r=YO[n];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function cg(n){let t=[],e=s=>{t.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=s=>{JO(s,r,e)};for(let s=0;s<n.length;s+=1)cw(n.charCodeAt(s),i,o);return t.join("")}function ZO(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function QO(n,t){for(let e=0;e<n.length;e+=1){let r=n.charCodeAt(e);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(n.charCodeAt(e+1)-56320&65535|i)+65536,e+=1}ZO(r,t)}}function JO(n,t,e){if(t.utf8seq===0){if(n<=127){e(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&e(t.codepoint)}}function Yn(n){let t=[],e={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<n.length;i+=1)cw(n.charCodeAt(i),e,r);return new Uint8Array(t)}function lw(n){let t=[];return QO(n,e=>t.push(e)),new Uint8Array(t)}function Mn(n){let t=[],e={queue:0,queuedBits:0},r=i=>{t.push(i)};return n.forEach(i=>aw(i,e,r)),aw(null,e,r),t.join("")}function uw(n){return Math.round(Date.now()/1e3)+n}function dw(){return Symbol("auth-callback")}var je=()=>typeof window<"u"&&typeof document<"u",Kr={tested:!1,writable:!1},pu=()=>{if(!je())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Kr.tested)return Kr.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Kr.tested=!0,Kr.writable=!0}catch{Kr.tested=!0,Kr.writable=!1}return Kr.writable};function fw(n){let t={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return e.searchParams.forEach((r,i)=>{t[i]=r}),t}var gu=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),hw=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Yr=async(n,t,e)=>{await n.setItem(t,JSON.stringify(e))},Zn=async(n,t)=>{let e=await n.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}},Tn=async(n,t)=>{await n.removeItem(t)},na=class n{constructor(){this.promise=new n.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}};na.promiseConstructor=Promise;function mu(n){let t=n.split(".");if(t.length!==3)throw new Wr("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!tw.test(t[r]))throw new Wr("JWT not in base64url format");return{header:JSON.parse(cg(t[0])),payload:JSON.parse(cg(t[1])),signature:Yn(t[2]),raw:{header:t[0],payload:t[1]}}}async function pw(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function gw(n,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{let s=await n(o);if(!t(o,null,s)){r(s);return}}catch(s){if(!t(o,s)){i(s);return}}})()})}function XO(n){return("0"+n.toString(16)).substr(-2)}function eA(){let t=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length,i="";for(let o=0;o<56;o++)i+=e.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,XO).join("")}async function tA(n){let e=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",e),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function nA(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let e=await tA(n);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Zr(n,t,e=!1){let r=eA(),i=r;e&&(i+="/PASSWORD_RECOVERY"),await Yr(n,`${t}-code-verifier`,i);let o=await nA(r);return[o,r===o?"plain":"s256"]}var rA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mw(n){let t=n.headers.get(Xs);if(!t||!t.match(rA))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function vw(n){if(!n)throw new Error("Missing exp claim");let t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function yw(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var iA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Qr(n){if(!iA.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function vu(){let n={};return new Proxy(n,{get:(t,e)=>{if(e==="__isUserNotAvailableProxy")return!0;if(typeof e=="symbol"){let r=e.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function _w(n,t){return new Proxy(n,{get:(e,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){let o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(e,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(e,r,i)}})}function lg(n){return JSON.parse(JSON.stringify(n))}var Jr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),oA=[502,503,504];async function bw(n){var t;if(!hw(n))throw new ao(Jr(n),0);if(oA.includes(n.status))throw new ao(Jr(n),n.status);let e;try{e=await n.json()}catch(o){throw new At(Jr(o),o)}let r,i=mw(n);if(i&&i.getTime()>=ag["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?r=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(r=e.error_code),r){if(r==="weak_password")throw new ta(Jr(e),n.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new We}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new ta(Jr(e),n.status,e.weak_password.reasons);throw new du(Jr(e),n.status||500,r)}var sA=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),e))};async function k(n,t,e,r){var i;let o=Object.assign({},r?.headers);o[Xs]||(o[Xs]=ag["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);let s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await aA(n,t,e+a,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}async function aA(n,t,e,r,i,o){let s=sA(t,r,i,o),a;try{a=await n(e,Object.assign({},s))}catch(c){throw console.error(c),new ao(Jr(c),0)}if(a.ok||await bw(a),r?.noResolveJson)return a;try{return await a.json()}catch(c){await bw(c)}}function Rt(n){var t;let e=null;cA(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=uw(n.expires_in)));let r=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:e,user:r},error:null}}function ug(n){let t=Rt(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)&&(t.data.weak_password=n.weak_password),t}function dn(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function ww(n){return{data:n,error:null}}function Cw(n){let{action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:o}=n,s=pn(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},s);return{data:{properties:a,user:c},error:null}}function dg(n){return n}function cA(n){return n.access_token&&n.refresh_token&&n.expires_in}var yu=["global","local","others"];var co=class{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=gu(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,e=yu[0]){if(yu.indexOf(e)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${yu.join(", ")}`);try{return await k(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(A(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,e={}){try{return await k(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:dn})}catch(r){if(A(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{let{options:e}=t,r=pn(t,["options"]),i=Object.assign(Object.assign({},r),e);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await k(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Cw,redirectTo:e?.redirectTo})}catch(e){if(A(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(t){try{return await k(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:dn})}catch(e){if(A(e))return{data:{user:null},error:e};throw e}}async listUsers(t){var e,r,i,o,s,a,c;try{let l={nextPage:null,lastPage:0,total:0},u=await k(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:dg});if(u.error)throw u.error;let d=await u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{let m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(p.split(";")[1].split("=")[1]);l[`${C}Page`]=m}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(A(l))return{data:{users:[]},error:l};throw l}}async getUserById(t){Qr(t);try{return await k(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:dn})}catch(e){if(A(e))return{data:{user:null},error:e};throw e}}async updateUserById(t,e){Qr(t);try{return await k(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:dn})}catch(r){if(A(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,e=!1){Qr(t);try{return await k(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:dn})}catch(r){if(A(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Qr(t.userId);try{let{data:e,error:r}=await k(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:e,error:r}}catch(e){if(A(e))return{data:null,error:e};throw e}}async _deleteFactor(t){Qr(t.userId),Qr(t.id);try{return{data:await k(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(A(e))return{data:null,error:e};throw e}}async _listOAuthClients(t){var e,r,i,o,s,a,c;try{let l={nextPage:null,lastPage:0,total:0},u=await k(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:dg});if(u.error)throw u.error;let d=await u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{let m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(p.split(";")[1].split("=")[1]);l[`${C}Page`]=m}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(A(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(t){try{return await k(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(A(e))return{data:null,error:e};throw e}}async _getOAuthClient(t){try{return await k(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(A(e))return{data:null,error:e};throw e}}async _updateOAuthClient(t,e){try{return await k(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(A(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await k(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(e){if(A(e))return{data:null,error:e};throw e}}async _regenerateOAuthClientSecret(t){try{return await k(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(A(e))return{data:null,error:e};throw e}}};function fg(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}var Xr={debug:!!(globalThis&&pu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},ra=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}},_u=class extends ra{};async function hg(n,t,e){Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);let r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await e()}finally{Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(t===0)throw Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new _u(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Xr.debug)try{let o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await e()}}))}function Ew(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function pg(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function Dw(n){return parseInt(n,16)}function Sw(n){let t=new TextEncoder().encode(n);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function Iw(n){var t;let{chainId:e,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:s,notBefore:a,requestId:c,resources:l,scheme:u,uri:d,version:h}=n;{if(!Number.isInteger(e))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${e}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=n.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}let f=pg(n.address),p=u?`${u}://${r}`:r,m=n.statement?`${n.statement}
`:"",C=`${p} wants you to sign in with your Ethereum account:
${f}

${m}`,w=`URI: ${d}
Version: ${h}
Chain ID: ${e}${s?`
Nonce: ${s}`:""}
Issued At: ${o.toISOString()}`;if(i&&(w+=`
Expiration Time: ${i.toISOString()}`),a&&(w+=`
Not Before: ${a.toISOString()}`),c&&(w+=`
Request ID: ${c}`),l){let z=`
Resources:`;for(let T of l){if(!T||typeof T!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${T}`);z+=`
- ${T}`}w+=z}return`${C}
${w}`}be();var Ee=class extends Error{constructor({message:t,code:e,cause:r,name:i}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=e}},ei=class extends Ee{constructor(t,e){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e,message:t}),this.name="WebAuthnUnknownError",this.originalError=e}};function xw({error:n,options:t}){var e,r,i;let{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ee({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((e=o.authenticatorSelection)===null||e===void 0?void 0:e.requireResidentKey)===!0)return new Ee({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ee({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ee({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Ee({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Ee({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return o.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Ee({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Ee({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){let s=window.location.hostname;if(gg(s)){if(o.rp.id!==s)return new Ee({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ee({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Ee({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Ee({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ee({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function Mw({error:n,options:t}){let{publicKey:e}=t;if(!e)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ee({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Ee({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){let r=window.location.hostname;if(gg(r)){if(e.rpId!==r)return new Ee({message:`The RP ID "${e.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ee({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Ee({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ee({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}var mg=class{createNewAbortSignal(){if(this.controller){let e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}let t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){let t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}},lA=new mg;function Ow(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);let{challenge:t,user:e,excludeCredentials:r}=n,i=pn(n,["challenge","user","excludeCredentials"]),o=Yn(t).buffer,s=Object.assign(Object.assign({},e),{id:Yn(e.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:o,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){let l=r[c];a.excludeCredentials[c]=Object.assign(Object.assign({},l),{id:Yn(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function Aw(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);let{challenge:t,allowCredentials:e}=n,r=pn(n,["challenge","allowCredentials"]),i=Yn(t).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(e&&e.length>0){o.allowCredentials=new Array(e.length);for(let s=0;s<e.length;s++){let a=e[s];o.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Yn(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return o}function Rw(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();let e=n;return{id:n.id,rawId:n.id,response:{attestationObject:Mn(new Uint8Array(n.response.attestationObject)),clientDataJSON:Mn(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Nw(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();let e=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Mn(new Uint8Array(i.authenticatorData)),clientDataJSON:Mn(new Uint8Array(i.clientDataJSON)),signature:Mn(new Uint8Array(i.signature)),userHandle:i.userHandle?Mn(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function gg(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Tw(){var n,t;return!!(je()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function uA(n){try{let t=await navigator.credentials.create(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ei("Browser returned unexpected credential type",t)}:{data:null,error:new ei("Empty credential response",t)}}catch(t){return{data:null,error:xw({error:t,options:n})}}}async function dA(n){try{let t=await navigator.credentials.get(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ei("Browser returned unexpected credential type",t)}:{data:null,error:new ei("Empty credential response",t)}}catch(t){return{data:null,error:Mw({error:t,options:n})}}}var fA={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},hA={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function bu(...n){let t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),e=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(let i of n)if(i)for(let o in i){let s=i[o];if(s!==void 0)if(Array.isArray(s))r[o]=s;else if(e(s))r[o]=s;else if(t(s)){let a=r[o];t(a)?r[o]=bu(a,s):r[o]=bu(s)}else r[o]=s}return r}function pA(n,t){return bu(fA,n,t||{})}function gA(n,t){return bu(hA,n,t||{})}var wu=class{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:e,friendlyName:r,signal:i},o){try{let{data:s,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:e});if(!s)return{data:null,error:a};let c=i??lA.createNewAbortSignal();if(s.webauthn.type==="create"){let{user:l}=s.webauthn.credential_options.publicKey;l.name||(l.name=`${l.id}:${r}`),l.displayName||(l.displayName=l.name)}switch(s.webauthn.type){case"create":{let l=pA(s.webauthn.credential_options.publicKey,o?.create),{data:u,error:d}=await uA({publicKey:l,signal:c});return u?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}case"request":{let l=gA(s.webauthn.credential_options.publicKey,o?.request),{data:u,error:d}=await dA(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:l,signal:c}));return u?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}}}catch(s){return A(s)?{data:null,error:s}:{data:null,error:new At("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:e,webauthn:r}){return this.client.mfa.verify({factorId:e,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!e)return{data:null,error:new Kn("rpId is required for WebAuthn authentication")};try{if(!Tw())return{data:null,error:new At("Browser does not support WebAuthn",null)};let{data:s,error:a}=await this.challenge({factorId:t,webauthn:{rpId:e,rpOrigins:r},signal:i},{request:o});if(!s)return{data:null,error:a};let{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:e,rpOrigins:r,credential_response:c.credential_response}})}catch(s){return A(s)?{data:null,error:s}:{data:null,error:new At("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!e)return{data:null,error:new Kn("rpId is required for WebAuthn registration")};try{if(!Tw())return{data:null,error:new At("Browser does not support WebAuthn",null)};let{data:s,error:a}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:a};let{data:c,error:l}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:e,rpOrigins:r},signal:i},{create:o});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:e,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:l}}catch(s){return A(s)?{data:null,error:s}:{data:null,error:new At("Unexpected error in register",s)}}}};Ew();var mA={url:J0,storageKey:X0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ew,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Pw(n,t,e){return await e()}var lo={},vA=(()=>{class n{get jwks(){var e,r;return(r=(e=lo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){lo[this.storageKey]=Object.assign(Object.assign({},lo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=lo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){lo[this.storageKey]=Object.assign(Object.assign({},lo[this.storageKey]),{cachedAt:e})}constructor(e){var r,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;let s=Object.assign(Object.assign({},mA),e);if(this.storageKey=s.storageKey,this.instanceID=(r=n.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,n.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&je()){let a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new co({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=gu(s.fetch),this.lock=s.lock||Pw,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:je()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=hg:this.lock=Pw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new wu(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:pu()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fg(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=fg(this.memoryStorage)),je()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${cu}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},i="none";if(je()&&(r=fw(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),je()&&this.detectSessionInUrl&&i!=="none"){let{data:o,error:s}=await this._getSessionFromURL(r,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),ow(s)){let l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}let{session:a,redirectType:c}=o;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),await this._saveSession(a),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return A(r)?this._returnResult({error:r}):this._returnResult({error:new At("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,i,o;try{let s=await k(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Rt}),{data:a,error:c}=s;if(c||!a)return this._returnResult({data:{user:null,session:null},error:c});let l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(A(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var r,i,o;try{let s;if("email"in e){let{email:d,password:h,options:f}=e,p=null,m=null;this.flowType==="pkce"&&([p,m]=await Zr(this.storage,this.storageKey)),s=await k(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:h,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:m},xform:Rt})}else if("phone"in e){let{phone:d,password:h,options:f}=e;s=await k(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(i=f?.data)!==null&&i!==void 0?i:{},channel:(o=f?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Rt})}else throw new Gr("You must provide either an email or phone number and a password");let{data:a,error:c}=s;if(c||!a)return this._returnResult({data:{user:null,session:null},error:c});let l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(A(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let r;if("email"in e){let{email:s,password:a,options:c}=e;r=await k(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:ug})}else if("phone"in e){let{phone:s,password:a,options:c}=e;r=await k(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:ug})}else throw new Gr("You must provide either an email or phone number and a password");let{data:i,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){let s=new xn;return this._returnResult({data:{user:null,session:null},error:s})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(A(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,i,o,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){let{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,i,o,s,a,c,l,u,d,h,f;let p,m;if("message"in e)p=e.message,m=e.signature;else{let{chain:C,wallet:w,statement:z,options:T}=e,O;if(je())if(typeof w=="object")O=w;else{let hn=window;if("ethereum"in hn&&typeof hn.ethereum=="object"&&"request"in hn.ethereum&&typeof hn.ethereum.request=="function")O=hn.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=w}let ae=new URL((r=T?.url)!==null&&r!==void 0?r:window.location.href),Zt=await O.request({method:"eth_requestAccounts"}).then(hn=>hn).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Zt||Zt.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let ge=pg(Zt[0]),ye=(i=T?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!ye){let hn=await O.request({method:"eth_chainId"});ye=Dw(hn)}let mC={domain:ae.host,address:ge,statement:z,uri:ae.href,version:"1",chainId:ye,nonce:(o=T?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(a=(s=T?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(c=T?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(l=T?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=T?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=T?.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=Iw(mC),m=await O.request({method:"personal_sign",params:[Sw(p),ge]})}try{let{data:C,error:w}=await k(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Rt});if(w)throw w;if(!C||!C.session||!C.user){let z=new xn;return this._returnResult({data:{user:null,session:null},error:z})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:w})}catch(C){if(A(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async signInWithSolana(e){var r,i,o,s,a,c,l,u,d,h,f,p;let m,C;if("message"in e)m=e.message,C=e.signature;else{let{chain:w,wallet:z,statement:T,options:O}=e,ae;if(je())if(typeof z=="object")ae=z;else{let ge=window;if("solana"in ge&&typeof ge.solana=="object"&&("signIn"in ge.solana&&typeof ge.solana.signIn=="function"||"signMessage"in ge.solana&&typeof ge.solana.signMessage=="function"))ae=ge.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof z!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ae=z}let Zt=new URL((r=O?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in ae&&ae.signIn){let ge=await ae.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O?.signInWithSolana),{version:"1",domain:Zt.host,uri:Zt.href}),T?{statement:T}:null)),ye;if(Array.isArray(ge)&&ge[0]&&typeof ge[0]=="object")ye=ge[0];else if(ge&&typeof ge=="object"&&"signedMessage"in ge&&"signature"in ge)ye=ge;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ye&&"signature"in ye&&(typeof ye.signedMessage=="string"||ye.signedMessage instanceof Uint8Array)&&ye.signature instanceof Uint8Array)m=typeof ye.signedMessage=="string"?ye.signedMessage:new TextDecoder().decode(ye.signedMessage),C=ye.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ae)||typeof ae.signMessage!="function"||!("publicKey"in ae)||typeof ae!="object"||!ae.publicKey||!("toBase58"in ae.publicKey)||typeof ae.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${Zt.host} wants you to sign in with your Solana account:`,ae.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${Zt.href}`,`Issued At: ${(o=(i=O?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=O?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((a=O?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((c=O?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((l=O?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((u=O?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((h=(d=O?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...O.signInWithSolana.resources.map(ye=>`- ${ye}`)]:[]].join(`
`);let ge=await ae.signMessage(new TextEncoder().encode(m),"utf8");if(!ge||!(ge instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=ge}}try{let{data:w,error:z}=await k(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Mn(C)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Rt});if(z)throw z;if(!w||!w.session||!w.user){let T=new xn;return this._returnResult({data:{user:null,session:null},error:T})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:z})}catch(w){if(A(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){let r=await Zn(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{let{data:s,error:a}=await k(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:Rt});if(await Tn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){let c=new xn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:a})}catch(s){if(A(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{let{options:r,provider:i,token:o,access_token:s,nonce:a}=e,c=await k(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Rt}),{data:l,error:u}=c;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){let d=new xn;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if(A(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,i,o,s,a;try{if("email"in e){let{email:c,options:l}=e,u=null,d=null;this.flowType==="pkce"&&([u,d]=await Zr(this.storage,this.storageKey));let{error:h}=await k(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){let{phone:c,options:l}=e,{data:u,error:d}=await k(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(o=l?.data)!==null&&o!==void 0?o:{},create_user:(s=l?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new Gr("You must provide either an email or phone number.")}catch(c){if(A(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(e){var r,i;try{let o,s;"options"in e&&(o=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:c}=await k(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:Rt});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");let l=a.session,u=a.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(o){if(A(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var r,i,o,s,a;try{let c=null,l=null;this.flowType==="pkce"&&([c,l]=await Zr(this.storage,this.storageKey));let u=await k(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:l}),headers:this.headers,xform:ww});return!((s=u.data)===null||s===void 0)&&s.url&&je()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(c){if(A(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:r},error:i}=e;if(i)throw i;if(!r)throw new We;let{error:o}=await k(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(A(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{let r=`${this.url}/resend`;if("email"in e){let{email:i,type:o,options:s}=e,{error:a}=await k(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){let{phone:i,type:o,options:s}=e,{data:a,error:c}=await k(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:c})}throw new Gr("You must provide either an email or phone number and a type")}catch(r){if(A(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){let o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,r=await Zn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};let i=e.expires_at?e.expires_at*1e3-Date.now()<uu:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){let a=await Zn(this.userStorage,this.storageKey+"-user");a?.user?e.user=a.user:e.user=vu()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){let a={value:this.suppressGetSessionWarning};e.user=_w(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}let{data:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await k(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:dn}):await this._useSession(async r=>{var i,o,s;let{data:a,error:c}=r;if(c)throw c;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new We}:await k(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=a.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:dn})})}catch(r){if(A(r))return iw(r)&&(await this._removeSession(),await Tn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async i=>{let{data:o,error:s}=i;if(s)throw s;if(!o.session)throw new We;let a=o.session,c=null,l=null;this.flowType==="pkce"&&e.email!=null&&([c,l]=await Zr(this.storage,this.storageKey));let{data:u,error:d}=await k(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:l}),jwt:a.access_token,xform:dn});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(i){if(A(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new We;let r=Date.now()/1e3,i=r,o=!0,s=null,{payload:a}=mu(e.access_token);if(a.exp&&(i=a.exp,o=i<=r),o){let{data:c,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!c)return{data:{user:null,session:null},error:null};s=c}else{let{data:c,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(A(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var i;if(!e){let{data:a,error:c}=r;if(c)throw c;e=(i=a.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new We;let{data:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(A(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!je())throw new qr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ea("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qr("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ea("No code detected.");let{data:T,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;let ae=new URL(window.location.href);return ae.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ae.toString()),{data:{session:T.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:o,access_token:s,refresh_token:a,expires_in:c,expires_at:l,token_type:u}=e;if(!s||!c||!a||!u)throw new qr("No session defined in URL");let d=Math.round(Date.now()/1e3),h=parseInt(c),f=d+h;l&&(f=parseInt(l));let p=f-d;p*1e3<=zr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);let m=f-h;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);let{data:C,error:w}=await this._getUser(s);if(w)throw w;let z={provider_token:i,provider_refresh_token:o,access_token:s,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:z,redirectType:e.type},error:null})}catch(i){if(A(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){let r=await Zn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return this._returnResult({error:s});let a=(i=o.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:c}=await this.admin.signOut(a,e);if(c&&!(rw(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return e!=="others"&&(await this._removeSession(),await Tn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){let r=dw(),i={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async r=>{var i,o;try{let{data:{session:s},error:a}=r;if(a)throw a;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Zr(this.storage,this.storageKey,!0));try{return await k(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(A(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{let{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{let{data:i,error:o}=await this._useSession(async s=>{var a,c,l,u,d;let{data:h,error:f}=s;if(f)throw f;let p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await k(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(o)throw o;return je()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:e.provider,url:i?.url},error:null})}catch(i){if(A(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var i;try{let{error:o,data:{session:s}}=r;if(o)throw o;let{options:a,provider:c,token:l,access_token:u,nonce:d}=e,h=await k(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=s?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:c,id_token:l,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Rt}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new xn}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(o){if(A(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)throw a;return await k(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){let r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return await gw(async o=>(o>0&&await pw(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await k(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Rt})),(o,s)=>{let a=200*Math.pow(2,o);return s&&fu(s)&&Date.now()+a-i<zr})}catch(i){if(this._debug(r,"error",i),A(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){let i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),je()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,r;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let o=await Zn(this.storage,this.storageKey);if(o&&this.userStorage){let a=await Zn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:o.user},await Yr(this.userStorage,this.storageKey+"-user",a)),o.user=(e=a?.user)!==null&&e!==void 0?e:vu()}else if(o&&!o.user&&!o.user){let a=await Zn(this.storage,this.storageKey+"-user");a&&a?.user?(o.user=a.user,await Tn(this.storage,this.storageKey+"-user"),await Yr(this.storage,this.storageKey,o)):o.user=vu()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}let s=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<uu;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${uu}s`),s){if(this.autoRefreshToken&&o.refresh_token){let{error:a}=await this._callRefreshToken(o.refresh_token);a&&(console.error(a),fu(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{let{data:a,error:c}=await this._getUser(o.access_token);!c&&a?.user?(o.user=a.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var r,i;if(!e)throw new We;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new na;let{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new We;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let c={data:s.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(s){if(this._debug(o,"error",s),A(s)){let a={data:null,error:s};return fu(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,r,i=!0){let o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:r});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,r)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let c=0;c<s.length;c+=1)console.error(s[c]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;let r=Object.assign({},e),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await Yr(this.userStorage,this.storageKey+"-user",{user:r.user});let o=Object.assign({},r);delete o.user;let s=lg(o);await Yr(this.storage,this.storageKey,s)}else{let o=lg(r);await Yr(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Tn(this.storage,this.storageKey),await Tn(this.storage,this.storageKey+"-code-verifier"),await Tn(this.storage,this.storageKey+"-user"),this.userStorage&&await Tn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&je()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),zr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async r=>{let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((i.expires_at*1e3-e)/zr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${zr}ms, refresh threshold is ${lu} ticks`),o<=lu&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ra)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!je()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,i){let o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[s,a]=await Zr(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});o.push(c.toString())}if(i?.queryParams){let s=new URLSearchParams(i.queryParams);o.push(s.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;return s?this._returnResult({data:null,error:s}):await k(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});let c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await k(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((o=l?.totp)===null||o===void 0)&&o.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Rw(e.webauthn.credential_response):Nw(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:l}=await k(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:l}))})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=await k(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;let{data:c}=a;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:Ow(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:Aw(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){let{data:r,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;let{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};let o={all:[],phone:[],totp:[],webauthn:[]};for(let s of(e=r?.factors)!==null&&e!==void 0?e:[])o.all.push(s),s.status==="verified"&&o[s.factor_type].push(s);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;let{data:{session:i},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:s}=mu(i.access_token),a=null;s.aal&&(a=s.aal);let c=a;((r=(e=i.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");let u=s.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?await k(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new We})})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async i=>{let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new We});let a=await k(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&je()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(A(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,r){try{return await this._useSession(async i=>{let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new We});let a=await k(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&je()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(A(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{let{data:{session:r},error:i}=e;return i?this._returnResult({data:null,error:i}):r?await k(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new We})})}catch(e){if(A(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?(await k(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new We})})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let i=r.keys.find(c=>c.kid===e);if(i)return i;let o=Date.now();if(i=this.jwks.keys.find(c=>c.kid===e),i&&this.jwks_cached_at+nw>o)return i;let{data:s,error:a}=await k(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=o,i=s.keys.find(c=>c.kid===e),!i)?null:i}async getClaims(e,r={}){try{let i=e;if(!i){let{data:p,error:m}=await this.getSession();if(m||!p.session)return this._returnResult({data:null,error:m});i=p.session.access_token}let{header:o,payload:s,signature:a,raw:{header:c,payload:l}}=mu(i);r?.allowExpired||vw(s.exp);let u=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!u){let{error:p}=await this.getUser(i);if(p)throw p;return{data:{claims:s,header:o,signature:a},error:null}}let d=yw(o.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,lw(`${c}.${l}`)))throw new Wr("Invalid JWT signature");return{data:{claims:s,header:o,signature:a},error:null}}catch(i){if(A(i))return this._returnResult({data:null,error:i});throw i}}}return n.nextInstanceID={},n})(),vg=vA;var yA=vg,yg=yA;var Cu=class extends yg{constructor(t){super(t)}};var Eu=class{constructor(t,e,r){var i,o,s;this.supabaseUrl=t,this.supabaseKey=e;let a=Q0(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);let c=`sb-${a.hostname.split(".")[0]}-auth-token`,l={db:q0,realtime:K0,auth:Object.assign(Object.assign({},W0),{storageKey:c}),global:G0},u=Z0(r??{},l);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=u.auth)!==null&&s!==void 0?s:{},this.headers,u.global.fetch),this.fetch=Y0(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new x0(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Qs(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Us(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,e;if(this.accessToken)return await this.accessToken();let{data:r}=await this.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:s,flowType:a,lock:c,debug:l,throwOnError:u},d,h){let f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Cu({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,userStorage:o,flowType:a,lock:c,debug:l,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new qs(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var kw=(n,t,e)=>new Eu(n,t,e);function _A(){if(typeof window<"u"||typeof process>"u")return!1;let n=process.version;if(n==null)return!1;let t=n.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}_A()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var _g={production:!0,supabase:{url:"https://odiykkgeipobqgqiqvam.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9kaXlra2dlaXBvYnFncWlxdmFtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ3ODUwNTksImV4cCI6MjA4MDM2MTA1OX0.YEcIgiPDKe1tD8y5MfCMIrpY0jLijKgbi0qFv-0SIII"}};var $e=class n{constructor(t){this.router=t;this.supabase=kw(_g.supabase.url,_g.supabase.anonKey),this.supabase.auth.onAuthStateChange((e,r)=>{this.currentUser.set(r?.user??null),this.isAuthenticated.set(!!r?.user),r?.user?this.loadUserProfile(r.user.id):this.currentProfile.set(null)}),this.checkSession()}supabase;currentUser=N(null);currentProfile=N(null);isAuthenticated=N(!1);async checkSession(){let{data:{session:t}}=await this.supabase.auth.getSession();t?.user&&(this.currentUser.set(t.user),this.isAuthenticated.set(!0),await this.loadUserProfile(t.user.id))}async loadUserProfile(t){try{let{data:e,error:r}=await this.supabase.from("profiles").select("*").eq("id",t).single();if(r)throw r;this.currentProfile.set(e)}catch(e){console.error("Error loading user profile:",e)}}async signUp(t,e,r){try{let{data:i,error:o}=await this.supabase.auth.signUp({email:e,password:r});if(o)throw o;if(!i.user)throw new Error("No user returned from signup");let{error:s}=await this.supabase.from("profiles").insert({id:i.user.id,username:t,email:e,created_at:new Date().toISOString()});if(s)throw s;return{success:!0,data:i}}catch(i){return console.error("Signup error:",i),{success:!1,error:i.message}}}async signIn(t,e){try{let{data:r,error:i}=await this.supabase.from("profiles").select("email").ilike("username",t).single();if(i||!r){console.error("Profile lookup error:",i),console.log("Searching for username:",t);let{data:a}=await this.supabase.from("profiles").select("username");throw console.log("Available usernames:",a),new Error("Invalid username or password")}console.log("Found email for username:",r.email);let{data:o,error:s}=await this.supabase.auth.signInWithPassword({email:r.email,password:e});if(s)throw console.error("Supabase auth error:",s),new Error("Invalid username or password");return await this.loadUserProfile(o.user.id),this.router.navigate(["/today"]),{success:!0,data:o}}catch(r){return console.error("Sign in error:",r),{success:!1,error:r.message||"Invalid username or password"}}}async signOut(){try{let{data:{session:t}}=await this.supabase.auth.getSession();if(t){let{error:e}=await this.supabase.auth.signOut();if(e)throw e}return this.currentUser.set(null),this.currentProfile.set(null),this.isAuthenticated.set(!1),this.router.navigate(["/login"]),{success:!0}}catch(t){return console.error("Sign out error:",t),this.currentUser.set(null),this.currentProfile.set(null),this.isAuthenticated.set(!1),this.router.navigate(["/login"]),{success:!1,error:t.message}}}async resetPassword(t){try{let{error:e}=await this.supabase.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/reset-password`});if(e)throw e;return{success:!0}}catch(e){return console.error("Password reset error:",e),{success:!1,error:e.message}}}async updatePassword(t){try{let{error:e}=await this.supabase.auth.updateUser({password:t});if(e)throw e;return{success:!0}}catch(e){return console.error("Update password error:",e),{success:!1,error:e.message}}}getSupabaseClient(){return this.supabase}async getSession(){let{data:{session:t}}=await this.supabase.auth.getSession();return t}static \u0275fac=function(e){return new(e||n)(L(Xe))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};var fn=class n{constructor(t){this.authService=t;Qe(()=>{this.authService.currentUser()?this.loadEntries():this.entriesSubject.next([])})}entriesSubject=new Ne([]);entries$=this.entriesSubject.asObservable();async loadEntries(){let t=this.authService.currentUser();if(t)try{let e=this.authService.getSupabaseClient(),{data:r,error:i}=await e.from("feeding_entries").select("*").eq("user_id",t.id).order("timestamp",{ascending:!1});if(i)throw i;let o=(r||[]).map(s=>({id:s.id,date:s.date,time:s.time,amount:s.amount,comment:s.comment,timestamp:s.timestamp}));this.entriesSubject.next(o)}catch(e){console.error("Error loading entries:",e),this.entriesSubject.next([])}}getAllEntries(){return this.entriesSubject.value}getEntriesByDate(t){return this.entriesSubject.value.filter(e=>e.date===t).sort((e,r)=>r.time.localeCompare(e.time))}getTodayEntries(){let t=this.getTodayDate();return this.getEntriesByDate(t)}getEntryById(t){return this.entriesSubject.value.find(e=>e.id===t)}async createEntry(t){let e=this.authService.currentUser();if(!e)return null;try{let r=this.createTimestamp(t.date,t.time),i=this.authService.getSupabaseClient(),o={user_id:e.id,date:t.date,time:t.time,amount:t.amount,comment:t.comment,timestamp:r,created_at:new Date().toISOString()},{data:s,error:a}=await i.from("feeding_entries").insert(o).select().single();if(a)throw a;let c={id:s.id,date:s.date,time:s.time,amount:s.amount,comment:s.comment,timestamp:s.timestamp},l=[...this.entriesSubject.value,c];return this.entriesSubject.next(l),c}catch(r){return console.error("Error creating entry:",r),null}}async updateEntry(t,e){let r=this.authService.currentUser();if(!r)return!1;try{let i=this.authService.getSupabaseClient(),o=this.entriesSubject.value,s=o.findIndex(u=>u.id===t);if(s===-1)return!1;let a=D(D({},o[s]),e);(e.date||e.time)&&(a.timestamp=this.createTimestamp(a.date,a.time));let c={date:a.date,time:a.time,amount:a.amount,comment:a.comment,timestamp:a.timestamp,updated_at:new Date().toISOString()},{error:l}=await i.from("feeding_entries").update(c).eq("id",t).eq("user_id",r.id);if(l)throw l;return o[s]=a,this.entriesSubject.next([...o]),!0}catch(i){return console.error("Error updating entry:",i),!1}}async deleteEntry(t){let e=this.authService.currentUser();if(!e)return!1;try{let r=this.authService.getSupabaseClient(),{error:i}=await r.from("feeding_entries").delete().eq("id",t).eq("user_id",e.id);if(i)throw i;let o=this.entriesSubject.value,s=o.filter(a=>a.id!==t);return s.length===o.length?!1:(this.entriesSubject.next(s),!0)}catch(r){return console.error("Error deleting entry:",r),!1}}getUniqueDates(){let t=new Set(this.entriesSubject.value.map(e=>e.date));return Array.from(t).sort((e,r)=>r.localeCompare(e))}getStatistics(t,e){let r=this.entriesSubject.value;t&&(r=r.filter(l=>l.date>=t)),e&&(r=r.filter(l=>l.date<=e));let i=r.length,o=r.reduce((l,u)=>l+u.amount,0),s=i>0?o/i:0,a=new Set(r.map(l=>l.date)),c=a.size>0?i/a.size:0;return{totalFeedings:i,totalAmount:o,averageAmount:Math.round(s*10)/10,averageFeedingsPerDay:Math.round(c*10)/10}}generateId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}getTodayDate(){return new Date().toISOString().split("T")[0]}createTimestamp(t,e){return new Date(`${t}T${e}`).getTime()}static \u0275fac=function(e){return new(e||n)(L($e))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};var Qn=class n{constructor(t){this.authService=t;Qe(()=>{this.authService.currentUser()?this.loadSettings():this.settings.set(null)})}settings=N(null);DEFAULT_INTERVAL_HOURS=3;async loadSettings(){let t=this.authService.currentUser();if(t)try{let e=this.authService.getSupabaseClient(),{data:r,error:i}=await e.from("user_settings").select("*").eq("user_id",t.id).single();if(i){if(i.code==="PGRST116"){await this.createDefaultSettings();return}throw i}this.settings.set(r)}catch(e){console.error("Error loading settings:",e)}}async createDefaultSettings(){let t=this.authService.currentUser();if(t)try{let e=this.authService.getSupabaseClient(),r={user_id:t.id,feeding_interval_hours:this.DEFAULT_INTERVAL_HOURS,notifications_enabled:!0},{data:i,error:o}=await e.from("user_settings").insert(r).select().single();if(o)throw o;this.settings.set(i)}catch(e){console.error("Error creating default settings:",e)}}async updateFeedingInterval(t){let e=this.authService.currentUser();if(!e)return!1;try{let r=this.authService.getSupabaseClient(),i=this.settings();if(i?.id){let{data:o,error:s}=await r.from("user_settings").update({feeding_interval_hours:t}).eq("id",i.id).eq("user_id",e.id).select().single();if(s)throw s;this.settings.set(o)}else{let{data:o,error:s}=await r.from("user_settings").insert({user_id:e.id,feeding_interval_hours:t,notifications_enabled:!0}).select().single();if(s)throw s;this.settings.set(o)}return!0}catch(r){return console.error("Error updating feeding interval:",r),!1}}async updateNotificationsEnabled(t){let e=this.authService.currentUser();if(!e)return!1;try{let r=this.authService.getSupabaseClient(),i=this.settings();if(i?.id){let{data:o,error:s}=await r.from("user_settings").update({notifications_enabled:t}).eq("id",i.id).eq("user_id",e.id).select().single();if(s)throw s;this.settings.set(o)}else{let{data:o,error:s}=await r.from("user_settings").insert({user_id:e.id,feeding_interval_hours:this.DEFAULT_INTERVAL_HOURS,notifications_enabled:t}).select().single();if(s)throw s;this.settings.set(o)}return!0}catch(r){return console.error("Error updating notifications enabled:",r),!1}}getFeedingInterval(){let t=this.settings();return t?t.feeding_interval_hours:this.DEFAULT_INTERVAL_HOURS}isFeedingIntervalEnabled(){return this.getFeedingInterval()!==null}getDefaultInterval(){return this.DEFAULT_INTERVAL_HOURS}areNotificationsEnabled(){return this.settings()?.notifications_enabled??!0}static \u0275fac=function(e){return new(e||n)(L($e))};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};var Jn=class n{feedingService=b(fn);settingsService=b(Qn);authService=b($e);nextFeedingTimer=null;notificationPermission="default";lastNotificationTime=null;constructor(){"Notification"in window&&(this.notificationPermission=Notification.permission),Qe(()=>{let t=this.authService.currentUser(),e=this.settingsService.settings(),r=this.feedingService.getAllEntries();t&&e&&this.scheduleNextNotification()})}async requestPermission(){if(!("Notification"in window))return console.warn("This browser does not support notifications"),!1;if(this.notificationPermission==="granted")return!0;try{let t=await Notification.requestPermission();return this.notificationPermission=t,t==="granted"}catch(t){return console.error("Error requesting notification permission:",t),!1}}isNotificationEnabled(){return"Notification"in window&&this.notificationPermission==="granted"&&this.settingsService.isFeedingIntervalEnabled()&&this.settingsService.areNotificationsEnabled()}scheduleNextNotification(){if(this.nextFeedingTimer&&(clearTimeout(this.nextFeedingTimer),this.nextFeedingTimer=null),!this.isNotificationEnabled())return;let t=this.settingsService.getFeedingInterval();if(t===null)return;let e=this.feedingService.getAllEntries();if(e.length===0)return;let r=e.reduce((c,l)=>{let u=new Date(`${l.date}T${l.time}`).getTime(),d=new Date(`${c.date}T${c.time}`).getTime();return u>d?l:c}),o=new Date(`${r.date}T${r.time}`).getTime()+t*60*60*1e3,s=Date.now(),a=o-s;a>0?(this.nextFeedingTimer=setTimeout(()=>{this.showNotification(o)},a),console.log(`Next feeding notification scheduled in ${Math.round(a/1e3/60)} minutes`)):(this.lastNotificationTime===null||this.lastNotificationTime<o)&&this.showNotification(o)}showNotification(t){if(!this.isNotificationEnabled())return;let e=this.settingsService.getFeedingInterval(),r="\u{1F37C} Feeding Reminder",i=`It's been ${e} hour${e!==1?"s":""} since the last feeding. Time to feed your baby!`;try{let o=new Notification(r,{body:i,icon:"/favicon.ico",badge:"/favicon.ico",tag:"feeding-reminder",requireInteraction:!0});o.onclick=()=>{window.focus(),o.close()},this.lastNotificationTime=t}catch(o){console.error("Error showing notification:",o)}}async testNotification(){if(!await this.requestPermission())return!1;try{let e=new Notification("\u{1F37C} Test Notification",{body:"Notifications are working! You will receive reminders based on your feeding interval.",tag:"test-notification",requireInteraction:!1});return e.onclick=()=>{window.focus(),e.close()},!0}catch(e){return console.error("Error showing test notification:",e),!1}}getTimeUntilNextNotification(){let t=this.settingsService.getFeedingInterval();if(t===null)return null;let e=this.feedingService.getAllEntries();if(e.length===0)return null;let r=e.reduce((c,l)=>{let u=new Date(`${l.date}T${l.time}`).getTime(),d=new Date(`${c.date}T${c.time}`).getTime();return u>d?l:c}),o=new Date(`${r.date}T${r.time}`).getTime()+t*60*60*1e3,s=Date.now();return o-s}ngOnDestroy(){this.nextFeedingTimer&&clearTimeout(this.nextFeedingTimer)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};var Gw=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,r){this._renderer=e,this._elementRef=r}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(r){return new(r||n)(U(En),U(bt))};static \u0275dir=Se({type:n})}return n})(),qw=(()=>{class n extends Gw{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(n)))(i||n)}})();static \u0275dir=Se({type:n,features:[wt]})}return n})(),Dg=new P("");var bA={provide:Dg,useExisting:kt(()=>er),multi:!0};function wA(){let n=Tt()?Tt().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var CA=new P(""),er=(()=>{class n extends Gw{_compositionMode;_composing=!1;constructor(e,r,i){super(e,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!wA())}writeValue(e){let r=e??"";this.setProperty("value",r)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(r){return new(r||n)(U(En),U(bt),U(CA,8))};static \u0275dir=Se({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&V("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[$n([bA]),wt]})}return n})();function Sg(n){return n==null||Ig(n)===0}function Ig(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var ku=new P(""),Ww=new P(""),EA=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ve=class{static min(t){return Kw(t)}static max(t){return DA(t)}static required(t){return SA(t)}static requiredTrue(t){return IA(t)}static email(t){return xA(t)}static minLength(t){return MA(t)}static maxLength(t){return TA(t)}static pattern(t){return Yw(t)}static nullValidator(t){return xu()}static compose(t){return tC(t)}static composeAsync(t){return rC(t)}};function Kw(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function DA(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function SA(n){return Sg(n.value)?{required:!0}:null}function IA(n){return n.value===!0?null:{required:!0}}function xA(n){return Sg(n.value)||EA.test(n.value)?null:{email:!0}}function MA(n){return t=>{let e=t.value?.length??Ig(t.value);return e===null||e===0?null:e<n?{minlength:{requiredLength:n,actualLength:e}}:null}}function TA(n){return t=>{let e=t.value?.length??Ig(t.value);return e!==null&&e>n?{maxlength:{requiredLength:n,actualLength:e}}:null}}function Yw(n){if(!n)return xu;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(Sg(r.value))return null;let i=r.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}function xu(n){return null}function Zw(n){return n!=null}function Qw(n){return Rr(n)?xe(n):n}function Jw(n){let t={};return n.forEach(e=>{t=e!=null?D(D({},t),e):t}),Object.keys(t).length===0?null:t}function Xw(n,t){return t.map(e=>e(n))}function OA(n){return!n.validate}function eC(n){return n.map(t=>OA(t)?t:e=>t.validate(e))}function tC(n){if(!n)return null;let t=n.filter(Zw);return t.length==0?null:function(e){return Jw(Xw(e,t))}}function nC(n){return n!=null?tC(eC(n)):null}function rC(n){if(!n)return null;let t=n.filter(Zw);return t.length==0?null:function(e){let r=Xw(e,t).map(Qw);return wd(r).pipe(te(Jw))}}function iC(n){return n!=null?rC(eC(n)):null}function Lw(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function oC(n){return n._rawValidators}function sC(n){return n._rawAsyncValidators}function bg(n){return n?Array.isArray(n)?n:[n]:[]}function Mu(n,t){return Array.isArray(n)?n.includes(t):n===t}function jw(n,t){let e=bg(t);return bg(n).forEach(i=>{Mu(e,i)||e.push(i)}),e}function Vw(n,t){return bg(t).filter(e=>!Mu(n,e))}var Tu=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=nC(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=iC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},ho=class extends Tu{name;get formDirective(){return null}get path(){return null}},ca=class extends Tu{_parent=null;name=null;valueAccessor=null},Ou=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var go=(()=>{class n extends Ou{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(U(ca,2))};static \u0275dir=Se({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&oe("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[wt]})}return n})(),mo=(()=>{class n extends Ou{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(U(ho,10))};static \u0275dir=Se({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&oe("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[wt]})}return n})();var ia="VALID",Su="INVALID",uo="PENDING",oa="DISABLED",Xn=class{},Au=class extends Xn{value;source;constructor(t,e){super(),this.value=t,this.source=e}},sa=class extends Xn{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},aa=class extends Xn{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},fo=class extends Xn{status;source;constructor(t,e){super(),this.status=t,this.source=e}},wg=class extends Xn{source;constructor(t){super(),this.source=t}},la=class extends Xn{source;constructor(t){super(),this.source=t}};function xg(n){return(Fu(n)?n.validators:n)||null}function AA(n){return Array.isArray(n)?nC(n):n||null}function Mg(n,t){return(Fu(t)?t.asyncValidators:n)||null}function RA(n){return Array.isArray(n)?iC(n):n||null}function Fu(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function aC(n,t,e){let r=n.controls;if(!(t?Object.keys(r):r).length)throw new M(1e3,"");if(!r[e])throw new M(1001,"")}function cC(n,t,e){n._forEachChild((r,i)=>{if(e[i]===void 0)throw new M(1002,"")})}var po=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Fe(this.statusReactive)}set status(t){Fe(()=>this.statusReactive.set(t))}_status=qe(()=>this.statusReactive());statusReactive=N(void 0);get valid(){return this.status===ia}get invalid(){return this.status===Su}get pending(){return this.status==uo}get disabled(){return this.status===oa}get enabled(){return this.status!==oa}errors;get pristine(){return Fe(this.pristineReactive)}set pristine(t){Fe(()=>this.pristineReactive.set(t))}_pristine=qe(()=>this.pristineReactive());pristineReactive=N(!0);get dirty(){return!this.pristine}get touched(){return Fe(this.touchedReactive)}set touched(t){Fe(()=>this.touchedReactive.set(t))}_touched=qe(()=>this.touchedReactive());touchedReactive=N(!1);get untouched(){return!this.touched}_events=new _e;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(jw(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(jw(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Vw(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Vw(t,this._rawAsyncValidators))}hasValidator(t){return Mu(this._rawValidators,t)}hasAsyncValidator(t){return Mu(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Y(D({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new aa(!0,r))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),e&&t.emitEvent!==!1&&this._events.next(new aa(!1,r))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Y(D({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new sa(!1,r))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),e&&t.emitEvent!==!1&&this._events.next(new sa(!0,r))}markAsPending(t={}){this.status=uo;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new fo(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Y(D({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=oa,this.errors=null,this._forEachChild(i=>{i.disable(Y(D({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Au(this.value,r)),this._events.next(new fo(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Y(D({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=ia,this._forEachChild(r=>{r.enable(Y(D({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Y(D({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ia||this.status===uo)&&this._runAsyncValidator(r,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Au(this.value,e)),this._events.next(new fo(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Y(D({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?oa:ia}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=uo,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:t!==!1};let r=Qw(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(t,e){let r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new fo(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,r)}_initObservables(){this.valueChanges=new he,this.statusChanges=new he}_calculateStatus(){return this._allControlsDisabled()?oa:this.errors?Su:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(uo)?uo:this._anyControlsHaveStatus(Su)?Su:ia}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),i&&this._events.next(new sa(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new aa(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Fu(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=AA(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=RA(this._rawAsyncValidators)}},Ru=class extends po{constructor(t,e,r){super(xg(e),Mg(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){cC(this,!0,t),Object.keys(t).forEach(r=>{aC(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,Y(D({},e),{onlySelf:!0}))}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new la(this))}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>r._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,r,i)=>((r.enabled||this.disabled)&&(e[i]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,o)=>{r=e(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Cg=class extends Ru{};var Tg=new P("",{factory:()=>Lu}),Lu="always";function NA(n,t){return[...t.path,n]}function Uw(n,t,e=Lu){Og(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),kA(n,t),LA(n,t),FA(n,t),PA(n,t)}function $w(n,t,e=!0){let r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),Pu(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Nu(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function PA(n,t){if(t.valueAccessor.setDisabledState){let e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function Og(n,t){let e=oC(n);t.validator!==null?n.setValidators(Lw(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let r=sC(n);t.asyncValidator!==null?n.setAsyncValidators(Lw(r,t.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Nu(t._rawValidators,i),Nu(t._rawAsyncValidators,i)}function Pu(n,t){let e=!1;if(n!==null){if(t.validator!==null){let i=oC(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.validator);o.length!==i.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let i=sC(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(e=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Nu(t._rawValidators,r),Nu(t._rawAsyncValidators,r),e}function kA(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&lC(n,t)})}function FA(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&lC(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function lC(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function LA(n,t){let e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function jA(n,t){n==null,Og(n,t)}function VA(n,t){return Pu(n,t)}function UA(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function $A(n){return Object.getPrototypeOf(n.constructor)===qw}function BA(n,t){n._syncPendingControls(),t.forEach(e=>{let r=e.control;r.updateOn==="submit"&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function HA(n,t){if(!t)return null;Array.isArray(t);let e,r,i;return t.forEach(o=>{o.constructor===er?e=o:$A(o)?r=o:i=o}),i||r||e||null}function zA(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Bw(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Hw(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Iu=class extends po{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,r){super(xg(e),Mg(r,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Fu(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Hw(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),e.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,e?.emitEvent!==!1&&this._events.next(new la(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Bw(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Bw(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Hw(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var GA=n=>n instanceof Iu;var vo=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Se({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),qA={provide:Dg,useExisting:kt(()=>Ag),multi:!0},Ag=(()=>{class n extends qw{writeValue(e){let r=e??"";this.setProperty("value",r)}registerOnChange(e){this.onChange=r=>{e(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(n)))(i||n)}})();static \u0275dir=Se({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&V("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[$n([qA]),wt]})}return n})();var Eg=class extends po{constructor(t,e,r){super(xg(e),Mg(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){Array.isArray(t)?t.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){cC(this,!1,t),t.forEach((r,i)=>{aC(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],Y(D({},e),{onlySelf:!0}))}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new la(this))}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,r)=>r._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};var WA=(()=>{class n extends ho{callSetDisabledState;get submitted(){return Fe(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=qe(()=>this._submittedReactive());_submittedReactive=N(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(e,r,i){super(),this.callSetDisabledState=i,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this.onChanges(e)}ngOnDestroy(){this.onDestroy()}onChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(Pu(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(e){let r=this.form.get(e.path);return Uw(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){$w(e.control||null,e,!1),zA(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}getFormArray(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}updateModel(e,r){this.form.get(e.path).setValue(r)}onReset(){this.resetForm()}resetForm(e=void 0,r={}){this.form.reset(e,r),this._submittedReactive.set(!1)}onSubmit(e){return this.submitted=!0,BA(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new wg(this.control)),e?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(e=>{let r=e.control,i=this.form.get(e.path);r!==i&&($w(r||null,e),GA(i)&&(Uw(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let r=this.form.get(e.path);jA(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let r=this.form.get(e.path);r&&VA(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Og(this.form,this),this._oldForm&&Pu(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(U(ku,10),U(Ww,10),U(Tg,8))};static \u0275dir=Se({type:n,features:[wt,_t]})}return n})();var uC=new P("");var KA={provide:ca,useExisting:kt(()=>ti)},ti=(()=>{class n extends ca{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new he;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=HA(this,o)}ngOnChanges(e){this._added||this._setUpControl(),UA(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return NA(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(U(ho,13),U(ku,10),U(Ww,10),U(Dg,10),U(uC,8))};static \u0275dir=Se({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[$n([KA]),wt,_t]})}return n})();var YA={provide:ho,useExisting:kt(()=>ni)},ni=(()=>{class n extends WA{form=null;ngSubmit=new he;get control(){return this.form}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(n)))(i||n)}})();static \u0275dir=Se({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&V("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[$n([YA]),wt]})}return n})();function ZA(n){return typeof n=="number"?n:parseFloat(n)}var dC=(()=>{class n{_validator=xu;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let r=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):xu,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Se({type:n,features:[_t]})}return n})();var QA={provide:ku,useExisting:kt(()=>Rg),multi:!0},Rg=(()=>{class n extends dC{min;inputName="min";normalizeInput=e=>ZA(e);createValidator=e=>Kw(e);static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(n)))(i||n)}})();static \u0275dir=Se({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Nr("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[$n([QA]),wt]})}return n})();var JA={provide:ku,useExisting:kt(()=>Ng),multi:!0},Ng=(()=>{class n extends dC{pattern;inputName="pattern";normalizeInput=e=>e;createValidator=e=>Yw(e);static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ht(n)))(i||n)}})();static \u0275dir=Se({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Nr("pattern",i._enabled?i.pattern:null)},inputs:{pattern:"pattern"},standalone:!1,features:[$n([JA]),wt]})}return n})();var fC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gt({type:n});static \u0275inj=Dt({})}return n})();function zw(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var yo=(()=>{class n{useNonNullable=!1;get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,r=null){let i=this._reduceControls(e),o={};return zw(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Ru(i,o)}record(e,r=null){let i=this._reduceControls(e);return new Cg(i,r)}control(e,r,i){let o={};return this.useNonNullable?(zw(r)?o=r:(o.validators=r,o.asyncValidators=i),new Iu(e,Y(D({},o),{nonNullable:!0}))):new Iu(e,r,i)}array(e,r,i){let o=e.map(s=>this._createControl(s));return new Eg(o,r,i)}_reduceControls(e){let r={};return Object.keys(e).forEach(i=>{r[i]=this._createControl(e[i])}),r}_createControl(e){if(e instanceof Iu)return e;if(e instanceof po)return e;if(Array.isArray(e)){let r=e[0],i=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(r,i,o)}else return this.control(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var hC=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Tg,useValue:e.callSetDisabledState??Lu}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gt({type:n});static \u0275inj=Dt({imports:[fC]})}return n})(),_o=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:uC,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Tg,useValue:e.callSetDisabledState??Lu}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gt({type:n});static \u0275inj=Dt({imports:[fC]})}return n})();var bo=class n{constructor(t){this.fb=t}entry;defaultDate;submitForm=new he;cancel=new he;feedingForm;isEditMode=!1;ngOnInit(){this.initForm()}ngOnChanges(t){t.entry&&this.feedingForm&&(this.isEditMode=!!this.entry,this.initForm())}initForm(){this.isEditMode=!!this.entry;let t=new Date,e=this.defaultDate||t.toISOString().split("T")[0],r=this.formatTime(t);this.feedingForm?this.feedingForm.patchValue({date:this.entry?.date||e,time:this.entry?.time||r,amount:this.entry?.amount||"",comment:this.entry?.comment||""}):this.feedingForm=this.fb.group({date:[this.entry?.date||e,ve.required],time:[this.entry?.time||r,ve.required],amount:[this.entry?.amount||"",[ve.required,ve.min(1)]],comment:[this.entry?.comment||""]})}formatTime(t){let e=t.getHours().toString().padStart(2,"0"),r=t.getMinutes().toString().padStart(2,"0");return`${e}:${r}`}onSubmit(){this.feedingForm.valid&&(this.submitForm.emit(this.feedingForm.value),this.isEditMode||this.feedingForm.reset({date:this.feedingForm.value.date,time:this.formatTime(new Date),amount:"",comment:""}))}onCancel(){this.cancel.emit()}onlyNumbers(t){let e=t.which?t.which:t.keyCode;return e<48||e>57?(t.preventDefault(),!1):!0}static \u0275fac=function(e){return new(e||n)(U(yo))};static \u0275cmp=Te({type:n,selectors:[["app-feeding-form"]],inputs:{entry:"entry",defaultDate:"defaultDate"},outputs:{submitForm:"submitForm",cancel:"cancel"},features:[_t],decls:32,vars:6,consts:[[1,"feeding-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","date"],[1,"fas","fa-calendar"],["type","date","id","date","formControlName","date",1,"form-control"],["for","time"],[1,"fas","fa-clock"],["type","time","id","time","formControlName","time",1,"form-control"],["for","amount"],[1,"fas","fa-bottle-droplet"],[1,"unit"],["type","number","id","amount","formControlName","amount","placeholder","120","min","1","step","1","pattern","[0-9]*","inputmode","numeric",1,"form-control",3,"keypress"],["for","comment"],[1,"fas","fa-message"],["id","comment","formControlName","comment","rows","2","placeholder","Any notes...",1,"form-control"],[1,"form-actions"],["type","submit",3,"disabled"],[1,"fas",3,"ngClass"]],template:function(e,r){e&1&&(g(0,"form",0),V("ngSubmit",function(){return r.onSubmit()}),g(1,"div",1)(2,"label",2),E(3,"i",3),g(4,"span"),v(5,"Date"),y()(),E(6,"input",4),y(),g(7,"div",1)(8,"label",5),E(9,"i",6),g(10,"span"),v(11,"Time"),y()(),E(12,"input",7),y(),g(13,"div",1)(14,"label",8),E(15,"i",9),g(16,"span"),v(17,"Amount "),g(18,"span",10),v(19,"(ml)"),y()()(),g(20,"input",11),V("keypress",function(o){return r.onlyNumbers(o)}),y()(),g(21,"div",1)(22,"label",12),E(23,"i",13),g(24,"span"),v(25,"Comment (optional)"),y()(),E(26,"textarea",14),y(),g(27,"div",15)(28,"button",16),E(29,"i",17),g(30,"span"),v(31),y()()()()),e&2&&(ne("formGroup",r.feedingForm),_(28),zh(r.isEditMode?"btn btn-update":"btn btn-primary"),ne("disabled",!r.feedingForm.valid),_(),ne("ngClass",r.isEditMode?"fa-check":"fa-plus"),_(2),re("",r.isEditMode?"Update":"Add"," Feeding"))},dependencies:[Je,Pr,_o,vo,er,Ag,go,mo,Ng,Rg,ni,ti],styles:[".feeding-form[_ngcontent-%COMP%]{background:radial-gradient(circle at top left,#d6bdff26,#191a27fa);padding:1rem;border-radius:20px;box-shadow:0 12px 32px #00000080,0 0 0 1px #d6bdff4d;border:2px solid rgba(214,189,255,.25);transition:all .3s cubic-bezier(.2,0,.2,1)}.feeding-form[_ngcontent-%COMP%]:hover{border-color:#d6bdff66;box-shadow:0 16px 40px #0009,0 0 0 1px #d6bdff66,0 0 40px #d6bdff26;transform:translateY(-2px)}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;margin-bottom:.625rem;color:var(--accent-beige);font-weight:700;font-size:.95rem;text-transform:uppercase;letter-spacing:.5px}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--accent-lavender);filter:drop-shadow(0 2px 4px rgba(214,189,255,.3))}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{text-transform:none}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;font-size:1rem;font-weight:500;color:#fff;background:linear-gradient(135deg,#2a2d4199,#23253799);border:2px solid rgba(214,189,255,.15);border-radius:14px;transition:all .25s cubic-bezier(.2,0,.2,1);box-shadow:inset 0 2px 6px #0000004d}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--text-light);opacity:.6}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:hover{border-color:#d6bdff4d;background:linear-gradient(135deg,#2d3046b3,#26283ab3)}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-lavender);background:linear-gradient(135deg,#32354bcc,#2a2d3fcc);box-shadow:inset 0 2px 6px #0000004d,0 0 0 3px #d6bdff33,0 4px 16px #d6bdff4d;transform:translateY(-1px)}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-top:1.5rem}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1;border-radius:12px;padding:.875rem 1.5rem;font-size:1rem;font-weight:600}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}@media(min-width:768px){.feeding-form[_ngcontent-%COMP%]{padding:1.5rem}.form-actions[_ngcontent-%COMP%]{gap:1rem}}"]})};var XA=(n,t)=>t.id;function eR(n,t){n&1&&(x(0,"div",1),pe(1,"i",3),x(2,"p"),v(3,"No feeding entries yet"),$(),x(4,"small"),v(5,"Add your first feeding above to start tracking."),$()())}function tR(n,t){if(n&1&&(x(0,"span",11),v(1),$()),n&2){let e=I().$implicit,r=I();_(),Oe(r.formatDate(e.date))}}function nR(n,t){if(n&1&&(x(0,"div",22),pe(1,"i",23),x(2,"p"),v(3),$()()),n&2){let e=I().$implicit;_(3),Oe(e.comment)}}function rR(n,t){if(n&1){let e=Ie();x(0,"article",4),ki("click",function(){let i=B(e).$implicit,o=I();return H(o.onEntryClick(i.id))}),x(1,"div",5)(2,"div",6)(3,"div",7),pe(4,"i",8),x(5,"span",9),v(6),$()()(),x(7,"div",10),Z(8,tR,2,1,"span",11),x(9,"div",12),pe(10,"i",13),x(11,"div",14)(12,"span",15),v(13),$(),x(14,"span",16),v(15,"ml"),$()()()(),x(16,"div",17)(17,"button",18),ki("click",function(i){let o=B(e).$implicit;return I().onEdit(o),H(i.stopPropagation())}),pe(18,"i",19),$(),x(19,"button",20),ki("click",function(i){let o=B(e).$implicit;return I().onDelete(o.id),H(i.stopPropagation())}),pe(20,"i",21),$()()(),Z(21,nR,4,1,"div",22),$()}if(n&2){let e=t.$implicit,r=I();oe("is-active",r.activeEntryId===e.id),_(6),Oe(e.time),_(2),Q(r.showDate?8:-1),_(5),Oe(e.amount),_(8),Q(e.comment?21:-1)}}var wo=class n{entries=[];showDate=!1;editEntry=new he;deleteEntry=new he;activeEntryId=null;onEntryClick(t){this.activeEntryId=this.activeEntryId===t?null:t}onEdit(t){this.activeEntryId=null,this.editEntry.emit(t)}onDelete(t){confirm("Are you sure you want to delete this entry?")&&(this.activeEntryId=null,this.deleteEntry.emit(t))}formatDate(t){let e=new Date(t+"T00:00:00"),r=String(e.getDate()).padStart(2,"0"),i=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear();return`${r}.${i}.${o}`}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=Te({type:n,selectors:[["app-feeding-list"]],inputs:{entries:"entries",showDate:"showDate"},outputs:{editEntry:"editEntry",deleteEntry:"deleteEntry"},decls:4,vars:1,consts:[[1,"feeding-list"],[1,"empty-state"],[1,"feeding-entry",3,"is-active"],[1,"fas","fa-baby-carriage"],[1,"feeding-entry",3,"click"],[1,"entry-row"],[1,"entry-time"],[1,"time-chip"],["aria-hidden","true",1,"fas","fa-clock"],[1,"time"],[1,"entry-meta"],[1,"date"],[1,"entry-amount"],["aria-hidden","true",1,"fas","fa-bottle-droplet"],[1,"amount-text"],[1,"amount"],[1,"unit"],[1,"entry-actions"],[1,"btn-icon","btn-edit",3,"click"],[1,"fas","fa-pen"],[1,"btn-icon","btn-delete",3,"click"],[1,"fas","fa-trash-alt"],[1,"entry-comment"],["aria-hidden","true",1,"fas","fa-comment"]],template:function(e,r){e&1&&(x(0,"div",0),Z(1,eR,6,0,"div",1),cs(2,rR,22,6,"article",2,XA),$()),e&2&&(_(),Q(r.entries.length===0?1:-1),_(),ls(r.entries))},dependencies:[Je],styles:[".feeding-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.empty-state[_ngcontent-%COMP%]{border-radius:16px;padding:1.5rem 1.25rem;background:var(--bg-card);border:1px dashed var(--border-color);text-align:center;color:var(--text-light);display:flex;flex-direction:column;align-items:center;gap:.35rem}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem;color:var(--primary-color);margin-bottom:.25rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:600;color:var(--text-dark)}.empty-state[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.8rem;opacity:.8}.feeding-entry[_ngcontent-%COMP%]{border-radius:16px;padding:.9rem 1rem;display:flex;flex-direction:column;gap:.5rem;cursor:pointer;transition:box-shadow .2s ease,border-color .2s ease,transform .12s ease,background .18s ease}.feeding-entry[_ngcontent-%COMP%]:not(.is-active){background:linear-gradient(135deg,#222434,#1f2130);border:1px solid rgba(249,215,196,.08);box-shadow:0 8px 20px #00000059}.feeding-entry[_ngcontent-%COMP%]:not(.is-active):hover{border-color:#f9d7c459;box-shadow:0 10px 24px #00000073;transform:translateY(-1px)}.feeding-entry.is-active[_ngcontent-%COMP%]{background:radial-gradient(circle at top right,#d6bdff38,#191a27fa);border:1px solid rgba(249,215,196,.85);box-shadow:0 14px 32px #0000008c;transform:translateY(-2px)}.entry-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.entry-time[_ngcontent-%COMP%]{display:flex;align-items:center}.time-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.4rem;padding:.4rem .9rem;border-radius:999px;background:var(--bg-dark)}.time-chip[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem;color:var(--accent-beige, #f6e0cf);flex-shrink:0}.time-chip[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#fff;line-height:1}.entry-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-left:.75rem;flex:1;min-width:0}.entry-meta[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-light);padding:.25rem .5rem;border-radius:999px;background:#ffffff05;border:1px solid rgba(255,255,255,.04);white-space:nowrap}.entry-amount[_ngcontent-%COMP%]{margin-left:auto;display:inline-flex;align-items:center;gap:.4rem;padding:.45rem .9rem;border-radius:999px;background:var(--bg-dark);flex-shrink:0}.entry-amount[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem;color:var(--accent-beige, #f6e0cf);margin-top:.05rem}.amount-text[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:.25rem}.amount-text[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:#fff;line-height:1}.amount-text[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-light)}.entry-actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:.35rem;overflow:hidden;max-width:0;opacity:0;pointer-events:none;transform:translate(4px);transition:max-width .18s ease,opacity .18s ease,transform .18s ease}.feeding-entry.is-active[_ngcontent-%COMP%]   .entry-actions[_ngcontent-%COMP%]{max-width:96px;opacity:1;pointer-events:auto;transform:translate(0)}.btn-icon[_ngcontent-%COMP%]{width:2rem;height:2rem;border-radius:999px;border:none;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;transition:transform .15s ease,box-shadow .15s ease,filter .15s ease;flex-shrink:0;box-shadow:0 4px 10px #00000059}.btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.85rem}.btn-icon[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 6px 14px #0006}.btn-icon[_ngcontent-%COMP%]:active{transform:scale(.94);filter:brightness(.9)}.btn-edit[_ngcontent-%COMP%]{background-color:var(--accent-lavender);color:var(--bg-dark)}.btn-delete[_ngcontent-%COMP%]{background-color:var(--danger-color);color:var(--bg-dark)}.entry-comment[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding:.55rem .65rem;border-radius:10px;background:var(--bg-medium);border:1px solid var(--border-color)}.entry-comment[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem;color:var(--primary-color);margin-top:.2rem;flex-shrink:0}.entry-comment[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.85rem;color:var(--text-dark);line-height:1.4}@media(max-width:599px){.feeding-entry[_ngcontent-%COMP%]{padding:.8rem .85rem}.entry-row[_ngcontent-%COMP%]{flex-wrap:wrap;row-gap:.5rem}.entry-meta[_ngcontent-%COMP%]{margin-left:.5rem}}@media(min-width:768px){.feeding-entry[_ngcontent-%COMP%]{padding:1rem 1.1rem;gap:.6rem}.time-chip[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:1.25rem}.amount-text[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:1.4rem}.btn-icon[_ngcontent-%COMP%]{width:2.25rem;height:2.25rem}.btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}}"]})};function iR(n,t){if(n&1&&(g(0,"div",9),E(1,"i",15),g(2,"span",6),v(3),y(),g(4,"span",7),v(5),y()()),n&2){let e=I();ne("ngClass",e.feedingStatusClass()),_(),ne("ngClass",e.feedingStatusIcon()),_(2),Oe(e.feedingStatusLabel()),_(2),Oe(e.nextFeedCountdown())}}function oR(n,t){if(n&1){let e=Ie();g(0,"button",16),V("click",function(){B(e);let i=I();return H(i.openFormModal())}),E(1,"i",17),y()}}function sR(n,t){if(n&1){let e=Ie();g(0,"div",18),V("click",function(){B(e);let i=I();return H(i.closeFormModal())}),g(1,"div",19),V("click",function(i){return B(e),H(i.stopPropagation())}),g(2,"div",20)(3,"h3"),E(4,"i",15),v(5),y(),g(6,"button",21),V("click",function(){B(e);let i=I();return H(i.closeFormModal())}),E(7,"i",22),y()(),g(8,"div",23)(9,"app-feeding-form",24),V("submitForm",function(i){B(e);let o=I();return H(o.onSubmit(i))})("cancel",function(){B(e);let i=I();return H(i.closeFormModal())}),y()()()()}if(n&2){let e=I();_(4),ne("ngClass",e.editingEntry()?"fa-pen":"fa-plus-circle"),_(),re(" ",e.editingEntry()?"Edit":"Add New"," Feeding "),_(4),ne("entry",e.editingEntry())("defaultDate",e.todayDate)}}var ju=class n{feedingService=b(fn);notificationService=b(Jn);settingsService=b(Qn);destroyRef=b(lt);todayEntries=N([]);editingEntry=N(void 0);todayDate=new Date().toISOString().split("T")[0];nextFeedCountdown=N(null);showFormModal=N(!1);totalAmount=qe(()=>this.todayEntries().reduce((t,e)=>t+e.amount,0));feedingStatusLabel=qe(()=>{if(!this.nextFeedCountdown())return null;let e=this.notificationService.getTimeUntilNextNotification();if(e===null)return null;let r=Math.floor(e/1e3/60);return r>=-10&&r<=10?"Status":r<-10?"Feeding overdue":"Next feed in"});feedingStatusIcon=qe(()=>{if(!this.nextFeedCountdown())return"fa-clock";let e=this.notificationService.getTimeUntilNextNotification();if(e===null)return"fa-clock";let r=Math.floor(e/1e3/60);return r>=-10&&r<=10?"fa-bell":r<-10?"fa-exclamation-triangle":"fa-clock"});feedingStatusClass=qe(()=>{if(!this.nextFeedCountdown())return"";let e=this.notificationService.getTimeUntilNextNotification();if(e===null)return"";let r=Math.floor(e/1e3/60);return r>=-10&&r<=10?"feeding-time":r<-10?"overdue":""});constructor(){Qe(()=>{this.todayEntries(),this.settingsService.settings(),this.updateCountdown()})}ngOnInit(){this.feedingService.entries$.pipe(Rp(this.destroyRef)).subscribe(()=>{this.loadTodayEntries()}),this.loadTodayEntries(),Cd(6e4).pipe(Rp(this.destroyRef)).subscribe(()=>{this.updateCountdown()})}loadTodayEntries(){this.todayEntries.set(this.feedingService.getTodayEntries())}openFormModal(){this.showFormModal.set(!0)}closeFormModal(){this.showFormModal.set(!1),this.editingEntry.set(void 0)}async onSubmit(t){let e=this.editingEntry();e?await this.feedingService.updateEntry(e.id,t):await this.feedingService.createEntry(t),this.editingEntry.set(void 0),this.closeFormModal()}onEdit(t){this.editingEntry.set(t),this.openFormModal()}onCancelEdit(){this.closeFormModal()}async onDelete(t){await this.feedingService.deleteEntry(t)}updateCountdown(){let t=this.notificationService.getTimeUntilNextNotification();if(t===null||!this.settingsService.isFeedingIntervalEnabled()){this.nextFeedCountdown.set(null);return}let e=Math.floor(t/1e3/60);if(e>=-10&&e<=10){this.nextFeedCountdown.set("FEEDING TIME");return}if(e<-10){let o=Math.abs(e),s=Math.floor(o/60),a=o%60;s>0?this.nextFeedCountdown.set(`${s}h ${a}m`):this.nextFeedCountdown.set(`${a}m`);return}let r=Math.floor(e/60),i=e%60;r>0?this.nextFeedCountdown.set(`${r}h ${i}m`):this.nextFeedCountdown.set(`${i}m`)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=Te({type:n,selectors:[["app-today"]],decls:26,vars:6,consts:[[1,"page-container"],[1,"page-header"],[1,"fas","fa-sun"],[1,"today-stats"],[1,"stat"],[1,"fas","fa-bottle-droplet"],[1,"stat-label"],[1,"stat-value"],[1,"fas","fa-list-check"],[1,"stat","next-feed-stat",3,"ngClass"],[1,"fab"],[1,"modal-overlay"],[1,"list-section"],[1,"fas","fa-clock"],[3,"editEntry","deleteEntry","entries"],[1,"fas",3,"ngClass"],[1,"fab",3,"click"],[1,"fas","fa-plus"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[3,"submitForm","cancel","entry","defaultDate"]],template:function(e,r){e&1&&(g(0,"div",0)(1,"div",1)(2,"h2"),E(3,"i",2),v(4," Today's Feedings"),y(),g(5,"div",3)(6,"div",4),E(7,"i",5),g(8,"span",6),v(9,"Total"),y(),g(10,"span",7),v(11),y()(),g(12,"div",4),E(13,"i",8),g(14,"span",6),v(15,"Count"),y(),g(16,"span",7),v(17),y()(),Z(18,iR,6,4,"div",9),y()(),Z(19,oR,2,0,"button",10),Z(20,sR,10,4,"div",11),g(21,"div",12)(22,"h3"),E(23,"i",13),v(24," Today's Entries"),y(),g(25,"app-feeding-list",14),V("editEntry",function(o){return r.onEdit(o)})("deleteEntry",function(o){return r.onDelete(o)}),y()()()),e&2&&(_(11),re("",r.totalAmount()," ml"),_(6),Oe(r.todayEntries().length),_(),Q(r.nextFeedCountdown()?18:-1),_(),Q(r.showFormModal()?-1:19),_(),Q(r.showFormModal()?20:-1),_(5),ne("entries",r.todayEntries()))},dependencies:[Je,Pr,bo,wo],styles:[".today-stats[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-top:1rem}.stat[_ngcontent-%COMP%]{flex:1;background:linear-gradient(135deg,#222434,#1f2130);padding:1rem;border-radius:16px;box-shadow:var(--shadow);text-align:center;border:1px solid var(--border-subtle);display:flex;flex-direction:column;align-items:center;gap:.5rem;transition:transform .15s ease,box-shadow .15s ease,border-color .15s ease}.stat[_ngcontent-%COMP%]:hover{border-color:var(--border-medium);transform:translateY(-1px);box-shadow:var(--shadow-lg)}.stat[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.4rem;color:var(--accent-beige)}.stat-label[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:var(--text-light);text-transform:uppercase;letter-spacing:.5px;font-weight:600}.stat-value[_ngcontent-%COMP%]{display:block;font-size:1.5rem;font-weight:700;color:var(--accent-beige);line-height:1}.stat.feeding-time[_ngcontent-%COMP%]{border-color:#4caf5080}.stat.feeding-time[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#4caf50;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.stat.feeding-time[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#4caf50}.stat.overdue[_ngcontent-%COMP%]{border-color:#f4433680}.stat.overdue[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .stat.overdue[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#f44336}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.6}}.list-section[_ngcontent-%COMP%]{margin-top:1.5rem;padding-bottom:67px}.list-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;color:var(--text-dark);font-size:1.15rem}.fab[_ngcontent-%COMP%]{position:fixed;bottom:calc(85px + env(safe-area-inset-bottom));right:1.5rem;width:64px;height:64px;border-radius:50%;background:linear-gradient(135deg,var(--accent-lavender),var(--accent-beige));border:none;box-shadow:0 8px 24px #d6bdff66,0 4px 12px #00000080;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s cubic-bezier(.2,0,.2,1);z-index:100}.fab[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#fff;filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.fab[_ngcontent-%COMP%]:hover{transform:scale(1.1) translateY(-2px);box-shadow:0 12px 32px #d6bdff80,0 6px 16px #0009}.fab[_ngcontent-%COMP%]:active{transform:scale(.95)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:max(1rem,env(safe-area-inset-top)) max(1rem,env(safe-area-inset-right)) calc(80px + env(safe-area-inset-bottom)) max(1rem,env(safe-area-inset-left));animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.modal-content[_ngcontent-%COMP%]{background:radial-gradient(circle at top left,#d6bdff26,#191a27fa);border-radius:20px;border:2px solid rgba(214,189,255,.3);box-shadow:0 24px 48px #000000b3,0 0 0 1px #d6bdff66;max-width:500px;width:100%;max-height:100%;overflow:hidden;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.2,0,.2,1)}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem;background:linear-gradient(135deg,#d6bdff26,#b8d4c81a);border-bottom:2px solid rgba(214,189,255,.2)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.2rem;font-weight:700;letter-spacing:-.5px;text-shadow:0 2px 4px rgba(0,0,0,.3);display:flex;align-items:center;gap:.625rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--accent-lavender);filter:drop-shadow(0 2px 8px rgba(214,189,255,.4))}.btn-close[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;border:2px solid rgba(214,189,255,.2);background:#22243499;color:var(--text-light);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.btn-close[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.btn-close[_ngcontent-%COMP%]:hover{background:#d6bdff33;border-color:#d6bdff66;color:#fff;transform:rotate(90deg)}.btn-close[_ngcontent-%COMP%]:active{transform:rotate(90deg) scale(.95)}.modal-body[_ngcontent-%COMP%]{padding:1rem;overflow-y:auto}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media(min-width:768px){.today-stats[_ngcontent-%COMP%]{gap:1rem}.stat[_ngcontent-%COMP%]{padding:1.25rem}.stat[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.6rem}.stat-value[_ngcontent-%COMP%]{font-size:1.75rem}.list-section[_ngcontent-%COMP%]{margin-top:2rem;padding-bottom:120px}.fab[_ngcontent-%COMP%]{width:72px;height:72px;bottom:calc(95px + env(safe-area-inset-bottom));right:2rem}.fab[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem}.modal-content[_ngcontent-%COMP%]{max-width:600px}.modal-header[_ngcontent-%COMP%]{padding:1.75rem 1.75rem 1.5rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem}.modal-body[_ngcontent-%COMP%]{padding:1.75rem}}"]})};var aR=(n,t)=>t.date;function cR(n,t){n&1&&(g(0,"div",3),E(1,"i",7),g(2,"p"),v(3,"No feeding entries yet."),y(),g(4,"small"),v(5,"Start tracking on the Today page!"),y()())}function lR(n,t){if(n&1){let e=Ie();g(0,"div",8),V("click",function(){B(e);let i=I();return H(i.onCancelEdit())}),g(1,"div",9),V("click",function(i){return B(e),H(i.stopPropagation())}),g(2,"div",10)(3,"h3"),E(4,"i",11),v(5," Edit Feeding "),y(),g(6,"button",12),V("click",function(){B(e);let i=I();return H(i.onCancelEdit())}),E(7,"i",13),y()(),g(8,"div",14)(9,"app-feeding-form",15),V("submitForm",function(i){B(e);let o=I();return H(o.onSubmit(i))})("cancel",function(){B(e);let i=I();return H(i.onCancelEdit())}),y()()()()}if(n&2){let e=I();_(9),ne("entry",e.editingEntry())}}function uR(n,t){if(n&1){let e=Ie();g(0,"div",6)(1,"div",16)(2,"div",17),E(3,"i",18),g(4,"h3"),v(5),y()(),g(6,"div",19)(7,"span",20),v(8),y(),g(9,"div",21)(10,"span",22),E(11,"i",23),v(12),y(),g(13,"span",24),E(14,"i",25),v(15),y()()()(),g(16,"app-feeding-list",26),V("editEntry",function(i){B(e);let o=I();return H(o.onEdit(i))})("deleteEntry",function(i){B(e);let o=I();return H(o.onDelete(i))}),y()()}if(n&2){let e=t.$implicit,r=I();_(5),Oe(r.formatDate(e.date)),_(3),Oe(r.formatDateBadge(e.date)),_(4),re(" ",e.totalFeedings," "),_(3),re(" ",e.totalMilk," ml "),_(),ne("entries",e.entries)}}var Vu=class n{constructor(t){this.feedingService=t;Qe(()=>{this.feedingService.entries$.subscribe(()=>{this.loadEntries()})})}dateGroups=N([]);editingEntry=N(void 0);ngOnInit(){this.loadEntries()}loadEntries(){let t=this.feedingService.getUniqueDates();this.dateGroups.set(t.map(e=>{let r=this.feedingService.getEntriesByDate(e),i=r.reduce((o,s)=>o+s.amount,0);return{date:e,entries:r,totalFeedings:r.length,totalMilk:i}}))}onSubmit(t){let e=this.editingEntry();e?this.feedingService.updateEntry(e.id,t):this.feedingService.createEntry(t),this.editingEntry.set(void 0)}onEdit(t){this.editingEntry.set(t)}onCancelEdit(){this.editingEntry.set(void 0)}onDelete(t){this.feedingService.deleteEntry(t)}formatDate(t){let e=new Date(t+"T00:00:00"),r=new Date;r.setHours(0,0,0,0);let i=new Date(r);return i.setDate(i.getDate()-1),e.setHours(0,0,0,0),e.getTime()===r.getTime()?"Today":e.getTime()===i.getTime()?"Yesterday":e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}formatDateBadge(t){let e=new Date(t+"T00:00:00"),r=String(e.getDate()).padStart(2,"0"),i=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear();return`${r}.${i}.${o}`}static \u0275fac=function(e){return new(e||n)(U(fn))};static \u0275cmp=Te({type:n,selectors:[["app-log"]],decls:10,vars:2,consts:[[1,"page-container"],[1,"page-header"],[1,"fas","fa-calendar-days"],[1,"empty-state"],[1,"modal-overlay"],[1,"log-list"],[1,"date-group"],[1,"fas","fa-calendar-xmark"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"fas","fa-pen"],[1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[3,"submitForm","cancel","entry"],[1,"date-header"],[1,"date-header-row"],[1,"fas","fa-calendar"],[1,"date-header-row","date-header-bottom"],[1,"date-badge"],[1,"date-header-stats"],["title","Total feedings",1,"stat-badge"],[1,"fas","fa-hashtag"],["title","Total milk (ml)",1,"stat-badge"],[1,"fas","fa-bottle-droplet"],[3,"editEntry","deleteEntry","entries"]],template:function(e,r){e&1&&(g(0,"div",0)(1,"div",1)(2,"h2"),E(3,"i",2),v(4," Feeding Log"),y()(),Z(5,cR,6,0,"div",3),Z(6,lR,10,1,"div",4),g(7,"div",5),cs(8,uR,17,5,"div",6,aR),y()()),e&2&&(_(5),Q(r.dateGroups().length===0?5:-1),_(),Q(r.editingEntry()?6:-1),_(2),ls(r.dateGroups()))},dependencies:[Je,bo,wo],styles:[".log-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2.5rem}.date-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.date-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;padding:1.25rem 1.5rem;background:radial-gradient(circle at top left,#d6bdff2e,#191a27f2);border-radius:18px;border:2px solid var(--border-medium);box-shadow:0 12px 28px #00000080;position:sticky;top:10px;z-index:10;transition:all .2s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.date-header[_ngcontent-%COMP%]:hover{border-color:var(--border-strong);box-shadow:0 14px 32px #0009;transform:translateY(-2px)}.date-header-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.date-header-row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--accent-beige);font-size:1.5rem;filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.date-header-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.25rem;font-weight:700;letter-spacing:-.5px;text-shadow:0 2px 4px rgba(0,0,0,.3);flex:1}.date-header-row.date-header-bottom[_ngcontent-%COMP%]{justify-content:space-between}.date-header-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.stat-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.35rem;font-size:.75rem;color:var(--text-dark);padding:.35rem .7rem;background:linear-gradient(135deg,#b8d4c840,#a4c0b433);border:1px solid rgba(184,212,200,.35);border-radius:999px;font-weight:600;letter-spacing:.3px;box-shadow:0 2px 6px #0003;white-space:nowrap}.stat-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.7rem;color:var(--accent-lavender);filter:none}.date-badge[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-dark);padding:.45rem .9rem;background:linear-gradient(135deg,#e8d5c433,#d4c5e026);border:1px solid var(--border-medium);border-radius:999px;font-weight:700;letter-spacing:.5px;text-transform:uppercase;box-shadow:0 2px 8px #0000004d}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:max(1rem,env(safe-area-inset-top)) max(1rem,env(safe-area-inset-right)) calc(80px + env(safe-area-inset-bottom)) max(1rem,env(safe-area-inset-left));animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.modal-content[_ngcontent-%COMP%]{background:radial-gradient(circle at top left,#d6bdff26,#191a27fa);border-radius:20px;border:2px solid rgba(214,189,255,.3);box-shadow:0 24px 48px #000000b3,0 0 0 1px #d6bdff66;max-width:500px;width:100%;max-height:100%;overflow:hidden;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.2,0,.2,1)}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem;background:linear-gradient(135deg,#d6bdff26,#b8d4c81a);border-bottom:2px solid rgba(214,189,255,.2)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.2rem;font-weight:700;letter-spacing:-.5px;text-shadow:0 2px 4px rgba(0,0,0,.3);display:flex;align-items:center;gap:.625rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--accent-lavender);filter:drop-shadow(0 2px 8px rgba(214,189,255,.4))}.btn-close[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;border:2px solid rgba(214,189,255,.2);background:#22243499;color:var(--text-light);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.btn-close[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.btn-close[_ngcontent-%COMP%]:hover{background:#d6bdff33;border-color:#d6bdff66;color:#fff;transform:rotate(90deg)}.btn-close[_ngcontent-%COMP%]:active{transform:rotate(90deg) scale(.95)}.modal-body[_ngcontent-%COMP%]{padding:1rem;overflow-y:auto}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media(min-width:768px){.log-list[_ngcontent-%COMP%]{gap:3rem}.date-header[_ngcontent-%COMP%]{padding:1.5rem 1.75rem}.date-header-row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem}.date-header-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem}.stat-badge[_ngcontent-%COMP%]{font-size:.8rem;padding:.4rem .8rem;gap:.4rem}.stat-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.75rem}.date-badge[_ngcontent-%COMP%]{font-size:.85rem;padding:.5rem 1rem}.modal-content[_ngcontent-%COMP%]{max-width:600px}.modal-header[_ngcontent-%COMP%]{padding:1.25rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem}.modal-body[_ngcontent-%COMP%]{padding:1.25rem}}"]})};function dR(n,t){if(n&1&&(x(0,"div",4)(1,"div",6),pe(2,"i",7),x(3,"h3"),v(4,"Last 7 Days"),$()(),x(5,"div",8)(6,"div",9)(7,"div",10),pe(8,"i",11),x(9,"span"),v(10,"Total Feedings"),$()(),x(11,"span",12),v(12),$()(),x(13,"div",9)(14,"div",10),pe(15,"i",13),x(16,"span"),v(17,"Total Amount"),$()(),x(18,"span",12),v(19),$()(),x(20,"div",9)(21,"div",10),pe(22,"i",14),x(23,"span"),v(24,"Average per Feeding"),$()(),x(25,"span",12),v(26),$()(),x(27,"div",9)(28,"div",10),pe(29,"i",15),x(30,"span"),v(31,"Average per Day"),$()(),x(32,"span",12),v(33),$()()()()),n&2){let e=I();_(12),Oe(e.weekStats().totalFeedings),_(7),re("",e.weekStats().totalAmount," ml"),_(7),re("",e.weekStats().averageAmount," ml"),_(7),Oe(e.weekStats().averageFeedingsPerDay)}}function fR(n,t){if(n&1&&(x(0,"div",4)(1,"div",6),pe(2,"i",16),x(3,"h3"),v(4,"Last 30 Days"),$()(),x(5,"div",8)(6,"div",9)(7,"div",10),pe(8,"i",11),x(9,"span"),v(10,"Total Feedings"),$()(),x(11,"span",12),v(12),$()(),x(13,"div",9)(14,"div",10),pe(15,"i",13),x(16,"span"),v(17,"Total Amount"),$()(),x(18,"span",12),v(19),$()(),x(20,"div",9)(21,"div",10),pe(22,"i",14),x(23,"span"),v(24,"Average per Feeding"),$()(),x(25,"span",12),v(26),$()(),x(27,"div",9)(28,"div",10),pe(29,"i",15),x(30,"span"),v(31,"Average per Day"),$()(),x(32,"span",12),v(33),$()()()()),n&2){let e=I();_(12),Oe(e.monthStats().totalFeedings),_(7),re("",e.monthStats().totalAmount," ml"),_(7),re("",e.monthStats().averageAmount," ml"),_(7),Oe(e.monthStats().averageFeedingsPerDay)}}function hR(n,t){if(n&1&&(x(0,"div",4)(1,"div",6),pe(2,"i",17),x(3,"h3"),v(4,"All Time"),$()(),x(5,"div",8)(6,"div",9)(7,"div",10),pe(8,"i",11),x(9,"span"),v(10,"Total Feedings"),$()(),x(11,"span",12),v(12),$()(),x(13,"div",9)(14,"div",10),pe(15,"i",13),x(16,"span"),v(17,"Total Amount"),$()(),x(18,"span",12),v(19),$()(),x(20,"div",9)(21,"div",10),pe(22,"i",14),x(23,"span"),v(24,"Average per Feeding"),$()(),x(25,"span",12),v(26),$()(),x(27,"div",9)(28,"div",10),pe(29,"i",15),x(30,"span"),v(31,"Average per Day"),$()(),x(32,"span",12),v(33),$()()()()),n&2){let e=I();_(12),Oe(e.allTimeStats().totalFeedings),_(7),re("",e.allTimeStats().totalAmount," ml"),_(7),re("",e.allTimeStats().averageAmount," ml"),_(7),Oe(e.allTimeStats().averageFeedingsPerDay)}}function pR(n,t){n&1&&(x(0,"div",5),pe(1,"i",18),x(2,"p"),v(3,"No feeding data available yet."),$(),x(4,"small"),v(5,"Start tracking on the Today page!"),$()())}var Uu=class n{constructor(t){this.feedingService=t;Qe(()=>{this.feedingService.entries$.subscribe(()=>{this.loadStatistics()})})}weekStats=N(void 0);monthStats=N(void 0);allTimeStats=N(void 0);ngOnInit(){this.loadStatistics()}loadStatistics(){let t=new Date;t.setDate(t.getDate()-7);let e=t.toISOString().split("T")[0],r=new Date;r.setMonth(r.getMonth()-1);let i=r.toISOString().split("T")[0];this.weekStats.set(this.feedingService.getStatistics(e)),this.monthStats.set(this.feedingService.getStatistics(i)),this.allTimeStats.set(this.feedingService.getStatistics())}static \u0275fac=function(e){return new(e||n)(U(fn))};static \u0275cmp=Te({type:n,selectors:[["app-statistics"]],decls:10,vars:4,consts:[[1,"page-container"],[1,"page-header"],[1,"fas","fa-chart-line"],[1,"stats-grid"],[1,"stat-card"],[1,"empty-state"],[1,"card-header"],[1,"fas","fa-calendar-week"],[1,"card-body"],[1,"stat-row"],[1,"stat-label"],[1,"fas","fa-hashtag"],[1,"stat-value"],[1,"fas","fa-bottle-droplet"],[1,"fas","fa-chart-bar"],[1,"fas","fa-calendar-day"],[1,"fas","fa-calendar-alt"],[1,"fas","fa-infinity"],[1,"fas","fa-chart-pie"]],template:function(e,r){e&1&&(x(0,"div",0)(1,"div",1)(2,"h2"),pe(3,"i",2),v(4," Statistics"),$()(),x(5,"div",3),Z(6,dR,34,4,"div",4),Z(7,fR,34,4,"div",4),Z(8,hR,34,4,"div",4),$(),Z(9,pR,6,0,"div",5),$()),e&2&&(_(6),Q(r.weekStats()?6:-1),_(),Q(r.monthStats()?7:-1),_(),Q(r.allTimeStats()?8:-1),_(),Q(!r.allTimeStats()||r.allTimeStats().totalFeedings===0?9:-1))},dependencies:[Je],styles:[".stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1.5rem;margin-top:1.5rem}.stat-card[_ngcontent-%COMP%]{background:radial-gradient(circle at top left,#d6bdff26,#191a27fa);border-radius:20px;border:2px solid rgba(214,189,255,.25);box-shadow:0 12px 32px #00000080,0 0 0 1px #d6bdff4d;overflow:hidden;transition:all .3s cubic-bezier(.2,0,.2,1)}.stat-card[_ngcontent-%COMP%]:hover{border-color:#d6bdff66;box-shadow:0 16px 40px #0009,0 0 0 1px #d6bdff66,0 0 40px #d6bdff26;transform:translateY(-4px)}.card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.875rem;padding:1.5rem 1.5rem 1.25rem;background:linear-gradient(135deg,#d6bdff26,#b8d4c81a);border-bottom:2px solid rgba(214,189,255,.2)}.card-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem;color:var(--accent-lavender);filter:drop-shadow(0 2px 8px rgba(214,189,255,.4))}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.3rem;font-weight:700;letter-spacing:-.5px;text-shadow:0 2px 4px rgba(0,0,0,.3)}.card-body[_ngcontent-%COMP%]{padding:1.25rem 1.5rem 1.5rem}.stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 0;border-bottom:1px solid rgba(214,189,255,.1)}.stat-row[_ngcontent-%COMP%]:first-child{padding-top:0}.stat-row[_ngcontent-%COMP%]:last-child{border-bottom:none;padding-bottom:0}.stat-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;color:var(--text-light);font-weight:500;font-size:.95rem}.stat-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;color:var(--accent-beige);filter:drop-shadow(0 2px 4px rgba(232,213,196,.3));width:1.25rem;text-align:center}.stat-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.stat-value[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-size:1.25rem;letter-spacing:-.5px;text-shadow:0 2px 4px rgba(0,0,0,.3);background:linear-gradient(135deg,var(--accent-lavender),var(--accent-beige));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;padding-left:1rem;text-align:right;min-width:100px}@media(min-width:768px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:2rem}.card-header[_ngcontent-%COMP%]{padding:1.75rem 1.75rem 1.5rem}.card-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem}.card-body[_ngcontent-%COMP%]{padding:1.5rem 1.75rem 1.75rem}.stat-row[_ngcontent-%COMP%]{padding:1.125rem 0}.stat-label[_ngcontent-%COMP%]{font-size:1rem}.stat-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.125rem}.stat-value[_ngcontent-%COMP%]{font-size:1.4rem}}@media(min-width:1200px){.stats-grid[_ngcontent-%COMP%]{gap:2.5rem}}"]})};function gR(n,t){n&1&&(g(0,"div",3),E(1,"i",4),g(2,"span"),v(3,"Loading settings..."),y()())}function mR(n,t){if(n&1){let e=Ie();g(0,"button",29),V("click",function(){B(e);let i=I(4);return H(i.testNotification())}),E(1,"i",30),g(2,"span"),v(3,"Test Notification"),y()()}}function vR(n,t){if(n&1&&(g(0,"div",24)(1,"div",25),E(2,"i",26),y(),g(3,"div",27)(4,"strong"),v(5,"Notification Status:"),y(),g(6,"span"),v(7),y()()(),Z(8,mR,4,0,"button",28)),n&2){let e=I(3);_(),oe("active",e.notificationsEnabled()),_(),ne("ngClass",e.notificationsEnabled()?"fa-bell":"fa-bell-slash"),_(4),oe("success",e.notificationsEnabled())("warning",!e.notificationsEnabled()),_(),re(" ",e.getNotificationStatusText()," "),_(),Q(e.notificationsSupported()?8:-1)}}function yR(n,t){if(n&1){let e=Ie();g(0,"div",8)(1,"label",19),E(2,"i",20),v(3," Interval "),g(4,"span",21),v(5,"(hours)"),y()(),g(6,"input",22),V("input",function(i){B(e);let o=I(2);return H(o.onIntervalChange(+i.target.value))}),y(),g(7,"small",23),v(8," A countdown will appear on the Today screen showing time until next feeding "),y()(),g(9,"div",8)(10,"label",9)(11,"input",10),V("change",function(i){B(e);let o=I(2);return H(o.onToggleNotifications(i.target.checked))}),y(),E(12,"span",11),g(13,"span",12),v(14," Enable Browser Notifications "),y()(),g(15,"small",23),v(16," Get browser notifications when it's time to feed "),y()(),Z(17,vR,9,9)}if(n&2){let e=I(2);_(6),ne("value",e.intervalHours()),_(5),ne("checked",e.notificationsToggleEnabled()),_(6),Q(e.notificationsToggleEnabled()?17:-1)}}function _R(n,t){n&1&&(E(0,"i",4),g(1,"span"),v(2,"Saving..."),y())}function bR(n,t){n&1&&(E(0,"i",31),g(1,"span"),v(2,"Save Settings"),y())}function wR(n,t){if(n&1&&(g(0,"div",32),E(1,"i",26),v(2),y()),n&2){let e=I(2);oe("success",e.saveMessage().includes("success"))("error",e.saveMessage().includes("Failed")),_(),ne("ngClass",e.saveMessage().includes("success")?"fa-check-circle":"fa-exclamation-circle"),_(),re(" ",e.saveMessage()," ")}}function CR(n,t){if(n&1){let e=Ie();g(0,"div",5)(1,"h3"),E(2,"i",6),v(3," Feeding Interval Reminder"),y(),g(4,"p",7),v(5," Track the time between feedings and get reminded when it's time to feed. "),y(),g(6,"div",8)(7,"label",9)(8,"input",10),V("change",function(i){B(e);let o=I();return H(o.onToggleInterval(i.target.checked))}),y(),E(9,"span",11),g(10,"span",12),v(11," Enable Feeding Interval "),y()()(),Z(12,yR,18,3),y(),g(13,"div",13)(14,"button",14),V("click",function(){B(e);let i=I();return H(i.onSave())}),Z(15,_R,3,0)(16,bR,3,0),y()(),Z(17,wR,3,6,"div",15),g(18,"div",16)(19,"button",17),V("click",function(){B(e);let i=I();return H(i.logout())}),E(20,"i",18),g(21,"span"),v(22,"Logout"),y()()()}if(n&2){let e=I();_(8),ne("checked",e.intervalEnabled()),_(4),Q(e.intervalEnabled()?12:-1),_(2),ne("disabled",e.isSaving()),_(),Q(e.isSaving()?15:16),_(2),Q(e.saveMessage()?17:-1)}}var $u=class n{settingsService=b(Qn);notificationService=b(Jn);authService=b($e);isLoading=N(!0);intervalEnabled=N(!1);intervalHours=N(3);notificationsToggleEnabled=N(!1);isSaving=N(!1);saveMessage=N("");notificationsSupported=N(!1);notificationPermission=N("default");notificationsEnabled=qe(()=>this.notificationPermission()==="granted"&&this.intervalEnabled());constructor(){Qe(()=>{if(this.settingsService.settings()){let e=this.settingsService.getFeedingInterval();e===null?(this.intervalEnabled.set(!1),this.intervalHours.set(this.settingsService.getDefaultInterval())):(this.intervalEnabled.set(!0),this.intervalHours.set(e)),this.notificationsToggleEnabled.set(this.settingsService.areNotificationsEnabled()),this.isLoading.set(!1)}})}ngOnInit(){this.notificationsSupported.set("Notification"in window),"Notification"in window&&this.notificationPermission.set(Notification.permission)}async onSave(){this.isSaving.set(!0),this.saveMessage.set("");let t=this.intervalEnabled()?this.intervalHours():null,e=await this.settingsService.updateFeedingInterval(t),r=await this.settingsService.updateNotificationsEnabled(this.notificationsToggleEnabled());if(this.isSaving.set(!1),!e||!r){this.saveMessage.set("Failed to save settings. Please try again."),setTimeout(()=>this.saveMessage.set(""),5e3);return}if(this.intervalEnabled()&&this.notificationsToggleEnabled()&&this.notificationsSupported()){let i=await this.notificationService.requestPermission();if(this.notificationPermission.set(Notification.permission),!i&&this.notificationPermission()!=="granted"){this.saveMessage.set("Settings saved, but notifications are blocked. Enable them in your browser settings."),setTimeout(()=>this.saveMessage.set(""),5e3);return}}this.saveMessage.set("Settings saved successfully!"),setTimeout(()=>this.saveMessage.set(""),3e3)}onToggleInterval(t){this.intervalEnabled.set(t)}onIntervalChange(t){t<.5&&(t=.5),t>24&&(t=24),this.intervalHours.set(t)}onToggleNotifications(t){this.notificationsToggleEnabled.set(t)}async testNotification(){let t=await this.notificationService.testNotification();"Notification"in window&&this.notificationPermission.set(Notification.permission),t&&this.notificationPermission()==="granted"?(this.saveMessage.set("Test notification sent! If you don't see it, check your browser's notification settings or system Do Not Disturb mode."),setTimeout(()=>this.saveMessage.set(""),5e3)):this.notificationPermission()==="denied"?(this.saveMessage.set("Notifications are blocked. Please enable them in your browser settings (usually in the address bar)."),setTimeout(()=>this.saveMessage.set(""),5e3)):this.notificationPermission()==="default"?(this.saveMessage.set("Please allow notifications when prompted by your browser."),setTimeout(()=>this.saveMessage.set(""),5e3)):(this.saveMessage.set("Failed to send notification. Please try again or check your browser settings."),setTimeout(()=>this.saveMessage.set(""),5e3))}getNotificationStatusText(){if(!this.notificationsSupported())return"Browser notifications are not supported on this device.";let t=this.notificationPermission();return t==="granted"?this.intervalEnabled()?"\u2713 Notifications enabled and working":"Enable interval to receive notifications":t==="denied"?"\u2717 Notifications blocked by browser":'Click "Save Settings" to enable notifications'}async logout(){await this.authService.signOut()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=Te({type:n,selectors:[["app-settings"]],decls:7,vars:1,consts:[[1,"page-container"],[1,"page-header"],[1,"fas","fa-cog"],[1,"loading-container"],[1,"fas","fa-spinner","fa-spin"],[1,"settings-card"],[1,"fas","fa-bell"],[1,"settings-description"],[1,"form-group"],[1,"toggle-label"],["type","checkbox",1,"toggle-input",3,"change","checked"],[1,"toggle-switch"],[1,"toggle-text"],[1,"form-actions"],[1,"btn","btn-primary",3,"click","disabled"],[1,"save-message",3,"success","error"],[1,"logout-section"],[1,"btn","btn-logout",3,"click"],[1,"fas","fa-sign-out-alt"],["for","interval-hours"],[1,"fas","fa-clock"],[1,"unit"],["id","interval-hours","type","number","min","0.5","max","24","step","0.5","placeholder","3",1,"form-control",3,"input","value"],[1,"form-hint"],[1,"notification-status"],[1,"status-indicator"],[1,"fas",3,"ngClass"],[1,"status-text"],["type","button",1,"btn","btn-secondary","test-btn"],["type","button",1,"btn","btn-secondary","test-btn",3,"click"],[1,"fas","fa-vial"],[1,"fas","fa-save"],[1,"save-message"]],template:function(e,r){e&1&&(g(0,"div",0)(1,"div",1)(2,"h2"),E(3,"i",2),v(4," Settings"),y()(),Z(5,gR,4,0,"div",3)(6,CR,23,5),y()),e&2&&(_(5),Q(r.isLoading()?5:6))},dependencies:[Je,Pr,hC],styles:['.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;padding:3rem 1.5rem;background:radial-gradient(circle at top left,#d6bdff26,#191a27fa);border-radius:20px;box-shadow:0 12px 32px #00000080,0 0 0 1px #d6bdff4d;border:2px solid rgba(214,189,255,.25)}.loading-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;color:var(--accent-lavender);filter:drop-shadow(0 2px 8px rgba(214,189,255,.4))}.loading-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-light);font-weight:500}.settings-card[_ngcontent-%COMP%]{background:radial-gradient(circle at top left,#d6bdff26,#191a27fa);padding:1.5rem;border-radius:20px;box-shadow:0 12px 32px #00000080,0 0 0 1px #d6bdff4d;border:2px solid rgba(214,189,255,.25);transition:all .3s cubic-bezier(.2,0,.2,1)}.settings-card[_ngcontent-%COMP%]:hover{border-color:#d6bdff66;box-shadow:0 16px 40px #0009,0 0 0 1px #d6bdff66,0 0 40px #d6bdff26;transform:translateY(-2px)}.settings-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:.75rem;color:#fff;font-size:1.15rem}.settings-card[_ngcontent-%COMP%]   .settings-description[_ngcontent-%COMP%]{color:var(--text-light);margin:0 0 1.5rem;font-size:.9rem;line-height:1.5}.toggle-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;cursor:pointer;-webkit-user-select:none;user-select:none;padding:.5rem 0}.toggle-input[_ngcontent-%COMP%]{position:absolute;opacity:0;pointer-events:none}.toggle-input[_ngcontent-%COMP%]:checked + .toggle-switch[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--accent-lavender),var(--accent-beige));box-shadow:0 0 12px #d6bdff66}.toggle-input[_ngcontent-%COMP%]:checked + .toggle-switch[_ngcontent-%COMP%]:before{transform:translate(26px)}.toggle-switch[_ngcontent-%COMP%]{position:relative;width:54px;height:30px;background:linear-gradient(135deg,#222434,#1f2130);border-radius:15px;transition:all .3s cubic-bezier(.2,0,.2,1);border:2px solid rgba(214,189,255,.2);box-shadow:inset 0 2px 6px #0000004d}.toggle-switch[_ngcontent-%COMP%]:before{content:"";position:absolute;width:24px;height:24px;border-radius:50%;background:linear-gradient(135deg,var(--accent-beige),var(--accent-peach));top:1px;left:2px;transition:transform .3s cubic-bezier(.2,0,.2,1);box-shadow:0 3px 8px #0006}.toggle-text[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--accent-beige);text-transform:uppercase;letter-spacing:.5px;font-size:.9rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;margin-bottom:.625rem;color:var(--accent-beige);font-weight:700;font-size:.95rem;text-transform:uppercase;letter-spacing:.5px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--accent-lavender);filter:drop-shadow(0 2px 4px rgba(214,189,255,.3))}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{text-transform:none;font-weight:500;color:var(--text-light)}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;font-size:1rem;font-weight:500;color:#fff;background:linear-gradient(135deg,#2a2d4199,#23253799);border:2px solid rgba(214,189,255,.15);border-radius:14px;transition:all .25s cubic-bezier(.2,0,.2,1);box-shadow:inset 0 2px 6px #0000004d}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--text-light);opacity:.6}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:hover{border-color:#d6bdff4d;background:linear-gradient(135deg,#2d3046b3,#26283ab3)}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-lavender);background:linear-gradient(135deg,#32354bcc,#2a2d3fcc);box-shadow:inset 0 2px 6px #0000004d,0 0 0 3px #d6bdff33,0 4px 16px #d6bdff4d;transform:translateY(-1px)}.form-group[_ngcontent-%COMP%]   .form-hint[_ngcontent-%COMP%]{display:block;margin-top:.5rem;color:var(--text-light);font-size:.85rem;font-style:italic}.notification-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;background:linear-gradient(135deg,#22243499,#1f213099);border:2px solid rgba(214,189,255,.15);border-radius:12px;margin-top:1rem}.notification-status[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#e8b4b84d,#d4a0a44d);border:2px solid rgba(232,180,184,.4);transition:all .3s ease}.notification-status[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--danger-color)}.notification-status[_ngcontent-%COMP%]   .status-indicator.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#b8d4c84d,#98c0b44d);border-color:#b8d4c880;box-shadow:0 0 16px #b8d4c84d}.notification-status[_ngcontent-%COMP%]   .status-indicator.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--success-color);animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.notification-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.25rem}.notification-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-dark);font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.notification-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-light)}.notification-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   span.success[_ngcontent-%COMP%]{color:var(--success-color);font-weight:600}.notification-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   span.warning[_ngcontent-%COMP%]{color:var(--accent-peach);font-weight:600}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.8}}.test-btn[_ngcontent-%COMP%]{width:100%;margin-top:1rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-top:1.5rem}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1;border-radius:12px;padding:.875rem 1.5rem;font-size:1rem;font-weight:600}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.save-message[_ngcontent-%COMP%]{margin-top:1rem;padding:.875rem 1.25rem;border-radius:12px;display:flex;align-items:center;gap:.625rem;font-size:.9rem;font-weight:600;animation:_ngcontent-%COMP%_slideIn .3s cubic-bezier(.2,0,.2,1)}.save-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.save-message.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#b8d4c840,#98c0b440);color:var(--success-color);border:2px solid rgba(184,212,200,.4);box-shadow:0 4px 12px #b8d4c833}.save-message.error[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e8b4b840,#d4a0a440);color:var(--danger-color);border:2px solid rgba(232,180,184,.4);box-shadow:0 4px 12px #e8b4b833}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}.logout-section[_ngcontent-%COMP%]{margin-top:2rem;padding-top:2rem;border-top:2px solid rgba(214,189,255,.15)}.logout-section[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,#e8b4b84d,#d4a0a44d);border:2px solid rgba(232,180,184,.4);color:#e8b4b8;border-radius:12px;padding:.875rem 1.5rem;font-size:1rem;font-weight:600;display:flex;align-items:center;justify-content:center;gap:.625rem;cursor:pointer;transition:all .3s cubic-bezier(.2,0,.2,1);box-shadow:0 4px 12px #e8b4b833}.logout-section[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;filter:drop-shadow(0 2px 4px rgba(232,180,184,.3))}.logout-section[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e8b4b866,#d4a0a466);border-color:#e8b4b899;transform:translateY(-2px);box-shadow:0 8px 20px #e8b4b84d;color:#ffc4c8}.logout-section[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 8px #e8b4b833}@media(min-width:768px){.settings-card[_ngcontent-%COMP%]{padding:2rem}.form-actions[_ngcontent-%COMP%]{gap:1rem}.logout-section[_ngcontent-%COMP%]{margin-top:2.5rem;padding-top:2.5rem}}']})};function ER(n,t){if(n&1&&(g(0,"div",13),E(1,"i",20),v(2),y()),n&2){let e=I(2);_(2),re(" ",e.errorMessage()," ")}}function DR(n,t){if(n&1&&(g(0,"div",14),E(1,"i",21),v(2),y()),n&2){let e=I(2);_(2),re(" ",e.successMessage()," ")}}function SR(n,t){if(n&1){let e=Ie();g(0,"form",6),V("ngSubmit",function(){B(e);let i=I();return H(i.onForgotPassword())}),g(1,"h2"),E(2,"i",7),v(3," Reset Password "),y(),g(4,"p",8),v(5,"Enter your email address and we'll send you a link to reset your password."),y(),g(6,"div",9)(7,"label",10),E(8,"i",11),v(9," EMAIL "),y(),E(10,"input",12),y(),Z(11,ER,3,1,"div",13),Z(12,DR,3,1,"div",14),g(13,"button",15),E(14,"i",16),v(15),y(),g(16,"div",17)(17,"button",18),V("click",function(){B(e);let i=I();return H(i.backToLogin())}),E(18,"i",19),v(19," Back to Login "),y()()()}if(n&2){let e,r=I();ne("formGroup",r.forgotPasswordForm),_(10),oe("error",((e=r.forgotPasswordForm.get("email"))==null?null:e.invalid)&&((e=r.forgotPasswordForm.get("email"))==null?null:e.touched)),_(),Q(r.errorMessage()?11:-1),_(),Q(r.successMessage()?12:-1),_(),ne("disabled",r.isLoading()),_(),oe("fa-spinner",r.isLoading())("fa-spin",r.isLoading())("fa-paper-plane",!r.isLoading()),_(),re(" ",r.isLoading()?"Sending...":"Send Reset Link"," ")}}function IR(n,t){if(n&1&&(g(0,"div",13),E(1,"i",20),v(2),y()),n&2){let e=I(2);_(2),re(" ",e.errorMessage()," ")}}function xR(n,t){if(n&1){let e=Ie();g(0,"form",6),V("ngSubmit",function(){B(e);let i=I();return H(i.onLogin())}),g(1,"h2"),E(2,"i",22),v(3," Welcome Back "),y(),g(4,"div",9)(5,"label",23),E(6,"i",24),v(7," USERNAME "),y(),E(8,"input",25),y(),g(9,"div",9)(10,"label",26),E(11,"i",27),v(12," PASSWORD "),y(),g(13,"div",28),E(14,"input",29),g(15,"button",30),V("click",function(){B(e);let i=I();return H(i.toggleLoginPassword())}),E(16,"i",16),y()()(),Z(17,IR,3,1,"div",13),g(18,"button",15),E(19,"i",16),v(20),y(),g(21,"div",31)(22,"button",18),V("click",function(){B(e);let i=I();return H(i.showForgotPassword())}),v(23," Forgot password? "),y()(),g(24,"div",17)(25,"span"),v(26,"Don't have an account?"),y(),g(27,"button",18),V("click",function(){B(e);let i=I();return H(i.toggleMode())}),v(28," Sign up here "),y()()()}if(n&2){let e,r,i=I();ne("formGroup",i.loginForm),_(8),oe("error",((e=i.loginForm.get("username"))==null?null:e.invalid)&&((e=i.loginForm.get("username"))==null?null:e.touched)),_(6),oe("error",((r=i.loginForm.get("password"))==null?null:r.invalid)&&((r=i.loginForm.get("password"))==null?null:r.touched)),ne("type",i.showLoginPassword()?"text":"password"),_(2),oe("fa-eye",!i.showLoginPassword())("fa-eye-slash",i.showLoginPassword()),_(),Q(i.errorMessage()?17:-1),_(),ne("disabled",i.isLoading()),_(),oe("fa-spinner",i.isLoading())("fa-spin",i.isLoading())("fa-sign-in-alt",!i.isLoading()),_(),re(" ",i.isLoading()?"Signing in...":"Sign In"," ")}}function MR(n,t){if(n&1&&(g(0,"div",13),E(1,"i",20),v(2),y()),n&2){let e=I(2);_(2),re(" ",e.errorMessage()," ")}}function TR(n,t){if(n&1){let e=Ie();g(0,"form",6),V("ngSubmit",function(){B(e);let i=I();return H(i.onSignup())}),g(1,"h2"),E(2,"i",32),v(3," Create Account "),y(),g(4,"div",9)(5,"label",33),E(6,"i",24),v(7," USERNAME "),y(),E(8,"input",34),y(),g(9,"div",9)(10,"label",35),E(11,"i",11),v(12," EMAIL "),y(),E(13,"input",36),y(),g(14,"div",9)(15,"label",37),E(16,"i",27),v(17," PASSWORD "),y(),g(18,"div",28),E(19,"input",38),g(20,"button",30),V("click",function(){B(e);let i=I();return H(i.toggleSignupPassword())}),E(21,"i",16),y()()(),g(22,"div",9)(23,"label",39),E(24,"i",27),v(25," CONFIRM PASSWORD "),y(),g(26,"div",28),E(27,"input",40),g(28,"button",30),V("click",function(){B(e);let i=I();return H(i.toggleSignupConfirmPassword())}),E(29,"i",16),y()()(),Z(30,MR,3,1,"div",13),g(31,"button",15),E(32,"i",16),v(33),y(),g(34,"div",17)(35,"span"),v(36,"Already have an account?"),y(),g(37,"button",18),V("click",function(){B(e);let i=I();return H(i.toggleMode())}),v(38," Sign in here "),y()()()}if(n&2){let e,r,i,o,s=I();ne("formGroup",s.signupForm),_(8),oe("error",((e=s.signupForm.get("username"))==null?null:e.invalid)&&((e=s.signupForm.get("username"))==null?null:e.touched)),_(5),oe("error",((r=s.signupForm.get("email"))==null?null:r.invalid)&&((r=s.signupForm.get("email"))==null?null:r.touched)),_(6),oe("error",((i=s.signupForm.get("password"))==null?null:i.invalid)&&((i=s.signupForm.get("password"))==null?null:i.touched)),ne("type",s.showSignupPassword()?"text":"password"),_(2),oe("fa-eye",!s.showSignupPassword())("fa-eye-slash",s.showSignupPassword()),_(6),oe("error",((o=s.signupForm.get("confirmPassword"))==null?null:o.invalid)&&((o=s.signupForm.get("confirmPassword"))==null?null:o.touched)),ne("type",s.showSignupConfirmPassword()?"text":"password"),_(2),oe("fa-eye",!s.showSignupConfirmPassword())("fa-eye-slash",s.showSignupConfirmPassword()),_(),Q(s.errorMessage()?30:-1),_(),ne("disabled",s.isLoading()),_(),oe("fa-spinner",s.isLoading())("fa-spin",s.isLoading())("fa-user-plus",!s.isLoading()),_(),re(" ",s.isLoading()?"Creating account...":"Create Account"," ")}}var Bu=class n{constructor(t,e,r){this.fb=t;this.authService=e;this.router=r;this.authService.isAuthenticated()&&this.router.navigate(["/today"]),this.loginForm=this.fb.group({username:["",[ve.required,ve.minLength(3)]],password:["",[ve.required,ve.minLength(6)]]}),this.signupForm=this.fb.group({username:["",[ve.required,ve.minLength(3)]],email:["",[ve.required,ve.email]],password:["",[ve.required,ve.minLength(6)]],confirmPassword:["",[ve.required]]}),this.forgotPasswordForm=this.fb.group({email:["",[ve.required,ve.email]]})}loginForm;signupForm;forgotPasswordForm;isSignupMode=N(!1);isForgotPasswordMode=N(!1);errorMessage=N("");successMessage=N("");isLoading=N(!1);showLoginPassword=N(!1);showSignupPassword=N(!1);showSignupConfirmPassword=N(!1);toggleMode(){this.isSignupMode.set(!this.isSignupMode()),this.isForgotPasswordMode.set(!1),this.errorMessage.set(""),this.successMessage.set(""),this.loginForm.reset(),this.signupForm.reset(),this.forgotPasswordForm.reset()}showForgotPassword(){this.isForgotPasswordMode.set(!0),this.isSignupMode.set(!1),this.errorMessage.set(""),this.successMessage.set(""),this.forgotPasswordForm.reset()}backToLogin(){this.isForgotPasswordMode.set(!1),this.errorMessage.set(""),this.successMessage.set("")}async onLogin(){if(this.loginForm.invalid){this.errorMessage.set("Please fill in all fields correctly");return}this.isLoading.set(!0),this.errorMessage.set("");let{username:t,password:e}=this.loginForm.value,r=await this.authService.signIn(t,e);this.isLoading.set(!1),r.success||this.errorMessage.set(r.error||"Login failed. Please try again.")}async onSignup(){if(this.signupForm.invalid){this.errorMessage.set("Please fill in all fields correctly");return}let{password:t,confirmPassword:e}=this.signupForm.value;if(t!==e){this.errorMessage.set("Passwords do not match");return}this.isLoading.set(!0),this.errorMessage.set("");let{username:r,email:i}=this.signupForm.value,o=await this.authService.signUp(r,i,t);this.isLoading.set(!1),o.success?(this.errorMessage.set(""),this.isSignupMode.set(!1),this.loginForm.patchValue({username:r,password:t}),await this.onLogin()):this.errorMessage.set(o.error||"Signup failed. Please try again.")}async onForgotPassword(){if(this.forgotPasswordForm.invalid){this.errorMessage.set("Please enter a valid email");return}this.isLoading.set(!0),this.errorMessage.set(""),this.successMessage.set("");let{email:t}=this.forgotPasswordForm.value,e=await this.authService.resetPassword(t);this.isLoading.set(!1),e.success?(this.successMessage.set("Password reset email sent! Check your inbox."),this.forgotPasswordForm.reset()):this.errorMessage.set(e.error||"Failed to send reset email. Please try again.")}toggleLoginPassword(){this.showLoginPassword.set(!this.showLoginPassword())}toggleSignupPassword(){this.showSignupPassword.set(!this.showSignupPassword())}toggleSignupConfirmPassword(){this.showSignupConfirmPassword.set(!this.showSignupConfirmPassword())}static \u0275fac=function(e){return new(e||n)(U(yo),U($e),U(Xe))};static \u0275cmp=Te({type:n,selectors:[["app-login"]],decls:11,vars:3,consts:[[1,"login-container"],[1,"login-card"],[1,"logo-section"],[1,"fas","fa-baby-carriage"],[1,"subtitle"],[1,"auth-form",3,"formGroup"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"fas","fa-key"],[1,"reset-info"],[1,"form-group"],["for","reset-email"],[1,"fas","fa-envelope"],["type","email","id","reset-email","formControlName","email","placeholder","Enter your email",1,"form-control"],[1,"error-message"],[1,"success-message"],["type","submit",1,"btn-primary",3,"disabled"],[1,"fas"],[1,"toggle-mode"],["type","button",1,"btn-link",3,"click"],[1,"fas","fa-arrow-left"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-check-circle"],[1,"fas","fa-sign-in-alt"],["for","login-username"],[1,"fas","fa-user"],["type","text","id","login-username","formControlName","username","placeholder","Enter your username",1,"form-control"],["for","login-password"],[1,"fas","fa-lock"],[1,"password-input-wrapper"],["id","login-password","formControlName","password","placeholder","Enter your password",1,"form-control",3,"type"],["type","button","tabindex","-1",1,"password-toggle",3,"click"],[1,"forgot-password-link"],[1,"fas","fa-user-plus"],["for","signup-username"],["type","text","id","signup-username","formControlName","username","placeholder","Choose a username",1,"form-control"],["for","signup-email"],["type","email","id","signup-email","formControlName","email","placeholder","Enter your email",1,"form-control"],["for","signup-password"],["id","signup-password","formControlName","password","placeholder","Choose a password (min 6 characters)",1,"form-control",3,"type"],["for","signup-confirm-password"],["id","signup-confirm-password","formControlName","confirmPassword","placeholder","Confirm your password",1,"form-control",3,"type"]],template:function(e,r){e&1&&(g(0,"div",0)(1,"div",1)(2,"div",2),E(3,"i",3),g(4,"h1"),v(5,"Baby Feeding Tracker"),y(),g(6,"p",4),v(7,"Track your baby's feeding schedule"),y()(),Z(8,SR,20,13,"form",5),Z(9,xR,29,19,"form",5),Z(10,TR,39,28,"form",5),y()()),e&2&&(_(8),Q(r.isForgotPasswordMode()?8:-1),_(),Q(!r.isSignupMode()&&!r.isForgotPasswordMode()?9:-1),_(),Q(r.isSignupMode()?10:-1))},dependencies:[_o,vo,er,go,mo,ni,ti],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:2rem 1rem;background:linear-gradient(135deg,#14151f,#191a27)}.login-card[_ngcontent-%COMP%]{width:100%;max-width:440px;background:radial-gradient(circle at top left,#d6bdff1f,#191a27fa);padding:2.5rem 2rem;border-radius:24px;box-shadow:0 20px 60px #0009,0 0 0 1px #d6bdff4d;border:2px solid rgba(214,189,255,.25);animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.logo-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.logo-section[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3.5rem;color:var(--accent-lavender);filter:drop-shadow(0 4px 12px rgba(214,189,255,.4));margin-bottom:1rem}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#fff;margin:0 0 .5rem;letter-spacing:.5px;display:block}.logo-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-light);margin:0;opacity:.8}.auth-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--accent-beige);margin:0 0 1.75rem;display:flex;align-items:center;gap:.75rem}.auth-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--accent-lavender);filter:drop-shadow(0 2px 4px rgba(214,189,255,.3))}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;margin-bottom:.625rem;color:var(--accent-beige);font-weight:700;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;color:var(--accent-lavender);filter:drop-shadow(0 2px 4px rgba(214,189,255,.3))}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;font-size:1rem;font-weight:500;color:#fff;background:linear-gradient(135deg,#2a2d4199,#23253799);border:2px solid rgba(214,189,255,.15);border-radius:14px;transition:all .25s cubic-bezier(.2,0,.2,1);box-shadow:inset 0 2px 6px #0000004d}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--text-light);opacity:.6}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:hover{border-color:#d6bdff4d;background:linear-gradient(135deg,#2d3046b3,#26283ab3)}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-lavender);background:linear-gradient(135deg,#32354bcc,#2a2d3fcc);box-shadow:inset 0 2px 6px #0000004d,0 0 0 3px #d6bdff33,0 4px 16px #d6bdff4d;transform:translateY(-1px)}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.error[_ngcontent-%COMP%]{border-color:#ff6b6b80}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.error[_ngcontent-%COMP%]:focus{border-color:#ff6b6bcc;box-shadow:inset 0 2px 6px #0000004d,0 0 0 3px #ff6b6b33,0 4px 16px #ff6b6b4d}.auth-form[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]{position:relative}.auth-form[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding-right:3rem}.auth-form[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]{position:absolute;right:.75rem;top:50%;transform:translateY(-50%);background:transparent;border:none;color:var(--text-light);cursor:pointer;padding:.5rem;display:flex;align-items:center;justify-content:center;transition:color .2s ease}.auth-form[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.auth-form[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]:hover{color:var(--accent-lavender)}.auth-form[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]:focus{outline:none;color:var(--accent-lavender)}.auth-form[_ngcontent-%COMP%]   .reset-info[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--text-light);font-size:.9rem;line-height:1.5;opacity:.9}.auth-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;padding:.875rem 1rem;margin-bottom:1.25rem;background:#ff6b6b26;border:2px solid rgba(255,107,107,.3);border-radius:12px;color:#ff6b6b;font-size:.9rem;font-weight:500}.auth-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.auth-form[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;padding:.875rem 1rem;margin-bottom:1.25rem;background:#6bffae26;border:2px solid rgba(107,255,174,.3);border-radius:12px;color:#6bffae;font-size:.9rem;font-weight:500}.auth-form[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.auth-form[_ngcontent-%COMP%]   .forgot-password-link[_ngcontent-%COMP%]{text-align:center;margin:1rem 0}.auth-form[_ngcontent-%COMP%]   .forgot-password-link[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{background:none;border:none;color:var(--accent-lavender);font-weight:500;font-size:.9rem;cursor:pointer;padding:0;text-decoration:none;transition:all .2s ease;opacity:.8}.auth-form[_ngcontent-%COMP%]   .forgot-password-link[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover{opacity:1;text-decoration:underline}.auth-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{width:100%;padding:1rem 1.5rem;font-size:1.05rem;font-weight:700;color:#fff;background:linear-gradient(135deg,#d6bdffe6,#a48bcde6);border:2px solid rgba(214,189,255,.5);border-radius:14px;cursor:pointer;transition:all .25s cubic-bezier(.2,0,.2,1);display:flex;align-items:center;justify-content:center;gap:.75rem;text-transform:uppercase;letter-spacing:.5px;box-shadow:0 8px 24px #d6bdff4d}.auth-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.auth-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#e0c7ff,#ae95d7);border-color:#d6bdffcc;box-shadow:0 12px 32px #d6bdff66;transform:translateY(-2px)}.auth-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0);box-shadow:0 4px 12px #d6bdff4d}.auth-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.auth-form[_ngcontent-%COMP%]   .toggle-mode[_ngcontent-%COMP%]{margin-top:1.75rem;text-align:center;font-size:.95rem;color:var(--text-light)}.auth-form[_ngcontent-%COMP%]   .toggle-mode[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:.5rem}.auth-form[_ngcontent-%COMP%]   .toggle-mode[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{background:none;border:none;color:var(--accent-lavender);font-weight:600;cursor:pointer;padding:0;text-decoration:underline;transition:all .2s ease}.auth-form[_ngcontent-%COMP%]   .toggle-mode[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover{color:#e0c7ff;text-decoration:none}@media(max-width:480px){.login-card[_ngcontent-%COMP%]{padding:2rem 1.5rem}.logo-section[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.auth-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.35rem}}"]})};function OR(n,t){n&1&&(g(0,"div",5),E(1,"i",7),g(2,"p"),v(3,"Verifying reset link..."),y()())}function AR(n,t){if(n&1){let e=Ie();g(0,"div",8),E(1,"i",9),v(2),y(),g(3,"div",10)(4,"button",11),V("click",function(){B(e);let i=I();return H(i.goToLogin())}),E(5,"i",12),v(6," Back to Login "),y()()}if(n&2){let e=I();_(2),re(" ",e.errorMessage()," ")}}function RR(n,t){if(n&1&&(g(0,"div",8),E(1,"i",9),v(2),y()),n&2){let e=I(2);_(2),re(" ",e.errorMessage()," ")}}function NR(n,t){if(n&1&&(g(0,"div",20),E(1,"i",23),v(2),y()),n&2){let e=I(2);_(2),re(" ",e.successMessage()," ")}}function PR(n,t){if(n&1){let e=Ie();g(0,"form",13),V("ngSubmit",function(){B(e);let i=I();return H(i.onResetPassword())}),g(1,"div",14)(2,"label",15),E(3,"i",16),v(4," NEW PASSWORD "),y(),E(5,"input",17),y(),g(6,"div",14)(7,"label",18),E(8,"i",16),v(9," CONFIRM PASSWORD "),y(),E(10,"input",19),y(),Z(11,RR,3,1,"div",8),Z(12,NR,3,1,"div",20),g(13,"button",21),E(14,"i",22),v(15),y(),g(16,"div",10)(17,"button",11),V("click",function(){B(e);let i=I();return H(i.goToLogin())}),E(18,"i",12),v(19," Back to Login "),y()()()}if(n&2){let e,r,i=I();ne("formGroup",i.resetForm),_(5),oe("error",((e=i.resetForm.get("password"))==null?null:e.invalid)&&((e=i.resetForm.get("password"))==null?null:e.touched)),_(5),oe("error",((r=i.resetForm.get("confirmPassword"))==null?null:r.invalid)&&((r=i.resetForm.get("confirmPassword"))==null?null:r.touched)),_(),Q(i.errorMessage()?11:-1),_(),Q(i.successMessage()?12:-1),_(),ne("disabled",i.isLoading()),_(),oe("fa-spinner",i.isLoading())("fa-spin",i.isLoading())("fa-check",!i.isLoading()),_(),re(" ",i.isLoading()?"Updating...":"Update Password"," ")}}var Hu=class n{constructor(t,e,r,i){this.fb=t;this.authService=e;this.router=r;this.route=i;this.resetForm=this.fb.group({password:["",[ve.required,ve.minLength(6)]],confirmPassword:["",[ve.required]]})}resetForm;errorMessage=N("");successMessage=N("");isLoading=N(!1);hasValidToken=N(!1);async ngOnInit(){setTimeout(async()=>{let t=await this.authService.getSession();!t||!t.user?(this.errorMessage.set("Invalid or expired reset link. Please request a new one."),this.hasValidToken.set(!1)):this.hasValidToken.set(!0)},500)}async onResetPassword(){if(this.resetForm.invalid){this.errorMessage.set("Please fill in all fields correctly");return}let{password:t,confirmPassword:e}=this.resetForm.value;if(t!==e){this.errorMessage.set("Passwords do not match");return}this.isLoading.set(!0),this.errorMessage.set(""),this.successMessage.set("");let r=await this.authService.updatePassword(t);this.isLoading.set(!1),r.success?(this.successMessage.set("Password updated successfully! Redirecting to login..."),this.resetForm.reset(),setTimeout(()=>{this.authService.signOut()},2e3)):this.errorMessage.set(r.error||"Failed to update password. Please try again.")}goToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||n)(U(yo),U($e),U(Xe),U(Yt))};static \u0275cmp=Te({type:n,selectors:[["app-reset-password"]],decls:11,vars:3,consts:[[1,"reset-password-container"],[1,"reset-password-card"],[1,"logo-section"],[1,"fas","fa-key"],[1,"subtitle"],[1,"loading-state"],[1,"reset-form",3,"formGroup"],[1,"fas","fa-spinner","fa-spin"],[1,"error-message"],[1,"fas","fa-exclamation-circle"],[1,"back-link"],["type","button",1,"btn-link",3,"click"],[1,"fas","fa-arrow-left"],[1,"reset-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","new-password"],[1,"fas","fa-lock"],["type","password","id","new-password","formControlName","password","placeholder","Enter new password (min 6 characters)",1,"form-control"],["for","confirm-password"],["type","password","id","confirm-password","formControlName","confirmPassword","placeholder","Confirm your new password",1,"form-control"],[1,"success-message"],["type","submit",1,"btn-primary",3,"disabled"],[1,"fas"],[1,"fas","fa-check-circle"]],template:function(e,r){e&1&&(g(0,"div",0)(1,"div",1)(2,"div",2),E(3,"i",3),g(4,"h1"),v(5,"Reset Your Password"),y(),g(6,"p",4),v(7,"Enter your new password below"),y()(),Z(8,OR,4,0,"div",5),Z(9,AR,7,1),Z(10,PR,20,15,"form",6),y()()),e&2&&(_(8),Q(!r.hasValidToken()&&!r.errorMessage()?8:-1),_(),Q(r.errorMessage()&&!r.hasValidToken()?9:-1),_(),Q(r.hasValidToken()?10:-1))},dependencies:[_o,vo,er,go,mo,ni,ti],styles:[".reset-password-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:2rem 1rem;background:linear-gradient(135deg,#14151f,#191a27)}.reset-password-card[_ngcontent-%COMP%]{width:100%;max-width:440px;background:radial-gradient(circle at top left,#d6bdff1f,#191a27fa);padding:2.5rem 2rem;border-radius:24px;box-shadow:0 20px 60px #0009,0 0 0 1px #d6bdff4d;border:2px solid rgba(214,189,255,.25);animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.logo-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.logo-section[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3.5rem;color:var(--accent-lavender);filter:drop-shadow(0 4px 12px rgba(214,189,255,.4));margin-bottom:1rem}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#fff;margin:0 0 .5rem;letter-spacing:.5px;display:block}.logo-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-light);margin:0;opacity:.8}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 2rem;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3.5rem;color:var(--accent-lavender);margin-bottom:1.5rem;filter:drop-shadow(0 4px 20px rgba(214,189,255,.6));animation:_ngcontent-%COMP%_spin 1.5s linear infinite}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.05rem;color:var(--text-light);font-weight:500;letter-spacing:.3px;margin:0}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.85}}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1.25rem;margin-bottom:1.5rem;background:linear-gradient(135deg,#ff6b6b2e,#ff50501f);border:2px solid rgba(255,107,107,.4);border-radius:16px;color:#ff8787;font-size:.95rem;font-weight:600;line-height:1.5;box-shadow:0 4px 20px #ff6b6b26,inset 0 1px #ffffff1a;animation:_ngcontent-%COMP%_slideIn .4s ease-out}.error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;flex-shrink:0;filter:drop-shadow(0 2px 8px rgba(255,107,107,.5))}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.back-link[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem}.back-link[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d6bdff26,#a48bcd1a);border:2px solid rgba(214,189,255,.3);border-radius:12px;padding:.875rem 1.5rem;color:var(--accent-lavender);font-weight:700;font-size:.95rem;cursor:pointer;text-decoration:none;transition:all .25s cubic-bezier(.2,0,.2,1);display:inline-flex;align-items:center;gap:.625rem;text-transform:uppercase;letter-spacing:.5px;box-shadow:0 4px 12px #d6bdff33}.back-link[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;transition:transform .25s ease}.back-link[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#d6bdff40,#a48bcd26);border-color:#d6bdff80;color:#e0c7ff;box-shadow:0 6px 20px #d6bdff4d;transform:translateY(-2px)}.back-link[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:translate(-3px)}.back-link[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 8px #d6bdff33}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;margin-bottom:.625rem;color:var(--accent-beige);font-weight:700;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;color:var(--accent-lavender);filter:drop-shadow(0 2px 4px rgba(214,189,255,.3))}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;font-size:1rem;font-weight:500;color:#fff;background:linear-gradient(135deg,#2a2d4199,#23253799);border:2px solid rgba(214,189,255,.15);border-radius:14px;transition:all .25s cubic-bezier(.2,0,.2,1);box-shadow:inset 0 2px 6px #0000004d}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--text-light);opacity:.6}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:hover{border-color:#d6bdff4d;background:linear-gradient(135deg,#2d3046b3,#26283ab3)}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-lavender);background:linear-gradient(135deg,#32354bcc,#2a2d3fcc);box-shadow:inset 0 2px 6px #0000004d,0 0 0 3px #d6bdff33,0 4px 16px #d6bdff4d;transform:translateY(-1px)}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.error[_ngcontent-%COMP%]{border-color:#ff6b6b80}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.error[_ngcontent-%COMP%]:focus{border-color:#ff6b6bcc;box-shadow:inset 0 2px 6px #0000004d,0 0 0 3px #ff6b6b33,0 4px 16px #ff6b6b4d}.reset-form[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;padding:.875rem 1rem;margin-bottom:1.25rem;background:#6bffae26;border:2px solid rgba(107,255,174,.3);border-radius:12px;color:#6bffae;font-size:.9rem;font-weight:500}.reset-form[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.reset-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{width:100%;padding:1rem 1.5rem;font-size:1.05rem;font-weight:700;color:#fff;background:linear-gradient(135deg,#d6bdffe6,#a48bcde6);border:2px solid rgba(214,189,255,.5);border-radius:14px;cursor:pointer;transition:all .25s cubic-bezier(.2,0,.2,1);display:flex;align-items:center;justify-content:center;gap:.75rem;text-transform:uppercase;letter-spacing:.5px;box-shadow:0 8px 24px #d6bdff4d}.reset-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.reset-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#e0c7ff,#ae95d7);border-color:#d6bdffcc;box-shadow:0 12px 32px #d6bdff66;transform:translateY(-2px)}.reset-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0);box-shadow:0 4px 12px #d6bdff4d}.reset-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media(max-width:480px){.reset-password-card[_ngcontent-%COMP%]{padding:2rem 1.5rem}.logo-section[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}"]})};var ua=async(n,t)=>{let e=b($e),r=b(Xe);return await e.getSession()?!0:(r.navigate(["/login"],{queryParams:{returnUrl:t.url}}),!1)};var pC=[{path:"login",component:Bu},{path:"reset-password",component:Hu},{path:"",redirectTo:"/today",pathMatch:"full"},{path:"today",component:ju,canActivate:[ua]},{path:"log",component:Vu,canActivate:[ua]},{path:"statistics",component:Uu,canActivate:[ua]},{path:"settings",component:$u,canActivate:[ua]},{path:"**",redirectTo:"/login"}];var gC={providers:[Tf(),Mp(pC),g0("ngsw-worker.js",{enabled:!X_(),registrationStrategy:"registerWhenStable:30000"})]};function kR(n,t){if(n&1){let e=Ie();g(0,"div",1)(1,"div",4),E(2,"i",5),g(3,"div",6)(4,"strong"),v(5,"New Version Available!"),y(),g(6,"span"),v(7,"A new version of the app is ready to install."),y()()(),g(8,"div",7)(9,"button",8),V("click",function(){B(e);let i=I();return H(i.activateUpdate())}),E(10,"i",9),v(11," Update Now "),y(),g(12,"button",10),V("click",function(){B(e);let i=I();return H(i.dismissUpdate())}),E(13,"i",11),y()()()}}function FR(n,t){n&1&&(g(0,"nav",3)(1,"a",12),E(2,"i",13),g(3,"span"),v(4,"Today"),y()(),g(5,"a",14),E(6,"i",15),g(7,"span"),v(8,"Log"),y()(),g(9,"a",16),E(10,"i",17),g(11,"span"),v(12,"Stats"),y()(),g(13,"a",18),E(14,"i",19),g(15,"span"),v(16,"Settings"),y()()())}var zu=class n{authService=b($e);router=b(Xe);notificationService=b(Jn);swUpdate=b(Ap);title="Baby Feeding Tracker";showUpdateBanner=N(!1);currentUrl=m0(this.router.events.pipe(te(()=>this.router.url)),{initialValue:this.router.url});showNavigation=qe(()=>{let t=this.currentUrl(),e=["/login","/reset-password"];return this.authService.isAuthenticated()&&!e.includes(t)});constructor(){this.checkForUpdates()}checkForUpdates(){if(!this.swUpdate.isEnabled){console.log("Service Worker updates are disabled");return}this.swUpdate.versionUpdates.pipe(Ze(t=>t.type==="VERSION_READY")).subscribe(()=>{console.log("New version available"),this.showUpdateBanner.set(!0)}),this.swUpdate.checkForUpdate().then(t=>{t&&console.log("Update check: new version found")}),setInterval(()=>{this.swUpdate.checkForUpdate()},360*60*1e3)}activateUpdate(){this.showUpdateBanner.set(!1),window.location.reload()}dismissUpdate(){this.showUpdateBanner.set(!1)}async logout(){await this.authService.signOut()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=Te({type:n,selectors:[["app-root"]],decls:5,vars:4,consts:[[1,"app-container"],[1,"update-banner"],[1,"app-content"],[1,"app-nav"],[1,"update-content"],[1,"fas","fa-download"],[1,"update-text"],[1,"update-actions"],[1,"btn-update",3,"click"],[1,"fas","fa-sync-alt"],[1,"btn-dismiss",3,"click"],[1,"fas","fa-times"],["routerLink","/today","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-home"],["routerLink","/log","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-calendar-days"],["routerLink","/statistics","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-chart-line"],["routerLink","/settings","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-cog"]],template:function(e,r){e&1&&(g(0,"div",0),Z(1,kR,14,0,"div",1),g(2,"main",2),E(3,"router-outlet"),y(),Z(4,FR,17,0,"nav",3),y()),e&2&&(_(),Q(r.showUpdateBanner()?1:-1),_(),oe("no-header",!r.showNavigation()),_(2),Q(r.showNavigation()?4:-1))},dependencies:[Ns,Zi,xp,Je],styles:[".app-container[_ngcontent-%COMP%]{height:100vh;height:100dvh;max-height:100vh;max-height:100dvh;display:flex;flex-direction:column;overflow:hidden}.update-banner[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;background:linear-gradient(135deg,#b8d4c8f2,#98c0b4f2);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:1rem 1.5rem;display:flex;align-items:center;justify-content:space-between;gap:1rem;box-shadow:0 4px 16px #0000004d,0 0 0 1px #b8d4c880;z-index:1001;animation:_ngcontent-%COMP%_slideDown .4s cubic-bezier(.2,0,.2,1)}.update-banner[_ngcontent-%COMP%]   .update-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1}.update-banner[_ngcontent-%COMP%]   .update-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#1a3a2e;filter:drop-shadow(0 2px 4px rgba(0,0,0,.2))}.update-banner[_ngcontent-%COMP%]   .update-content[_ngcontent-%COMP%]   .update-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.update-banner[_ngcontent-%COMP%]   .update-content[_ngcontent-%COMP%]   .update-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.95rem;color:#1a3a2e;font-weight:700}.update-banner[_ngcontent-%COMP%]   .update-content[_ngcontent-%COMP%]   .update-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.85rem;color:#2d5a4d}.update-banner[_ngcontent-%COMP%]   .update-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.update-banner[_ngcontent-%COMP%]   .update-actions[_ngcontent-%COMP%]   .btn-update[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a3a2e,#2d5a4d);border:2px solid rgba(26,58,46,.4);color:#b8d4c8;padding:.625rem 1rem;border-radius:10px;font-weight:600;font-size:.85rem;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:all .25s cubic-bezier(.2,0,.2,1);box-shadow:0 2px 8px #0003}.update-banner[_ngcontent-%COMP%]   .update-actions[_ngcontent-%COMP%]   .btn-update[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2d5a4d,#3d7a6d);transform:translateY(-1px);box-shadow:0 4px 12px #0000004d;color:#fff}.update-banner[_ngcontent-%COMP%]   .update-actions[_ngcontent-%COMP%]   .btn-update[_ngcontent-%COMP%]:active{transform:translateY(0)}.update-banner[_ngcontent-%COMP%]   .update-actions[_ngcontent-%COMP%]   .btn-dismiss[_ngcontent-%COMP%]{background:#1a3a2e33;border:2px solid rgba(26,58,46,.3);color:#1a3a2e;padding:.625rem;border-radius:8px;width:36px;height:36px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.update-banner[_ngcontent-%COMP%]   .update-actions[_ngcontent-%COMP%]   .btn-dismiss[_ngcontent-%COMP%]:hover{background:#1a3a2e4d;transform:scale(1.1)}.update-banner[_ngcontent-%COMP%]   .update-actions[_ngcontent-%COMP%]   .btn-dismiss[_ngcontent-%COMP%]:active{transform:scale(.95)}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-100%)}to{opacity:1;transform:translateY(0)}}.app-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#35394afa,#252930fa);color:var(--primary-color);padding:.5rem 1rem;text-align:center;box-shadow:0 2px 12px #0006;border-bottom:1px solid var(--border-color);display:flex;align-items:center;justify-content:space-between;gap:.75rem;flex-shrink:0;z-index:99}.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;text-shadow:0 2px 10px rgba(232,213,196,.2);flex:1;font-weight:700}.logout-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d6bdff26,#a48bcd26);border:1.5px solid rgba(214,189,255,.3);color:var(--accent-lavender);padding:.375rem .75rem;border-radius:10px;cursor:pointer;font-weight:600;font-size:.75rem;text-transform:uppercase;letter-spacing:.3px;display:flex;align-items:center;gap:.375rem;transition:all .25s cubic-bezier(.2,0,.2,1);box-shadow:0 2px 8px #0000004d}.logout-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem}.logout-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#d6bdff40,#a48bcd40);border-color:#d6bdff80;box-shadow:0 4px 12px #d6bdff4d;transform:translateY(-1px)}.logout-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 8px #0000004d}.app-nav[_ngcontent-%COMP%]{display:flex;background:linear-gradient(180deg,#222434fa,#191a27fa);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);box-shadow:0 -4px 16px #0006;border-top:1px solid var(--border-subtle);padding:.375rem 0 calc(.375rem + env(safe-area-inset-bottom));flex-shrink:0;z-index:100}.nav-link[_ngcontent-%COMP%]{flex:1;padding:.5rem .375rem;text-align:center;text-decoration:none;color:var(--text-light);font-weight:600;transition:all .2s cubic-bezier(.2,0,.2,1);display:flex;flex-direction:column;align-items:center;gap:.1875rem;position:relative}.nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem;transition:all .3s cubic-bezier(.2,0,.2,1)}.nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.625rem;text-transform:uppercase;letter-spacing:.3px;opacity:.8;transition:opacity .3s ease}.nav-link[_ngcontent-%COMP%]:hover{color:var(--accent-beige)}.nav-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.1)}.nav-link[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{opacity:1}.nav-link.active[_ngcontent-%COMP%]{color:var(--accent-beige)}.nav-link.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:scale(1.15);filter:drop-shadow(0 2px 8px rgba(246,224,207,.4))}.nav-link.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:1;font-weight:700}.app-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;min-height:0}.app-content.no-header[_ngcontent-%COMP%]{padding-bottom:0}@media(min-width:768px){.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.7rem}}"]})};ip(zu,gC).catch(n=>console.error(n));
