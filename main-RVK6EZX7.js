var Ww=Object.create;var ho=Object.defineProperty,Kw=Object.defineProperties,Yw=Object.getOwnPropertyDescriptor,Zw=Object.getOwnPropertyDescriptors,Qw=Object.getOwnPropertyNames,pg=Object.getOwnPropertySymbols,Jw=Object.getPrototypeOf,mg=Object.prototype.hasOwnProperty,Xw=Object.prototype.propertyIsEnumerable;var gg=(n,t,e)=>t in n?ho(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,D=(n,t)=>{for(var e in t||={})mg.call(t,e)&&gg(n,e,t[e]);if(pg)for(var e of pg(t))Xw.call(t,e)&&gg(n,e,t[e]);return n},z=(n,t)=>Kw(n,Zw(t));var eC=(n,t)=>()=>(n&&(t=n(n=0)),t);var Jn=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),tC=(n,t)=>{for(var e in t)ho(n,e,{get:t[e],enumerable:!0})},vg=(n,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Qw(t))!mg.call(n,i)&&i!==e&&ho(n,i,{get:()=>t[i],enumerable:!(r=Yw(t,i))||r.enumerable});return n};var nC=(n,t,e)=>(e=n!=null?Ww(Jw(n)):{},vg(t||!n||!n.__esModule?ho(e,"default",{value:n,enumerable:!0}):e,n)),Qr=n=>vg(ho({},"__esModule",{value:!0}),n);var rr={};tC(rr,{__addDisposableResource:()=>tm,__assign:()=>ya,__asyncDelegator:()=>Kg,__asyncGenerator:()=>wa,__asyncValues:()=>Ca,__await:()=>qt,__awaiter:()=>S,__classPrivateFieldGet:()=>Jg,__classPrivateFieldIn:()=>em,__classPrivateFieldSet:()=>Xg,__createBinding:()=>ba,__decorate:()=>Fg,__disposeResources:()=>nm,__esDecorate:()=>jg,__exportStar:()=>zg,__extends:()=>kg,__generator:()=>Hg,__importDefault:()=>Qg,__importStar:()=>Zg,__makeTemplateObject:()=>Yg,__metadata:()=>Bg,__param:()=>Lg,__propKey:()=>Ug,__read:()=>rd,__rest:()=>cn,__rewriteRelativeImportExtension:()=>rm,__runInitializers:()=>Vg,__setFunctionName:()=>$g,__spread:()=>qg,__spreadArray:()=>Wg,__spreadArrays:()=>Gg,__values:()=>_a,default:()=>yC});function kg(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");td(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function cn(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e}function Fg(n,t,e,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o}function Lg(n,t){return function(e,r){t(e,r,n)}}function jg(n,t,e,r,i,o){function s(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var a=r.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&n?r.static?n:n.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),d,h=!1,f=e.length-1;f>=0;f--){var m={};for(var y in r)m[y]=y==="access"?{}:r[y];for(var y in r.access)m.access[y]=r.access[y];m.addInitializer=function(w){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(w||null))};var E=(0,e[f])(a==="accessor"?{get:u.get,set:u.set}:u[c],m);if(a==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(d=s(E.get))&&(u.get=d),(d=s(E.set))&&(u.set=d),(d=s(E.init))&&i.unshift(d)}else(d=s(E))&&(a==="field"?i.unshift(d):u[c]=d)}l&&Object.defineProperty(l,r.name,u),h=!0}function Vg(n,t,e){for(var r=arguments.length>2,i=0;i<t.length;i++)e=r?t[i].call(n,e):t[i].call(n);return r?e:void 0}function Ug(n){return typeof n=="symbol"?n:"".concat(n)}function $g(n,t,e){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:e?"".concat(e," ",t):t})}function Bg(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)}function S(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})}function Hg(n,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(e=0)),e;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){e.label=l[1];break}if(l[0]===6&&e.label<o[1]){e.label=o[1],o=l;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(l);break}o[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(n,e)}catch(u){l=[6,u],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function zg(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&ba(t,n,e)}function _a(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function rd(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return o}function qg(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(rd(arguments[t]));return n}function Gg(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var r=Array(n),i=0,t=0;t<e;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function Wg(n,t,e){if(e||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return n.concat(o||Array.prototype.slice.call(t))}function qt(n){return this instanceof qt?(this.v=n,this):new qt(n)}function wa(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(m){return Promise.resolve(m).then(f,d)}}function a(f,m){r[f]&&(i[f]=function(y){return new Promise(function(E,w){o.push([f,y,E,w])>1||c(f,y)})},m&&(i[f]=m(i[f])))}function c(f,m){try{l(r[f](m))}catch(y){h(o[0][3],y)}}function l(f){f.value instanceof qt?Promise.resolve(f.value.v).then(u,d):h(o[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,m){f(m),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Kg(n){var t,e;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,o){t[i]=n[i]?function(s){return(e=!e)?{value:qt(n[i](s)),done:!1}:o?o(s):s}:o}}function Ca(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof _a=="function"?_a(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(o){e[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}function Yg(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n}function Zg(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e=nd(n),r=0;r<e.length;r++)e[r]!=="default"&&ba(t,n,e[r]);return mC(t,n),t}function Qg(n){return n&&n.__esModule?n:{default:n}}function Jg(n,t,e,r){if(e==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?r:e==="a"?r.call(n):r?r.value:t.get(n)}function Xg(n,t,e,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,e):i?i.value=e:t.set(n,e),e}function em(n,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?t===n:n.has(t)}function tm(n,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],e&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),n.stack.push({value:t,dispose:r,async:e})}else e&&n.stack.push({async:!0});return t}function nm(n){function t(o){n.error=n.hasError?new vC(o,n.error,"An error was suppressed during disposal."):o,n.hasError=!0}var e,r=0;function i(){for(;e=n.stack.pop();)try{if(!e.async&&r===1)return r=0,n.stack.push(e),Promise.resolve().then(i);if(e.dispose){var o=e.dispose.call(e.value);if(e.async)return r|=2,Promise.resolve(o).then(i,function(s){return t(s),i()})}else r|=1}catch(s){t(s)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return i()}function rm(n,t){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,r,i,o,s){return r?t?".jsx":".js":i&&(!o||!s)?e:i+o+"."+s.toLowerCase()+"js"}):n}var td,ya,ba,mC,nd,vC,yC,me=eC(()=>{"use strict";td=function(n,t){return td=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},td(n,t)};ya=function(){return ya=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},ya.apply(this,arguments)};ba=Object.create?function(n,t,e,r){r===void 0&&(r=e);var i=Object.getOwnPropertyDescriptor(t,e);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,r,i)}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]};mC=Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t},nd=function(n){return nd=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},nd(n)};vC=typeof SuppressedError=="function"?SuppressedError:function(n,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=n,r.suppressed=t,r};yC={__extends:kg,__assign:ya,__rest:cn,__decorate:Fg,__param:Lg,__esDecorate:jg,__runInitializers:Vg,__propKey:Ug,__setFunctionName:$g,__metadata:Bg,__awaiter:S,__generator:Hg,__createBinding:ba,__exportStar:zg,__values:_a,__read:rd,__spread:qg,__spreadArrays:Gg,__spreadArray:Wg,__await:qt,__asyncGenerator:wa,__asyncDelegator:Kg,__asyncValues:Ca,__makeTemplateObject:Yg,__importStar:Zg,__importDefault:Qg,__classPrivateFieldGet:Jg,__classPrivateFieldSet:Xg,__classPrivateFieldIn:em,__addDisposableResource:tm,__disposeResources:nm,__rewriteRelativeImportExtension:rm}});var gp=Jn(pp=>{"use strict";Object.defineProperty(pp,"__esModule",{value:!0});var hp=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};pp.default=hp});var yp=Jn(vp=>{"use strict";Object.defineProperty(vp,"__esModule",{value:!0});var UT=(me(),Qr(rr)),$T=UT.__importDefault(gp()),mp=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var s,a,c,l;let u=null,d=null,h=null,f=o.status,m=o.statusText;if(o.ok){if(this.method!=="HEAD"){let q=await o.text();q===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((s=this.headers.get("Accept"))===null||s===void 0)&&s.includes("application/vnd.pgrst.plan+text"))?d=q:d=JSON.parse(q))}let E=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),w=(c=o.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");E&&w&&w.length>1&&(h=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{let E=await o.text();try{u=JSON.parse(E),Array.isArray(u)&&o.status===404&&(d=[],u=null,f=200,m="OK")}catch{o.status===404&&E===""?(f=204,m="No Content"):u={message:E}}if(u&&this.isMaybeSingle&&(!((l=u?.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,f=200,m="OK"),u&&this.shouldThrowOnError)throw new $T.default(u)}return{error:u,data:d,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(i=i.catch(o=>{var s,a,c,l,u,d;let h="",f=o?.cause;if(f){let m=(s=f?.message)!==null&&s!==void 0?s:"",y=(a=f?.code)!==null&&a!==void 0?a:"";h=`${(c=o?.name)!==null&&c!==void 0?c:"FetchError"}: ${o?.message}`,h+=`

Caused by: ${(l=f?.name)!==null&&l!==void 0?l:"Error"}: ${m}`,y&&(h+=` (${y})`),f?.stack&&(h+=`
${f.stack}`)}else h=(u=o?.stack)!==null&&u!==void 0?u:"";return{error:{message:`${(d=o?.name)!==null&&d!==void 0?d:"FetchError"}: ${o?.message}`,details:h,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}};vp.default=mp});var wp=Jn(bp=>{"use strict";Object.defineProperty(bp,"__esModule",{value:!0});var BT=(me(),Qr(rr)),HT=BT.__importDefault(yp()),_p=class extends HT.default{select(t){let e=!1,r=(t??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:i,referencedTable:o=i}={}){let s=o?`${o}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){let i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:i=r}={}){let o=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:i=!1,wal:o=!1,format:s="text"}={}){var a;let c=[t?"analyze":null,e?"verbose":null,r?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${c};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};bp.default=_p});var xl=Jn(Ep=>{"use strict";Object.defineProperty(Ep,"__esModule",{value:!0});var zT=(me(),Qr(rr)),qT=zT.__importDefault(wp()),GT=new RegExp("[,()]"),Cp=class extends qT.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){let r=Array.from(new Set(e)).map(i=>typeof i=="string"&&GT.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");let s=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${o}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){let i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}};Ep.default=Cp});var Ip=Jn(Sp=>{"use strict";Object.defineProperty(Sp,"__esModule",{value:!0});var WT=(me(),Qr(rr)),Rs=WT.__importDefault(xl()),Dp=class{constructor(t,{headers:e={},schema:r,fetch:i}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=i}select(t,e){let{head:r=!1,count:i}=e??{},o=r?"HEAD":"GET",s=!1,a=(t??"*").split("").map(c=>/\s/.test(c)&&!s?"":(c==='"'&&(s=!s),c)).join("");return this.url.searchParams.set("select",a),i&&this.headers.append("Prefer",`count=${i}`),new Rs.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var i;let o="POST";if(e&&this.headers.append("Prefer",`count=${e}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){let s=t.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(s.length>0){let a=[...new Set(s)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new Rs.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:i,defaultToNull:o=!0}={}){var s;let a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(t)){let c=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){let l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new Rs.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(t,{count:e}={}){var r;let i="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Rs.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;let r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Rs.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}};Sp.default=Dp});var Yb=Jn(Mp=>{"use strict";Object.defineProperty(Mp,"__esModule",{value:!0});var Kb=(me(),Qr(rr)),KT=Kb.__importDefault(Ip()),YT=Kb.__importDefault(xl()),xp=class n{constructor(t,{headers:e={},schema:r,fetch:i}={}){this.url=t,this.headers=new Headers(e),this.schemaName=r,this.fetch=i}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");let e=new URL(`${this.url}/${t}`);return new KT.default(e,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new n(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:r=!1,get:i=!1,count:o}={}){var s;let a,c=new URL(`${this.url}/rpc/${t}`),l;r||i?(a=r?"HEAD":"GET",Object.entries(e).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{c.searchParams.append(d,h)})):(a="POST",l=e);let u=new Headers(this.headers);return o&&u.set("Prefer",`count=${o}`),new YT.default({method:a,url:c,headers:u,schema:this.schemaName,body:l,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};Mp.default=xp});var n0=Jn(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.PostgrestError=nt.PostgrestBuilder=nt.PostgrestTransformBuilder=nt.PostgrestFilterBuilder=nt.PostgrestQueryBuilder=nt.PostgrestClient=void 0;var Hi=(me(),Qr(rr)),Zb=Hi.__importDefault(Yb());nt.PostgrestClient=Zb.default;var Qb=Hi.__importDefault(Ip());nt.PostgrestQueryBuilder=Qb.default;var Jb=Hi.__importDefault(xl());nt.PostgrestFilterBuilder=Jb.default;var Xb=Hi.__importDefault(wp());nt.PostgrestTransformBuilder=Xb.default;var e0=Hi.__importDefault(yp());nt.PostgrestBuilder=e0.default;var t0=Hi.__importDefault(gp());nt.PostgrestError=t0.default;nt.default={PostgrestClient:Zb.default,PostgrestQueryBuilder:Qb.default,PostgrestFilterBuilder:Jb.default,PostgrestTransformBuilder:Xb.default,PostgrestBuilder:e0.default,PostgrestError:t0.default}});var $e=null,ra=!1,Ru=1,rC=null,rt=Symbol("SIGNAL");function V(n){let t=$e;return $e=n,t}function oa(){return $e}var Jr={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function po(n){if(ra)throw new Error("");if($e===null)return;$e.consumerOnSignalRead(n);let t=$e.producersTail;if(t!==void 0&&t.producer===n)return;let e,r=$e.recomputing;if(r&&(e=t!==void 0?t.nextProducer:$e.producers,e!==void 0&&e.producer===n)){$e.producersTail=e,e.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===$e&&(!r||oC(i,$e)))return;let o=ei($e),s={producer:n,consumer:$e,nextProducer:e,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};$e.producersTail=s,t!==void 0?t.nextProducer=s:$e.producers=s,o&&wg(n,s)}function yg(){Ru++}function Pu(n){if(!(ei(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ru)){if(!n.producerMustRecompute(n)&&!mo(n)){Nu(n);return}n.producerRecomputeValue(n),Nu(n)}}function ku(n){if(n.consumers===void 0)return;let t=ra;ra=!0;try{for(let e=n.consumers;e!==void 0;e=e.nextConsumer){let r=e.consumer;r.dirty||iC(r)}}finally{ra=t}}function Fu(){return $e?.consumerAllowSignalWrites!==!1}function iC(n){n.dirty=!0,ku(n),n.consumerMarkedDirty?.(n)}function Nu(n){n.dirty=!1,n.lastCleanEpoch=Ru}function Xr(n){return n&&_g(n),V(n)}function _g(n){n.producersTail=void 0,n.recomputing=!0}function go(n,t){V(t),n&&bg(n)}function bg(n){n.recomputing=!1;let t=n.producersTail,e=t!==void 0?t.nextProducer:n.producers;if(e!==void 0){if(ei(n))do e=Lu(e);while(e!==void 0);t!==void 0?t.nextProducer=void 0:n.producers=void 0}}function mo(n){for(let t=n.producers;t!==void 0;t=t.nextProducer){let e=t.producer,r=t.lastReadVersion;if(r!==e.version||(Pu(e),r!==e.version))return!0}return!1}function Xn(n){if(ei(n)){let t=n.producers;for(;t!==void 0;)t=Lu(t)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function wg(n,t){let e=n.consumersTail,r=ei(n);if(e!==void 0?(t.nextConsumer=e.nextConsumer,e.nextConsumer=t):(t.nextConsumer=void 0,n.consumers=t),t.prevConsumer=e,n.consumersTail=t,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)wg(i.producer,i)}function Lu(n){let t=n.producer,e=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:t.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(t.consumers=r,!ei(t)){let o=t.producers;for(;o!==void 0;)o=Lu(o)}return e}function ei(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function ju(n){rC?.(n)}function oC(n,t){let e=t.producersTail;if(e!==void 0){let r=t.producers;do{if(r===n)return!0;if(r===e)break;r=r.nextProducer}while(r!==void 0)}return!1}function Vu(n,t){return Object.is(n,t)}function sa(n,t){let e=Object.create(sC);e.computation=n,t!==void 0&&(e.equal=t);let r=()=>{if(Pu(e),po(e),e.value===ia)throw e.error;return e.value};return r[rt]=e,ju(e),r}var Au=Symbol("UNSET"),Ou=Symbol("COMPUTING"),ia=Symbol("ERRORED"),sC=z(D({},Jr),{value:Au,dirty:!0,error:null,equal:Vu,kind:"computed",producerMustRecompute(n){return n.value===Au||n.value===Ou},producerRecomputeValue(n){if(n.value===Ou)throw new Error("");let t=n.value;n.value=Ou;let e=Xr(n),r,i=!1;try{r=n.computation(),V(null),i=t!==Au&&t!==ia&&r!==ia&&n.equal(t,r)}catch(o){r=ia,n.error=o}finally{go(n,e)}if(i){n.value=t;return}n.value=r,n.version++}});function aC(){throw new Error}var Cg=aC;function Eg(n){Cg(n)}function Uu(n){Cg=n}var cC=null;function $u(n,t){let e=Object.create(aa);e.value=n,t!==void 0&&(e.equal=t);let r=()=>Dg(e);return r[rt]=e,ju(e),[r,s=>vo(e,s),s=>Sg(e,s)]}function Dg(n){return po(n),n.value}function vo(n,t){Fu()||Eg(n),n.equal(n.value,t)||(n.value=t,lC(n))}function Sg(n,t){Fu()||Eg(n),vo(n,t(n.value))}var aa=z(D({},Jr),{equal:Vu,value:void 0,kind:"signal"});function lC(n){n.version++,yg(),ku(n),cC?.(n)}function Bu(n){let t=V(null);try{return n()}finally{V(t)}}var Hu=z(D({},Jr),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function zu(n){if(n.dirty=!1,n.version>0&&!mo(n))return;n.version++;let t=Xr(n);try{n.cleanup(),n.fn()}finally{go(n,t)}}function H(n){return typeof n=="function"}function ti(n){let e=n(r=>{Error.call(r),r.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var ca=ti(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function er(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var Me=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:r}=this;if(H(r))try{r()}catch(o){t=o instanceof ca?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Ig(o)}catch(s){t=t??[],s instanceof ca?t=[...t,...s.errors]:t.push(s)}}if(t)throw new ca(t)}}add(t){var e;if(t&&t!==this)if(this.closed)Ig(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&er(e,t)}remove(t){let{_finalizers:e}=this;e&&er(e,t),t instanceof n&&t._removeParent(this)}};Me.EMPTY=(()=>{let n=new Me;return n.closed=!0,n})();var qu=Me.EMPTY;function la(n){return n instanceof Me||n&&"closed"in n&&H(n.remove)&&H(n.add)&&H(n.unsubscribe)}function Ig(n){H(n)?n():n.unsubscribe()}var Mt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ni={setTimeout(n,t,...e){let{delegate:r}=ni;return r?.setTimeout?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=ni;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ua(n){ni.setTimeout(()=>{let{onUnhandledError:t}=Mt;if(t)t(n);else throw n})}function yo(){}var xg=Gu("C",void 0,void 0);function Mg(n){return Gu("E",void 0,n)}function Tg(n){return Gu("N",n,void 0)}function Gu(n,t,e){return{kind:n,value:t,error:e}}var tr=null;function ri(n){if(Mt.useDeprecatedSynchronousErrorHandling){let t=!tr;if(t&&(tr={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:r}=tr;if(tr=null,e)throw r}}else n()}function Ag(n){Mt.useDeprecatedSynchronousErrorHandling&&tr&&(tr.errorThrown=!0,tr.error=n)}var nr=class extends Me{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,la(t)&&t.add(this)):this.destination=fC}static create(t,e,r){return new ii(t,e,r)}next(t){this.isStopped?Ku(Tg(t),this):this._next(t)}error(t){this.isStopped?Ku(Mg(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Ku(xg,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},uC=Function.prototype.bind;function Wu(n,t){return uC.call(n,t)}var Yu=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){da(r)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){da(r)}else da(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){da(e)}}},ii=class extends nr{constructor(t,e,r){super();let i;if(H(t)||!t)i={next:t??void 0,error:e??void 0,complete:r??void 0};else{let o;this&&Mt.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Wu(t.next,o),error:t.error&&Wu(t.error,o),complete:t.complete&&Wu(t.complete,o)}):i=t}this.destination=new Yu(i)}};function da(n){Mt.useDeprecatedSynchronousErrorHandling?Ag(n):ua(n)}function dC(n){throw n}function Ku(n,t){let{onStoppedNotification:e}=Mt;e&&ni.setTimeout(()=>e(n,t))}var fC={closed:!0,next:yo,error:dC,complete:yo};var oi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Tt(n){return n}function Zu(...n){return Qu(n)}function Qu(n){return n.length===0?Tt:n.length===1?n[0]:function(e){return n.reduce((r,i)=>i(r),e)}}var K=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,i){let o=pC(e)?e:new ii(e,r,i);return ri(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return r=Og(r),new r((i,o)=>{let s=new ii({next:a=>{try{e(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)}[oi](){return this}pipe(...e){return Qu(e)(this)}toPromise(e){return e=Og(e),new e((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=t=>new n(t),n})();function Og(n){var t;return(t=n??Mt.Promise)!==null&&t!==void 0?t:Promise}function hC(n){return n&&H(n.next)&&H(n.error)&&H(n.complete)}function pC(n){return n&&n instanceof nr||hC(n)&&la(n)}function gC(n){return H(n?.lift)}function ne(n){return t=>{if(gC(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function re(n,t,e,r,i){return new Ju(n,t,e,r,i)}var Ju=class extends nr{constructor(t,e,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var Ng=ti(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var De=(()=>{class n extends K{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let r=new fa(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new Ng}next(e){ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(e)}})}error(e){ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:r,isStopped:i,observers:o}=this;return r||i?qu:(this.currentObservers=null,o.push(e),new Me(()=>{this.currentObservers=null,er(o,e)}))}_checkFinalizedStatuses(e){let{hasError:r,thrownError:i,isStopped:o}=this;r?e.error(i):o&&e.complete()}asObservable(){let e=new K;return e.source=this,e}}return n.create=(t,e)=>new fa(t,e),n})(),fa=class extends De{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.next)===null||r===void 0||r.call(e,t)}error(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.error)===null||r===void 0||r.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,r;return(r=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&r!==void 0?r:qu}};var Te=class extends De{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Xu={now(){return(Xu.delegate||Date).now()},delegate:void 0};var ha=class extends Me{constructor(t,e){super()}schedule(t,e=0){return this}};var _o={setInterval(n,t,...e){let{delegate:r}=_o;return r?.setInterval?r.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=_o;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var pa=class extends ha{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,e)),this.pending=!0,this.delay=e,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,r=0){return _o.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,e,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return e;e!=null&&_o.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,e);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,er(r,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var si=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,r){return new this.schedulerActionCtor(this,t).schedule(r,e)}};si.now=Xu.now;var ga=class extends si{constructor(t,e=si.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}};var ed=new ga(pa),Rg=ed;var it=new K(n=>n.complete());function ma(n){return n&&H(n.schedule)}function Pg(n){return n[n.length-1]}function va(n){return H(Pg(n))?n.pop():void 0}function En(n){return ma(Pg(n))?n.pop():void 0}me();var Ea=n=>n&&typeof n.length=="number"&&typeof n!="function";function Da(n){return H(n?.then)}function Sa(n){return H(n[oi])}function Ia(n){return Symbol.asyncIterator&&H(n?.[Symbol.asyncIterator])}function xa(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function _C(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ma=_C();function Ta(n){return H(n?.[Ma])}me();function Aa(n){return wa(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:r,done:i}=yield qt(e.read());if(i)return yield qt(void 0);yield yield qt(r)}}finally{e.releaseLock()}})}function Oa(n){return H(n?.getReader)}function Se(n){if(n instanceof K)return n;if(n!=null){if(Sa(n))return bC(n);if(Ea(n))return wC(n);if(Da(n))return CC(n);if(Ia(n))return im(n);if(Ta(n))return EC(n);if(Oa(n))return DC(n)}throw xa(n)}function bC(n){return new K(t=>{let e=n[oi]();if(H(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function wC(n){return new K(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function CC(n){return new K(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,ua)})}function EC(n){return new K(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function im(n){return new K(t=>{SC(n,t).catch(e=>t.error(e))})}function DC(n){return im(Aa(n))}function SC(n,t){var e,r,i,o;return S(this,void 0,void 0,function*(){try{for(e=Ca(n);r=yield e.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=e.return)&&(yield o.call(e))}finally{if(i)throw i.error}}t.complete()})}function ot(n,t,e,r=0,i=!1){let o=t.schedule(function(){e(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Na(n,t=0){return ne((e,r)=>{e.subscribe(re(r,i=>ot(r,n,()=>r.next(i),t),()=>ot(r,n,()=>r.complete(),t),i=>ot(r,n,()=>r.error(i),t)))})}function Ra(n,t=0){return ne((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function om(n,t){return Se(n).pipe(Ra(t),Na(t))}function sm(n,t){return Se(n).pipe(Ra(t),Na(t))}function am(n,t){return new K(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}function cm(n,t){return new K(e=>{let r;return ot(e,t,()=>{r=n[Ma](),ot(e,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){e.error(s);return}o?e.complete():e.next(i)},0,!0)}),()=>H(r?.return)&&r.return()})}function Pa(n,t){if(!n)throw new Error("Iterable cannot be null");return new K(e=>{ot(e,t,()=>{let r=n[Symbol.asyncIterator]();ot(e,t,()=>{r.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function lm(n,t){return Pa(Aa(n),t)}function um(n,t){if(n!=null){if(Sa(n))return om(n,t);if(Ea(n))return am(n,t);if(Da(n))return sm(n,t);if(Ia(n))return Pa(n,t);if(Ta(n))return cm(n,t);if(Oa(n))return lm(n,t)}throw xa(n)}function we(n,t){return t?um(n,t):Se(n)}function Y(...n){let t=En(n);return we(n,t)}function id(n,t){let e=H(n)?n:()=>n,r=i=>i.error(e());return new K(t?i=>t.schedule(r,0,i):r)}function ka(n){return!!n&&(n instanceof K||H(n.lift)&&H(n.subscribe))}var ir=ti(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function dm(n){return n instanceof Date&&!isNaN(n)}function oe(n,t){return ne((e,r)=>{let i=0;e.subscribe(re(r,o=>{r.next(n.call(t,o,i++))}))})}var{isArray:IC}=Array;function xC(n,t){return IC(t)?n(...t):n(t)}function Fa(n){return oe(t=>xC(n,t))}var{isArray:MC}=Array,{getPrototypeOf:TC,prototype:AC,keys:OC}=Object;function La(n){if(n.length===1){let t=n[0];if(MC(t))return{args:t,keys:null};if(NC(t)){let e=OC(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}function NC(n){return n&&typeof n=="object"&&TC(n)===AC}function ja(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}function od(...n){let t=En(n),e=va(n),{args:r,keys:i}=La(n);if(r.length===0)return we([],t);let o=new K(RC(r,t,i?s=>ja(i,s):Tt));return e?o.pipe(Fa(e)):o}function RC(n,t,e=Tt){return r=>{fm(t,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)fm(t,()=>{let l=we(n[c],t),u=!1;l.subscribe(re(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(e(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function fm(n,t,e){n?ot(e,n,t):t()}function hm(n,t,e,r,i,o,s,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&t.complete()},f=y=>l<r?m(y):c.push(y),m=y=>{o&&t.next(y),l++;let E=!1;Se(e(y,u++)).subscribe(re(t,w=>{i?.(w),o?f(w):t.next(w)},()=>{E=!0},void 0,()=>{if(E)try{for(l--;c.length&&l<r;){let w=c.shift();s?ot(t,s,()=>m(w)):m(w)}h()}catch(w){t.error(w)}}))};return n.subscribe(re(t,f,()=>{d=!0,h()})),()=>{a?.()}}function Be(n,t,e=1/0){return H(t)?Be((r,i)=>oe((o,s)=>t(r,o,i,s))(Se(n(r,i))),e):(typeof t=="number"&&(e=t),ne((r,i)=>hm(r,i,n,e)))}function ai(n=1/0){return Be(Tt,n)}function pm(){return ai(1)}function ci(...n){return pm()(we(n,En(n)))}function bo(n){return new K(t=>{Se(n()).subscribe(t)})}function sd(...n){let t=va(n),{args:e,keys:r}=La(n),i=new K(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;Se(e[u]).subscribe(re(o,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?ja(r,a):a),o.complete())}))}});return t?i.pipe(Fa(t)):i}function gm(n=0,t,e=Rg){let r=-1;return t!=null&&(ma(t)?e=t:r=t),new K(i=>{let o=dm(n)?+n-e.now():n;o<0&&(o=0);let s=0;return e.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function ad(n=0,t=ed){return n<0&&(n=0),gm(n,n,t)}function At(n,t){return ne((e,r)=>{let i=0;e.subscribe(re(r,o=>n.call(t,o,i++)&&r.next(o)))})}function li(n){return ne((t,e)=>{let r=null,i=!1,o;r=t.subscribe(re(e,void 0,void 0,s=>{o=Se(n(s,li(n)(t))),r?(r.unsubscribe(),r=null,o.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(e))})}function wo(n,t){return H(t)?Be(n,t,1):Be(n,1)}function cd(n){return ne((t,e)=>{let r=!1;t.subscribe(re(e,i=>{r=!0,e.next(i)},()=>{r||e.next(n),e.complete()}))})}function ln(n){return n<=0?()=>it:ne((t,e)=>{let r=0;t.subscribe(re(e,i=>{++r<=n&&(e.next(i),n<=r&&e.complete())}))})}function mm(n=PC){return ne((t,e)=>{let r=!1;t.subscribe(re(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(n())))})}function PC(){return new ir}function ld(n){return ne((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function un(n,t){let e=arguments.length>=2;return r=>r.pipe(n?At((i,o)=>n(i,o,r)):Tt,ln(1),e?cd(t):mm(()=>new ir))}function Va(n){return n<=0?()=>it:ne((t,e)=>{let r=[];t.subscribe(re(e,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function ud(...n){let t=En(n);return ne((e,r)=>{(t?ci(n,e,t):ci(n,e)).subscribe(r)})}function Gt(n,t){return ne((e,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();e.subscribe(re(r,c=>{i?.unsubscribe();let l=0,u=o++;Se(n(c,u)).subscribe(i=re(r,d=>r.next(t?t(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function or(n){return ne((t,e)=>{Se(n).subscribe(re(e,()=>e.complete(),yo)),!e.closed&&t.subscribe(e)})}function Ze(n,t,e){let r=H(n)||t||e?{next:n,error:t,complete:e}:n;return r?ne((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(re(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Tt}var dd;function Ua(){return dd}function Wt(n){let t=dd;return dd=n,t}var vm=Symbol("NotFound");function ui(n){return n===vm||n?.name==="\u0275NotFound"}var Wa="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",M=class extends Error{code;constructor(t,e){super(fi(t,e)),this.code=t}};function kC(n){return`NG0${Math.abs(n)}`}function fi(n,t){return`${kC(n)}${t?": "+t:""}`}var Mo=globalThis;function ie(n){for(let t in n)if(n[t]===ie)return t;throw Error("")}function Cm(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function fn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(fn).join(", ")}]`;if(n==null)return""+n;let t=n.overriddenName||n.name;if(t)return`${t}`;let e=n.toString();if(e==null)return""+e;let r=e.indexOf(`
`);return r>=0?e.slice(0,r):e}function Dd(n,t){return n?t?`${n} ${t}`:n:t||""}var FC=ie({__forward_ref__:ie});function Ot(n){return n.__forward_ref__=Ot,n.toString=function(){return fn(this())},n}function Le(n){return Sd(n)?n():n}function Sd(n){return typeof n=="function"&&n.hasOwnProperty(FC)&&n.__forward_ref__===Ot}function O(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Nt(n){return{providers:n.providers||[],imports:n.imports||[]}}function To(n){return LC(n,Ka)}function Id(n){return To(n)!==null}function LC(n,t){return n.hasOwnProperty(t)&&n[t]||null}function jC(n){let t=n?.[Ka]??null;return t||null}function hd(n){return n&&n.hasOwnProperty(Ba)?n[Ba]:null}var Ka=ie({\u0275prov:ie}),Ba=ie({\u0275inj:ie}),N=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=O({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function xd(n){return n&&!!n.\u0275providers}var Md=ie({\u0275cmp:ie}),Td=ie({\u0275dir:ie}),Ad=ie({\u0275pipe:ie}),Od=ie({\u0275mod:ie}),Eo=ie({\u0275fac:ie}),fr=ie({__NG_ELEMENT_ID__:ie}),ym=ie({__NG_ENV_ID__:ie});function Ao(n){return typeof n=="string"?n:n==null?"":String(n)}function Em(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ao(n)}var Dm=ie({ngErrorCode:ie}),VC=ie({ngErrorMessage:ie}),UC=ie({ngTokenPath:ie});function Nd(n,t){return Sm("",-200,t)}function Ya(n,t){throw new M(-201,!1)}function Sm(n,t,e){let r=new M(t,n);return r[Dm]=t,r[VC]=n,e&&(r[UC]=e),r}function $C(n){return n[Dm]}var pd;function Im(){return pd}function ct(n){let t=pd;return pd=n,t}function Rd(n,t,e){let r=To(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(e&8)return null;if(t!==void 0)return t;Ya(n,"Injector")}var BC={},sr=BC,HC="__NG_DI_FLAG__",gd=class{injector;constructor(t){this.injector=t}retrieve(t,e){let r=ar(e)||0;try{return this.injector.get(t,r&8?null:sr,r)}catch(i){if(ui(i))return i;throw i}}};function zC(n,t=0){let e=Ua();if(e===void 0)throw new M(-203,!1);if(e===null)return Rd(n,void 0,t);{let r=qC(t),i=e.retrieve(n,r);if(ui(i)){if(r.optional)return null;throw i}return i}}function L(n,t=0){return(Im()||zC)(Le(n),t)}function C(n,t){return L(n,ar(t))}function ar(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function qC(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function md(n){let t=[];for(let e=0;e<n.length;e++){let r=Le(n[e]);if(Array.isArray(r)){if(r.length===0)throw new M(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=GC(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(L(i,o))}else t.push(L(r))}return t}function GC(n){return n[HC]}function cr(n,t){let e=n.hasOwnProperty(Eo);return e?n[Eo]:null}function xm(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=t[r];if(e&&(i=e(i),o=e(o)),o!==i)return!1}return!0}function Mm(n){return n.flat(Number.POSITIVE_INFINITY)}function Za(n,t){n.forEach(e=>Array.isArray(e)?Za(e,t):t(e))}function Pd(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function Oo(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Tm(n,t,e,r){let i=n.length;if(i==t)n.push(e,r);else if(i===1)n.push(r,n[0]),n[0]=e;else{for(i--,n.push(n[i-1],n[i]);i>t;){let o=i-2;n[i]=n[o],i--}n[t]=e,n[t+1]=r}}function Am(n,t,e){let r=hi(n,t);return r>=0?n[r|1]=e:(r=~r,Tm(n,r,t,e)),r}function Qa(n,t){let e=hi(n,t);if(e>=0)return n[e|1]}function hi(n,t){return WC(n,t,1)}function WC(n,t,e){let r=0,i=n.length>>e;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<e];if(t===s)return o<<e;s>t?i=o:r=o+1}return~(i<<e)}var In={},lt=[],hr=new N(""),kd=new N("",-1),Fd=new N(""),Do=class{get(t,e=sr){if(e===sr){let i=Sm("",-201);throw i.name="\u0275NotFound",i}return e}};function Ld(n){return n[Od]||null}function xn(n){return n[Md]||null}function jd(n){return n[Td]||null}function Om(n){return n[Ad]||null}function pr(n){return{\u0275providers:n}}function Nm(n){return pr([{provide:hr,multi:!0,useValue:n}])}function Rm(...n){return{\u0275providers:Vd(!0,n),\u0275fromNgModule:!0}}function Vd(n,...t){let e=[],r=new Set,i,o=s=>{e.push(s)};return Za(t,s=>{let a=s;Ha(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Pm(i,o),e}function Pm(n,t){for(let e=0;e<n.length;e++){let{ngModule:r,providers:i}=n[e];Ud(i,o=>{t(o,r)})}}function Ha(n,t,e,r){if(n=Le(n),!n)return!1;let i=null,o=hd(n),s=!o&&xn(n);if(!o&&!s){let c=n.ngModule;if(o=hd(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Ha(l,t,e,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Za(o.imports,u=>{Ha(u,t,e,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&Pm(l,t)}if(!a){let l=cr(i)||(()=>new i);t({provide:i,useFactory:l,deps:lt},i),t({provide:Fd,useValue:i,multi:!0},i),t({provide:hr,useValue:()=>L(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;Ud(c,u=>{t(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Ud(n,t){for(let e of n)xd(e)&&(e=e.\u0275providers),Array.isArray(e)?Ud(e,t):t(e)}var KC=ie({provide:String,useValue:ie});function km(n){return n!==null&&typeof n=="object"&&KC in n}function YC(n){return!!(n&&n.useExisting)}function ZC(n){return!!(n&&n.useFactory)}function lr(n){return typeof n=="function"}function Fm(n){return!!n.useClass}var No=new N(""),$a={},_m={},fd;function Ro(){return fd===void 0&&(fd=new Do),fd}var Re=class{},ur=class extends Re{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,r,i){super(),this.parent=e,this.source=r,this.scopes=i,yd(t,s=>this.processProvider(s)),this.records.set(kd,di(void 0,this)),i.has("environment")&&this.records.set(Re,di(void 0,this));let o=this.records.get(No);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Fd,lt,{self:!0}))}retrieve(t,e){let r=ar(e)||0;try{return this.get(t,sr,r)}catch(i){if(ui(i))return i;throw i}}destroy(){Co(this),this._destroyed=!0;let t=V(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of e)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),V(t)}}onDestroy(t){return Co(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Co(this);let e=Wt(this),r=ct(void 0),i;try{return t()}finally{Wt(e),ct(r)}}get(t,e=sr,r){if(Co(this),t.hasOwnProperty(ym))return t[ym](this);let i=ar(r),o,s=Wt(this),a=ct(void 0);try{if(!(i&4)){let l=this.records.get(t);if(l===void 0){let u=tE(t)&&To(t);u&&this.injectableDefInScope(u)?l=di(vd(t),$a):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l,i)}let c=i&2?Ro():this.parent;return e=i&8&&e===sr?null:e,c.get(t,e)}catch(c){let l=$C(c);throw l===-200||l===-201?new M(l,null):c}finally{ct(a),Wt(s)}}resolveInjectorInitializers(){let t=V(null),e=Wt(this),r=ct(void 0),i;try{let o=this.get(hr,lt,{self:!0});for(let s of o)s()}finally{Wt(e),ct(r),V(t)}}toString(){let t=[],e=this.records;for(let r of e.keys())t.push(fn(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Le(t);let e=lr(t)?t:Le(t&&t.provide),r=JC(t);if(!lr(t)&&t.multi===!0){let i=this.records.get(e);i||(i=di(void 0,$a,!0),i.factory=()=>md(i.multi),this.records.set(e,i)),e=t,i.multi.push(t)}this.records.set(e,r)}hydrate(t,e,r){let i=V(null);try{if(e.value===_m)throw Nd(fn(t));return e.value===$a&&(e.value=_m,e.value=e.factory(void 0,r)),typeof e.value=="object"&&e.value&&eE(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{V(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=Le(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function vd(n){let t=To(n),e=t!==null?t.factory:cr(n);if(e!==null)return e;if(n instanceof N)throw new M(204,!1);if(n instanceof Function)return QC(n);throw new M(204,!1)}function QC(n){if(n.length>0)throw new M(204,!1);let e=jC(n);return e!==null?()=>e.factory(n):()=>new n}function JC(n){if(km(n))return di(void 0,n.useValue);{let t=$d(n);return di(t,$a)}}function $d(n,t,e){let r;if(lr(n)){let i=Le(n);return cr(i)||vd(i)}else if(km(n))r=()=>Le(n.useValue);else if(ZC(n))r=()=>n.useFactory(...md(n.deps||[]));else if(YC(n))r=(i,o)=>L(Le(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Le(n&&(n.useClass||n.provide));if(XC(n))r=()=>new i(...md(n.deps));else return cr(i)||vd(i)}return r}function Co(n){if(n.destroyed)throw new M(205,!1)}function di(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function XC(n){return!!n.deps}function eE(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function tE(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function yd(n,t){for(let e of n)Array.isArray(e)?yd(e,t):e&&xd(e)?yd(e.\u0275providers,t):t(e)}function Qe(n,t){let e;n instanceof ur?(Co(n),e=n):e=new gd(n);let r,i=Wt(e),o=ct(void 0);try{return t()}finally{Wt(i),ct(o)}}function Lm(){return Im()!==void 0||Ua()!=null}var Rt=0,j=1,U=2,Pe=3,yt=4,_t=5,Po=6,pi=7,je=8,Mn=9,Kt=10,Ie=11,gi=12,Bd=13,gr=14,bt=15,Tn=16,mr=17,Yt=18,ko=19,Hd=20,dn=21,Ja=22,Dn=23,ft=24,Xa=25,Fo=26,He=27,jm=1;var An=7,Lo=8,vr=9,ze=10;function Zt(n){return Array.isArray(n)&&typeof n[jm]=="object"}function Pt(n){return Array.isArray(n)&&n[jm]===!0}function zd(n){return(n.flags&4)!==0}function On(n){return n.componentOffset>-1}function jo(n){return(n.flags&1)===1}function Qt(n){return!!n.template}function mi(n){return(n[U]&512)!==0}function yr(n){return(n[U]&256)===256}var Vm="svg",Um="math";function wt(n){for(;Array.isArray(n);)n=n[Rt];return n}function qd(n,t){return wt(t[n])}function kt(n,t){return wt(t[n.index])}function Vo(n,t){return n.data[t]}function Ct(n,t){let e=t[n];return Zt(e)?e:e[Rt]}function $m(n){return(n[U]&4)===4}function ec(n){return(n[U]&128)===128}function Bm(n){return Pt(n[Pe])}function Nn(n,t){return t==null?null:n[t]}function Gd(n){n[mr]=0}function Wd(n){n[U]&1024||(n[U]|=1024,ec(n)&&vi(n))}function Hm(n,t){for(;n>0;)t=t[gr],n--;return t}function Uo(n){return!!(n[U]&9216||n[ft]?.dirty)}function tc(n){n[Kt].changeDetectionScheduler?.notify(8),n[U]&64&&(n[U]|=1024),Uo(n)&&vi(n)}function vi(n){n[Kt].changeDetectionScheduler?.notify(0);let t=Sn(n);for(;t!==null&&!(t[U]&8192||(t[U]|=8192,!ec(t)));)t=Sn(t)}function Kd(n,t){if(yr(n))throw new M(911,!1);n[dn]===null&&(n[dn]=[]),n[dn].push(t)}function zm(n,t){if(n[dn]===null)return;let e=n[dn].indexOf(t);e!==-1&&n[dn].splice(e,1)}function Sn(n){let t=n[Pe];return Pt(t)?t[Pe]:t}function Yd(n){return n[pi]??=[]}function Zd(n){return n.cleanup??=[]}function qm(n,t,e,r){let i=Yd(t);i.push(e),n.firstCreatePass&&Zd(n).push(r,i.length-1)}var Z={lFrame:av(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var _d=!1;function Gm(){return Z.lFrame.elementDepthCount}function Wm(){Z.lFrame.elementDepthCount++}function Km(){Z.lFrame.elementDepthCount--}function Qd(){return Z.bindingsEnabled}function Ym(){return Z.skipHydrationRootTNode!==null}function Zm(n){return Z.skipHydrationRootTNode===n}function Qm(){Z.skipHydrationRootTNode=null}function J(){return Z.lFrame.lView}function Je(){return Z.lFrame.tView}function G(n){return Z.lFrame.contextLView=n,n[je]}function W(n){return Z.lFrame.contextLView=null,n}function Xe(){let n=Jd();for(;n!==null&&n.type===64;)n=n.parent;return n}function Jd(){return Z.lFrame.currentTNode}function Jm(){let n=Z.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function yi(n,t){let e=Z.lFrame;e.currentTNode=n,e.isParent=t}function Xd(){return Z.lFrame.isParent}function Xm(){Z.lFrame.isParent=!1}function ef(){return _d}function So(n){let t=_d;return _d=n,t}function ev(n){return Z.lFrame.bindingIndex=n}function $o(){return Z.lFrame.bindingIndex++}function tv(n){let t=Z.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function nv(){return Z.lFrame.inI18n}function rv(n,t){let e=Z.lFrame;e.bindingIndex=e.bindingRootIndex=n,nc(t)}function iv(){return Z.lFrame.currentDirectiveIndex}function nc(n){Z.lFrame.currentDirectiveIndex=n}function ov(n){let t=Z.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function tf(){return Z.lFrame.currentQueryIndex}function rc(n){Z.lFrame.currentQueryIndex=n}function nE(n){let t=n[j];return t.type===2?t.declTNode:t.type===1?n[_t]:null}function nf(n,t,e){if(e&4){let i=t,o=n;for(;i=i.parent,i===null&&!(e&1);)if(i=nE(o),i===null||(o=o[gr],i.type&10))break;if(i===null)return!1;t=i,n=o}let r=Z.lFrame=sv();return r.currentTNode=t,r.lView=n,!0}function ic(n){let t=sv(),e=n[j];Z.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function sv(){let n=Z.lFrame,t=n===null?null:n.child;return t===null?av(n):t}function av(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function cv(){let n=Z.lFrame;return Z.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var rf=cv;function oc(){let n=cv();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function lv(n){return(Z.lFrame.contextLView=Hm(n,Z.lFrame.contextLView))[je]}function _r(){return Z.lFrame.selectedIndex}function Rn(n){Z.lFrame.selectedIndex=n}function of(){let n=Z.lFrame;return Vo(n.tView,n.selectedIndex)}function uv(){return Z.lFrame.currentNamespace}var dv=!0;function sc(){return dv}function ac(n){dv=n}function bd(n,t=null,e=null,r){let i=sf(n,t,e,r);return i.resolveInjectorInitializers(),i}function sf(n,t=null,e=null,r,i=new Set){let o=[e||lt,Rm(n)];return r=r||(typeof n=="object"?void 0:fn(n)),new ur(o,t||Ro(),r||null,i)}var ut=class n{static THROW_IF_NOT_FOUND=sr;static NULL=new Do;static create(t,e){if(Array.isArray(t))return bd({name:""},e,t,"");{let r=t.name??"";return bd({name:r},t.parent,t.providers,r)}}static \u0275prov=O({token:n,providedIn:"any",factory:()=>L(kd)});static __NG_ELEMENT_ID__=-1},Ae=new N(""),et=(()=>{class n{static __NG_ELEMENT_ID__=rE;static __NG_ENV_ID__=e=>e}return n})(),za=class extends et{_lView;constructor(t){super(),this._lView=t}get destroyed(){return yr(this._lView)}onDestroy(t){let e=this._lView;return Kd(e,t),()=>zm(e,t)}};function rE(){return new za(J())}var fv=!1,Pn=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Te(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new K(e=>{e.next(!1),e.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=O({token:n,providedIn:"root",factory:()=>new n})}return n})(),wd=class extends De{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,Lm()&&(this.destroyRef=C(et,{optional:!0})??void 0,this.pendingTasks=C(Pn,{optional:!0})??void 0)}emit(t){let e=V(null);try{super.next(t)}finally{V(e)}}subscribe(t,e,r){let i=t,o=e||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof Me&&t.add(a),a}wrapInTimeout(t){return e=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(e)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},le=wd;function qa(...n){}function af(n){let t,e;function r(){n=qa;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),r()})),()=>r()}function cf(n){return queueMicrotask(()=>n()),()=>{n=qa}}var lf="isAngularZone",Io=lf+"_ID",iE=0,dt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new le(!1);onMicrotaskEmpty=new le(!1);onStable=new le(!1);onError=new le(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=fv}=t;if(typeof Zone>"u")throw new M(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,aE(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(lf)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new M(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new M(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,oE,qa,qa);try{return o.runTask(s,e,r)}finally{o.cancelTask(s)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}},oE={};function uf(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function sE(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){af(()=>{n.callbackScheduled=!1,Cd(n),n.isCheckStableRunning=!0,uf(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),Cd(n)}function aE(n){let t=()=>{sE(n)},e=iE++;n._inner=n._inner.fork({name:"angular",properties:{[lf]:!0,[Io]:e,[Io+e]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(cE(c))return r.invokeTask(o,s,a,c);try{return bm(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),wm(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return bm(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!lE(c)&&t(),wm(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Cd(n),uf(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Cd(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function bm(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function wm(n){n._nesting--,uf(n)}var xo=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new le;onMicrotaskEmpty=new le;onStable=new le;onError=new le;run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,i){return t.apply(e,r)}};function cE(n){return hv(n,"__ignore_ng_zone__")}function lE(n){return hv(n,"__scheduler_tick__")}function hv(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var hn=class{_console=console;handleError(t){this._console.error("ERROR",t)}},Et=new N("",{factory:()=>{let n=C(dt),t=C(Re),e;return r=>{n.runOutsideAngular(()=>{t.destroyed&&!e?setTimeout(()=>{throw r}):(e??=t.get(hn),e.handleError(r))})}}}),pv={provide:hr,useValue:()=>{let n=C(hn,{optional:!0})},multi:!0},uE=new N("",{factory:()=>{let n=C(Ae).defaultView;if(!n)return;let t=C(Et),e=o=>{t(o.reason),o.preventDefault()},r=o=>{o.error?t(o.error):t(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",e),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),C(et).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",e)})}});function df(){return pr([Nm(()=>void C(uE))])}function R(n,t){let[e,r,i]=$u(n,t?.equal),o=e,s=o[rt];return o.set=r,o.update=i,o.asReadonly=gv.bind(o),o}function gv(){let n=this[rt];if(n.readonlyFn===void 0){let t=()=>this();t[rt]=n,n.readonlyFn=t}return n.readonlyFn}var cc=(()=>{class n{view;node;constructor(e,r){this.view=e,this.node=r}static __NG_ELEMENT_ID__=dE}return n})();function dE(){return new cc(J(),Xe())}var dr=class{},Bo=new N("",{factory:()=>!0});var ff=new N("");var lc=(()=>{class n{static \u0275prov=O({token:n,providedIn:"root",factory:()=>new Ed})}return n})(),Ed=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let e=t.zone,r=this.queues.get(e);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let r=this.queues.get(e);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[e,r]of this.queues)e===null?t||=this.flushQueue(r):t||=e.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let e=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,e=!0,r.run());return e}},Ga=class{[rt];constructor(t){this[rt]=t}destroy(){this[rt].destroy()}};function qe(n,t){let e=t?.injector??C(ut),r=t?.manualCleanup!==!0?e.get(et):null,i,o=e.get(cc,null,{optional:!0}),s=e.get(dr);return o!==null?(i=pE(o.view,s,n),r instanceof za&&r._lView===o.view&&(r=null)):i=gE(n,e.get(lc),s),i.injector=e,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new Ga(i)}var mv=z(D({},Hu),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=So(!1);try{zu(this)}finally{So(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=V(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],V(n)}}}),fE=z(D({},mv),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(Xn(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),hE=z(D({},mv),{consumerMarkedDirty(){this.view[U]|=8192,vi(this.view),this.notifier.notify(13)},destroy(){if(Xn(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[Dn]?.delete(this)}});function pE(n,t,e){let r=Object.create(hE);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=t,r.fn=vv(r,e),n[Dn]??=new Set,n[Dn].add(r),r.consumerMarkedDirty(r),r}function gE(n,t,e){let r=Object.create(fE);return r.fn=vv(r,n),r.scheduler=t,r.notifier=e,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function vv(n,t){return()=>{t(e=>(n.cleanupFns??=[]).push(e))}}function xe(n){return Bu(n)}function Zo(n){return{toString:n}.toString()}function DE(n){return typeof n=="function"}function Yv(n,t,e,r){t!==null?t.applyValueToInputSignal(t,r):n[e]=r}var mc=class{previousValue;currentValue;firstChange;constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}},ht=(()=>{let n=()=>Zv;return n.ngInherit=!0,n})();function Zv(n){return n.type.prototype.ngOnChanges&&(n.setInput=IE),SE}function SE(){let n=Jv(this),t=n?.current;if(t){let e=n.previous;if(e===In)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function IE(n,t,e,r,i){let o=this.declaredInputs[r],s=Jv(n)||xE(n,{previous:In,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new mc(l&&l.currentValue,e,c===In),Yv(n,t,i,e)}var Qv="__ngSimpleChanges__";function Jv(n){return n[Qv]||null}function xE(n,t){return n[Qv]=t}var yv=[];var se=function(n,t=null,e){for(let r=0;r<yv.length;r++){let i=yv[r];i(n,t,e)}},X=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(X||{});function ME(n,t,e){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=Zv(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}i&&(e.preOrderHooks??=[]).push(0-n,i),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}function Xv(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){let o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-e,s),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),c&&(n.viewHooks??=[]).push(-e,c),l&&((n.viewHooks??=[]).push(e,l),(n.viewCheckHooks??=[]).push(e,l)),u!=null&&(n.destroyHooks??=[]).push(e,u)}}function fc(n,t,e){ey(n,t,3,e)}function hc(n,t,e,r){(n[U]&3)===e&&ey(n,t,e,r)}function hf(n,t){let e=n[U];(e&3)===t&&(e&=16383,e+=1,n[U]=e)}function ey(n,t,e,r){let i=r!==void 0?n[mr]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(n[mr]+=65536),(a<o||o==-1)&&(TE(n,e,t,c),n[mr]=(n[mr]&4294901760)+c+2),c++}function _v(n,t){se(X.LifecycleHookStart,n,t);let e=V(null);try{t.call(n)}finally{V(e),se(X.LifecycleHookEnd,n,t)}}function TE(n,t,e,r){let i=e[r]<0,o=e[r+1],s=i?-e[r]:e[r],a=n[s];i?n[U]>>14<n[mr]>>16&&(n[U]&3)===t&&(n[U]+=16384,_v(a,o)):_v(a,o)}var bi=-1,wr=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,r,i){this.factory=t,this.name=i,this.canSeeViewProviders=e,this.injectImpl=r}};function AE(n){return(n.flags&8)!==0}function OE(n){return(n.flags&16)!==0}function NE(n,t,e){let r=0;for(;r<e.length;){let i=e[r];if(typeof i=="number"){if(i!==0)break;r++;let o=e[r++],s=e[r++],a=e[r++];n.setAttribute(t,s,a,o)}else{let o=i,s=e[++r];RE(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),r++}}return r}function ty(n){return n===3||n===4||n===6}function RE(n){return n.charCodeAt(0)===64}function qo(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?e=i:e===0||(e===-1||e===2?bv(n,e,i,null,t[++r]):bv(n,e,i,null,null))}}return n}function bv(n,t,e,r,i){let o=0,s=n.length;if(t===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===e){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),i!==null&&n.splice(o++,0,i)}function ny(n){return n!==bi}function vc(n){return n&32767}function PE(n){return n>>16}function yc(n,t){let e=PE(n),r=t;for(;e>0;)r=r[gr],e--;return r}var Ef=!0;function wv(n){let t=Ef;return Ef=n,t}var kE=256,ry=kE-1,iy=5,FE=0,Jt={};function LE(n,t,e){let r;typeof e=="string"?r=e.charCodeAt(0)||0:e.hasOwnProperty(fr)&&(r=e[fr]),r==null&&(r=e[fr]=FE++);let i=r&ry,o=1<<i;t.data[n+(i>>iy)]|=o}function _c(n,t){let e=oy(n,t);if(e!==-1)return e;let r=t[j];r.firstCreatePass&&(n.injectorIndex=t.length,pf(r.data,n),pf(t,null),pf(r.blueprint,null));let i=zf(n,t),o=n.injectorIndex;if(ny(i)){let s=vc(i),a=yc(i,t),c=a[j].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=i,o}function pf(n,t){n.push(0,0,0,0,0,0,0,0,t)}function oy(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function zf(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,r=null,i=t;for(;i!==null;){if(r=uy(i),r===null)return bi;if(e++,i=i[gr],r.injectorIndex!==-1)return r.injectorIndex|e<<16}return bi}function Df(n,t,e){LE(n,t,e)}function jE(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let r=e.length,i=0;for(;i<r;){let o=e[i];if(ty(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof e[i]=="string";)i++;else{if(o===t)return e[i+1];i=i+2}}}return null}function sy(n,t,e){if(e&8||n!==void 0)return n;Ya(t,"NodeInjector")}function ay(n,t,e,r){if(e&8&&r===void 0&&(r=null),(e&3)===0){let i=n[Mn],o=ct(void 0);try{return i?i.get(t,r,e&8):Rd(t,r,e&8)}finally{ct(o)}}return sy(r,t,e)}function cy(n,t,e,r=0,i){if(n!==null){if(t[U]&2048&&!(r&2)){let s=BE(n,t,e,r,Jt);if(s!==Jt)return s}let o=ly(n,t,e,r,Jt);if(o!==Jt)return o}return ay(t,e,r,i)}function ly(n,t,e,r,i){let o=UE(e);if(typeof o=="function"){if(!nf(t,n,r))return r&1?sy(i,e,r):ay(t,e,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Ya(e);else return s}finally{rf()}}else if(typeof o=="number"){let s=null,a=oy(n,t),c=bi,l=r&1?t[bt][_t]:null;for((a===-1||r&4)&&(c=a===-1?zf(n,t):t[a+8],c===bi||!Ev(r,!1)?a=-1:(s=t[j],a=vc(c),t=yc(c,t)));a!==-1;){let u=t[j];if(Cv(o,a,u.data)){let d=VE(a,t,e,s,r,l);if(d!==Jt)return d}c=t[a+8],c!==bi&&Ev(r,t[j].data[a+8]===l)&&Cv(o,a,t)?(s=u,a=vc(c),t=yc(c,t)):a=-1}}return i}function VE(n,t,e,r,i,o){let s=t[j],a=s.data[n+8],c=r==null?On(a)&&Ef:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=pc(a,s,e,c,l);return u!==null?Go(t,s,u,a,i):Jt}function pc(n,t,e,r,i){let o=n.providerIndexes,s=t.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,u=o>>20,d=r?a:a+u,h=i?a+u:l;for(let f=d;f<h;f++){let m=s[f];if(f<c&&e===m||f>=c&&m.type===e)return f}if(i){let f=s[c];if(f&&Qt(f)&&f.type===e)return c}return null}function Go(n,t,e,r,i){let o=n[e],s=t.data;if(o instanceof wr){let a=o;if(a.resolving){let f=Em(s[e]);throw Nd(f)}let c=wv(a.canSeeViewProviders);a.resolving=!0;let l=s[e].type||s[e],u,d=a.injectImpl?ct(a.injectImpl):null,h=nf(n,r,0);try{o=n[e]=a.factory(void 0,i,s,n,r),t.firstCreatePass&&e>=r.directiveStart&&ME(e,s[e],t)}finally{d!==null&&ct(d),wv(c),a.resolving=!1,rf()}}return o}function UE(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(fr)?n[fr]:void 0;return typeof t=="number"?t>=0?t&ry:$E:t}function Cv(n,t,e){let r=1<<n;return!!(e[t+(n>>iy)]&r)}function Ev(n,t){return!(n&2)&&!(n&1&&t)}var br=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return cy(this._tNode,this._lView,t,ar(r),e)}};function $E(){return new br(Xe(),J())}function jt(n){return Zo(()=>{let t=n.prototype.constructor,e=t[Eo]||Sf(t),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Eo]||Sf(i);if(o&&o!==e)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Sf(n){return Sd(n)?()=>{let t=Sf(Le(n));return t&&t()}:cr(n)}function BE(n,t,e,r,i){let o=n,s=t;for(;o!==null&&s!==null&&s[U]&2048&&!mi(s);){let a=ly(o,s,e,r|2,Jt);if(a!==Jt)return a;let c=o.parent;if(!c){let l=s[Hd];if(l){let u=l.get(e,Jt,r);if(u!==Jt)return u}c=uy(s),s=s[gr]}o=c}return i}function uy(n){let t=n[j],e=t.type;return e===2?t.declTNode:e===1?n[_t]:null}function Qo(n){return jE(Xe(),n)}function HE(){return Si(Xe(),J())}function Si(n,t){return new pt(kt(n,t))}var pt=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=HE}return n})();function zE(n){return n instanceof pt?n.nativeElement:n}function qE(){return this._results[Symbol.iterator]()}var bc=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new De}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let r=Mm(t);(this._changesDetected=!xm(this._results,r,e))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=qE};function dy(n){return(n.flags&128)===128}var qf=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(qf||{}),fy=new Map,GE=0;function WE(){return GE++}function KE(n){fy.set(n[ko],n)}function If(n){fy.delete(n[ko])}var Dv="__ngContext__";function wi(n,t){Zt(t)?(n[Dv]=t[ko],KE(t)):n[Dv]=t}function hy(n){return gy(n[gi])}function py(n){return gy(n[yt])}function gy(n){for(;n!==null&&!Pt(n);)n=n[yt];return n}var YE;function Gf(n){YE=n}var Ac=new N("",{factory:()=>ZE}),ZE="ng";var Oc=new N(""),Jo=new N("",{providedIn:"platform",factory:()=>"unknown"});var Nc=new N("",{factory:()=>C(Ae).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var my=!1,vy=new N("",{factory:()=>my});var QE=(n,t,e,r)=>{};function JE(n,t,e,r){QE(n,t,e,r)}function Wf(n){return(n.flags&32)===32}var XE=()=>null;function yy(n,t,e=!1){return XE(n,t,e)}function _y(n,t){let e=n.contentQueries;if(e!==null){let r=V(null);try{for(let i=0;i<e.length;i+=2){let o=e[i],s=e[i+1];if(s!==-1){let a=n.data[s];rc(o),a.contentQueries(2,t[s],s)}}}finally{V(r)}}}function xf(n,t,e){rc(0);let r=V(null);try{t(n,e)}finally{V(r)}}function by(n,t,e){if(zd(t)){let r=V(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=e[s];a.contentQueries(1,c,s)}}}finally{V(r)}}}var Lt=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Lt||{});var uc;function eD(){if(uc===void 0&&(uc=null,Mo.trustedTypes))try{uc=Mo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return uc}function Sv(n){return eD()?.createScriptURL(n)||n}var wc=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Wa})`}};function Rc(n){return n instanceof wc?n.changingThisBreaksApplicationSecurity:n}function Kf(n,t){let e=wy(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${Wa})`)}return e===t}function wy(n){return n instanceof wc&&n.getTypeName()||null}var tD=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Cy(n){return n=String(n),n.match(tD)?n:"unsafe:"+n}function nD(n,t){return n.createText(t)}function rD(n,t,e){n.setValue(t,e)}function Ey(n,t,e){return n.createElement(t,e)}function Cc(n,t,e,r,i){n.insertBefore(t,e,r,i)}function Dy(n,t,e){n.appendChild(t,e)}function Iv(n,t,e,r,i){r!==null?Cc(n,t,e,r,i):Dy(n,t,e)}function iD(n,t,e,r){n.removeChild(null,t,e,r)}function oD(n,t,e){n.setAttribute(t,"style",e)}function sD(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function Sy(n,t,e){let{mergedAttrs:r,classes:i,styles:o}=e;r!==null&&NE(n,t,r),i!==null&&sD(n,t,i),o!==null&&oD(n,t,o)}var Pc=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Pc||{});function Iy(n){let t=My();return t?t.sanitize(Pc.URL,n)||"":Kf(n,"URL")?Rc(n):Cy(Ao(n))}function xy(n){let t=My();if(t)return Sv(t.sanitize(Pc.RESOURCE_URL,n)||"");if(Kf(n,"ResourceURL"))return Sv(Rc(n));throw new M(904,!1)}function aD(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?xy:Iy}function Yf(n,t,e){return aD(t,e)(n)}function My(){let n=J();return n&&n[Kt].sanitizer}function Ty(n){return n instanceof Function?n():n}function cD(n,t,e){let r=n.length;for(;;){let i=n.indexOf(t,e);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}e=i+1}}var Ay="ng-template";function lD(n,t,e,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&cD(t[i+1].toLowerCase(),e,0)!==-1)return!0}else if(Zf(n))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===e)return!0}return!1}function Zf(n){return n.type===4&&n.value!==Ay}function uD(n,t,e){let r=n.type===4&&!e?Ay:n.value;return t===r}function dD(n,t,e){let r=4,i=n.attrs,o=i!==null?pD(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!Ft(r)&&!Ft(c))return!1;if(s&&Ft(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!uD(n,c,e)||c===""&&t.length===1){if(Ft(r))return!1;s=!0}}else if(r&8){if(i===null||!lD(n,i,c,e)){if(Ft(r))return!1;s=!0}}else{let l=t[++a],u=fD(c,i,Zf(n),e);if(u===-1){if(Ft(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Ft(r))return!1;s=!0}}}}return Ft(r)||s}function Ft(n){return(n&1)===0}function fD(n,t,e,r){if(t===null)return-1;let i=0;if(r||!e){let o=!1;for(;i<t.length;){let s=t[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return gD(t,n)}function hD(n,t,e=!1){for(let r=0;r<t.length;r++)if(dD(n,t[r],e))return!0;return!1}function pD(n){for(let t=0;t<n.length;t++){let e=n[t];if(ty(e))return t}return n.length}function gD(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let r=n[e];if(typeof r=="number")return-1;if(r===t)return e;e++}return-1}function xv(n,t){return n?":not("+t.trim()+")":t}function mD(n){let t=n[0],e=1,r=2,i="",o=!1;for(;e<n.length;){let s=n[e];if(typeof s=="string")if(r&2){let a=n[++e];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Ft(s)&&(t+=xv(o,i),i=""),r=s,o=o||!Ft(r);e++}return i!==""&&(t+=xv(o,i)),t}function vD(n){return n.map(mD).join(",")}function yD(n){let t=[],e=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&t.push(o,n[++r]):i===8&&e.push(o);else{if(!Ft(i))break;i=o}r++}return e.length&&t.push(1,...e),t}var pn={};function Qf(n,t,e,r,i,o,s,a,c,l,u){let d=He+r,h=d+i,f=_D(d,h),m=typeof l=="function"?l():l;return f[j]={type:n,blueprint:f,template:e,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:u}}function _D(n,t){let e=[];for(let r=0;r<t;r++)e.push(r<n?null:pn);return e}function bD(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=Qf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function Jf(n,t,e,r,i,o,s,a,c,l,u){let d=t.blueprint.slice();return d[Rt]=i,d[U]=r|4|128|8|64|1024,(l!==null||n&&n[U]&2048)&&(d[U]|=2048),Gd(d),d[Pe]=d[gr]=n,d[je]=e,d[Kt]=s||n&&n[Kt],d[Ie]=a||n&&n[Ie],d[Mn]=c||n&&n[Mn]||null,d[_t]=o,d[ko]=WE(),d[Po]=u,d[Hd]=l,d[bt]=t.type==2?n[bt]:d,d}function wD(n,t,e){let r=kt(t,n),i=bD(e),o=n[Kt].rendererFactory,s=Xf(n,Jf(n,i,null,Oy(e),r,t,null,o.createRenderer(r,e),null,null,null));return n[t.index]=s}function Oy(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function Ny(n,t,e,r){if(e===0)return-1;let i=t.length;for(let o=0;o<e;o++)t.push(r),n.blueprint.push(r),n.data.push(null);return i}function Xf(n,t){return n[gi]?n[Bd][yt]=t:n[gi]=t,n[Bd]=t,t}function _(n=1){Ry(Je(),J(),_r()+n,!1)}function Ry(n,t,e,r){if(!r)if((t[U]&3)===3){let o=n.preOrderCheckHooks;o!==null&&fc(t,o,e)}else{let o=n.preOrderHooks;o!==null&&hc(t,o,0,e)}Rn(e)}var kc=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(kc||{});function Mf(n,t,e,r){let i=V(null);try{let[o,s,a]=n.inputs[e],c=null;(s&kc.SignalBased)!==0&&(c=t[o][rt]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(t,r)),n.setInput!==null?n.setInput(t,c,r,e,o):Yv(t,c,o,r)}finally{V(i)}}var Xt=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Xt||{}),CD;function eh(n,t){return CD(n,t)}var Ci=new Set,th=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(th||{}),Xo=new N(""),Mv=new Set;function Ii(n){Mv.has(n)||(Mv.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Py=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=O({token:n,providedIn:"root",factory:()=>new n})}return n})();var ED=new N("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:C(Re)})});function ky(n,t,e){let r=n.get(ED);if(Array.isArray(t))for(let i of t)r.queue.add(i),e?.detachedLeaveAnimationFns?.push(i);else r.queue.add(t),e?.detachedLeaveAnimationFns?.push(t);r.scheduler&&r.scheduler(n)}function DD(n,t){for(let[e,r]of t)ky(n,r.animateFns)}function Tv(n,t,e,r){let i=n?.[Fo]?.enter;t!==null&&i&&i.has(e.index)&&DD(r,i)}function _i(n,t,e,r,i,o,s,a){if(i!=null){let c,l=!1;Pt(i)?c=i:Zt(i)&&(l=!0,i=i[Rt]);let u=wt(i);n===0&&r!==null?(Tv(a,r,o,e),s==null?Dy(t,r,u):Cc(t,r,u,s||null,!0)):n===1&&r!==null?(Tv(a,r,o,e),Cc(t,r,u,s||null,!0)):n===2?Av(a,o,e,d=>{iD(t,u,l,d)}):n===3&&Av(a,o,e,()=>{t.destroyNode(u)}),c!=null&&LD(t,n,e,c,o,r,s)}}function SD(n,t){Fy(n,t),t[Rt]=null,t[_t]=null}function ID(n,t,e,r,i,o){r[Rt]=i,r[_t]=t,Fc(n,r,e,1,i,o)}function Fy(n,t){t[Kt].changeDetectionScheduler?.notify(9),Fc(n,t,t[Ie],2,null,null)}function xD(n){let t=n[gi];if(!t)return gf(n[j],n);for(;t;){let e=null;if(Zt(t))e=t[gi];else{let r=t[ze];r&&(e=r)}if(!e){for(;t&&!t[yt]&&t!==n;)Zt(t)&&gf(t[j],t),t=t[Pe];t===null&&(t=n),Zt(t)&&gf(t[j],t),e=t&&t[yt]}t=e}}function nh(n,t){let e=n[vr],r=e.indexOf(t);e.splice(r,1)}function rh(n,t){if(yr(t))return;let e=t[Ie];e.destroyNode&&Fc(n,t,e,3,null,null),xD(t)}function gf(n,t){if(yr(t))return;let e=V(null);try{t[U]&=-129,t[U]|=256,t[ft]&&Xn(t[ft]),AD(n,t),TD(n,t),t[j].type===1&&t[Ie].destroy();let r=t[Tn];if(r!==null&&Pt(t[Pe])){r!==t[Pe]&&nh(r,t);let i=t[Yt];i!==null&&i.detachView(n)}If(t)}finally{V(e)}}function Av(n,t,e,r){let i=n?.[Fo];if(i==null||i.leave==null||!i.leave.has(t.index))return r(!1);n&&Ci.add(n),ky(e,()=>{if(i.leave&&i.leave.has(t.index)){let s=i.leave.get(t.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),MD(n,r)}else n&&Ci.delete(n),r(!1)},i)}function MD(n,t){let e=n[Fo]?.running;if(e){e.then(()=>{n[Fo].running=void 0,Ci.delete(n),t(!0)});return}t(!1)}function TD(n,t){let e=n.cleanup,r=t[pi];if(e!==null)for(let s=0;s<e.length-1;s+=2)if(typeof e[s]=="string"){let a=e[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[e[s+1]];e[s].call(a)}r!==null&&(t[pi]=null);let i=t[dn];if(i!==null){t[dn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[Dn];if(o!==null){t[Dn]=null;for(let s of o)s.destroy()}}function AD(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let r=0;r<e.length;r+=2){let i=t[e[r]];if(!(i instanceof wr)){let o=e[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];se(X.LifecycleHookStart,a,c);try{c.call(a)}finally{se(X.LifecycleHookEnd,a,c)}}else{se(X.LifecycleHookStart,i,o);try{o.call(i)}finally{se(X.LifecycleHookEnd,i,o)}}}}}function OD(n,t,e){return ND(n,t.parent,e)}function ND(n,t,e){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return e[Rt];if(On(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Lt.None||i===Lt.Emulated)return null}return kt(r,e)}function RD(n,t,e){return kD(n,t,e)}function PD(n,t,e){return n.type&40?kt(n,e):null}var kD=PD,Ov;function ih(n,t,e,r){let i=OD(n,r,t),o=t[Ie],s=r.parent||t[_t],a=RD(s,r,t);if(i!=null)if(Array.isArray(e))for(let c=0;c<e.length;c++)Iv(o,i,e[c],a,!1);else Iv(o,i,e,a,!1);Ov!==void 0&&Ov(o,r,t,e,i)}function Ho(n,t){if(t!==null){let e=t.type;if(e&3)return kt(t,n);if(e&4)return Tf(-1,n[t.index]);if(e&8){let r=t.child;if(r!==null)return Ho(n,r);{let i=n[t.index];return Pt(i)?Tf(-1,i):wt(i)}}else{if(e&128)return Ho(n,t.next);if(e&32)return eh(t,n)()||wt(n[t.index]);{let r=Ly(n,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Sn(n[bt]);return Ho(i,r)}else return Ho(n,t.next)}}}return null}function Ly(n,t){if(t!==null){let r=n[bt][_t],i=t.projection;return r.projection[i]}return null}function Tf(n,t){let e=ze+n+1;if(e<t.length){let r=t[e],i=r[j].firstChild;if(i!==null)return Ho(r,i)}return t[An]}function oh(n,t,e,r,i,o,s){for(;e!=null;){let a=r[Mn];if(e.type===128){e=e.next;continue}let c=r[e.index],l=e.type;if(s&&t===0&&(c&&wi(wt(c),r),e.flags|=2),!Wf(e))if(l&8)oh(n,t,e.child,r,i,o,!1),_i(t,n,a,i,c,e,o,r);else if(l&32){let u=eh(e,r),d;for(;d=u();)_i(t,n,a,i,d,e,o,r);_i(t,n,a,i,c,e,o,r)}else l&16?FD(n,t,r,e,i,o):_i(t,n,a,i,c,e,o,r);e=s?e.projectionNext:e.next}}function Fc(n,t,e,r,i,o){oh(e,r,n.firstChild,t,i,o,!1)}function FD(n,t,e,r,i,o){let s=e[bt],c=s[_t].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];_i(t,n,e[Mn],i,u,r,o,e)}else{let l=c,u=s[Pe];dy(r)&&(l.flags|=128),oh(n,t,l,u,i,o,!0)}}function LD(n,t,e,r,i,o,s){let a=r[An],c=wt(r);a!==c&&_i(t,n,e,o,a,i,s);for(let l=ze;l<r.length;l++){let u=r[l];Fc(u[j],u,n,t,o,a)}}function jD(n,t,e,r,i){if(t)i?n.addClass(e,r):n.removeClass(e,r);else{let o=r.indexOf("-")===-1?void 0:Xt.DashCase;i==null?n.removeStyle(e,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Xt.Important),n.setStyle(e,r,i,o))}}function jy(n,t,e,r,i){let o=_r(),s=r&2;try{Rn(-1),s&&t.length>He&&Ry(n,t,He,!1);let a=s?X.TemplateUpdateStart:X.TemplateCreateStart;se(a,i,e),e(r,i)}finally{Rn(o);let a=s?X.TemplateUpdateEnd:X.TemplateCreateEnd;se(a,i,e)}}function sh(n,t,e){GD(n,t,e),(e.flags&64)===64&&WD(n,t,e)}function ah(n,t,e=kt){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?e(t,n):n[s];n[i++]=a}}}function VD(n,t,e,r){let o=r.get(vy,my)||e===Lt.ShadowDom||e===Lt.ExperimentalIsolatedShadowDom,s=n.selectRootElement(t,o);return UD(s),s}function UD(n){$D(n)}var $D=()=>null;function BD(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function HD(n,t,e,r,i,o){let s=t[j];if(ch(n,s,t,e,r)){On(n)&&qD(t,n.index);return}n.type&3&&(e=BD(e)),zD(n,t,e,r,i,o)}function zD(n,t,e,r,i,o){if(n.type&3){let s=kt(n,t);r=o!=null?o(r,n.value||"",e):r,i.setProperty(s,e,r)}else n.type&12}function qD(n,t){let e=Ct(t,n);e[U]&16||(e[U]|=64)}function GD(n,t,e){let r=e.directiveStart,i=e.directiveEnd;On(e)&&wD(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||_c(e,t);let o=e.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=Go(t,n,s,e);if(wi(c,t),o!==null&&QD(t,s-r,c,a,e,o),Qt(a)){let l=Ct(e.index,t);l[je]=Go(t,n,s,e)}}}function WD(n,t,e){let r=e.directiveStart,i=e.directiveEnd,o=e.index,s=iv();try{Rn(o);for(let a=r;a<i;a++){let c=n.data[a],l=t[a];nc(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&KD(c,l)}}finally{Rn(-1),nc(s)}}function KD(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function Vy(n,t){let e=n.directiveRegistry,r=null;if(e)for(let i=0;i<e.length;i++){let o=e[i];hD(t,o.selectors,!1)&&(r??=[],Qt(o)?r.unshift(o):r.push(o))}return r}function YD(n,t,e,r,i,o){let s=kt(n,t);ZD(t[Ie],s,o,n.value,e,r,i)}function ZD(n,t,e,r,i,o,s){if(o==null)n.removeAttribute(t,i,e);else{let a=s==null?Ao(o):s(o,r||"",i);n.setAttribute(t,i,a,e)}}function QD(n,t,e,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];Mf(r,e,c,l)}}function JD(n,t,e,r,i){let o=He+e,s=t[j],a=i(s,t,n,r,e);t[o]=a,yi(n,!0);let c=n.type===2;return c?(Sy(t[Ie],a,n),(Gm()===0||jo(n))&&wi(a,t),Wm()):wi(a,t),sc()&&(!c||!Wf(n))&&ih(s,t,a,n),n}function XD(n){let t=n;return Xd()?Xm():(t=t.parent,yi(t,!1)),t}function eS(n,t){let e=n[Mn];if(!e)return;let r;try{r=e.get(Et,null)}catch{r=null}r?.(t)}function ch(n,t,e,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],d=t.data[l];Mf(d,e[l],u,i),a=!0}if(o)for(let c of o){let l=e[c],u=t.data[c];Mf(u,l,r,i),a=!0}return a}function tS(n,t){let e=Ct(t,n),r=e[j];nS(r,e);let i=e[Rt];i!==null&&e[Po]===null&&(e[Po]=yy(i,e[Mn])),se(X.ComponentStart);try{lh(r,e,e[je])}finally{se(X.ComponentEnd,e[je])}}function nS(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function lh(n,t,e){ic(t);try{let r=n.viewQuery;r!==null&&xf(1,r,e);let i=n.template;i!==null&&jy(n,t,i,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[Yt]?.finishViewCreation(n),n.staticContentQueries&&_y(n,t),n.staticViewQueries&&xf(2,n.viewQuery,e);let o=n.components;o!==null&&rS(t,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[U]&=-5,oc()}}function rS(n,t){for(let e=0;e<t.length;e++)tS(n,t[e])}function Uy(n,t,e,r){let i=V(null);try{let o=t.tView,a=n[U]&4096?4096:16,c=Jf(n,o,e,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[t.index];c[Tn]=l;let u=n[Yt];return u!==null&&(c[Yt]=u.createEmbeddedView(o)),lh(o,c,e),c}finally{V(i)}}function Af(n,t){return!t||t.firstChild===null||dy(n)}function Wo(n,t,e,r,i=!1){for(;e!==null;){if(e.type===128){e=i?e.projectionNext:e.next;continue}let o=t[e.index];o!==null&&r.push(wt(o)),Pt(o)&&$y(o,r);let s=e.type;if(s&8)Wo(n,t,e.child,r);else if(s&32){let a=eh(e,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=Ly(t,e);if(Array.isArray(a))r.push(...a);else{let c=Sn(t[bt]);Wo(c[j],c,a,r,!0)}}e=i?e.projectionNext:e.next}return r}function $y(n,t){for(let e=ze;e<n.length;e++){let r=n[e],i=r[j].firstChild;i!==null&&Wo(r[j],r,i,t)}n[An]!==n[Rt]&&t.push(n[An])}function By(n){if(n[Xa]!==null){for(let t of n[Xa])t.impl.addSequence(t);n[Xa].length=0}}var Hy=[];function iS(n){return n[ft]??oS(n)}function oS(n){let t=Hy.pop()??Object.create(aS);return t.lView=n,t}function sS(n){n.lView[ft]!==n&&(n.lView=null,Hy.push(n))}var aS=z(D({},Jr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{vi(n.lView)},consumerOnSignalRead(){this.lView[ft]=this}});function cS(n){let t=n[ft]??Object.create(lS);return t.lView=n,t}var lS=z(D({},Jr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=Sn(n.lView);for(;t&&!zy(t[j]);)t=Sn(t);t&&Wd(t)},consumerOnSignalRead(){this.lView[ft]=this}});function zy(n){return n.type!==2}function qy(n){if(n[Dn]===null)return;let t=!0;for(;t;){let e=!1;for(let r of n[Dn])r.dirty&&(e=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=e&&!!(n[U]&8192)}}var uS=100;function Gy(n,t=0){let r=n[Kt].rendererFactory,i=!1;i||r.begin?.();try{dS(n,t)}finally{i||r.end?.()}}function dS(n,t){let e=ef();try{So(!0),Of(n,t);let r=0;for(;Uo(n);){if(r===uS)throw new M(103,!1);r++,Of(n,1)}}finally{So(e)}}function fS(n,t,e,r){if(yr(t))return;let i=t[U],o=!1,s=!1;ic(t);let a=!0,c=null,l=null;o||(zy(n)?(l=iS(t),c=Xr(l)):oa()===null?(a=!1,l=cS(t),c=Xr(l)):t[ft]&&(Xn(t[ft]),t[ft]=null));try{Gd(t),ev(n.bindingStartIndex),e!==null&&jy(n,t,e,2,r);let u=(i&3)===3;if(!o)if(u){let f=n.preOrderCheckHooks;f!==null&&fc(t,f,null)}else{let f=n.preOrderHooks;f!==null&&hc(t,f,0,null),hf(t,0)}if(s||hS(t),qy(t),Wy(t,0),n.contentQueries!==null&&_y(n,t),!o)if(u){let f=n.contentCheckHooks;f!==null&&fc(t,f)}else{let f=n.contentHooks;f!==null&&hc(t,f,1),hf(t,1)}gS(n,t);let d=n.components;d!==null&&Yy(t,d,0);let h=n.viewQuery;if(h!==null&&xf(2,h,r),!o)if(u){let f=n.viewCheckHooks;f!==null&&fc(t,f)}else{let f=n.viewHooks;f!==null&&hc(t,f,2),hf(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[Ja]){for(let f of t[Ja])f();t[Ja]=null}o||(By(t),t[U]&=-73)}catch(u){throw o||vi(t),u}finally{l!==null&&(go(l,c),a&&sS(l)),oc()}}function Wy(n,t){for(let e=hy(n);e!==null;e=py(e))for(let r=ze;r<e.length;r++){let i=e[r];Ky(i,t)}}function hS(n){for(let t=hy(n);t!==null;t=py(t)){if(!(t[U]&2))continue;let e=t[vr];for(let r=0;r<e.length;r++){let i=e[r];Wd(i)}}}function pS(n,t,e){se(X.ComponentStart);let r=Ct(t,n);try{Ky(r,e)}finally{se(X.ComponentEnd,r[je])}}function Ky(n,t){ec(n)&&Of(n,t)}function Of(n,t){let r=n[j],i=n[U],o=n[ft],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&mo(o)),s||=!1,o&&(o.dirty=!1),n[U]&=-9217,s)fS(r,n,r.template,n[je]);else if(i&8192){let a=V(null);try{qy(n),Wy(n,1);let c=r.components;c!==null&&Yy(n,c,1),By(n)}finally{V(a)}}}function Yy(n,t,e){for(let r=0;r<t.length;r++)pS(n,t[r],e)}function gS(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let r=0;r<e.length;r++){let i=e[r];if(i<0)Rn(~i);else{let o=i,s=e[++r],a=e[++r];rv(s,o);let c=t[o];se(X.HostBindingsUpdateStart,c);try{a(2,c)}finally{se(X.HostBindingsUpdateEnd,c)}}}}finally{Rn(-1)}}function uh(n,t){let e=ef()?64:1088;for(n[Kt].changeDetectionScheduler?.notify(t);n;){n[U]|=e;let r=Sn(n);if(mi(n)&&!r)return n;n=r}return null}function Zy(n,t,e,r){return[n,!0,0,t,null,r,null,e,null,null]}function mS(n,t){let e=ze+t;if(e<n.length)return n[e]}function Qy(n,t,e,r=!0){let i=t[j];if(yS(i,t,n,e),r){let s=Tf(e,n),a=t[Ie],c=a.parentNode(n[An]);c!==null&&ID(i,n[_t],a,t,c,s)}let o=t[Po];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function vS(n,t){let e=Ec(n,t);return e!==void 0&&rh(e[j],e),e}function Ec(n,t){if(n.length<=ze)return;let e=ze+t,r=n[e];if(r){let i=r[Tn];i!==null&&i!==n&&nh(i,r),t>0&&(n[e-1][yt]=r[yt]);let o=Oo(n,ze+t);SD(r[j],r);let s=o[Yt];s!==null&&s.detachView(o[j]),r[Pe]=null,r[yt]=null,r[U]&=-129}return r}function yS(n,t,e,r){let i=ze+r,o=e.length;r>0&&(e[i-1][yt]=t),r<o-ze?(t[yt]=e[i],Pd(e,ze+r,t)):(e.push(t),t[yt]=null),t[Pe]=e;let s=t[Tn];s!==null&&e!==s&&Jy(s,t);let a=t[Yt];a!==null&&a.insertView(n),tc(t),t[U]|=128}function Jy(n,t){let e=n[vr],r=t[Pe];if(Zt(r))n[U]|=2;else{let i=r[Pe][bt];t[bt]!==i&&(n[U]|=2)}e===null?n[vr]=[t]:e.push(t)}var kn=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,e=t[j];return Wo(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e}get context(){return this._lView[je]}set context(t){this._lView[je]=t}get destroyed(){return yr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Pe];if(Pt(t)){let e=t[Lo],r=e?e.indexOf(this):-1;r>-1&&(Ec(t,r),Oo(e,r))}this._attachedToViewContainer=!1}rh(this._lView[j],this._lView)}onDestroy(t){Kd(this._lView,t)}markForCheck(){uh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[U]&=-129}reattach(){tc(this._lView),this._lView[U]|=128}detectChanges(){this._lView[U]|=1024,Gy(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new M(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=mi(this._lView),e=this._lView[Tn];e!==null&&!t&&nh(e,this._lView),Fy(this._lView[j],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new M(902,!1);this._appRef=t;let e=mi(this._lView),r=this._lView[Tn];r!==null&&!e&&Jy(r,this._lView),tc(this._lView)}};var Fn=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=_S;constructor(e,r,i){this._declarationLView=e,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,r){return this.createEmbeddedViewImpl(e,r)}createEmbeddedViewImpl(e,r,i){let o=Uy(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:r,dehydratedView:i});return new kn(o)}}return n})();function _S(){return dh(Xe(),J())}function dh(n,t){return n.type&4?new Fn(t,n,Si(n,t)):null}function Lc(n,t,e,r,i){let o=n.data[t];if(o===null)o=bS(n,t,e,r,i),nv()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=r,o.attrs=i;let s=Jm();o.injectorIndex=s===null?-1:s.injectorIndex}return yi(o,!0),o}function bS(n,t,e,r,i){let o=Jd(),s=Xd(),a=s?o:o&&o.parent,c=n.data[t]=CS(n,a,e,t,r,i);return wS(n,c,o,s),c}function wS(n,t,e,r){n.firstChild===null&&(n.firstChild=t),e!==null&&(r?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function CS(n,t,e,r,i,o){let s=t?t.injectorIndex:-1,a=0;return Ym()&&(a|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var ES=()=>null,DS=()=>null;function Nv(n,t){return ES(n,t)}function SS(n,t,e){return DS(n,t,e)}var Xy=class{},jc=class{},Nf=class{resolveComponentFactory(t){throw new M(917,!1)}},es=class{static NULL=new Nf},Cr=class{},gn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>IS()}return n})();function IS(){let n=J(),t=Xe(),e=Ct(t.index,n);return(Zt(e)?e:n)[Ie]}var e_=(()=>{class n{static \u0275prov=O({token:n,providedIn:"root",factory:()=>null})}return n})();var gc={},Rf=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){let i=this.injector.get(t,gc,r);return i!==gc||e===gc?i:this.parentInjector.get(t,e,r)}};function Rv(n,t,e){let r=e?n.styles:null,i=e?n.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=Dd(i,a);else if(o==2){let c=a,l=t[++s];r=Dd(r,c+": "+l+";")}}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=i:n.classesWithoutHost=i}function P(n,t=0){let e=J();if(e===null)return L(n,t);let r=Xe();return cy(r,e,Le(n),t)}function t_(n,t,e,r,i){let o=r===null?null:{"":-1},s=i(n,e);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}TS(n,t,e,a,o,c,l)}o!==null&&r!==null&&xS(e,r,o)}function xS(n,t,e){let r=n.localNames=[];for(let i=0;i<t.length;i+=2){let o=e[t[i+1]];if(o==null)throw new M(-301,!1);r.push(t[i],o)}}function MS(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function TS(n,t,e,r,i,o,s){let a=r.length,c=null;for(let h=0;h<a;h++){let f=r[h];c===null&&Qt(f)&&(c=f,MS(n,e,h)),Df(_c(e,t),n,f.type)}kS(e,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let h=0;h<a;h++){let f=r[h];f.providersResolver&&f.providersResolver(f)}let l=!1,u=!1,d=Ny(n,t,a,null);a>0&&(e.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=r[h];if(e.mergedAttrs=qo(e.mergedAttrs,f.hostAttrs),OS(n,e,t,d,f),PS(d,f,i),s!==null&&s.has(f)){let[y,E]=s.get(f);e.directiveToIndex.set(f.type,[d,y+e.directiveStart,E+e.directiveStart])}else(o===null||!o.has(f))&&e.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(e.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(e.flags|=64);let m=f.type.prototype;!l&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),l=!0),!u&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),u=!0),d++}AS(n,e,o)}function AS(n,t,e){for(let r=t.directiveStart;r<t.directiveEnd;r++){let i=n.data[r];if(e===null||!e.has(i))Pv(0,t,i,r),Pv(1,t,i,r),Fv(t,r,!1);else{let o=e.get(i);kv(0,t,o,r),kv(1,t,o,r),Fv(t,r,!0)}}}function Pv(n,t,e,r){let i=n===0?e.inputs:e.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(r),n_(t,o)}}function kv(n,t,e,r){let i=n===0?e.inputs:e.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),n_(t,s)}}function n_(n,t){t==="class"?n.flags|=8:t==="style"&&(n.flags|=16)}function Fv(n,t,e){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!e&&i===null||e&&o===null||Zf(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!e&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===t){s??=[],s.push(c,r[a+1]);break}}else if(e&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===t){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function OS(n,t,e,r,i){n.data[r]=i;let o=i.factory||(i.factory=cr(i.type,!0)),s=new wr(o,Qt(i),P,null);n.blueprint[r]=s,e[r]=s,NS(n,t,r,Ny(n,e,i.hostVars,pn),i)}function NS(n,t,e,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~t.index;RS(s)!=a&&s.push(a),s.push(e,r,o)}}function RS(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function PS(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;Qt(t)&&(e[""]=n)}}function kS(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function r_(n,t,e,r,i,o,s,a){let c=t[j],l=c.consts,u=Nn(l,s),d=Lc(c,n,e,r,u);return o&&t_(c,t,d,Nn(l,a),i),d.mergedAttrs=qo(d.mergedAttrs,d.attrs),d.attrs!==null&&Rv(d,d.attrs,!1),d.mergedAttrs!==null&&Rv(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function i_(n,t){Xv(n,t),zd(t)&&n.queries.elementEnd(t)}function fh(n){return s_(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function o_(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),r;for(;!(r=e.next()).done;)t(r.value)}}function s_(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function ts(n,t,e){if(e===pn)return!1;let r=n[t];return Object.is(r,e)?!1:(n[t]=e,!0)}function mf(n,t,e){return function r(i){let o=On(n)?Ct(n.index,t):t;uh(o,5);let s=t[je],a=Lv(t,s,e,i),c=r.__ngNextListenerFn__;for(;c;)a=Lv(t,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function Lv(n,t,e,r){let i=V(null);try{return se(X.OutputStart,t,e),e(r)!==!1}catch(o){return eS(n,o),!1}finally{se(X.OutputEnd,t,e),V(i)}}function FS(n,t,e,r,i,o,s,a){let c=jo(n),l=!1,u=null;if(!r&&c&&(u=jS(t,e,o,n.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let d=kt(n,e),h=r?r(d):d;JE(e,h,o,a);let f=i.listen(h,o,a);if(!LS(o)){let m=r?y=>r(wt(y[n.index])):n.index;a_(m,t,e,o,a,f,!1)}}return l}function LS(n){return n.startsWith("animation")||n.startsWith("transition")}function jS(n,t,e,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===e&&i[o+1]===r){let a=t[pi],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function a_(n,t,e,r,i,o,s){let a=t.firstCreatePass?Zd(t):null,c=Yd(e),l=c.length;c.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function jv(n,t,e,r,i,o){let s=t[e],a=t[j],l=a.data[e].outputs[r],d=s[l].subscribe(o);a_(n.index,a,t,i,o,d,!0)}var Pf=Symbol("BINDING");var Dc=class extends es{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=xn(t);return new Ei(e,this.ngModule)}};function VS(n){return Object.keys(n).map(t=>{let[e,r,i]=n[t],o={propName:e,templateName:t,isSignal:(r&kc.SignalBased)!==0};return i&&(o.transform=i),o})}function US(n){return Object.keys(n).map(t=>({propName:n[t],templateName:t}))}function $S(n,t,e){let r=t instanceof Re?t:t?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Rf(e,r):e}function BS(n){let t=n.get(Cr,null);if(t===null)throw new M(407,!1);let e=n.get(e_,null),r=n.get(dr,null);return{rendererFactory:t,sanitizer:e,changeDetectionScheduler:r,ngReflect:!1}}function HS(n,t){let e=c_(n);return Ey(t,e,e==="svg"?Vm:e==="math"?Um:null)}function c_(n){return(n.selectors[0][0]||"div").toLowerCase()}var Ei=class extends jc{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=VS(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=US(this.componentDef.outputs),this.cachedOutputs}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=vD(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,r,i,o,s){se(X.DynamicComponentStart);let a=V(null);try{let c=this.componentDef,l=zS(r,c,s,o),u=$S(c,i||this.ngModule,t),d=BS(u),h=d.rendererFactory.createRenderer(null,c),f=r?VD(h,r,c.encapsulation,u):HS(c,h),m=s?.some(Vv)||o?.some(w=>typeof w!="function"&&w.bindings.some(Vv)),y=Jf(null,l,null,512|Oy(c),null,null,d,h,u,null,yy(f,u,!0));y[He]=f,ic(y);let E=null;try{let w=r_(He,y,2,"#host",()=>l.directiveRegistry,!0,0);Sy(h,f,w),wi(f,y),sh(l,y,w),by(l,w,y),i_(l,w),e!==void 0&&GS(w,this.ngContentSelectors,e),E=Ct(w.index,y),y[je]=E[je],lh(l,y,null)}catch(w){throw E!==null&&If(E),If(y),w}finally{se(X.DynamicComponentEnd),oc()}return new Sc(this.componentType,y,!!m)}finally{V(a)}}};function zS(n,t,e,r){let i=n?["ng-version","21.0.3"]:yD(t.selectors[0]),o=null,s=null,a=0;if(e)for(let u of e)a+=u[Pf].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let h of d.bindings){a+=h[Pf].requiredVars;let f=u+1;h.create&&(h.targetIdx=f,(o??=[]).push(h)),h.update&&(h.targetIdx=f,(s??=[]).push(h))}}let c=[t];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,h=jd(d);c.push(h)}return Qf(0,null,qS(o,s),1,a,c,null,null,null,[i],null)}function qS(n,t){return!n&&!t?null:e=>{if(e&1&&n)for(let r of n)r.create();if(e&2&&t)for(let r of t)r.update()}}function Vv(n){let t=n[Pf].kind;return t==="input"||t==="twoWay"}var Sc=class extends Xy{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e,r){super(),this._rootLView=e,this._hasInputBindings=r,this._tNode=Vo(e[j],He),this.location=Si(this._tNode,e),this.instance=Ct(this._tNode.index,e)[je],this.hostView=this.changeDetectorRef=new kn(e,void 0),this.componentType=t}setInput(t,e){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let i=this._rootLView,o=ch(r,i[j],i,t,e);this.previousInputValues.set(t,e);let s=Ct(r.index,i);uh(s,1)}get injector(){return new br(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function GS(n,t,e){let r=n.projection=[];for(let i=0;i<t.length;i++){let o=e[i];r.push(o!=null&&o.length?Array.from(o):null)}}var mn=(()=>{class n{static __NG_ELEMENT_ID__=WS}return n})();function WS(){let n=Xe();return u_(n,J())}var KS=mn,l_=class extends KS{_lContainer;_hostTNode;_hostLView;constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return Si(this._hostTNode,this._hostLView)}get injector(){return new br(this._hostTNode,this._hostLView)}get parentInjector(){let t=zf(this._hostTNode,this._hostLView);if(ny(t)){let e=yc(t,this._hostLView),r=vc(t),i=e[j].data[r+8];return new br(i,e)}else return new br(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=Uv(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-ze}createEmbeddedView(t,e,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Nv(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,i,Af(this._hostTNode,s)),a}createComponent(t,e,r,i,o,s,a){let c=t&&!DE(t),l;if(c)l=e;else{let E=e||{};l=E.index,r=E.injector,i=E.projectableNodes,o=E.environmentInjector||E.ngModuleRef,s=E.directives,a=E.bindings}let u=c?t:new Ei(xn(t)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let w=(c?d:this.parentInjector).get(Re,null);w&&(o=w)}let h=xn(u.componentType??{}),f=Nv(this._lContainer,h?.id??null),m=f?.firstChild??null,y=u.create(d,i,m,o,s,a);return this.insertImpl(y.hostView,l,Af(this._hostTNode,f)),y}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,r){let i=t._lView;if(Bm(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[Pe],l=new l_(c,c[_t],c[Pe]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return Qy(s,i,o,r),t.attachToViewContainerRef(),Pd(vf(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=Uv(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),r=Ec(this._lContainer,e);r&&(Oo(vf(this._lContainer),e),rh(r[j],r))}detach(t){let e=this._adjustIndex(t,-1),r=Ec(this._lContainer,e);return r&&Oo(vf(this._lContainer),e)!=null?new kn(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function Uv(n){return n[Lo]}function vf(n){return n[Lo]||(n[Lo]=[])}function u_(n,t){let e,r=t[n.index];return Pt(r)?e=r:(e=Zy(r,t,null,n),t[n.index]=e,Xf(t,e)),ZS(e,t,n,r),new l_(e,n,t)}function YS(n,t){let e=n[Ie],r=e.createComment(""),i=kt(t,n),o=e.parentNode(i);return Cc(e,o,r,e.nextSibling(i),!1),r}var ZS=XS,QS=()=>!1;function JS(n,t,e){return QS(n,t,e)}function XS(n,t,e,r){if(n[An])return;let i;e.type&8?i=wt(r):i=YS(t,e),n[An]=i}var kf=class n{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Ff=class n{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let r=t.contentQueries!==null?t.contentQueries[0]:e.length,i=[];for(let o=0;o<r;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)hh(t,e).matches!==null&&this.queries[e].setDirty()}},Lf=class{flags;read;predicate;constructor(t,e,r=null){this.flags=e,this.read=r,typeof t=="string"?this.predicate=aI(t):this.predicate=t}},jf=class n{queries;constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){let i=e!==null?e.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,e!==null?e.push(o):e=[o])}return e!==null?new n(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},Vf=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,e=-1){this.metadata=t,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==e;)r=r.parent;return e===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,e,eI(e,o)),this.matchTNodeWithReadOption(t,e,pc(e,t,o,!1,!1))}else r===Fn?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,pc(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===pt||i===mn||i===Fn&&e.type&4)this.addMatch(e.index,-2);else{let o=pc(e,t,i,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,r)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function eI(n,t){let e=n.localNames;if(e!==null){for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1]}return null}function tI(n,t){return n.type&11?Si(n,t):n.type&4?dh(n,t):null}function nI(n,t,e,r){return e===-1?tI(t,n):e===-2?rI(n,t,r):Go(n,n[j],e,t)}function rI(n,t,e){if(e===pt)return Si(t,n);if(e===Fn)return dh(t,n);if(e===mn)return u_(t,n)}function d_(n,t,e,r){let i=t[Yt].queries[r];if(i.matches===null){let o=n.data,s=e.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(nI(t,u,s[c+1],e.metadata.read))}}i.matches=a}return i.matches}function Uf(n,t,e,r){let i=n.queries.getByIndex(e),o=i.matches;if(o!==null){let s=d_(n,t,i,e);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],u=t[-c];for(let d=ze;d<u.length;d++){let h=u[d];h[Tn]===h[Pe]&&Uf(h[j],h,l,r)}if(u[vr]!==null){let d=u[vr];for(let h=0;h<d.length;h++){let f=d[h];Uf(f[j],f,l,r)}}}}}return r}function iI(n,t){return n[Yt].queries[t].queryList}function oI(n,t,e){let r=new bc((e&4)===4);return qm(n,t,r,r.destroy),(t[Yt]??=new Ff).queries.push(new kf(r))-1}function sI(n,t,e,r){let i=Je();if(i.firstCreatePass){let o=Xe();cI(i,new Lf(t,e,r),o.index),lI(i,n),(e&2)===2&&(i.staticContentQueries=!0)}return oI(i,J(),e)}function aI(n){return n.split(",").map(t=>t.trim())}function cI(n,t,e){n.queries===null&&(n.queries=new jf),n.queries.track(new Vf(t,e))}function lI(n,t){let e=n.contentQueries||(n.contentQueries=[]),r=e.length?e[e.length-1]:-1;t!==r&&e.push(n.queries.length-1,t)}function hh(n,t){return n.queries.getByIndex(t)}function uI(n,t){let e=n[j],r=hh(e,t);return r.crossesNgTemplate?Uf(e,n,t,[]):d_(e,n,r,t)}var Er=class{},Vc=class{};var Ic=class extends Er{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Dc(this);constructor(t,e,r,i=!0){super(),this.ngModuleType=t,this._parent=e;let o=Ld(t);this._bootstrapComponents=Ty(o.bootstrap),this._r3Injector=sf(t,e,[{provide:Er,useValue:this},{provide:es,useValue:this.componentFactoryResolver},...r],fn(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},xc=class extends Vc{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Ic(this.moduleType,t,[])}};var Ko=class extends Er{injector;componentFactoryResolver=new Dc(this);instance=null;constructor(t){super();let e=new ur([...t.providers,{provide:Er,useValue:this},{provide:es,useValue:this.componentFactoryResolver}],t.parent||Ro(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function ns(n,t,e=null){return new Ko({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var dI=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let r=Vd(!1,e.type),i=r.length>0?ns([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,i)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=O({token:n,providedIn:"environment",factory:()=>new n(L(Re))})}return n})();function Ce(n){return Zo(()=>{let t=f_(n),e=z(D({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===qf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(dI).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Lt.Emulated,styles:n.styles||lt,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&Ii("NgStandalone"),h_(e);let r=n.dependencies;return e.directiveDefs=$v(r,fI),e.pipeDefs=$v(r,Om),e.id=gI(e),e})}function fI(n){return xn(n)||jd(n)}function en(n){return Zo(()=>({type:n.type,bootstrap:n.bootstrap||lt,declarations:n.declarations||lt,imports:n.imports||lt,exports:n.exports||lt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function hI(n,t){if(n==null)return In;let e={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=kc.None,c=null),e[o]=[r,a,c],t[o]=s}return e}function pI(n){if(n==null)return In;let t={};for(let e in n)n.hasOwnProperty(e)&&(t[n[e]]=e);return t}function ve(n){return Zo(()=>{let t=f_(n);return h_(t),t})}function f_(n){let t={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputConfig:n.inputs||In,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||lt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:hI(n.inputs,t),outputs:pI(n.outputs),debugInfo:null}}function h_(n){n.features?.forEach(t=>t(n))}function $v(n,t){return n?()=>{let e=typeof n=="function"?n():n,r=[];for(let i of e){let o=t(i);o!==null&&r.push(o)}return r}:null}function gI(n){let t=0,e=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function mI(n){return Object.getPrototypeOf(n.prototype).constructor}function gt(n){let t=mI(n.type),e=!0,r=[n];for(;t;){let i;if(Qt(n))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new M(903,!1);i=t.\u0275dir}if(i){if(e){r.push(i);let s=n;s.inputs=yf(n.inputs),s.declaredInputs=yf(n.declaredInputs),s.outputs=yf(n.outputs);let a=i.hostBindings;a&&wI(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&_I(n,c),l&&bI(n,l),vI(n,i),Cm(n.outputs,i.outputs),Qt(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===gt&&(e=!1)}}t=Object.getPrototypeOf(t)}yI(r)}function vI(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let r=t.inputs[e];r!==void 0&&(n.inputs[e]=r,n.declaredInputs[e]=t.declaredInputs[e])}}function yI(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=t+=i.hostVars,i.hostAttrs=qo(i.hostAttrs,e=qo(e,i.hostAttrs))}}function yf(n){return n===In?{}:n===lt?[]:n}function _I(n,t){let e=n.viewQuery;e?n.viewQuery=(r,i)=>{t(r,i),e(r,i)}:n.viewQuery=t}function bI(n,t){let e=n.contentQueries;e?n.contentQueries=(r,i,o)=>{t(r,i,o),e(r,i,o)}:n.contentQueries=t}function wI(n,t){let e=n.hostBindings;e?n.hostBindings=(r,i)=>{t(r,i),e(r,i)}:n.hostBindings=t}function p_(n,t,e,r,i,o,s,a){if(e.firstCreatePass){n.mergedAttrs=qo(n.mergedAttrs,n.attrs);let u=n.tView=Qf(2,n,i,o,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,e.consts,null);e.queries!==null&&(e.queries.template(e,n),u.queries=e.queries.embeddedTView(n))}a&&(n.flags|=a),yi(n,!1);let c=EI(e,t,n,r);sc()&&ih(e,t,c,n),wi(c,t);let l=Zy(c,t,c,n);t[r+He]=l,Xf(t,l),JS(l,n,t)}function CI(n,t,e,r,i,o,s,a,c,l,u){let d=e+He,h;return t.firstCreatePass?(h=Lc(t,d,4,s||null,a||null),Qd()&&t_(t,n,h,Nn(t.consts,l),Vy),Xv(t,h)):h=t.data[d],p_(h,n,t,e,r,i,o,c),jo(h)&&sh(t,n,h),l!=null&&ah(n,h,u),h}function g_(n,t,e,r,i,o,s,a,c,l,u){let d=e+He,h;if(t.firstCreatePass){if(h=Lc(t,d,4,s||null,a||null),l!=null){let f=Nn(t.consts,l);h.localNames=[];for(let m=0;m<f.length;m+=2)h.localNames.push(f[m],-1)}}else h=t.data[d];return p_(h,n,t,e,r,i,o,c),l!=null&&ah(n,h,u),h}function Ge(n,t,e,r,i,o,s,a){let c=J(),l=Je(),u=Nn(l.consts,o);return CI(c,l,n,t,e,r,i,u,void 0,s,a),Ge}var EI=DI;function DI(n,t,e,r){return ac(!0),t[Ie].createComment("")}var ph=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var gh=new N("");function Ln(n){return!!n&&typeof n.then=="function"}function mh(n){return!!n&&typeof n.subscribe=="function"}var m_=new N("");var vh=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,r)=>{this.resolve=e,this.reject=r});appInits=C(m_,{optional:!0})??[];injector=C(ut);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let i of this.appInits){let o=Qe(this.injector,i);if(Ln(o))e.push(o);else if(mh(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});e.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{r()}).catch(i=>{this.reject(i)}),e.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Uc=new N("");function v_(){Uu(()=>{let n="";throw new M(600,n)})}function y_(n){return n.isBoundToModule}var SI=10;var Sr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=C(Et);afterRenderManager=C(Py);zonelessEnabled=C(Bo);rootEffectScheduler=C(lc);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new De;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=C(Pn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(oe(e=>!e))}constructor(){C(Xo,{optional:!0})}whenStable(){let e;return new Promise(r=>{e=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{e.unsubscribe()})}_injector=C(Re);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,r){return this.bootstrapImpl(e,r)}bootstrapImpl(e,r,i=ut.NULL){return this._injector.get(dt).run(()=>{se(X.BootstrapComponentStart);let s=e instanceof jc;if(!this._injector.get(vh).done){let m="";throw new M(405,m)}let c;s?c=e:c=this._injector.get(es).resolveComponentFactory(e),this.componentTypes.push(c.componentType);let l=y_(c)?void 0:this._injector.get(Er),u=r||c.selector,d=c.create(i,[],u,l),h=d.location.nativeElement,f=d.injector.get(gh,null);return f?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),zo(this.components,d),f?.unregisterApplication(h)}),this._loadComponent(d),se(X.BootstrapComponentEnd,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){se(X.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(th.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw se(X.ChangeDetectionEnd),new M(101,!1);let e=V(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,V(e),this.afterTick.next(),se(X.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Cr,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<SI;){se(X.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{se(X.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let e=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Uo(i))continue;let o=r&&!this.zonelessEnabled?0:1;Gy(i,o),e=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}e||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>Uo(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){let r=e;zo(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(e),this._injector.get(Uc,[]).forEach(i=>i(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>zo(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new M(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zo(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Ir(n,t,e,r){let i=J(),o=$o();if(ts(i,o,t)){let s=Je(),a=of();YD(a,i,n,t,e,r)}return Ir}var Nj=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function de(n,t,e,r,i,o,s,a){Ii("NgControlFlow");let c=J(),l=Je(),u=Nn(l.consts,o);return g_(c,l,n,t,e,r,i,u,256,s,a),yh}function yh(n,t,e,r,i,o,s,a){Ii("NgControlFlow");let c=J(),l=Je(),u=Nn(l.consts,o);return g_(c,l,n,t,e,r,i,u,512,s,a),yh}function fe(n,t){Ii("NgControlFlow");let e=J(),r=$o(),i=e[r]!==pn?e[r]:-1,o=i!==-1?Bv(e,He+i):void 0,s=0;if(ts(e,r,n)){let a=V(null);try{if(o!==void 0&&vS(o,s),n!==-1){let c=He+n,l=Bv(e,c),u=II(e[j],c),d=SS(l,u,e),h=Uy(e,u,t,{dehydratedView:d});Qy(l,h,s,Af(u,d))}}finally{V(a)}}else if(o!==void 0){let a=mS(o,s);a!==void 0&&(a[je]=t)}}function Bv(n,t){return n[t]}function II(n,t){return Vo(n,t)}function F(n,t,e){let r=J(),i=$o();if(ts(r,i,t)){let o=Je(),s=of();HD(s,r,n,t,r[Ie],e)}return F}function Hv(n,t,e,r,i){ch(t,n,e,i?"class":"style",r)}function p(n,t,e,r){let i=J(),o=i[j],s=n+He,a=o.firstCreatePass?r_(s,i,2,t,Vy,Qd(),e,r):o.data[s];if(JD(a,i,n,t,xI),jo(a)){let c=i[j];sh(c,i,a),by(c,a,i)}return r!=null&&ah(i,a),p}function g(){let n=Je(),t=Xe(),e=XD(t);return n.firstCreatePass&&i_(n,e),Zm(e)&&Qm(),Km(),e.classesWithoutHost!=null&&AE(e)&&Hv(n,e,J(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&OE(e)&&Hv(n,e,J(),e.stylesWithoutHost,!1),g}function b(n,t,e,r){return p(n,t,e,r),g(),b}var xI=(n,t,e,r,i)=>(ac(!0),Ey(t[Ie],r,uv()));function _e(){return J()}var rs="en-US";var MI=rs;function __(n){typeof n=="string"&&(MI=n.toLowerCase().replace(/_/g,"-"))}function $(n,t,e){let r=J(),i=Je(),o=Xe();return TI(i,r,r[Ie],o,n,t,e),$}function TI(n,t,e,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=mf(r,t,o),FS(r,n,t,s,e,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let d=0;d<u.length;d+=2){let h=u[d],f=u[d+1];c??=mf(r,t,o),jv(r,t,h,f,i,c)}if(l&&l.length)for(let d of l)c??=mf(r,t,o),jv(r,t,d,i,i,c)}}function I(n=1){return lv(n)}function _h(n,t,e,r){sI(n,t,e,r)}function bh(n){let t=J(),e=Je(),r=tf();rc(r+1);let i=hh(e,r);if(n.dirty&&$m(t)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=uI(t,r);n.reset(o,zE),n.notifyOnChanges()}return!0}return!1}function wh(){return iI(J(),tf())}function dc(n,t){return n<<17|t<<2}function Dr(n){return n>>17&32767}function AI(n){return(n&2)==2}function OI(n,t){return n&131071|t<<17}function $f(n){return n|2}function Di(n){return(n&131068)>>2}function _f(n,t){return n&-131069|t<<2}function NI(n){return(n&1)===1}function Bf(n){return n|1}function RI(n,t,e,r,i,o){let s=o?t.classBindings:t.styleBindings,a=Dr(s),c=Di(s);n[r]=e;let l=!1,u;if(Array.isArray(e)){let d=e;u=d[1],(u===null||hi(d,u)>0)&&(l=!0)}else u=e;if(i)if(c!==0){let h=Dr(n[a+1]);n[r+1]=dc(h,a),h!==0&&(n[h+1]=_f(n[h+1],r)),n[a+1]=OI(n[a+1],r)}else n[r+1]=dc(a,0),a!==0&&(n[a+1]=_f(n[a+1],r)),a=r;else n[r+1]=dc(c,0),a===0?a=r:n[c+1]=_f(n[c+1],r),c=r;l&&(n[r+1]=$f(n[r+1])),zv(n,u,r,!0),zv(n,u,r,!1),PI(t,u,n,r,o),s=dc(a,c),o?t.classBindings=s:t.styleBindings=s}function PI(n,t,e,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof t=="string"&&hi(o,t)>=0&&(e[r+1]=Bf(e[r+1]))}function zv(n,t,e,r){let i=n[e+1],o=t===null,s=r?Dr(i):Di(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];kI(c,t)&&(a=!0,n[s+1]=r?Bf(l):$f(l)),s=r?Dr(l):Di(l)}a&&(n[e+1]=r?$f(i):Bf(i))}function kI(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?hi(n,t)>=0:!1}function ae(n,t){return FI(n,t,null,!0),ae}function FI(n,t,e,r){let i=J(),o=Je(),s=tv(2);if(o.firstUpdatePass&&jI(o,n,s,r),t!==pn&&ts(i,s,t)){let a=o.data[_r()];HI(o,a,i,i[Ie],n,i[s+1]=zI(t,e),r,s)}}function LI(n,t){return t>=n.expandoStartIndex}function jI(n,t,e,r){let i=n.data;if(i[e+1]===null){let o=i[_r()],s=LI(n,e);qI(o,r)&&t===null&&!s&&(t=!1),t=VI(i,o,t,r),RI(i,o,t,e,s,r)}}function VI(n,t,e,r){let i=ov(n),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(e=bf(null,n,t,e,r),e=Yo(e,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||n[s]!==i)if(e=bf(i,n,t,e,r),o===null){let c=UI(n,t,r);c!==void 0&&Array.isArray(c)&&(c=bf(null,n,t,c[1],r),c=Yo(c,t.attrs,r),$I(n,t,r,c))}else o=BI(n,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),e}function UI(n,t,e){let r=e?t.classBindings:t.styleBindings;if(Di(r)!==0)return n[Dr(r)]}function $I(n,t,e,r){let i=e?t.classBindings:t.styleBindings;n[Dr(i)]=r}function BI(n,t,e){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Yo(r,s,e)}return Yo(r,t.attrs,e)}function bf(n,t,e,r,i){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=t[a],r=Yo(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(e.directiveStylingLast=a),r}function Yo(n,t,e){let r=e?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Am(n,s,e?!0:t[++o]))}return n===void 0?null:n}function HI(n,t,e,r,i,o,s,a){if(!(t.type&3))return;let c=n.data,l=c[a+1],u=NI(l)?qv(c,t,e,i,Di(l),s):void 0;if(!Mc(u)){Mc(o)||AI(l)&&(o=qv(c,null,e,i,a,s));let d=qd(_r(),e);jD(r,s,d,i,o)}}function qv(n,t,e,r,i,o){let s=t===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=e[i+1];h===pn&&(h=d?lt:void 0);let f=d?Qa(h,r):u===r?h:void 0;if(l&&!Mc(f)&&(f=Qa(c,r)),Mc(f)&&(a=f,s))return a;let m=n[i+1];i=s?Dr(m):Di(m)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=Qa(c,r))}return a}function Mc(n){return n!==void 0}function zI(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=fn(Rc(n)))),n}function qI(n,t){return(n.flags&(t?8:16))!==0}function v(n,t=""){let e=J(),r=Je(),i=n+He,o=r.firstCreatePass?Lc(r,i,1,t,null):r.data[i],s=GI(r,e,o,t,n);e[i]=s,sc()&&ih(r,e,s,o),yi(o,!1)}var GI=(n,t,e,r,i)=>(ac(!0),nD(t[Ie],r));function WI(n,t,e,r=""){return ts(n,$o(),e)?t+Ao(e)+r:pn}function Ee(n){return Q("",n),Ee}function Q(n,t,e){let r=J(),i=WI(r,n,t,e);return i!==pn&&KI(r,_r(),i),Q}function KI(n,t,e){let r=qd(t,n);rD(n[Ie],r,e)}function Gv(n,t,e){let r=Je();r.firstCreatePass&&b_(t,r.data,r.blueprint,Qt(n),e)}function b_(n,t,e,r,i){if(n=Le(n),Array.isArray(n))for(let o=0;o<n.length;o++)b_(n[o],t,e,r,i);else{let o=Je(),s=J(),a=Xe(),c=lr(n)?n:Le(n.provide),l=$d(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(lr(n)||!n.multi){let f=new wr(l,i,P,null),m=Cf(c,t,i?u:u+h,d);m===-1?(Df(_c(a,s),o,c),wf(o,n,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(f),s.push(f)):(e[m]=f,s[m]=f)}else{let f=Cf(c,t,u+h,d),m=Cf(c,t,u,u+h),y=f>=0&&e[f],E=m>=0&&e[m];if(i&&!E||!i&&!y){Df(_c(a,s),o,c);let w=QI(i?ZI:YI,e.length,i,r,l,n);!i&&E&&(e[m].providerFactory=w),wf(o,n,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(w),s.push(w)}else{let w=w_(e[i?m:f],l,!i&&r);wf(o,n,f>-1?f:m,w)}!i&&r&&E&&e[m].componentProviders++}}}function wf(n,t,e,r){let i=lr(t),o=Fm(t);if(i||o){let c=(o?Le(t.useClass):t).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(e);u===-1?l.push(e,[r,c]):l[u+1].push(r,c)}else l.push(e,c)}}}function w_(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function Cf(n,t,e,r){for(let i=e;i<r;i++)if(t[i]===n)return i;return-1}function YI(n,t,e,r,i){return Hf(this.multi,[])}function ZI(n,t,e,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Go(r,r[j],this.providerFactory.index,i);s=c.slice(0,a),Hf(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],Hf(o,s);return s}function Hf(n,t){for(let e=0;e<n.length;e++){let r=n[e];t.push(r())}return t}function QI(n,t,e,r,i,o){let s=new wr(n,e,P,null);return s.multi=[],s.index=t,s.componentProviders=0,w_(s,i,r&&!e),s}function jn(n,t){return e=>{e.providersResolver=(r,i)=>Gv(r,i?i(n):n,!1),t&&(e.viewProvidersResolver=(r,i)=>Gv(r,i?i(t):t,!0))}}var Tc=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},Ch=(()=>{class n{compileModuleSync(e){return new xc(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let r=this.compileModuleSync(e),i=Ld(e),o=Ty(i.declarations).reduce((s,a)=>{let c=xn(a);return c&&s.push(new Ei(c)),s},[]);return new Tc(r,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var C_=(()=>{class n{applicationErrorHandler=C(Et);appRef=C(Sr);taskService=C(Pn);ngZone=C(dt);zonelessEnabled=C(Bo);tracing=C(Xo,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Me;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Io):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(C(ff,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(e){if(!this.zonelessEnabled&&e===5)return;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?cf:af;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Io+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(e),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,cf(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function E_(){return[{provide:dr,useExisting:C_},{provide:dt,useClass:xo},{provide:Bo,useValue:!0}]}function JI(){return typeof $localize<"u"&&$localize.locale||rs}var $c=new N("",{factory:()=>C($c,{optional:!0,skipSelf:!0})||JI()});function Ve(n,t){return sa(n,t?.equal)}var M_=Symbol("InputSignalNode#UNSET"),yx=z(D({},aa),{transformFn:void 0,applyValueToInputSignal(n,t){vo(n,t)}});function T_(n,t){let e=Object.create(yx);e.value=n,e.transformFn=t?.transform;function r(){if(po(e),e.value===M_){let i=null;throw new M(-950,i)}return e.value}return r[rt]=e,r}var Hc=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>Qo(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function D_(n,t){return T_(n,t)}function _x(n){return T_(M_,n)}var A_=(D_.required=_x,D_);var Eh=new N(""),bx=new N("");function is(n){return!n.moduleRef}function wx(n){let t=is(n)?n.r3Injector:n.moduleRef.injector,e=t.get(dt);return e.run(()=>{is(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=t.get(Et),i;if(e.runOutsideAngular(()=>{i=e.onError.subscribe({next:r})}),is(n)){let o=()=>t.destroy(),s=n.platformInjector.get(Eh);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Eh);s.add(o),n.moduleRef.onDestroy(()=>{zo(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return Ex(r,e,()=>{let o=t.get(Pn),s=o.add(),a=t.get(vh);return a.runInitializers(),a.donePromise.then(()=>{let c=t.get($c,rs);if(__(c||rs),!t.get(bx,!0))return is(n)?t.get(Sr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(is(n)){let u=t.get(Sr);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return Cx?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var Cx;function Ex(n,t,e){try{let r=e();return Ln(r)?r.catch(i=>{throw t.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>n(r)),r}}var Bc=null;function Dx(n=[],t){return ut.create({name:t,providers:[{provide:No,useValue:"platform"},{provide:Eh,useValue:new Set([()=>Bc=null])},...n]})}function Sx(n=[]){if(Bc)return Bc;let t=Dx(n);return Bc=t,v_(),Ix(t),t}function Ix(n){let t=n.get(Oc,null);Qe(n,()=>{t?.forEach(e=>e())})}var xi=(()=>{class n{static __NG_ELEMENT_ID__=xx}return n})();function xx(n){return Mx(Xe(),J(),(n&16)===16)}function Mx(n,t,e){if(On(n)&&!e){let r=Ct(n.index,t);return new kn(r,r)}else if(n.type&175){let r=t[bt];return new kn(r,t)}return null}var Dh=class{constructor(){}supports(t){return fh(t)}create(t){return new Sh(t)}},Tx=(n,t)=>t,Sh=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||Tx}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,i=0,o=null;for(;e||r;){let s=!r||e&&e.currentIndex<S_(r,i,o)?e:r,a=S_(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(e=e._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let h=0;h<l;h++){let f=h<o.length?o[h]:o[h]=0,m=f+h;u<=m&&m<l&&(o[h]=f+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!fh(t))throw new M(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,a),r=!0):(r&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else i=0,o_(t,a=>{s=this._trackByFn(i,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,i),r=!0):(r&&(e=this._verifyReinsertion(e,a,s,i)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,i)):t=this._addAfter(new Ih(e,r),o,i)),t}_verifyReinsertion(t,e,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){let i=e===null?this._itHead:e._next;return t._next=i,t._prev=e,i===null?this._itTail=t:i._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new zc),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,r=t._next;return e===null?this._itHead=r:e._next=r,r===null?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new zc),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Ih=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},xh=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;r!==null;r=r._nextDup)if((e===null||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let e=t._prevDup,r=t._nextDup;return e===null?this._head=r:e._nextDup=r,r===null?this._tail=e:r._prevDup=e,this._head===null}},zc=class{map=new Map;put(t){let e=t.trackById,r=this.map.get(e);r||(r=new xh,this.map.set(e,r)),r.add(t)}get(t,e){let r=t,i=this.map.get(r);return i?i.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function S_(n,t,e){let r=n.previousIndex;if(r===null)return r;let i=0;return e&&r<e.length&&(i=e[r]),r+t+i}function I_(){return new Mh([new Dh])}var Mh=(()=>{class n{factories;static \u0275prov=O({token:n,providedIn:"root",factory:I_});constructor(e){this.factories=e}static create(e,r){if(r!=null){let i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:()=>{let r=C(n,{optional:!0,skipSelf:!0});return n.create(e,r||I_())}}}find(e){let r=this.factories.find(i=>i.supports(e));if(r!=null)return r;throw new M(901,!1)}}return n})();function O_(n){let{rootComponent:t,appProviders:e,platformProviders:r,platformRef:i}=n;se(X.BootstrapApplicationStart);try{let o=i?.injector??Sx(r),s=[E_(),pv,...e||[]],a=new Ko({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return wx({r3Injector:a.injector,platformInjector:o,rootComponent:t})}catch(o){return Promise.reject(o)}finally{se(X.BootstrapApplicationEnd)}}function os(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var N_=null;function Dt(){return N_}function Th(n){N_??=n}var ss=class{},qc=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>C(R_),providedIn:"platform"})}return n})();var R_=(()=>{class n extends qc{_location;_history;_doc=C(Ae);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Dt().getBaseHref(this._doc)}onPopState(e){let r=Dt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){let r=Dt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,i){this._history.pushState(e,r,i)}replaceState(e,r,i){this._history.replaceState(e,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function F_(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function P_(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function Vn(n){return n&&n[0]!=="?"?`?${n}`:n}var Mi=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>C(Ox),providedIn:"root"})}return n})(),Ax=new N(""),Ox=(()=>{class n extends Mi{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??C(Ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return F_(this._baseHref,e)}path(e=!1){let r=this._platformLocation.pathname+Vn(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,o){let s=this.prepareExternalUrl(i+Vn(o));this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){let s=this.prepareExternalUrl(i+Vn(o));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(L(qc),L(Ax,8))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ti=(()=>{class n{_subject=new De;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let r=this._locationStrategy.getBaseHref();this._basePath=Px(P_(k_(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Vn(r))}normalize(e){return n.stripTrailingSlash(Rx(this._basePath,k_(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._locationStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Vn(r)),i)}replaceState(e,r="",i=null){this._locationStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Vn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Vn;static joinWithSlash=F_;static stripTrailingSlash=P_;static \u0275fac=function(r){return new(r||n)(L(Mi))};static \u0275prov=O({token:n,factory:()=>Nx(),providedIn:"root"})}return n})();function Nx(){return new Ti(L(Mi))}function Rx(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function k_(n){return n.replace(/\/index.html$/,"")}function Px(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var Ah=/\s+/,L_=[],xr=(()=>{class n{_ngEl;_renderer;initialClasses=L_;rawClass;stateMap=new Map;constructor(e,r){this._ngEl=e,this._renderer=r}set klass(e){this.initialClasses=e!=null?e.trim().split(Ah):L_}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(Ah):e}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let r of e)this._updateState(r,!0);else if(e!=null)for(let r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){let i=this.stateMap.get(e);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let r=e[0],i=e[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(e,r){e=e.trim(),e.length>0&&e.split(Ah).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(P(pt),P(gn))};static \u0275dir=ve({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Gc=class{$implicit;ngForOf;index;count;constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ai=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let r=this._viewContainer;e.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Gc(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),j_(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);j_(o,i)})}static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(P(mn),P(Fn),P(Mh))};static \u0275dir=ve({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function j_(n,t){n.context.$implicit=t.item}var Vt=(()=>{class n{_viewContainer;_context=new Wc;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,r){this._viewContainer=e,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){V_(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){V_(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(P(mn),P(Fn))};static \u0275dir=ve({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Wc=class{$implicit=null;ngIf=null};function V_(n,t){if(n&&!n.createEmbeddedView)throw new M(2020,!1)}var st=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=en({type:n});static \u0275inj=Nt({})}return n})();function Oh(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let r=e.indexOf("="),[i,o]=r==-1?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var as=class{};var U_="browser";var cs=class{_doc;constructor(t){this._doc=t}manager},Kc=(()=>{class n extends cs{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i,o){return e.addEventListener(r,i,o),()=>this.removeEventListener(e,r,i,o)}removeEventListener(e,r,i,o){return e.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(L(Ae))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})(),Qc=new N(""),kh=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(s=>{s.manager=this});let i=e.filter(s=>!(s instanceof Kc));this._plugins=i.slice().reverse();let o=e.find(s=>s instanceof Kc);o&&this._plugins.push(o)}addEventListener(e,r,i,o){return this._findPluginFor(r).addEventListener(e,r,i,o)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(o=>o.supports(e)),!r)throw new M(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||n)(L(Qc),L(dt))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})(),Nh="ng-app-id";function $_(n){for(let t of n)t.remove()}function B_(n,t){let e=t.createElement("style");return e.textContent=n,e}function kx(n,t,e,r){let i=n.head?.querySelectorAll(`style[${Nh}="${t}"],link[${Nh}="${t}"]`);if(i)for(let o of i)o.removeAttribute(Nh),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&e.set(o.textContent,{usage:0,elements:[o]})}function Ph(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var Fh=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(e,r,i,o={}){this.doc=e,this.appId=r,this.nonce=i,kx(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let i of e)this.addUsage(i,this.inline,B_);r?.forEach(i=>this.addUsage(i,this.external,Ph))}removeStyles(e,r){for(let i of e)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,r,i){let o=r.get(e);o?o.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(e,this.doc)))})}removeUsage(e,r){let i=r.get(e);i&&(i.usage--,i.usage<=0&&($_(i.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])$_(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(e,B_(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(e,Ph(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),e.appendChild(r)}static \u0275fac=function(r){return new(r||n)(L(Ae),L(Ac),L(Nc,8),L(Jo))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})(),Rh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Lh=/%COMP%/g;var z_="%COMP%",Fx=`_nghost-${z_}`,Lx=`_ngcontent-${z_}`,jx=!0,Vx=new N("",{factory:()=>jx});function Ux(n){return Lx.replace(Lh,n)}function $x(n){return Fx.replace(Lh,n)}function q_(n,t){return t.map(e=>e.replace(Lh,n))}var jh=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,i,o,s,a,c=null,l=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new ls(e,s,a,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(e,r);return i instanceof Zc?i.applyToHost(e):i instanceof us&&i.applyStyles(),i}getOrCreateRenderer(e,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(r.encapsulation){case Lt.Emulated:o=new Zc(c,l,r,this.appId,u,s,a,d,h);break;case Lt.ShadowDom:return new Yc(c,e,r,s,a,this.nonce,d,h,l);case Lt.ExperimentalIsolatedShadowDom:return new Yc(c,e,r,s,a,this.nonce,d,h);default:o=new us(c,l,r,u,s,a,d,h);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||n)(L(kh),L(Fh),L(Ac),L(Vx),L(Ae),L(dt),L(Nc),L(Xo,8))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})(),ls=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,r,i,o){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(Rh[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(H_(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(H_(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){e.remove()}selectRootElement(t,e){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new M(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;let o=Rh[i];o?t.setAttributeNS(o,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){let i=Rh[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(Xt.DashCase|Xt.Important)?t.style.setProperty(e,r,i&Xt.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&Xt.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t!=null&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r,i){if(typeof t=="string"&&(t=Dt().getGlobalEventTarget(this.doc,t),!t))throw new M(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,e,o)),this.eventManager.addEventListener(t,e,o,i)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;t(e)===!1&&e.preventDefault()}}};function H_(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Yc=class extends ls{hostEl;sharedStylesHost;shadowRoot;constructor(t,e,r,i,o,s,a,c,l){super(t,i,o,a,c),this.hostEl=e,this.sharedStylesHost=l,this.shadowRoot=e.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=q_(r.id,u);for(let h of u){let f=document.createElement("style");s&&f.setAttribute("nonce",s),f.textContent=h,this.shadowRoot.appendChild(f)}let d=r.getExternalStyles?.();if(d)for(let h of d){let f=Ph(h,i);s&&f.setAttribute("nonce",s),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},us=class extends ls{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,r,i,o,s,a,c,l){super(t,o,s,a,c),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?q_(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Ci.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Zc=class extends us{contentAttr;hostAttr;constructor(t,e,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(t,e,r,o,s,a,c,l,u),this.contentAttr=Ux(u),this.hostAttr=$x(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}};var Jc=class n extends ss{supportsDOMEvents=!0;static makeCurrent(){Th(new n)}onAndCancel(t,e,r,i){return t.addEventListener(e,r,i),()=>{t.removeEventListener(e,r,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=Bx();return e==null?null:Hx(e)}resetBaseElement(){ds=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Oh(document.cookie,t)}},ds=null;function Bx(){return ds=ds||document.head.querySelector("base"),ds?ds.getAttribute("href"):null}function Hx(n){return new URL(n,document.baseURI).pathname}var zx=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})(),G_=["alt","control","meta","shift"],qx={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Gx={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},W_=(()=>{class n extends cs{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Dt().onAndCancel(e,s.domEventName,a,o))}static parseEventName(e){let r=e.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),G_.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(e,r){let i=qx[e.key]||e.key,o="";return r.indexOf("code.")>-1&&(i=e.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),G_.forEach(s=>{if(s!==i){let a=Gx[s];a(e)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(e,r,i){return o=>{n.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||n)(L(Ae))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})();function Vh(n,t,e){let r=D({rootComponent:n,platformRef:e?.platformRef},Wx(t));return O_(r)}function Wx(n){return{appProviders:[...Jx,...n?.providers??[]],platformProviders:Qx}}function Kx(){Jc.makeCurrent()}function Yx(){return new hn}function Zx(){return Gf(document),document}var Qx=[{provide:Jo,useValue:U_},{provide:Oc,useValue:Kx,multi:!0},{provide:Ae,useFactory:Zx}];var Jx=[{provide:No,useValue:"root"},{provide:hn,useFactory:Yx},{provide:Qc,useClass:Kc,multi:!0},{provide:Qc,useClass:W_,multi:!0},jh,Fh,kh,{provide:Cr,useExisting:jh},{provide:as,useClass:zx},[]];var K_=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||n)(L(Ae))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var B="primary",Ds=Symbol("RouteTitle"),zh=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Nr(n){return new zh(n)}function rb(n,t,e){let r=e.path.split("/");if(r.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function il(n){return new Promise((t,e)=>{n.pipe(un()).subscribe({next:r=>t(r),error:r=>e(r)})})}function eM(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!tn(n[e],t[e]))return!1;return!0}function tn(n,t){let e=n?qh(n):void 0,r=t?qh(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!ib(n[i],t[i]))return!1;return!0}function qh(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ib(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),r=[...t].sort();return e.every((i,o)=>r[o]===i)}else return n===t}function ob(n){return n.length>0?n[n.length-1]:null}function Pr(n){return ka(n)?n:Ln(n)?we(Promise.resolve(n)):Y(n)}function sb(n){return ka(n)?il(n):Promise.resolve(n)}var tM={exact:cb,subset:lb},ab={exact:nM,subset:rM,ignored:()=>!0};function Y_(n,t,e){return tM[e.paths](n.root,t.root,e.matrixParams)&&ab[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function nM(n,t){return tn(n,t)}function cb(n,t,e){if(!Ar(n.segments,t.segments)||!tl(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!n.children[r]||!cb(n.children[r],t.children[r],e))return!1;return!0}function rM(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>ib(n[e],t[e]))}function lb(n,t,e){return ub(n,t,t.segments,e)}function ub(n,t,e,r){if(n.segments.length>e.length){let i=n.segments.slice(0,e.length);return!(!Ar(i,e)||t.hasChildren()||!tl(i,e,r))}else if(n.segments.length===e.length){if(!Ar(n.segments,e)||!tl(n.segments,e,r))return!1;for(let i in t.children)if(!n.children[i]||!lb(n.children[i],t.children[i],r))return!1;return!0}else{let i=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!Ar(n.segments,i)||!tl(n.segments,i,r)||!n.children[B]?!1:ub(n.children[B],t,o,r)}}function tl(n,t,e){return t.every((r,i)=>ab[e](n[i].parameters,r.parameters))}var $t=class{root;queryParams;fragment;_queryParamMap;constructor(t=new ee([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Nr(this.queryParams),this._queryParamMap}toString(){return sM.serialize(this)}},ee=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nl(this)}},Un=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Nr(this.parameters),this._parameterMap}toString(){return fb(this)}};function iM(n,t){return Ar(n,t)&&n.every((e,r)=>tn(e.parameters,t[r].parameters))}function Ar(n,t){return n.length!==t.length?!1:n.every((e,r)=>e.path===t[r].path)}function oM(n,t){let e=[];return Object.entries(n.children).forEach(([r,i])=>{r===B&&(e=e.concat(t(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==B&&(e=e.concat(t(i,r)))}),e}var Ss=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>new $n,providedIn:"root"})}return n})(),$n=class{parse(t){let e=new Wh(t);return new $t(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${fs(t.root,!0)}`,r=lM(t.queryParams),i=typeof t.fragment=="string"?`#${aM(t.fragment)}`:"";return`${e}${r}${i}`}},sM=new $n;function nl(n){return n.segments.map(t=>fb(t)).join("/")}function fs(n,t){if(!n.hasChildren())return nl(n);if(t){let e=n.children[B]?fs(n.children[B],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==B&&r.push(`${i}:${fs(o,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=oM(n,(r,i)=>i===B?[fs(n.children[B],!1)]:[`${i}:${fs(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[B]!=null?`${nl(n)}/${e[0]}`:`${nl(n)}/(${e.join("//")})`}}function db(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xc(n){return db(n).replace(/%3B/gi,";")}function aM(n){return encodeURI(n)}function Gh(n){return db(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rl(n){return decodeURIComponent(n)}function Z_(n){return rl(n.replace(/\+/g,"%20"))}function fb(n){return`${Gh(n.path)}${cM(n.parameters)}`}function cM(n){return Object.entries(n).map(([t,e])=>`;${Gh(t)}=${Gh(e)}`).join("")}function lM(n){let t=Object.entries(n).map(([e,r])=>Array.isArray(r)?r.map(i=>`${Xc(e)}=${Xc(i)}`).join("&"):`${Xc(e)}=${Xc(r)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var uM=/^[^\/()?;#]+/;function Uh(n){let t=n.match(uM);return t?t[0]:""}var dM=/^[^\/()?;=#]+/;function fM(n){let t=n.match(dM);return t?t[0]:""}var hM=/^[^=?&#]+/;function pM(n){let t=n.match(hM);return t?t[0]:""}var gM=/^[^&#]+/;function mM(n){let t=n.match(gM);return t?t[0]:""}var Wh=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ee([],{}):new ee([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[B]=new ee(t,e)),r}parseSegment(){let t=Uh(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new M(4009,!1);return this.capture(t),new Un(rl(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=fM(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let i=Uh(this.remaining);i&&(r=i,this.capture(r))}t[rl(e)]=rl(r)}parseQueryParam(t){let e=pM(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let s=mM(this.remaining);s&&(r=s,this.capture(r))}let i=Z_(e),o=Z_(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Uh(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new M(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=B);let s=this.parseChildren();e[o??B]=Object.keys(s).length===1&&s[B]?s[B]:new ee([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new M(4011,!1)}};function hb(n){return n.segments.length>0?new ee([],{[B]:n}):n}function pb(n){let t={};for(let[r,i]of Object.entries(n.children)){let o=pb(i);if(r===B&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let e=new ee(n.segments,t);return vM(e)}function vM(n){if(n.numberOfChildren===1&&n.children[B]){let t=n.children[B];return new ee(n.segments.concat(t.segments),t.children)}return n}function Bn(n){return n instanceof $t}function gb(n,t,e=null,r=null,i=new $n){let o=mb(n);return vb(o,t,e,r,i)}function mb(n){let t;function e(o){let s={};for(let c of o.children){let l=e(c);s[c.outlet]=l}let a=new ee(o.url,s);return o===n&&(t=a),a}let r=e(n.root),i=hb(r);return t??i}function vb(n,t,e,r,i){let o=n;for(;o.parent;)o=o.parent;if(t.length===0)return $h(o,o,o,e,r,i);let s=yM(t);if(s.toRoot())return $h(o,o,new ee([],{}),e,r,i);let a=_M(s,o,n),c=a.processChildren?ps(a.segmentGroup,a.index,s.commands):_b(a.segmentGroup,a.index,s.commands);return $h(o,a.segmentGroup,c,e,r,i)}function ol(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function vs(n){return typeof n=="object"&&n!=null&&n.outlets}function Q_(n,t,e){n||="\u0275";let r=new $t;return r.queryParams={[n]:t},e.parse(e.serialize(r)).queryParams[n]}function $h(n,t,e,r,i,o){let s={};for(let[l,u]of Object.entries(r??{}))s[l]=Array.isArray(u)?u.map(d=>Q_(l,d,o)):Q_(l,u,o);let a;n===t?a=e:a=yb(n,t,e);let c=hb(pb(a));return new $t(c,s,i)}function yb(n,t,e){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===t?r[i]=e:r[i]=yb(o,t,e)}),new ee(n.segments,r)}var sl=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&ol(r[0]))throw new M(4003,!1);let i=r.find(vs);if(i&&i!==ob(r))throw new M(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function yM(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new sl(!0,0,n);let t=0,e=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?e=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new sl(e,t,r)}var Ni=class{segmentGroup;processChildren;index;constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}};function _M(n,t,e){if(n.isAbsolute)return new Ni(t,!0,0);if(!e)return new Ni(t,!1,NaN);if(e.parent===null)return new Ni(e,!0,0);let r=ol(n.commands[0])?0:1,i=e.segments.length-1+r;return bM(e,i,n.numberOfDoubleDots)}function bM(n,t,e){let r=n,i=t,o=e;for(;o>i;){if(o-=i,r=r.parent,!r)throw new M(4005,!1);i=r.segments.length}return new Ni(r,!1,i-o)}function wM(n){return vs(n[0])?n[0].outlets:{[B]:n}}function _b(n,t,e){if(n??=new ee([],{}),n.segments.length===0&&n.hasChildren())return ps(n,t,e);let r=CM(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ee(n.segments.slice(0,r.pathIndex),{});return o.children[B]=new ee(n.segments.slice(r.pathIndex),n.children),ps(o,0,i)}else return r.match&&i.length===0?new ee(n.segments,{}):r.match&&!n.hasChildren()?Kh(n,t,e):r.match?ps(n,0,i):Kh(n,t,e)}function ps(n,t,e){if(e.length===0)return new ee(n.segments,{});{let r=wM(e),i={};if(Object.keys(r).some(o=>o!==B)&&n.children[B]&&n.numberOfChildren===1&&n.children[B].segments.length===0){let o=ps(n.children[B],t,e);return new ee(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=_b(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ee(n.segments,i)}}function CM(n,t,e){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return o;let s=n.segments[i],a=e[r];if(vs(a))break;let c=`${a}`,l=r<e.length-1?e[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!X_(c,l,s))return o;r+=2}else{if(!X_(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Kh(n,t,e){let r=n.segments.slice(0,t),i=0;for(;i<e.length;){let o=e[i];if(vs(o)){let c=EM(o.outlets);return new ee(r,c)}if(i===0&&ol(e[0])){let c=n.segments[t];r.push(new Un(c.path,J_(e[0]))),i++;continue}let s=vs(o)?o.outlets[B]:`${o}`,a=i<e.length-1?e[i+1]:null;s&&a&&ol(a)?(r.push(new Un(s,J_(a))),i+=2):(r.push(new Un(s,{})),i++)}return new ee(r,{})}function EM(n){let t={};return Object.entries(n).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[e]=Kh(new ee([],{}),0,r))}),t}function J_(n){let t={};return Object.entries(n).forEach(([e,r])=>t[e]=`${r}`),t}function X_(n,t,e){return n==e.path&&tn(t,e.parameters)}var gs="imperative",ke=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(ke||{}),vt=class{id;url;constructor(t,e){this.id=t,this.url=e}},Rr=class extends vt{type=ke.NavigationStart;navigationTrigger;restoredState;constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Bt=class extends vt{urlAfterRedirects;type=ke.NavigationEnd;constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},tt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(tt||{}),ys=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(ys||{}),nn=class extends vt{reason;code;type=ke.NavigationCancel;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},yn=class extends vt{reason;code;type=ke.NavigationSkipped;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}},Pi=class extends vt{error;target;type=ke.NavigationError;constructor(t,e,r,i){super(t,e),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},_s=class extends vt{urlAfterRedirects;state;type=ke.RoutesRecognized;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},al=class extends vt{urlAfterRedirects;state;type=ke.GuardsCheckStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cl=class extends vt{urlAfterRedirects;state;shouldActivate;type=ke.GuardsCheckEnd;constructor(t,e,r,i,o){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ll=class extends vt{urlAfterRedirects;state;type=ke.ResolveStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ul=class extends vt{urlAfterRedirects;state;type=ke.ResolveEnd;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dl=class{route;type=ke.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},fl=class{route;type=ke.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},hl=class{snapshot;type=ke.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pl=class{snapshot;type=ke.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gl=class{snapshot;type=ke.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ml=class{snapshot;type=ke.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var bs=class{},ki=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function DM(n){return!(n instanceof bs)&&!(n instanceof ki)}function SM(n,t){return n.providers&&!n._injector&&(n._injector=ns(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Ut(n){return n.outlet||B}function IM(n,t){let e=n.filter(r=>Ut(r)===t);return e.push(...n.filter(r=>Ut(r)!==t)),e}function ji(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var vl=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ji(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Vi(this.rootInjector)}},Vi=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new vl(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||n)(L(Re))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yl=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Yh(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){let e=Yh(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Zh(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Zh(t,this._root).map(e=>e.value)}};function Yh(n,t){if(n===t.value)return t;for(let e of t.children){let r=Yh(n,e);if(r)return r}return null}function Zh(n,t){if(n===t.value)return[t];for(let e of t.children){let r=Zh(n,e);if(r.length)return r.unshift(t),r}return[]}var mt=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Oi(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var ws=class extends yl{snapshot;constructor(t,e){super(t),this.snapshot=e,np(this,t)}toString(){return this.snapshot.toString()}};function bb(n){let t=xM(n),e=new Te([new Un("",{})]),r=new Te({}),i=new Te({}),o=new Te({}),s=new Te(""),a=new Ht(e,r,o,s,i,B,n,t.root);return a.snapshot=t.root,new ws(new mt(a,[]),t)}function xM(n){let t={},e={},r={},o=new Or([],t,r,"",e,B,n,null,{});return new Cs("",new mt(o,[]))}var Ht=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(oe(l=>l[Ds]))??Y(void 0),this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(t=>Nr(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(t=>Nr(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function _l(n,t,e="emptyOnly"){let r,{routeConfig:i}=n;return t!==null&&(e==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:D(D({},t.params),n.params),data:D(D({},t.data),n.data),resolve:D(D(D(D({},n.data),t.data),i?.data),n._resolvedData)}:r={params:D({},n.params),data:D({},n.data),resolve:D(D({},n.data),n._resolvedData??{})},i&&Cb(i)&&(r.resolve[Ds]=i.title),r}var Or=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ds]}constructor(t,e,r,i,o,s,a,c,l){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Nr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Nr(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Cs=class extends yl{url;constructor(t,e){super(e),this.url=t,np(this,e)}toString(){return wb(this._root)}};function np(n,t){t.value._routerState=n,t.children.forEach(e=>np(n,e))}function wb(n){let t=n.children.length>0?` { ${n.children.map(wb).join(", ")} } `:"";return`${n.value}${t}`}function Bh(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,tn(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),tn(t.params,e.params)||n.paramsSubject.next(e.params),eM(t.url,e.url)||n.urlSubject.next(e.url),tn(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Qh(n,t){let e=tn(n.params,t.params)&&iM(n.url,t.url),r=!n.parent!=!t.parent;return e&&!r&&(!n.parent||Qh(n.parent,t.parent))}function Cb(n){return typeof n.title=="string"||n.title===null}var Eb=new N(""),Is=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=B;activateEvents=new le;deactivateEvents=new le;attachEvents=new le;detachEvents=new le;routerOutletData=A_();parentContexts=C(Vi);location=C(mn);changeDetector=C(xi);inputBinder=C(El,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new M(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new M(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new M(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new M(4013,!1);this._activatedRoute=e;let i=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Jh(e,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ve({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ht]})}return n})(),Jh=class{route;childContexts;parent;outletData;constructor(t,e,r,i){this.route=t,this.childContexts=e,this.parent=r,this.outletData=i}get(t,e){return t===Ht?this.route:t===Vi?this.childContexts:t===Eb?this.outletData:this.parent.get(t,e)}},El=new N("");var rp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ce({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&b(0,"router-outlet")},dependencies:[Is],encapsulation:2})}return n})();function ip(n){let t=n.children&&n.children.map(ip),e=t?z(D({},n),{children:t}):D({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==B&&(e.component=rp),e}function MM(n,t,e){let r=Es(n,t._root,e?e._root:void 0);return new ws(r,t)}function Es(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=t.value;let i=TM(n,t,e);return new mt(r,i)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Es(n,a)),s}}let r=AM(t.value),i=t.children.map(o=>Es(n,o));return new mt(r,i)}}function TM(n,t,e){return t.children.map(r=>{for(let i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Es(n,r,i);return Es(n,r)})}function AM(n){return new Ht(new Te(n.url),new Te(n.params),new Te(n.queryParams),new Te(n.fragment),new Te(n.data),n.outlet,n.component,n)}var Fi=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},Db="ngNavigationCancelingError";function bl(n,t){let{redirectTo:e,navigationBehaviorOptions:r}=Bn(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=Sb(!1,tt.Redirect);return i.url=e,i.navigationBehaviorOptions=r,i}function Sb(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[Db]=!0,e.cancellationCode=t,e}function OM(n){return Ib(n)&&Bn(n.url)}function Ib(n){return!!n&&n[Db]}var NM=(n,t,e,r)=>oe(i=>(new Xh(t,i.targetRouterState,i.currentRouterState,e,r).activate(n),i)),Xh=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,r,i,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),Bh(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){let i=Oi(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,r);else o&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=Oi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=Oi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,e,r){let i=Oi(e);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new ml(o.value.snapshot))}),t.children.length&&this.forwardEvent(new pl(t.value.snapshot))}activateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(Bh(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Bh(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},wl=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Ri=class{component;route;constructor(t,e){this.component=t,this.route=e}};function RM(n,t,e){let r=n._root,i=t?t._root:null;return hs(r,i,e,[r.value])}function PM(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function Ui(n,t){let e=Symbol(),r=t.get(n,e);return r===e?typeof n=="function"&&!Id(n)?n:t.get(n):r}function hs(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Oi(t);return n.children.forEach(s=>{kM(s,o[s.value.outlet],e,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ms(a,e.getContext(s),i)),i}function kM(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=FM(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new wl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?hs(n,t,a?a.children:null,r,i):hs(n,t,e,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ri(a.outlet.component,s))}else s&&ms(t,a,i),i.canActivateChecks.push(new wl(r)),o.component?hs(n,null,a?a.children:null,r,i):hs(n,null,e,r,i);return i}function FM(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Ar(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Ar(n.url,t.url)||!tn(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qh(n,t)||!tn(n.queryParams,t.queryParams);case"paramsChange":default:return!Qh(n,t)}}function ms(n,t,e){let r=Oi(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?t?ms(s,t.children.getContext(o),e):ms(s,null,e):ms(s,t,e)}),i.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Ri(t.outlet.component,i)):e.canDeactivateChecks.push(new Ri(null,i)):e.canDeactivateChecks.push(new Ri(null,i))}function xs(n){return typeof n=="function"}function LM(n){return typeof n=="boolean"}function jM(n){return n&&xs(n.canLoad)}function VM(n){return n&&xs(n.canActivate)}function UM(n){return n&&xs(n.canActivateChild)}function $M(n){return n&&xs(n.canDeactivate)}function BM(n){return n&&xs(n.canMatch)}function xb(n){return n instanceof ir||n?.name==="EmptyError"}var el=Symbol("INITIAL_VALUE");function Li(){return Gt(n=>od(n.map(t=>t.pipe(ln(1),ud(el)))).pipe(oe(t=>{for(let e of t)if(e!==!0){if(e===el)return el;if(e===!1||HM(e))return e}return!0}),At(t=>t!==el),ln(1)))}function HM(n){return Bn(n)||n instanceof Fi}function Mb(n){return n.aborted?Y(void 0).pipe(ln(1)):new K(t=>{let e=()=>{t.next(),t.complete()};return n.addEventListener("abort",e),()=>n.removeEventListener("abort",e)})}function Tb(n){return or(Mb(n))}function zM(n,t){return Be(e=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?Y(z(D({},e),{guardsResult:!0})):qM(s,r,i,n).pipe(Be(a=>a&&LM(a)?GM(r,o,n,t):Y(a)),oe(a=>z(D({},e),{guardsResult:a})))})}function qM(n,t,e,r){return we(n).pipe(Be(i=>QM(i.component,i.route,e,t,r)),un(i=>i!==!0,!0))}function GM(n,t,e,r){return we(t).pipe(wo(i=>ci(KM(i.route.parent,r),WM(i.route,r),ZM(n,i.path,e),YM(n,i.route,e))),un(i=>i!==!0,!0))}function WM(n,t){return n!==null&&t&&t(new gl(n)),Y(!0)}function KM(n,t){return n!==null&&t&&t(new hl(n)),Y(!0)}function YM(n,t,e){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(o=>bo(()=>{let s=ji(t)??e,a=Ui(o,s),c=VM(a)?a.canActivate(t,n):Qe(s,()=>a(t,n));return Pr(c).pipe(un())}));return Y(i).pipe(Li())}function ZM(n,t,e){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>PM(s)).filter(s=>s!==null).map(s=>bo(()=>{let a=s.guards.map(c=>{let l=ji(s.node)??e,u=Ui(c,l),d=UM(u)?u.canActivateChild(r,n):Qe(l,()=>u(r,n));return Pr(d).pipe(un())});return Y(a).pipe(Li())}));return Y(o).pipe(Li())}function QM(n,t,e,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return Y(!0);let s=o.map(a=>{let c=ji(t)??i,l=Ui(a,c),u=$M(l)?l.canDeactivate(n,t,e,r):Qe(c,()=>l(n,t,e,r));return Pr(u).pipe(un())});return Y(s).pipe(Li())}function JM(n,t,e,r,i){let o=t.canLoad;if(o===void 0||o.length===0)return Y(!0);let s=o.map(a=>{let c=Ui(a,n),l=jM(c)?c.canLoad(t,e):Qe(n,()=>c(t,e)),u=Pr(l);return i?u.pipe(Tb(i)):u});return Y(s).pipe(Li(),Ab(r))}function Ab(n){return Zu(Ze(t=>{if(typeof t!="boolean")throw bl(n,t)}),oe(t=>t===!0))}function XM(n,t,e,r,i){let o=t.canMatch;if(!o||o.length===0)return Y(!0);let s=o.map(a=>{let c=Ui(a,n),l=BM(c)?c.canMatch(t,e):Qe(n,()=>c(t,e)),u=Pr(l);return i?u.pipe(Tb(i)):u});return Y(s).pipe(Li(),Ab(r))}var Tr=class Ob extends Error{segmentGroup;constructor(t){super(),this.segmentGroup=t||null,Object.setPrototypeOf(this,Ob.prototype)}},ep=class Nb extends Error{urlTree;constructor(t){super(),this.urlTree=t,Object.setPrototypeOf(this,Nb.prototype)}};function eT(n){throw new M(4e3,!1)}function tT(n){throw Sb(!1,tt.GuardRejected)}var nT=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}async lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[B])throw eT(`${t.redirectTo}`);i=i.children[B]}}async applyRedirectCommands(t,e,r,i,o){let s=await rT(e,i,o);if(s instanceof $t)throw new ep(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,r);if(s[0]==="/")throw new ep(a);return a}applyRedirectCreateUrlTree(t,e,r,i){let o=this.createSegmentGroup(t,e.root,r,i);return new $t(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=e[a]}else r[i]=o}),r}createSegmentGroup(t,e,r,i){let o=this.createSegments(t,e.segments,r,i),s={};return Object.entries(e.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new ee(o,s)}createSegments(t,e,r,i){return e.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,e,r){let i=r[e.path.substring(1)];if(!i)throw new M(4001,!1);return i}findOrReturn(t,e){let r=0;for(let i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}};function rT(n,t,e){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:d}=t;return il(Pr(Qe(e,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:d}))))}var tp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function iT(n,t,e,r,i,o){let s=Rb(n,t,e);return s.matched?(r=SM(t,r),XM(r,t,e,i,o).pipe(oe(a=>a===!0?s:D({},tp)))):Y(s)}function Rb(n,t,e){if(t.path==="**")return oT(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?D({},tp):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(t.matcher||rb)(e,n,t);if(!i)return D({},tp);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?D(D({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function oT(n){return{matched:!0,parameters:n.length>0?ob(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function eb(n,t,e,r){return e.length>0&&cT(n,e,r)?{segmentGroup:new ee(t,aT(r,new ee(e,n.children))),slicedSegments:[]}:e.length===0&&lT(n,e,r)?{segmentGroup:new ee(n.segments,sT(n,e,r,n.children)),slicedSegments:e}:{segmentGroup:new ee(n.segments,n.children),slicedSegments:e}}function sT(n,t,e,r){let i={};for(let o of e)if(Dl(n,t,o)&&!r[Ut(o)]){let s=new ee([],{});i[Ut(o)]=s}return D(D({},r),i)}function aT(n,t){let e={};e[B]=t;for(let r of n)if(r.path===""&&Ut(r)!==B){let i=new ee([],{});e[Ut(r)]=i}return e}function cT(n,t,e){return e.some(r=>Dl(n,t,r)&&Ut(r)!==B)}function lT(n,t,e){return e.some(r=>Dl(n,t,r))}function Dl(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function uT(n,t,e){return t.length===0&&!n.children[e]}var dT=class{};async function fT(n,t,e,r,i,o,s="emptyOnly",a){return new pT(n,t,e,r,i,s,o,a).recognize()}var hT=31,pT=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,r,i,o,s,a,c){this.injector=t,this.configLoader=e,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new nT(this.urlSerializer,this.urlTree)}noMatchError(t){return new M(4002,`'${t.segmentGroup}'`)}async recognize(){let t=eb(this.urlTree.root,[],[],this.config).segmentGroup,{children:e,rootSnapshot:r}=await this.match(t),i=new mt(r,e),o=new Cs("",i),s=gb(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(t){let e=new Or([],Object.freeze({}),Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),B,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,t,B,e),rootSnapshot:e}}catch(r){if(r instanceof ep)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Tr?this.noMatchError(r):r}}async processSegmentGroup(t,e,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(t,e,r,o);let s=await this.processSegment(t,e,r,r.segments,i,!0,o);return s instanceof mt?[s]:[]}async processChildren(t,e,r,i){let o=[];for(let c of Object.keys(r.children))c==="primary"?o.unshift(c):o.push(c);let s=[];for(let c of o){let l=r.children[c],u=IM(e,c),d=await this.processSegmentGroup(t,u,l,c,i);s.push(...d)}let a=Pb(s);return gT(a),a}async processSegment(t,e,r,i,o,s,a){for(let c of e)try{return await this.processSegmentAgainstRoute(c._injector??t,e,c,r,i,o,s,a)}catch(l){if(l instanceof Tr||xb(l))continue;throw l}if(uT(r,i,o))return new dT;throw new Tr(r)}async processSegmentAgainstRoute(t,e,r,i,o,s,a,c){if(Ut(r)!==s&&(s===B||!Dl(i,o,r)))throw new Tr(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(t,i,r,o,s,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(t,i,e,r,o,s,c);throw new Tr(i)}async expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=Rb(e,i,o);if(!c)throw new Tr(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>hT&&(this.allowRedirects=!1));let f=new Or(o,l,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,tb(i),Ut(i),i.component??i._loadedComponent??null,i,nb(i)),m=_l(f,a,this.paramsInheritanceStrategy);if(f.params=Object.freeze(m.params),f.data=Object.freeze(m.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let y=await this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,f,t),E=await this.applyRedirects.lineralizeSegments(i,y);return this.processSegment(t,r,e,E.concat(h),s,!1,a)}async matchSegmentAgainstRoute(t,e,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await il(iT(e,r,i,t,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(e.children={}),!a?.matched)throw new Tr(e);t=r._injector??t;let{routes:c}=await this.getChildConfig(t,r,i),l=r._loadedInjector??t,{parameters:u,consumedSegments:d,remainingSegments:h}=a,f=new Or(d,u,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,tb(r),Ut(r),r.component??r._loadedComponent??null,r,nb(r)),m=_l(f,s,this.paramsInheritanceStrategy);f.params=Object.freeze(m.params),f.data=Object.freeze(m.data);let{segmentGroup:y,slicedSegments:E}=eb(e,d,h,c);if(E.length===0&&y.hasChildren()){let A=await this.processChildren(l,c,y,f);return new mt(f,A)}if(c.length===0&&E.length===0)return new mt(f,[]);let w=Ut(r)===o,q=await this.processSegment(l,c,y,E,w?B:o,!0,f);return new mt(f,q instanceof mt?[q]:[])}async getChildConfig(t,e,r){if(e.children)return{routes:e.children,injector:t};if(e.loadChildren){if(e._loadedRoutes!==void 0)return{routes:e._loadedRoutes,injector:e._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await il(JM(t,e,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(t,e);return e._loadedRoutes=o.routes,e._loadedInjector=o.injector,o}throw tT(e)}return{routes:[],injector:t}}};function gT(n){n.sort((t,e)=>t.value.outlet===B?-1:e.value.outlet===B?1:t.value.outlet.localeCompare(e.value.outlet))}function mT(n){let t=n.value.routeConfig;return t&&t.path===""}function Pb(n){let t=[],e=new Set;for(let r of n){if(!mT(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),e.add(i)):t.push(r)}for(let r of e){let i=Pb(r.children);t.push(new mt(r.value,i))}return t.filter(r=>!e.has(r))}function tb(n){return n.data||{}}function nb(n){return n.resolve||{}}var vT=new N("",{factory:()=>fT});function yT(n,t,e,r,i,o,s){let a=n.get(vT);return Be(c=>Y(c).pipe(Gt(l=>a(n,t,e,r,l.extractedUrl,i,o,s)),oe(({state:l,tree:u})=>z(D({},c),{targetSnapshot:l,urlAfterRedirects:u}))))}function _T(n,t){return Be(e=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return Y(e);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of kb(c))s.add(l);let a=0;return we(s).pipe(wo(c=>o.has(c)?bT(c,r,n,t):(c.data=_l(c,c.parent,n).resolve,Y(void 0))),Ze(()=>a++),Va(1),Be(c=>a===s.size?Y(e):it))})}function kb(n){let t=n.children.map(e=>kb(e)).flat();return[n,...t]}function bT(n,t,e,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!Cb(i)&&(o[Ds]=i.title),bo(()=>(n.data=_l(n,n.parent,e).resolve,wT(o,n,t,r).pipe(oe(s=>(n._resolvedData=s,n.data=D(D({},n.data),s),null)))))}function wT(n,t,e,r){let i=qh(n);if(i.length===0)return Y({});let o={};return we(i).pipe(Be(s=>CT(n[s],t,e,r).pipe(un(),Ze(a=>{if(a instanceof Fi)throw bl(new $n,a);o[s]=a}))),Va(1),oe(()=>o),li(s=>xb(s)?it:id(s)))}function CT(n,t,e,r){let i=ji(t)??r,o=Ui(n,i),s=o.resolve?o.resolve(t,e):Qe(i,()=>o(t,e));return Pr(s)}function Hh(n){return Gt(t=>{let e=n(t);return e?we(e).pipe(oe(()=>t)):Y(t)})}var op=(()=>{class n{buildTitle(e){let r,i=e.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===B);return r}getResolvedTitleForRoute(e){return e.data[Ds]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>C(Fb),providedIn:"root"})}return n})(),Fb=(()=>{class n extends op{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(L(K_))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$i=new N("",{factory:()=>({})}),Ms=new N(""),Lb=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=C(Ch);async loadComponent(e,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await sb(Qe(e,()=>r.loadComponent())),s=await Ub(Vb(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await jb(r,this.compiler,e,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function jb(n,t,e,r){let i=await sb(Qe(e,()=>n.loadChildren())),o=await Ub(Vb(i)),s;o instanceof Vc||Array.isArray(o)?s=o:s=await t.compileModuleAsync(o),r&&r(n);let a,c,l=!1;return Array.isArray(s)?(c=s,l=!0):(a=s.create(e).injector,c=a.get(Ms,[],{optional:!0,self:!0}).flat()),{routes:c.map(ip),injector:a}}function ET(n){return n&&typeof n=="object"&&"default"in n}function Vb(n){return ET(n)?n.default:n}async function Ub(n){return n}var Sl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>C(DT),providedIn:"root"})}return n})(),DT=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$b=new N("");var ST=()=>{},Bb=new N(""),Hb=(()=>{class n{currentNavigation=R(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=R(null);events=new De;transitionAbortWithErrorSubject=new De;configLoader=C(Lb);environmentInjector=C(Re);destroyRef=C(et);urlSerializer=C(Ss);rootContexts=C(Vi);location=C(Ti);inputBindingEnabled=C(El,{optional:!0})!==null;titleStrategy=C(op);options=C($i,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=C(Sl);createViewTransition=C($b,{optional:!0});navigationErrorHandler=C(Bb,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Y(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=i=>this.events.next(new dl(i)),r=i=>this.events.next(new fl(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;xe(()=>{this.transitions?.next(z(D({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(e){return this.transitions=new Te(null),this.transitions.pipe(At(r=>r!==null),Gt(r=>{let i=!1,o=new AbortController;return Y(r).pipe(Gt(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",tt.SupersededByNewNavigation),it;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?z(D({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!c&&l!=="reload")return this.events.next(new yn(s.id,this.urlSerializer.serialize(s.rawUrl),"",ys.IgnoredSameUrlNavigation)),s.resolve(!1),it;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Y(s).pipe(Gt(u=>(this.events.next(new Rr(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?it:Promise.resolve(u))),yT(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Ze(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let d=new _s(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:u,extractedUrl:d,source:h,restoredState:f,extras:m}=s,y=new Rr(u,this.urlSerializer.serialize(d),h,f);this.events.next(y);let E=bb(this.rootComponentType).snapshot;return this.currentTransition=r=z(D({},s),{targetSnapshot:E,urlAfterRedirects:d,extras:z(D({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(w=>(w.finalUrl=d,w)),Y(r)}else return this.events.next(new yn(s.id,this.urlSerializer.serialize(s.extractedUrl),"",ys.IgnoredByUrlHandlingStrategy)),s.resolve(!1),it}),Ze(s=>{let a=new al(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),oe(s=>(this.currentTransition=r=z(D({},s),{guards:RM(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),zM(this.environmentInjector,s=>this.events.next(s)),Ze(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw bl(this.urlSerializer,s.guardsResult);let a=new cl(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),At(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",tt.GuardRejected),!1)),Hh(s=>{if(s.guards.canActivateChecks.length!==0)return Y(s).pipe(Ze(a=>{let c=new ll(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Gt(a=>{let c=!1;return Y(a).pipe(_T(this.paramsInheritanceStrategy,this.environmentInjector),Ze({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",tt.NoDataFromResolver)}}))}),Ze(a=>{let c=new ul(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),Hh(s=>{let a=l=>{let u=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let d=ji(l)??this.environmentInjector;u.push(this.configLoader.loadComponent(d,l.routeConfig).then(h=>{l.component=h}))}for(let d of l.children)u.push(...a(d));return u},c=a(s.targetSnapshot.root);return c.length===0?Y(s):we(Promise.all(c).then(()=>s))}),Hh(()=>this.afterPreactivation()),Gt(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?we(c).pipe(oe(()=>r)):Y(r)}),oe(s=>{let a=MM(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=z(D({},s),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),Ze(()=>{this.events.next(new bs)}),NM(this.rootContexts,e.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),ln(1),or(Mb(o.signal).pipe(At(()=>!i&&!r.targetRouterState),Ze(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",tt.Aborted)}))),Ze({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=ST,a)),this.lastSuccessfulNavigation.set(xe(this.currentNavigation)),this.events.next(new Bt(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),or(this.transitionAbortWithErrorSubject.pipe(Ze(s=>{throw s}))),ld(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",tt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),li(s=>{if(this.destroyed)return r.resolve(!1),it;if(i=!0,Ib(s))this.events.next(new nn(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),OM(s)?this.events.next(new ki(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Pi(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=Qe(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Fi){let{message:l,cancellationCode:u}=bl(this.urlSerializer,c);this.events.next(new nn(r.id,this.urlSerializer.serialize(r.extractedUrl),l,u)),this.events.next(new ki(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return it}))}))}cancelNavigationTransition(e,r,i){let o=new nn(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=xe(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return e.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function IT(n){return n!==gs}var zb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>C(xT),providedIn:"root"})}return n})(),Cl=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},xT=(()=>{class n extends Cl{static \u0275fac=(()=>{let e;return function(i){return(e||(e=jt(n)))(i||n)}})();static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sp=(()=>{class n{urlSerializer=C(Ss);options=C($i,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=C(Ti);urlHandlingStrategy=C(Sl);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new $t;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:r,targetBrowserUrl:i}){let o=e!==void 0?this.urlHandlingStrategy.merge(e,r):r,s=i??o;return s instanceof $t?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:e,finalUrl:r,initialUrl:i}){r&&e?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=e):this.rawUrlTree=i}routerState=bb(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:()=>C(qb),providedIn:"root"})}return n})(),qb=(()=>{class n extends sp{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{e(r.url,r.state,"popstate")})})}handleRouterEvent(e,r){e instanceof Rr?this.updateStateMemento():e instanceof yn?this.commitTransition(r):e instanceof _s?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof bs?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof nn&&e.code!==tt.SupersededByNewNavigation&&e.code!==tt.Redirect?this.restoreHistory(r):e instanceof Pi?this.restoreHistory(r,!0):e instanceof Bt&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(e)||o){let a=this.browserPageId,c=D(D({},s),this.generateNgRouterState(i,a));this.location.replaceState(e,"",c)}else{let a=D(D({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===e.finalUrl&&o===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=jt(n)))(i||n)}})();static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ap(n,t){n.events.pipe(At(e=>e instanceof Bt||e instanceof nn||e instanceof Pi||e instanceof yn),oe(e=>e instanceof Bt||e instanceof yn?0:(e instanceof nn?e.code===tt.Redirect||e.code===tt.SupersededByNewNavigation:!1)?2:1),At(e=>e!==2),ln(1)).subscribe(()=>{t()})}var MT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},We=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=C(ph);stateManager=C(sp);options=C($i,{optional:!0})||{};pendingTasks=C(Pn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=C(Hb);urlSerializer=C(Ss);location=C(Ti);urlHandlingStrategy=C(Sl);injector=C(Re);_events=new De;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=C(zb);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=C(Ms,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!C(El,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Me;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=xe(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof nn&&r.code!==tt.Redirect&&r.code!==tt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Bt)this.navigated=!0;else if(r instanceof ki){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=D({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||IT(i.source)},s);this.scheduleNavigation(a,gs,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}DM(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),gs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r,i)=>{this.navigateToSyncWithBrowser(e,i,r)})}navigateToSyncWithBrowser(e,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=D({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(e);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(Et)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return xe(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(ip),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=D(D({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=mb(h)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),d=this.currentUrlTree.root}return vb(d,e,u,l??null,this.urlSerializer)}navigateByUrl(e,r={skipLocationChange:!1}){let i=Bn(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,gs,null,r)}navigate(e,r={skipLocationChange:!1}){return AT(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.console.warn(fi(4018,!1)),this.urlSerializer.parse("/")}}isActive(e,r){let i;if(r===!0?i=D({},MT):r===!1?i=D({},TT):i=r,Bn(e))return Y_(this.currentUrlTree,e,i);let o=this.parseUrl(e);return Y_(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.entries(e).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(e,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,h)=>{a=d,c=h});let u=this.pendingTasks.add();return ap(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function AT(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new M(4008,!1)}var Bi=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=R(null);get href(){return xe(this.reactiveHref)}set href(e){this.reactiveHref.set(e)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new De;applicationErrorHandler=C(Et);options=C($i,{optional:!0});constructor(e,r,i,o,s,a){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(C(new Hc("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let e=this.preserveFragment,r=i=>i==="merge"||i==="preserve";e||=r(this.queryParamsHandling),e||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),e&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Bt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Bn(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.reactiveHref.set(e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e))??"":null)}applyAttributeValue(e,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,e,r):i.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:Bn(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(P(We),P(Ht),Qo("tabindex"),P(gn),P(pt),P(Mi))};static \u0275dir=ve({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&$("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Ir("href",i.reactiveHref(),Yf)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",os],skipLocationChange:[2,"skipLocationChange","skipLocationChange",os],replaceUrl:[2,"replaceUrl","replaceUrl",os],routerLink:"routerLink"},features:[ht]})}return n})(),cp=(()=>{class n{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new le;link=C(Bi,{optional:!0});constructor(e,r,i,o){this.router=e,this.element=r,this.renderer=i,this.cdr=o,this.routerEventsSubscription=e.events.subscribe(s=>{s instanceof Bt&&this.update()})}ngAfterContentInit(){Y(this.links.changes,Y(null)).pipe(ai()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=we(e).pipe(ai()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){let r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let r=NT(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?e.isActive(o,r):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static \u0275fac=function(r){return new(r||n)(P(We),P(pt),P(gn),P(xi))};static \u0275dir=ve({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&_h(o,Bi,5),r&2){let s;bh(s=wh())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[ht]})}return n})();function NT(n){return!!n.paths}var RT=new N("");function lp(n,...t){return pr([{provide:Ms,multi:!0,useValue:n},[],{provide:Ht,useFactory:PT},{provide:Uc,multi:!0,useFactory:kT},t.map(e=>e.\u0275providers)])}function PT(){return C(We).routerState.root}function kT(){let n=C(ut);return t=>{let e=n.get(Sr);if(t!==e.components[0])return;let r=n.get(We),i=n.get(FT);n.get(LT)===1&&r.initialNavigation(),n.get(jT,null,{optional:!0})?.setUpPreloading(),n.get(RT,null,{optional:!0})?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var FT=new N("",{factory:()=>new De}),LT=new N("",{factory:()=>1});var jT=new N("");function dp(n){n||(n=C(et));let t=new K(e=>{if(n.destroyed){e.next();return}return n.onDestroy(e.next.bind(e))});return e=>e.pipe(or(t))}function Gb(n,t){let r=!t?.manualCleanup?t?.injector?.get(et)??C(et):null,i=VT(t?.equal),o;t?.requireSync?o=R({kind:0},{equal:i}):o=R({kind:1,value:t?.initialValue},{equal:i});let s,a=n.subscribe({next:c=>o.set({kind:1,value:c}),error:c=>{o.set({kind:2,error:c}),s?.()},complete:()=>{s?.()}});if(t?.requireSync&&o().kind===0)throw new M(601,!1);return s=r?.onDestroy(a.unsubscribe.bind(a)),Ve(()=>{let c=o();switch(c.kind){case 1:return c.value;case 2:throw c.error;case 0:throw new M(601,!1)}},{equal:t?.equal})}function VT(n=Object.is){return(t,e)=>t.kind===1&&e.kind===1&&n(t.value,e.value)}me();var Wb=n=>n?(...t)=>n(...t):(...t)=>fetch(...t);var Ts=class extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}},Il=class extends Ts{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},As=class extends Ts{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},Os=class extends Ts{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},fp=(function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n})(fp||{});var Ns=class{constructor(t,{headers:e={},customFetch:r,region:i=fp.Any}={}){this.url=t,this.headers=e,this.region=i,this.fetch=Wb(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return S(this,arguments,void 0,function*(e,r={}){var i;let o,s;try{let{headers:a,method:c,body:l,signal:u,timeout:d}=r,h={},{region:f}=r;f||(f=this.region);let m=new URL(`${this.url}/${e}`);f&&f!=="any"&&(h["x-region"]=f,m.searchParams.set("forceFunctionRegion",f));let y;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",y=l):typeof l=="string"?(h["Content-Type"]="text/plain",y=l):typeof FormData<"u"&&l instanceof FormData?y=l:(h["Content-Type"]="application/json",y=JSON.stringify(l)):y=l;let E=u;d&&(s=new AbortController,o=setTimeout(()=>s.abort(),d),u?(E=s.signal,u.addEventListener("abort",()=>s.abort())):E=s.signal);let w=yield this.fetch(m.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:y,signal:E}).catch(te=>{throw new Il(te)}),q=w.headers.get("x-relay-error");if(q&&q==="true")throw new As(w);if(!w.ok)throw new Os(w);let A=((i=w.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),x;return A==="application/json"?x=yield w.json():A==="application/octet-stream"||A==="application/pdf"?x=yield w.blob():A==="text/event-stream"?x=w:A==="multipart/form-data"?x=yield w.formData():x=yield w.text(),{data:x,error:null,response:w}}catch(a){return{data:null,error:a,response:a instanceof Os||a instanceof As?a.context:void 0}}finally{o&&clearTimeout(o)}})}};var Tp=nC(n0(),1),{PostgrestClient:r0,PostgrestQueryBuilder:G4,PostgrestFilterBuilder:W4,PostgrestTransformBuilder:K4,PostgrestBuilder:Y4,PostgrestError:ZT}=Tp.default||Tp;var Ap=class{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){let e=process.versions;if(e&&e.node){let r=e.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let t=this.detectEnvironment();if(t.constructor)return t.constructor;let e=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(e+=`

Suggested solution: ${t.workaround}`),new Error(e)}static createWebSocket(t,e){let r=this.getWebSocketConstructor();return new r(t,e)}static isWebSocketSupported(){try{let t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}},Op=Ap;var i0="2.86.0";var o0=`realtime-js/${i0}`,Np="1.0.0",s0="2.0.0",Rp=Np;var Ps=1e4,a0=1e3,c0=100,kr=(function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n})(kr||{}),Oe=(function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n})(Oe||{}),St=(function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n})(St||{}),Pp=(function(n){return n.websocket="websocket",n})(Pp||{}),Fr=(function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n})(Fr||{});var Ml=class{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,e){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return e(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return e(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var e;return this._isArrayBuffer((e=t.payload)===null||e===void 0?void 0:e.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var e,r;let i=(r=(e=t.payload)===null||e===void 0?void 0:e.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var e,r;let i=(r=(e=t.payload)===null||e===void 0?void 0:e.payload)!==null&&r!==void 0?r:{},s=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(t,e,r){var i,o;let s=t.topic,a=(i=t.ref)!==null&&i!==void 0?i:"",c=(o=t.join_ref)!==null&&o!==void 0?o:"",l=t.payload.event,u=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(u).length===0?"":JSON.stringify(u);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);let h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+s.length+l.length+d.length,f=new ArrayBuffer(this.HEADER_LENGTH+h),m=new DataView(f),y=0;m.setUint8(y++,this.KINDS.userBroadcastPush),m.setUint8(y++,c.length),m.setUint8(y++,a.length),m.setUint8(y++,s.length),m.setUint8(y++,l.length),m.setUint8(y++,d.length),m.setUint8(y++,e),Array.from(c,w=>m.setUint8(y++,w.charCodeAt(0))),Array.from(a,w=>m.setUint8(y++,w.charCodeAt(0))),Array.from(s,w=>m.setUint8(y++,w.charCodeAt(0))),Array.from(l,w=>m.setUint8(y++,w.charCodeAt(0))),Array.from(d,w=>m.setUint8(y++,w.charCodeAt(0)));var E=new Uint8Array(f.byteLength+r.byteLength);return E.set(new Uint8Array(f),0),E.set(new Uint8Array(r),f.byteLength),E.buffer}decode(t,e){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return e(r)}if(typeof t=="string"){let r=JSON.parse(t),[i,o,s,a,c]=r;return e({join_ref:i,ref:o,topic:s,event:a,payload:c})}return e({})}_binaryDecode(t){let e=new DataView(t),r=e.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,e,i)}}_decodeUserBroadcast(t,e,r){let i=e.getUint8(1),o=e.getUint8(2),s=e.getUint8(3),a=e.getUint8(4),c=this.HEADER_LENGTH+4,l=r.decode(t.slice(c,c+i));c=c+i;let u=r.decode(t.slice(c,c+o));c=c+o;let d=r.decode(t.slice(c,c+s));c=c+s;let h=t.slice(c,t.byteLength),f=a===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,m={type:this.BROADCAST_EVENT,event:u,payload:f};return s>0&&(m.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(t){var e;return t instanceof ArrayBuffer||((e=t?.constructor)===null||e===void 0?void 0:e.name)==="ArrayBuffer"}_pick(t,e){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>e.includes(r)))}};var zi=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var he=(function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n})(he||{}),Fp=(n,t,e={})=>{var r;let i=(r=e.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,s)=>(o[s]=QT(s,n,t,i),o),{}):{}},QT=(n,t,e,r)=>{let i=t.find(a=>a.name===n),o=i?.type,s=e[n];return o&&!r.includes(o)?l0(o,s):kp(s)},l0=(n,t)=>{if(n.charAt(0)==="_"){let e=n.slice(1,n.length);return tA(t,e)}switch(n){case he.bool:return JT(t);case he.float4:case he.float8:case he.int2:case he.int4:case he.int8:case he.numeric:case he.oid:return XT(t);case he.json:case he.jsonb:return eA(t);case he.timestamp:return nA(t);case he.abstime:case he.date:case he.daterange:case he.int4range:case he.int8range:case he.money:case he.reltime:case he.text:case he.time:case he.timestamptz:case he.timetz:case he.tsrange:case he.tstzrange:return kp(t);default:return kp(t)}},kp=n=>n,JT=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},XT=n=>{if(typeof n=="string"){let t=parseFloat(n);if(!Number.isNaN(t))return t}return n},eA=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},tA=(n,t)=>{if(typeof n!="string")return n;let e=n.length-1,r=n[e];if(n[0]==="{"&&r==="}"){let o,s=n.slice(1,e);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>l0(t,a))}return n},nA=n=>typeof n=="string"?n.replace(" ","T"):n,Tl=n=>{let t=new URL(n);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};var qi=class{constructor(t,e,r={},i=Ps){this.channel=t,this.event=e,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var ks=class n{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,i,o,s),this.pendingDiffs.forEach(c=>{this.state=n.syncDiff(this.state,c,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=n.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,i){let o=this.cloneDeep(t),s=this.transformState(e),a={},c={};return this.map(o,(l,u)=>{s[l]||(c[l]=u)}),this.map(s,(l,u)=>{let d=o[l];if(d){let h=u.map(E=>E.presence_ref),f=d.map(E=>E.presence_ref),m=u.filter(E=>f.indexOf(E.presence_ref)<0),y=d.filter(E=>h.indexOf(E.presence_ref)<0);m.length>0&&(a[l]=m),y.length>0&&(c[l]=y)}else a[l]=u}),this.syncDiff(o,{joins:a,leaves:c},r,i)}static syncDiff(t,e,r,i){let{joins:o,leaves:s}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,c)=>{var l;let u=(l=t[a])!==null&&l!==void 0?l:[];if(t[a]=this.cloneDeep(c),u.length>0){let d=t[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...h)}r(a,u,c)}),this.map(s,(a,c)=>{let l=t[a];if(!l)return;let u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=l,i(a,l,c),l.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{let i=t[r];return"metas"in i?e[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):e[r]=i,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Fs=(function(n){return n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system",n})(Fs||{}),_n=(function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n})(_n||{});var Ls=class n{constructor(t,e={config:{}},r){var i,o;if(this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=Oe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new qi(this,St.join,this.params,this.timeout),this.rejoinTimer=new zi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Oe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Oe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Oe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Oe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Oe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(St.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new ks(this),this.broadcastEndpointURL=Tl(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,e=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Oe.closed){let{config:{broadcast:s,presence:a,private:c}}=this.params,l=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[Fs.PRESENCE]&&this.bindings[Fs.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},h={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:l,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>t?.(_n.CHANNEL_ERROR,f)),this._onClose(()=>t?.(_n.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",async({postgres_changes:f})=>{var m;if(this.socket.setAuth(),f===void 0){t?.(_n.SUBSCRIBED);return}else{let y=this.bindings.postgres_changes,E=(m=y?.length)!==null&&m!==void 0?m:0,w=[];for(let q=0;q<E;q++){let A=y[q],{filter:{event:x,schema:te,table:zt,filter:ue}}=A,ge=f&&f[q];if(ge&&ge.event===x&&ge.schema===te&&ge.table===zt&&ge.filter===ue)w.push(Object.assign(Object.assign({},A),{id:ge.id}));else{this.unsubscribe(),this.state=Oe.errored,t?.(_n.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t(_n.SUBSCRIBED);return}}).receive("error",f=>{this.state=Oe.errored,t?.(_n.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t?.(_n.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,e={}){return await this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,e,r){return this.state===Oe.joined&&t===Fs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,e,r)}async httpSend(t,e,r={}){var i;let o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(e==null)return Promise.reject("Payload is required for httpSend()");let s={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:e,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let c=a.statusText;try{let l=await a.json();c=l.error||l.message||c}catch{}return Promise.reject(new Error(c))}async send(t,e={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:o,payload:s}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{let l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=e.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=l.body)===null||i===void 0?void 0:i.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var s,a,c;let l=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(a=(s=this.params)===null||s===void 0?void 0:s.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),l.receive("ok",()=>o("ok")),l.receive("error",()=>o("error")),l.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Oe.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(St.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new qi(this,St.leave,{},t),r.receive("ok",()=>{e(),i("ok")}).receive("timeout",()=>{e(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Oe.closed,this.bindings={}}async _fetchWithTimeout(t,e,r){let i=new AbortController,o=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(o),s}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new qi(this,t,e,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>c0){let e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var i,o;let s=t.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=St;if(r&&[a,c,l,u].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,e,r);if(e&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var m,y,E;return((m=f.filter)===null||m===void 0?void 0:m.event)==="*"||((E=(y=f.filter)===null||y===void 0?void 0:y.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===s}).map(f=>f.callback(h,r)):(o=this.bindings[s])===null||o===void 0||o.filter(f=>{var m,y,E,w,q,A;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in f){let x=f.id,te=(m=f.filter)===null||m===void 0?void 0:m.event;return x&&((y=e.ids)===null||y===void 0?void 0:y.includes(x))&&(te==="*"||te?.toLocaleLowerCase()===((E=e.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{let x=(q=(w=f?.filter)===null||w===void 0?void 0:w.event)===null||q===void 0?void 0:q.toLocaleLowerCase();return x==="*"||x===((A=e?.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===s}).map(f=>{if(typeof h=="object"&&"ids"in h){let m=h.data,{schema:y,table:E,commit_timestamp:w,type:q,errors:A}=m;h=Object.assign(Object.assign({},{schema:y,table:E,commit_timestamp:w,eventType:q,new:{},old:{},errors:A}),this._getPayloadRecords(m))}f.callback(h,r)})}_isClosed(){return this.state===Oe.closed}_isJoined(){return this.state===Oe.joined}_isJoining(){return this.state===Oe.joining}_isLeaving(){return this.state===Oe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){let i=t.toLocaleLowerCase(),o={type:i,filter:e,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,e){let r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&n.isEqual(i.filter,e))})),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(St.close,{},t)}_onError(t){this._on(St.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Oe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=Fp(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=Fp(t.columns,t.old_record)),e}};var Lp=()=>{},Al={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},iA=[1e3,2e3,5e3,1e4],oA=1e4,sA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,js=class{constructor(t,e){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ps,this.transport=null,this.heartbeatIntervalMs=Al.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Lp,this.ref=0,this.reconnectTimer=null,this.vsn=Rp,this.logger=Lp,this.conn=null,this.sendBuffer=[],this.serializer=new Ml,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=e?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${t}/${Pp.websocket}`,this.httpEndpoint=Tl(t),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Op.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let e=t.message;throw e.includes("Node.js")?new Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,e??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){let e=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),e}async removeAllChannels(){let t=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case kr.connecting:return Fr.Connecting;case kr.open:return Fr.Open;case kr.closing:return Fr.Closing;default:return Fr.Closed}}isConnected(){return this.connectionState()===Fr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,e={config:{}}){let r=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{let o=new Ls(`realtime:${t}`,e,this);return this.channels.push(o),o}}push(t){let{topic:e,event:r,payload:i,ref:o}=t,s=()=>{this.encode(t,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${e} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(a0,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout()},Al.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,e=>{if(e.topic==="phoenix"&&e.event==="phx_reply")try{this.heartbeatCallback(e.payload.status==="ok"?"ok":"error")}catch(l){this.log("error","error in heartbeat callback",l)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:r,event:i,payload:o,ref:s}=e,a=s?`(${s})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${i} ${a}`.trim(),o),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(i,o,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(t){var e;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((e=this.reconnectTimer)===null||e===void 0||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===kr.open||this.conn.readyState===kr.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var e;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(St.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;let r=t.match(/\?/)?"&":"?",i=new URLSearchParams(e);return`${t}${r}${i}`}_workerObjectUrl(t){let e;if(t)e=t;else{let r=new Blob([sA],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}_setConnectionState(t,e=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=e)}async _performAuth(t=null){let e;t?e=t:this.accessToken?e=await this.accessToken():e=this.accessTokenValue,this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(r=>{let i={access_token:e,version:o0};e&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(St.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(e=>{this.log("error",`error setting auth in ${t}`,e)})}_triggerStateCallbacks(t,e){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(e)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new zi(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Al.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var e,r,i,o,s,a,c,l,u,d,h,f;switch(this.transport=(e=t?.transport)!==null&&e!==void 0?e:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:Ps,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:Al.HEARTBEAT_INTERVAL,this.worker=(o=t?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(s=t?.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(a=t?.heartbeatCallback)!==null&&a!==void 0?a:Lp,this.vsn=(c=t?.vsn)!==null&&c!==void 0?c:Rp,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t?.reconnectAfterMs)!==null&&l!==void 0?l:m=>iA[m-1]||oA,this.vsn){case Np:this.encode=(u=t?.encode)!==null&&u!==void 0?u:(m,y)=>y(JSON.stringify(m)),this.decode=(d=t?.decode)!==null&&d!==void 0?d:(m,y)=>y(JSON.parse(m));break;case s0:this.encode=(h=t?.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(f=t?.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};me();var Hn=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function ce(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var Ol=class extends Hn{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Lr=class extends Hn{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};me();var Gi=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),u0=()=>Response,Nl=n=>{if(Array.isArray(n))return n.map(e=>Nl(e));if(typeof n=="function"||n!==Object(n))return n;let t={};return Object.entries(n).forEach(([e,r])=>{let i=e.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=Nl(r)}),t},d0=n=>{if(typeof n!="object"||n===null)return!1;let t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},f0=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);var jp=n=>{var t;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(t=n.error)===null||t===void 0?void 0:t.message)||JSON.stringify(n)},aA=(n,t,e)=>S(void 0,void 0,void 0,function*(){let r=yield u0();n instanceof r&&!e?.noResolveJson?n.json().then(i=>{let o=n.status||500,s=i?.statusCode||o+"";t(new Ol(jp(i),o,s))}).catch(i=>{t(new Lr(jp(i),i))}):t(new Lr(jp(n),n))}),cA=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"||!r?i:(d0(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),e))};function Vs(n,t,e,r,i,o){return S(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(e,cA(t,r,i,o)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>aA(c,a,r))})})}function zn(n,t,e,r){return S(this,void 0,void 0,function*(){return Vs(n,"GET",t,e,r)})}function at(n,t,e,r,i){return S(this,void 0,void 0,function*(){return Vs(n,"POST",t,r,i,e)})}function Us(n,t,e,r,i){return S(this,void 0,void 0,function*(){return Vs(n,"PUT",t,r,i,e)})}function h0(n,t,e,r){return S(this,void 0,void 0,function*(){return Vs(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}function Wi(n,t,e,r,i){return S(this,void 0,void 0,function*(){return Vs(n,"DELETE",t,r,i,e)})}me();me();var Rl=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}execute(){return S(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ce(t))return{data:null,error:t};throw t}})}};var p0,Vp=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[p0]="BlobDownloadBuilder",this.promise=null}asStream(){return new Rl(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return S(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ce(t))return{data:null,error:t};throw t}})}};p0=Symbol.toStringTag;var g0=Vp;var lA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},m0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},Pl=class{constructor(t,e={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=Gi(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,e,r,i){return S(this,void 0,void 0,function*(){try{let o,s=Object.assign(Object.assign({},m0),i),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)}),c=s.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.has("cacheControl")||o.append("cacheControl",s.cacheControl),c&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(c))):(o=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!s.duplex&&(s.duplex="half")),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));let l=this._removeEmptyFolders(e),u=this._getFinalPath(l),d=yield(t=="PUT"?Us:at)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ce(o))return{data:null,error:o};throw o}})}upload(t,e,r){return S(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,i){return S(this,void 0,void 0,function*(){let o=this._removeEmptyFolders(t),s=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",e);try{let c,l=Object.assign({upsert:m0.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);let d=yield Us(this.fetch,a.toString(),c,{headers:u});return{data:{path:o,fullPath:d.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(ce(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,e){return S(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),i=Object.assign({},this.headers);e?.upsert&&(i["x-upsert"]="true");let o=yield at(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+o.url),a=s.searchParams.get("token");if(!a)throw new Hn("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r))return{data:null,error:r};throw r}})}update(t,e,r){return S(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e,r){return S(this,void 0,void 0,function*(){try{return{data:yield at(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ce(i))return{data:null,error:i};throw i}})}copy(t,e,r){return S(this,void 0,void 0,function*(){try{return{data:{path:(yield at(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ce(i))return{data:null,error:i};throw i}})}createSignedUrl(t,e,r){return S(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield at(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ce(i))return{data:null,error:i};throw i}})}createSignedUrls(t,e,r){return S(this,void 0,void 0,function*(){try{let i=yield at(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ce(i))return{data:null,error:i};throw i}})}download(t,e){let i=typeof e?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(e?.transform||{}),s=o?`?${o}`:"",a=this._getFinalPath(t),c=()=>zn(this.fetch,`${this.url}/${i}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new g0(c,this.shouldThrowOnError)}info(t){return S(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{let r=yield zn(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:Nl(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r))return{data:null,error:r};throw r}})}exists(t){return S(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{return yield h0(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r)&&r instanceof Lr){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,e){let r=this._getFinalPath(t),i=[],o=e?.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&i.push(o);let a=typeof e?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(e?.transform||{});c!==""&&i.push(c);let l=i.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(t){return S(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ce(e))return{data:null,error:e};throw e}})}list(t,e,r){return S(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},lA),e),{prefix:t||""});return{data:yield at(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ce(i))return{data:null,error:i};throw i}})}listV2(t,e){return S(this,void 0,void 0,function*(){try{let r=Object.assign({},t);return{data:yield at(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};me();var kl="2.86.0";var Fl={"X-Client-Info":`storage-js/${kl}`};var Ll=class{constructor(t,e={},r,i){this.shouldThrowOnError=!1;let o=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Fl),e),this.fetch=Gi(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return S(this,void 0,void 0,function*(){try{let e=this.listBucketOptionsToQueryString(t);return{data:yield zn(this.fetch,`${this.url}/bucket${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ce(e))return{data:null,error:e};throw e}})}getBucket(t){return S(this,void 0,void 0,function*(){try{return{data:yield zn(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ce(e))return{data:null,error:e};throw e}})}createBucket(t){return S(this,arguments,void 0,function*(e,r={public:!1}){try{return{data:yield at(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ce(i))return{data:null,error:i};throw i}})}updateBucket(t,e){return S(this,void 0,void 0,function*(){try{return{data:yield Us(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r))return{data:null,error:r};throw r}})}emptyBucket(t){return S(this,void 0,void 0,function*(){try{return{data:yield at(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ce(e))return{data:null,error:e};throw e}})}deleteBucket(t){return S(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ce(e))return{data:null,error:e};throw e}})}listBucketOptionsToQueryString(t){let e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}};me();var $s=class extends Error{constructor(n,t){super(n),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function uA(n,t,e){let r=new URL(t,n);if(e)for(let[i,o]of Object.entries(e))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function dA(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function fA(n){let t=n.fetchImpl??globalThis.fetch;return{async request({method:e,path:r,query:i,body:o,headers:s}){let a=uA(n.baseUrl,r,i),c=await dA(n.auth),l=await t(a,{method:e,headers:D(D(D({},o?{"Content-Type":"application/json"}:{}),c),s),body:o?JSON.stringify(o):void 0}),u=await l.text(),d=(l.headers.get("content-type")||"").includes("application/json"),h=d&&u?JSON.parse(u):u;if(!l.ok){let f=d?h:void 0,m=f?.error;throw new $s(m?.message??`Request failed with status ${l.status}`,{status:l.status,icebergType:m?.type,icebergCode:m?.code,details:f})}return{status:l.status,headers:l.headers,data:h}}}}function jl(n){return n.join("")}var hA=class{constructor(n,t=""){this.client=n,this.prefix=t}async listNamespaces(n){let t=n?{parent:jl(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(n,t){let e={namespace:n.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:e})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${jl(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${jl(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${jl(n.namespace)}`}),!0}catch(t){if(t instanceof $s&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(n,t){try{return await this.createNamespace(n,t)}catch(e){if(e instanceof $s&&e.status===409)return;throw e}}};function Ki(n){return n.join("")}var pA=class{constructor(n,t="",e){this.client=n,this.prefix=t,this.accessDelegation=e}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ki(n.namespace)}/tables`})).data.identifiers}async createTable(n,t){let e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ki(n.namespace)}/tables`,body:t,headers:e})).data.metadata}async updateTable(n,t){let e=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ki(n.namespace)}/tables/${n.name}`,body:t});return{"metadata-location":e.data["metadata-location"],metadata:e.data.metadata}}async dropTable(n,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ki(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(n){let t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ki(n.namespace)}/tables/${n.name}`,headers:t})).data.metadata}async tableExists(n){let t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ki(n.namespace)}/tables/${n.name}`,headers:t}),!0}catch(e){if(e instanceof $s&&e.status===404)return!1;throw e}}async createTableIfNotExists(n,t){try{return await this.createTable(n,t)}catch(e){if(e instanceof $s&&e.status===409)return await this.loadTable({namespace:n.namespace,name:t.name});throw e}}},v0=class{constructor(n){let t="v1";n.catalogName&&(t+=`/${n.catalogName}`);let e=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=fA({baseUrl:e,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=n.accessDelegation?.join(","),this.namespaceOps=new hA(this.client,t),this.tableOps=new pA(this.client,t,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,t){return this.namespaceOps.createNamespace(n,t)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,t){return this.tableOps.createTable(n,t)}async updateTable(n,t){return this.tableOps.updateTable(n,t)}async dropTable(n,t){await this.tableOps.dropTable(n,t)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,t){return this.namespaceOps.createNamespaceIfNotExists(n,t)}async createTableIfNotExists(n,t){return this.tableOps.createTableIfNotExists(n,t)}};var Vl=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Fl),e),this.fetch=Gi(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return S(this,void 0,void 0,function*(){try{return{data:yield at(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ce(e))return{data:null,error:e};throw e}})}listBuckets(t){return S(this,void 0,void 0,function*(){try{let e=new URLSearchParams;t?.limit!==void 0&&e.set("limit",t.limit.toString()),t?.offset!==void 0&&e.set("offset",t.offset.toString()),t?.sortColumn&&e.set("sortColumn",t.sortColumn),t?.sortOrder&&e.set("sortOrder",t.sortOrder),t?.search&&e.set("search",t.search);let r=e.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield zn(this.fetch,i,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ce(e))return{data:null,error:e};throw e}})}deleteBucket(t){return S(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ce(e))return{data:null,error:e};throw e}})}from(t){if(!f0(t))throw new Hn("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new v0({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>S(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}};me();me();var Yi={"X-Client-Info":`storage-js/${kl}`,"Content-Type":"application/json"};var Ul=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Ke(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var Zi=class extends Ul{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},$l=class extends Ul{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};me();var Qi=n=>n?(...t)=>n(...t):(...t)=>fetch(...t);var y0=n=>{if(typeof n!="object"||n===null)return!1;let t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var _0=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),gA=(n,t,e)=>S(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!e?.noResolveJson){let i=n.status||500,o=n;if(typeof o.json=="function")o.json().then(s=>{let a=s?.statusCode||s?.code||i+"";t(new Zi(_0(s),i,a))}).catch(()=>{let s=i+"",a=o.statusText||`HTTP ${i} error`;t(new Zi(a,i,s))});else{let s=i+"",a=o.statusText||`HTTP ${i} error`;t(new Zi(a,i,s))}}else t(new $l(_0(n),n))}),mA=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"||!r?i:(y0(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),e))};function vA(n,t,e,r,i,o){return S(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(e,mA(t,r,i,o)).then(c=>{if(!c.ok)throw c;if(r?.noResolveJson)return c;let l=c.headers.get("content-type");return!l||!l.includes("application/json")?{}:c.json()}).then(c=>s(c)).catch(c=>gA(c,a,r))})})}function Ye(n,t,e,r,i){return S(this,void 0,void 0,function*(){return vA(n,"POST",t,r,i,e)})}var Bl=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yi),e),this.fetch=Qi(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return S(this,void 0,void 0,function*(){try{return{data:(yield Ye(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ke(e))return{data:null,error:e};throw e}})}getIndex(t,e){return S(this,void 0,void 0,function*(){try{return{data:yield Ye(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}listIndexes(t){return S(this,void 0,void 0,function*(){try{return{data:yield Ye(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ke(e))return{data:null,error:e};throw e}})}deleteIndex(t,e){return S(this,void 0,void 0,function*(){try{return{data:(yield Ye(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}})}};me();var Hl=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yi),e),this.fetch=Qi(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return S(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ye(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ke(e))return{data:null,error:e};throw e}})}getVectors(t){return S(this,void 0,void 0,function*(){try{return{data:yield Ye(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ke(e))return{data:null,error:e};throw e}})}listVectors(t){return S(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Ye(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ke(e))return{data:null,error:e};throw e}})}queryVectors(t){return S(this,void 0,void 0,function*(){try{return{data:yield Ye(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ke(e))return{data:null,error:e};throw e}})}deleteVectors(t){return S(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ye(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ke(e))return{data:null,error:e};throw e}})}};me();var zl=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yi),e),this.fetch=Qi(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return S(this,void 0,void 0,function*(){try{return{data:(yield Ye(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ke(e))return{data:null,error:e};throw e}})}getBucket(t){return S(this,void 0,void 0,function*(){try{return{data:yield Ye(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ke(e))return{data:null,error:e};throw e}})}listBuckets(){return S(this,arguments,void 0,function*(t={}){try{return{data:yield Ye(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ke(e))return{data:null,error:e};throw e}})}deleteBucket(t){return S(this,void 0,void 0,function*(){try{return{data:(yield Ye(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ke(e))return{data:null,error:e};throw e}})}};var Bs=class extends zl{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new ql(this.url,this.headers,t,this.fetch)}createBucket(t){let e=Object.create(null,{createBucket:{get:()=>super.createBucket}});return S(this,void 0,void 0,function*(){return e.createBucket.call(this,t)})}getBucket(t){let e=Object.create(null,{getBucket:{get:()=>super.getBucket}});return S(this,void 0,void 0,function*(){return e.getBucket.call(this,t)})}listBuckets(){let t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return S(this,arguments,void 0,function*(e={}){return t.listBuckets.call(this,e)})}deleteBucket(t){let e=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return S(this,void 0,void 0,function*(){return e.deleteBucket.call(this,t)})}},ql=class extends Bl{constructor(t,e,r,i){super(t,e,i),this.vectorBucketName=r}createIndex(t){let e=Object.create(null,{createIndex:{get:()=>super.createIndex}});return S(this,void 0,void 0,function*(){return e.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){let t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return S(this,arguments,void 0,function*(e={}){return t.listIndexes.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){let e=Object.create(null,{getIndex:{get:()=>super.getIndex}});return S(this,void 0,void 0,function*(){return e.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){let e=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return S(this,void 0,void 0,function*(){return e.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new Gl(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},Gl=class extends Hl{constructor(t,e,r,i,o){super(t,e,o),this.vectorBucketName=r,this.indexName=i}putVectors(t){let e=Object.create(null,{putVectors:{get:()=>super.putVectors}});return S(this,void 0,void 0,function*(){return e.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){let e=Object.create(null,{getVectors:{get:()=>super.getVectors}});return S(this,void 0,void 0,function*(){return e.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){let t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return S(this,arguments,void 0,function*(e={}){return t.listVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){let e=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return S(this,void 0,void 0,function*(){return e.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){let e=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return S(this,void 0,void 0,function*(){return e.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}};var Hs=class extends Ll{constructor(t,e={},r,i){super(t,e,r,i)}from(t){return new Pl(this.url,this.headers,t,this.fetch)}get vectors(){return new Bs(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Vl(this.url+"/iceberg",this.headers,this.fetch)}};var b0="2.86.0";var zs="";typeof Deno<"u"?zs="deno":typeof document<"u"?zs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zs="react-native":zs="node";var yA={"X-Client-Info":`supabase-js-${zs}/${b0}`},w0={headers:yA},C0={schema:"public"},E0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},D0={};var _A=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),bA=()=>Headers,S0=(n,t,e)=>{let r=_A(e),i=bA();return async(o,s)=>{var a;let c=(a=await t())!==null&&a!==void 0?a:n,l=new i(s?.headers);return l.has("apikey")||l.set("apikey",n),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},s),{headers:l}))}};function wA(n){return n.endsWith("/")?n:n+"/"}function I0(n,t){var e,r;let{db:i,auth:o,realtime:s,global:a}=n,{db:c,auth:l,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},l),o),realtime:Object.assign(Object.assign({},u),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(e=d?.headers)!==null&&e!==void 0?e:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?h.accessToken=n.accessToken:delete h.accessToken,h}function x0(n){let t=n?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(wA(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}me();me();var Wl="2.86.0";var jr=30*1e3,Kl=3,Yl=Kl*jr,M0="http://localhost:9999",T0="supabase.auth.token";var A0={"X-Client-Info":`gotrue-js/${Wl}`};var qs="X-Supabase-Api-Version",Up={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},O0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,N0=600*1e3;var qn=class extends Error{constructor(t,e,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=r}};function T(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var Zl=class extends qn{constructor(t,e,r){super(t,e,r),this.name="AuthApiError",this.status=e,this.code=r}};function R0(n){return T(n)&&n.name==="AuthApiError"}var It=class extends qn{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},rn=class extends qn{constructor(t,e,r,i){super(t,r,i),this.name=e,this.status=r}},Ue=class extends rn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function P0(n){return T(n)&&n.name==="AuthSessionMissingError"}var bn=class extends rn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Vr=class extends rn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},Ur=class extends rn{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function k0(n){return T(n)&&n.name==="AuthImplicitGrantRedirectError"}var Gs=class extends rn{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Ji=class extends rn{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}};function Ql(n){return T(n)&&n.name==="AuthRetryableFetchError"}var Ws=class extends rn{constructor(t,e,r){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=r}};var $r=class extends rn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};var Jl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),F0=` 	
\r=`.split(""),CA=(()=>{let n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<F0.length;t+=1)n[F0[t].charCodeAt(0)]=-2;for(let t=0;t<Jl.length;t+=1)n[Jl[t].charCodeAt(0)]=t;return n})();function L0(n,t,e){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;e(Jl[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;e(Jl[r]),t.queuedBits-=6}}function j0(n,t,e){let r=CA[n];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function $p(n){let t=[],e=s=>{t.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=s=>{SA(s,r,e)};for(let s=0;s<n.length;s+=1)j0(n.charCodeAt(s),i,o);return t.join("")}function EA(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function DA(n,t){for(let e=0;e<n.length;e+=1){let r=n.charCodeAt(e);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(n.charCodeAt(e+1)-56320&65535|i)+65536,e+=1}EA(r,t)}}function SA(n,t,e){if(t.utf8seq===0){if(n<=127){e(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&e(t.codepoint)}}function Gn(n){let t=[],e={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<n.length;i+=1)j0(n.charCodeAt(i),e,r);return new Uint8Array(t)}function V0(n){let t=[];return DA(n,e=>t.push(e)),new Uint8Array(t)}function wn(n){let t=[],e={queue:0,queuedBits:0},r=i=>{t.push(i)};return n.forEach(i=>L0(i,e,r)),L0(null,e,r),t.join("")}function U0(n){return Math.round(Date.now()/1e3)+n}function $0(){return Symbol("auth-callback")}var Ne=()=>typeof window<"u"&&typeof document<"u",Br={tested:!1,writable:!1},Xl=()=>{if(!Ne())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Br.tested)return Br.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Br.tested=!0,Br.writable=!0}catch{Br.tested=!0,Br.writable=!1}return Br.writable};function B0(n){let t={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return e.searchParams.forEach((r,i)=>{t[i]=r}),t}var eu=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),H0=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Hr=async(n,t,e)=>{await n.setItem(t,JSON.stringify(e))},Wn=async(n,t)=>{let e=await n.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}},Cn=async(n,t)=>{await n.removeItem(t)},Ks=class n{constructor(){this.promise=new n.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}};Ks.promiseConstructor=Promise;function tu(n){let t=n.split(".");if(t.length!==3)throw new $r("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!O0.test(t[r]))throw new $r("JWT not in base64url format");return{header:JSON.parse($p(t[0])),payload:JSON.parse($p(t[1])),signature:Gn(t[2]),raw:{header:t[0],payload:t[1]}}}async function z0(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function q0(n,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{let s=await n(o);if(!t(o,null,s)){r(s);return}}catch(s){if(!t(o,s)){i(s);return}}})()})}function IA(n){return("0"+n.toString(16)).substr(-2)}function xA(){let t=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length,i="";for(let o=0;o<56;o++)i+=e.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,IA).join("")}async function MA(n){let e=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",e),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function TA(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let e=await MA(n);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zr(n,t,e=!1){let r=xA(),i=r;e&&(i+="/PASSWORD_RECOVERY"),await Hr(n,`${t}-code-verifier`,i);let o=await TA(r);return[o,r===o?"plain":"s256"]}var AA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function G0(n){let t=n.headers.get(qs);if(!t||!t.match(AA))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function W0(n){if(!n)throw new Error("Missing exp claim");let t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function K0(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var OA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qr(n){if(!OA.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function nu(){let n={};return new Proxy(n,{get:(t,e)=>{if(e==="__isUserNotAvailableProxy")return!0;if(typeof e=="symbol"){let r=e.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Y0(n,t){return new Proxy(n,{get:(e,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){let o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(e,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(e,r,i)}})}function Bp(n){return JSON.parse(JSON.stringify(n))}var Gr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),NA=[502,503,504];async function Z0(n){var t;if(!H0(n))throw new Ji(Gr(n),0);if(NA.includes(n.status))throw new Ji(Gr(n),n.status);let e;try{e=await n.json()}catch(o){throw new It(Gr(o),o)}let r,i=G0(n);if(i&&i.getTime()>=Up["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?r=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(r=e.error_code),r){if(r==="weak_password")throw new Ws(Gr(e),n.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ue}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new Ws(Gr(e),n.status,e.weak_password.reasons);throw new Zl(Gr(e),n.status||500,r)}var RA=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),e))};async function k(n,t,e,r){var i;let o=Object.assign({},r?.headers);o[qs]||(o[qs]=Up["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);let s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await PA(n,t,e+a,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}async function PA(n,t,e,r,i,o){let s=RA(t,r,i,o),a;try{a=await n(e,Object.assign({},s))}catch(c){throw console.error(c),new Ji(Gr(c),0)}if(a.ok||await Z0(a),r?.noResolveJson)return a;try{return await a.json()}catch(c){await Z0(c)}}function xt(n){var t;let e=null;kA(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=U0(n.expires_in)));let r=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:e,user:r},error:null}}function Hp(n){let t=xt(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)&&(t.data.weak_password=n.weak_password),t}function on(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function Q0(n){return{data:n,error:null}}function J0(n){let{action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:o}=n,s=cn(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},s);return{data:{properties:a,user:c},error:null}}function zp(n){return n}function kA(n){return n.access_token&&n.refresh_token&&n.expires_in}var ru=["global","local","others"];var Xi=class{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=eu(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,e=ru[0]){if(ru.indexOf(e)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ru.join(", ")}`);try{return await k(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(T(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,e={}){try{return await k(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:on})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{let{options:e}=t,r=cn(t,["options"]),i=Object.assign(Object.assign({},r),e);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await k(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:J0,redirectTo:e?.redirectTo})}catch(e){if(T(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(t){try{return await k(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:on})}catch(e){if(T(e))return{data:{user:null},error:e};throw e}}async listUsers(t){var e,r,i,o,s,a,c;try{let l={nextPage:null,lastPage:0,total:0},u=await k(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:zp});if(u.error)throw u.error;let d=await u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(m=>{let y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(m.split(";")[1].split("=")[1]);l[`${E}Page`]=y}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(T(l))return{data:{users:[]},error:l};throw l}}async getUserById(t){qr(t);try{return await k(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:on})}catch(e){if(T(e))return{data:{user:null},error:e};throw e}}async updateUserById(t,e){qr(t);try{return await k(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:on})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,e=!1){qr(t);try{return await k(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:on})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){qr(t.userId);try{let{data:e,error:r}=await k(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:e,error:r}}catch(e){if(T(e))return{data:null,error:e};throw e}}async _deleteFactor(t){qr(t.userId),qr(t.id);try{return{data:await k(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(T(e))return{data:null,error:e};throw e}}async _listOAuthClients(t){var e,r,i,o,s,a,c;try{let l={nextPage:null,lastPage:0,total:0},u=await k(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:zp});if(u.error)throw u.error;let d=await u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(m=>{let y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(m.split(";")[1].split("=")[1]);l[`${E}Page`]=y}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(T(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(t){try{return await k(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(T(e))return{data:null,error:e};throw e}}async _getOAuthClient(t){try{return await k(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(T(e))return{data:null,error:e};throw e}}async _updateOAuthClient(t,e){try{return await k(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(T(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await k(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(e){if(T(e))return{data:null,error:e};throw e}}async _regenerateOAuthClientSecret(t){try{return await k(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(T(e))return{data:null,error:e};throw e}}};function qp(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}var Wr={debug:!!(globalThis&&Xl()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Ys=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}},iu=class extends Ys{};async function Gp(n,t,e){Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);let r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await e()}finally{Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(t===0)throw Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new iu(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Wr.debug)try{let o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await e()}}))}function X0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Wp(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function ew(n){return parseInt(n,16)}function tw(n){let t=new TextEncoder().encode(n);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function nw(n){var t;let{chainId:e,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:s,notBefore:a,requestId:c,resources:l,scheme:u,uri:d,version:h}=n;{if(!Number.isInteger(e))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${e}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=n.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}let f=Wp(n.address),m=u?`${u}://${r}`:r,y=n.statement?`${n.statement}
`:"",E=`${m} wants you to sign in with your Ethereum account:
${f}

${y}`,w=`URI: ${d}
Version: ${h}
Chain ID: ${e}${s?`
Nonce: ${s}`:""}
Issued At: ${o.toISOString()}`;if(i&&(w+=`
Expiration Time: ${i.toISOString()}`),a&&(w+=`
Not Before: ${a.toISOString()}`),c&&(w+=`
Request ID: ${c}`),l){let q=`
Resources:`;for(let A of l){if(!A||typeof A!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);q+=`
- ${A}`}w+=q}return`${E}
${w}`}me();var ye=class extends Error{constructor({message:t,code:e,cause:r,name:i}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=e}},Kr=class extends ye{constructor(t,e){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e,message:t}),this.name="WebAuthnUnknownError",this.originalError=e}};function rw({error:n,options:t}){var e,r,i;let{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ye({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((e=o.authenticatorSelection)===null||e===void 0?void 0:e.requireResidentKey)===!0)return new ye({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ye({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ye({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new ye({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new ye({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return o.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ye({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new ye({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){let s=window.location.hostname;if(Kp(s)){if(o.rp.id!==s)return new ye({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new ye({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new ye({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new ye({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new ye({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function iw({error:n,options:t}){let{publicKey:e}=t;if(!e)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ye({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new ye({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){let r=window.location.hostname;if(Kp(r)){if(e.rpId!==r)return new ye({message:`The RP ID "${e.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new ye({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new ye({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new ye({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}var Yp=class{createNewAbortSignal(){if(this.controller){let e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}let t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){let t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}},FA=new Yp;function sw(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);let{challenge:t,user:e,excludeCredentials:r}=n,i=cn(n,["challenge","user","excludeCredentials"]),o=Gn(t).buffer,s=Object.assign(Object.assign({},e),{id:Gn(e.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:o,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){let l=r[c];a.excludeCredentials[c]=Object.assign(Object.assign({},l),{id:Gn(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function aw(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);let{challenge:t,allowCredentials:e}=n,r=cn(n,["challenge","allowCredentials"]),i=Gn(t).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(e&&e.length>0){o.allowCredentials=new Array(e.length);for(let s=0;s<e.length;s++){let a=e[s];o.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Gn(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return o}function cw(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();let e=n;return{id:n.id,rawId:n.id,response:{attestationObject:wn(new Uint8Array(n.response.attestationObject)),clientDataJSON:wn(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function lw(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();let e=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:wn(new Uint8Array(i.authenticatorData)),clientDataJSON:wn(new Uint8Array(i.clientDataJSON)),signature:wn(new Uint8Array(i.signature)),userHandle:i.userHandle?wn(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Kp(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function ow(){var n,t;return!!(Ne()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function LA(n){try{let t=await navigator.credentials.create(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Kr("Browser returned unexpected credential type",t)}:{data:null,error:new Kr("Empty credential response",t)}}catch(t){return{data:null,error:rw({error:t,options:n})}}}async function jA(n){try{let t=await navigator.credentials.get(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Kr("Browser returned unexpected credential type",t)}:{data:null,error:new Kr("Empty credential response",t)}}catch(t){return{data:null,error:iw({error:t,options:n})}}}var VA={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},UA={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ou(...n){let t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),e=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(let i of n)if(i)for(let o in i){let s=i[o];if(s!==void 0)if(Array.isArray(s))r[o]=s;else if(e(s))r[o]=s;else if(t(s)){let a=r[o];t(a)?r[o]=ou(a,s):r[o]=ou(s)}else r[o]=s}return r}function $A(n,t){return ou(VA,n,t||{})}function BA(n,t){return ou(UA,n,t||{})}var su=class{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:e,friendlyName:r,signal:i},o){try{let{data:s,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:e});if(!s)return{data:null,error:a};let c=i??FA.createNewAbortSignal();if(s.webauthn.type==="create"){let{user:l}=s.webauthn.credential_options.publicKey;l.name||(l.name=`${l.id}:${r}`),l.displayName||(l.displayName=l.name)}switch(s.webauthn.type){case"create":{let l=$A(s.webauthn.credential_options.publicKey,o?.create),{data:u,error:d}=await LA({publicKey:l,signal:c});return u?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}case"request":{let l=BA(s.webauthn.credential_options.publicKey,o?.request),{data:u,error:d}=await jA(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:l,signal:c}));return u?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}}}catch(s){return T(s)?{data:null,error:s}:{data:null,error:new It("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:e,webauthn:r}){return this.client.mfa.verify({factorId:e,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!e)return{data:null,error:new qn("rpId is required for WebAuthn authentication")};try{if(!ow())return{data:null,error:new It("Browser does not support WebAuthn",null)};let{data:s,error:a}=await this.challenge({factorId:t,webauthn:{rpId:e,rpOrigins:r},signal:i},{request:o});if(!s)return{data:null,error:a};let{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:e,rpOrigins:r,credential_response:c.credential_response}})}catch(s){return T(s)?{data:null,error:s}:{data:null,error:new It("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!e)return{data:null,error:new qn("rpId is required for WebAuthn registration")};try{if(!ow())return{data:null,error:new It("Browser does not support WebAuthn",null)};let{data:s,error:a}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:a};let{data:c,error:l}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:e,rpOrigins:r},signal:i},{create:o});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:e,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:l}}catch(s){return T(s)?{data:null,error:s}:{data:null,error:new It("Unexpected error in register",s)}}}};X0();var HA={url:M0,storageKey:T0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:A0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function uw(n,t,e){return await e()}var eo={},zA=(()=>{class n{get jwks(){var e,r;return(r=(e=eo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){eo[this.storageKey]=Object.assign(Object.assign({},eo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=eo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){eo[this.storageKey]=Object.assign(Object.assign({},eo[this.storageKey]),{cachedAt:e})}constructor(e){var r,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;let s=Object.assign(Object.assign({},HA),e);if(this.storageKey=s.storageKey,this.instanceID=(r=n.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,n.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Ne()){let a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Xi({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=eu(s.fetch),this.lock=s.lock||uw,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:Ne()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=Gp:this.lock=uw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new su(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Xl()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=qp(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=qp(this.memoryStorage)),Ne()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Wl}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},i="none";if(Ne()&&(r=B0(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),Ne()&&this.detectSessionInUrl&&i!=="none"){let{data:o,error:s}=await this._getSessionFromURL(r,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),k0(s)){let l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}let{session:a,redirectType:c}=o;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),await this._saveSession(a),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return T(r)?this._returnResult({error:r}):this._returnResult({error:new It("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,i,o;try{let s=await k(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:xt}),{data:a,error:c}=s;if(c||!a)return this._returnResult({data:{user:null,session:null},error:c});let l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(T(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var r,i,o;try{let s;if("email"in e){let{email:d,password:h,options:f}=e,m=null,y=null;this.flowType==="pkce"&&([m,y]=await zr(this.storage,this.storageKey)),s=await k(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:h,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:m,code_challenge_method:y},xform:xt})}else if("phone"in e){let{phone:d,password:h,options:f}=e;s=await k(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(i=f?.data)!==null&&i!==void 0?i:{},channel:(o=f?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:xt})}else throw new Vr("You must provide either an email or phone number and a password");let{data:a,error:c}=s;if(c||!a)return this._returnResult({data:{user:null,session:null},error:c});let l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(T(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let r;if("email"in e){let{email:s,password:a,options:c}=e;r=await k(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Hp})}else if("phone"in e){let{phone:s,password:a,options:c}=e;r=await k(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Hp})}else throw new Vr("You must provide either an email or phone number and a password");let{data:i,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){let s=new bn;return this._returnResult({data:{user:null,session:null},error:s})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(T(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,i,o,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){let{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,i,o,s,a,c,l,u,d,h,f;let m,y;if("message"in e)m=e.message,y=e.signature;else{let{chain:E,wallet:w,statement:q,options:A}=e,x;if(Ne())if(typeof w=="object")x=w;else{let an=window;if("ethereum"in an&&typeof an.ethereum=="object"&&"request"in an.ethereum&&typeof an.ethereum.request=="function")x=an.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=w}let te=new URL((r=A?.url)!==null&&r!==void 0?r:window.location.href),zt=await x.request({method:"eth_requestAccounts"}).then(an=>an).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!zt||zt.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let ue=Wp(zt[0]),ge=(i=A?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!ge){let an=await x.request({method:"eth_chainId"});ge=ew(an)}let Gw={domain:te.host,address:ue,statement:q,uri:te.href,version:"1",chainId:ge,nonce:(o=A?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(a=(s=A?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(c=A?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(l=A?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=A?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=A?.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=nw(Gw),y=await x.request({method:"personal_sign",params:[tw(m),ue]})}try{let{data:E,error:w}=await k(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:y},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:xt});if(w)throw w;if(!E||!E.session||!E.user){let q=new bn;return this._returnResult({data:{user:null,session:null},error:q})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:w})}catch(E){if(T(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async signInWithSolana(e){var r,i,o,s,a,c,l,u,d,h,f,m;let y,E;if("message"in e)y=e.message,E=e.signature;else{let{chain:w,wallet:q,statement:A,options:x}=e,te;if(Ne())if(typeof q=="object")te=q;else{let ue=window;if("solana"in ue&&typeof ue.solana=="object"&&("signIn"in ue.solana&&typeof ue.solana.signIn=="function"||"signMessage"in ue.solana&&typeof ue.solana.signMessage=="function"))te=ue.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof q!="object"||!x?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");te=q}let zt=new URL((r=x?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in te&&te.signIn){let ue=await te.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x?.signInWithSolana),{version:"1",domain:zt.host,uri:zt.href}),A?{statement:A}:null)),ge;if(Array.isArray(ue)&&ue[0]&&typeof ue[0]=="object")ge=ue[0];else if(ue&&typeof ue=="object"&&"signedMessage"in ue&&"signature"in ue)ge=ue;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ge&&"signature"in ge&&(typeof ge.signedMessage=="string"||ge.signedMessage instanceof Uint8Array)&&ge.signature instanceof Uint8Array)y=typeof ge.signedMessage=="string"?ge.signedMessage:new TextDecoder().decode(ge.signedMessage),E=ge.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in te)||typeof te.signMessage!="function"||!("publicKey"in te)||typeof te!="object"||!te.publicKey||!("toBase58"in te.publicKey)||typeof te.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${zt.host} wants you to sign in with your Solana account:`,te.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${zt.href}`,`Issued At: ${(o=(i=x?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=x?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((a=x?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((c=x?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((l=x?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((h=(d=x?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...x.signInWithSolana.resources.map(ge=>`- ${ge}`)]:[]].join(`
`);let ue=await te.signMessage(new TextEncoder().encode(y),"utf8");if(!ue||!(ue instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=ue}}try{let{data:w,error:q}=await k(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:wn(E)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:xt});if(q)throw q;if(!w||!w.session||!w.user){let A=new bn;return this._returnResult({data:{user:null,session:null},error:A})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:q})}catch(w){if(T(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){let r=await Wn(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{let{data:s,error:a}=await k(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:xt});if(await Cn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){let c=new bn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:a})}catch(s){if(T(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{let{options:r,provider:i,token:o,access_token:s,nonce:a}=e,c=await k(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:xt}),{data:l,error:u}=c;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){let d=new bn;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if(T(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,i,o,s,a;try{if("email"in e){let{email:c,options:l}=e,u=null,d=null;this.flowType==="pkce"&&([u,d]=await zr(this.storage,this.storageKey));let{error:h}=await k(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){let{phone:c,options:l}=e,{data:u,error:d}=await k(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(o=l?.data)!==null&&o!==void 0?o:{},create_user:(s=l?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new Vr("You must provide either an email or phone number.")}catch(c){if(T(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(e){var r,i;try{let o,s;"options"in e&&(o=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:c}=await k(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:xt});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");let l=a.session,u=a.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(o){if(T(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var r,i,o,s,a;try{let c=null,l=null;this.flowType==="pkce"&&([c,l]=await zr(this.storage,this.storageKey));let u=await k(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:l}),headers:this.headers,xform:Q0});return!((s=u.data)===null||s===void 0)&&s.url&&Ne()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(c){if(T(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:r},error:i}=e;if(i)throw i;if(!r)throw new Ue;let{error:o}=await k(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(T(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{let r=`${this.url}/resend`;if("email"in e){let{email:i,type:o,options:s}=e,{error:a}=await k(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){let{phone:i,type:o,options:s}=e,{data:a,error:c}=await k(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:c})}throw new Vr("You must provide either an email or phone number and a type")}catch(r){if(T(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){let o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,r=await Wn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};let i=e.expires_at?e.expires_at*1e3-Date.now()<Yl:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){let a=await Wn(this.userStorage,this.storageKey+"-user");a?.user?e.user=a.user:e.user=nu()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){let a={value:this.suppressGetSessionWarning};e.user=Y0(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}let{data:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await k(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:on}):await this._useSession(async r=>{var i,o,s;let{data:a,error:c}=r;if(c)throw c;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ue}:await k(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=a.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:on})})}catch(r){if(T(r))return P0(r)&&(await this._removeSession(),await Cn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async i=>{let{data:o,error:s}=i;if(s)throw s;if(!o.session)throw new Ue;let a=o.session,c=null,l=null;this.flowType==="pkce"&&e.email!=null&&([c,l]=await zr(this.storage,this.storageKey));let{data:u,error:d}=await k(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:l}),jwt:a.access_token,xform:on});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(i){if(T(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ue;let r=Date.now()/1e3,i=r,o=!0,s=null,{payload:a}=tu(e.access_token);if(a.exp&&(i=a.exp,o=i<=r),o){let{data:c,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!c)return{data:{user:null,session:null},error:null};s=c}else{let{data:c,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(T(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var i;if(!e){let{data:a,error:c}=r;if(c)throw c;e=(i=a.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new Ue;let{data:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(T(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Ne())throw new Ur("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ur(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Gs("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ur("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Gs("No code detected.");let{data:A,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;let te=new URL(window.location.href);return te.searchParams.delete("code"),window.history.replaceState(window.history.state,"",te.toString()),{data:{session:A.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:o,access_token:s,refresh_token:a,expires_in:c,expires_at:l,token_type:u}=e;if(!s||!c||!a||!u)throw new Ur("No session defined in URL");let d=Math.round(Date.now()/1e3),h=parseInt(c),f=d+h;l&&(f=parseInt(l));let m=f-d;m*1e3<=jr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);let y=f-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,d);let{data:E,error:w}=await this._getUser(s);if(w)throw w;let q={provider_token:i,provider_refresh_token:o,access_token:s,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:q,redirectType:e.type},error:null})}catch(i){if(T(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){let r=await Wn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return this._returnResult({error:s});let a=(i=o.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:c}=await this.admin.signOut(a,e);if(c&&!(R0(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return e!=="others"&&(await this._removeSession(),await Cn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){let r=$0(),i={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async r=>{var i,o;try{let{data:{session:s},error:a}=r;if(a)throw a;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await zr(this.storage,this.storageKey,!0));try{return await k(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(T(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{let{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{let{data:i,error:o}=await this._useSession(async s=>{var a,c,l,u,d;let{data:h,error:f}=s;if(f)throw f;let m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await k(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(o)throw o;return Ne()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:e.provider,url:i?.url},error:null})}catch(i){if(T(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var i;try{let{error:o,data:{session:s}}=r;if(o)throw o;let{options:a,provider:c,token:l,access_token:u,nonce:d}=e,h=await k(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=s?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:c,id_token:l,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:xt}),{data:f,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new bn}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:m}))}catch(o){if(T(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)throw a;return await k(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){let r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return await q0(async o=>(o>0&&await z0(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await k(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:xt})),(o,s)=>{let a=200*Math.pow(2,o);return s&&Ql(s)&&Date.now()+a-i<jr})}catch(i){if(this._debug(r,"error",i),T(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){let i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),Ne()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,r;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let o=await Wn(this.storage,this.storageKey);if(o&&this.userStorage){let a=await Wn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:o.user},await Hr(this.userStorage,this.storageKey+"-user",a)),o.user=(e=a?.user)!==null&&e!==void 0?e:nu()}else if(o&&!o.user&&!o.user){let a=await Wn(this.storage,this.storageKey+"-user");a&&a?.user?(o.user=a.user,await Cn(this.storage,this.storageKey+"-user"),await Hr(this.storage,this.storageKey,o)):o.user=nu()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}let s=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Yl;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${Yl}s`),s){if(this.autoRefreshToken&&o.refresh_token){let{error:a}=await this._callRefreshToken(o.refresh_token);a&&(console.error(a),Ql(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{let{data:a,error:c}=await this._getUser(o.access_token);!c&&a?.user?(o.user=a.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var r,i;if(!e)throw new Ue;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Ks;let{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Ue;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let c={data:s.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(s){if(this._debug(o,"error",s),T(s)){let a={data:null,error:s};return Ql(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,r,i=!0){let o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:r});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,r)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let c=0;c<s.length;c+=1)console.error(s[c]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;let r=Object.assign({},e),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await Hr(this.userStorage,this.storageKey+"-user",{user:r.user});let o=Object.assign({},r);delete o.user;let s=Bp(o);await Hr(this.storage,this.storageKey,s)}else{let o=Bp(r);await Hr(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Cn(this.storage,this.storageKey),await Cn(this.storage,this.storageKey+"-code-verifier"),await Cn(this.storage,this.storageKey+"-user"),this.userStorage&&await Cn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ne()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),jr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async r=>{let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((i.expires_at*1e3-e)/jr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${jr}ms, refresh threshold is ${Kl} ticks`),o<=Kl&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ys)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ne()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,i){let o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[s,a]=await zr(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});o.push(c.toString())}if(i?.queryParams){let s=new URLSearchParams(i.queryParams);o.push(s.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;return s?this._returnResult({data:null,error:s}):await k(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});let c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await k(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((o=l?.totp)===null||o===void 0)&&o.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?cw(e.webauthn.credential_response):lw(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:l}=await k(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:l}))})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=await k(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;let{data:c}=a;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:sw(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:aw(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){let{data:r,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;let{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};let o={all:[],phone:[],totp:[],webauthn:[]};for(let s of(e=r?.factors)!==null&&e!==void 0?e:[])o.all.push(s),s.status==="verified"&&o[s.factor_type].push(s);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;let{data:{session:i},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:s}=tu(i.access_token),a=null;s.aal&&(a=s.aal);let c=a;((r=(e=i.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");let u=s.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?await k(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ue})})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async i=>{let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new Ue});let a=await k(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&Ne()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(T(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,r){try{return await this._useSession(async i=>{let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new Ue});let a=await k(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&Ne()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(T(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{let{data:{session:r},error:i}=e;return i?this._returnResult({data:null,error:i}):r?await k(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Ue})})}catch(e){if(T(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?(await k(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ue})})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let i=r.keys.find(c=>c.kid===e);if(i)return i;let o=Date.now();if(i=this.jwks.keys.find(c=>c.kid===e),i&&this.jwks_cached_at+N0>o)return i;let{data:s,error:a}=await k(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=o,i=s.keys.find(c=>c.kid===e),!i)?null:i}async getClaims(e,r={}){try{let i=e;if(!i){let{data:m,error:y}=await this.getSession();if(y||!m.session)return this._returnResult({data:null,error:y});i=m.session.access_token}let{header:o,payload:s,signature:a,raw:{header:c,payload:l}}=tu(i);r?.allowExpired||W0(s.exp);let u=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!u){let{error:m}=await this.getUser(i);if(m)throw m;return{data:{claims:s,header:o,signature:a},error:null}}let d=K0(o.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,V0(`${c}.${l}`)))throw new $r("Invalid JWT signature");return{data:{claims:s,header:o,signature:a},error:null}}catch(i){if(T(i))return this._returnResult({data:null,error:i});throw i}}}return n.nextInstanceID={},n})(),Zp=zA;var qA=Zp,Qp=qA;var au=class extends Qp{constructor(t){super(t)}};var cu=class{constructor(t,e,r){var i,o,s;this.supabaseUrl=t,this.supabaseKey=e;let a=x0(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);let c=`sb-${a.hostname.split(".")[0]}-auth-token`,l={db:C0,realtime:D0,auth:Object.assign(Object.assign({},E0),{storageKey:c}),global:w0},u=I0(r??{},l);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=u.auth)!==null&&s!==void 0?s:{},this.headers,u.global.fetch),this.fetch=S0(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new r0(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Hs(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Ns(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,e;if(this.accessToken)return await this.accessToken();let{data:r}=await this.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:s,flowType:a,lock:c,debug:l,throwOnError:u},d,h){let f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new au({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,userStorage:o,flowType:a,lock:c,debug:l,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new js(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var dw=(n,t,e)=>new cu(n,t,e);function GA(){if(typeof window<"u"||typeof process>"u")return!1;let n=process.version;if(n==null)return!1;let t=n.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}GA()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Jp={production:!0,supabase:{url:"https://odiykkgeipobqgqiqvam.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9kaXlra2dlaXBvYnFncWlxdmFtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ3ODUwNTksImV4cCI6MjA4MDM2MTA1OX0.YEcIgiPDKe1tD8y5MfCMIrpY0jLijKgbi0qFv-0SIII"}};var Fe=class n{constructor(t){this.router=t;this.supabase=dw(Jp.supabase.url,Jp.supabase.anonKey),this.supabase.auth.onAuthStateChange((e,r)=>{this.currentUser.set(r?.user??null),this.isAuthenticated.set(!!r?.user),r?.user?this.loadUserProfile(r.user.id):this.currentProfile.set(null)}),this.checkSession()}supabase;currentUser=R(null);currentProfile=R(null);isAuthenticated=R(!1);async checkSession(){let{data:{session:t}}=await this.supabase.auth.getSession();t?.user&&(this.currentUser.set(t.user),this.isAuthenticated.set(!0),await this.loadUserProfile(t.user.id))}async loadUserProfile(t){try{let{data:e,error:r}=await this.supabase.from("profiles").select("*").eq("id",t).single();if(r)throw r;this.currentProfile.set(e)}catch(e){console.error("Error loading user profile:",e)}}async signUp(t,e,r){try{let{data:i,error:o}=await this.supabase.auth.signUp({email:e,password:r});if(o)throw o;if(!i.user)throw new Error("No user returned from signup");let{error:s}=await this.supabase.from("profiles").insert({id:i.user.id,username:t,email:e,created_at:new Date().toISOString()});if(s)throw s;return{success:!0,data:i}}catch(i){return console.error("Signup error:",i),{success:!1,error:i.message}}}async signIn(t,e){try{let{data:r,error:i}=await this.supabase.from("profiles").select("email").ilike("username",t).single();if(i||!r){console.error("Profile lookup error:",i),console.log("Searching for username:",t);let{data:a}=await this.supabase.from("profiles").select("username");throw console.log("Available usernames:",a),new Error("Invalid username or password")}console.log("Found email for username:",r.email);let{data:o,error:s}=await this.supabase.auth.signInWithPassword({email:r.email,password:e});if(s)throw console.error("Supabase auth error:",s),new Error("Invalid username or password");return await this.loadUserProfile(o.user.id),this.router.navigate(["/today"]),{success:!0,data:o}}catch(r){return console.error("Sign in error:",r),{success:!1,error:r.message||"Invalid username or password"}}}async signOut(){try{let{error:t}=await this.supabase.auth.signOut();if(t)throw t;return this.currentUser.set(null),this.currentProfile.set(null),this.isAuthenticated.set(!1),this.router.navigate(["/login"]),{success:!0}}catch(t){return console.error("Sign out error:",t),{success:!1,error:t.message}}}async resetPassword(t){try{let{error:e}=await this.supabase.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/reset-password`});if(e)throw e;return{success:!0}}catch(e){return console.error("Password reset error:",e),{success:!1,error:e.message}}}async updatePassword(t){try{let{error:e}=await this.supabase.auth.updateUser({password:t});if(e)throw e;return{success:!0}}catch(e){return console.error("Update password error:",e),{success:!1,error:e.message}}}getSupabaseClient(){return this.supabase}async getSession(){let{data:{session:t}}=await this.supabase.auth.getSession();return t}static \u0275fac=function(e){return new(e||n)(L(We))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var sn=class n{constructor(t){this.authService=t;qe(()=>{this.authService.currentUser()?this.loadEntries():this.entriesSubject.next([])})}entriesSubject=new Te([]);entries$=this.entriesSubject.asObservable();async loadEntries(){let t=this.authService.currentUser();if(t)try{let e=this.authService.getSupabaseClient(),{data:r,error:i}=await e.from("feeding_entries").select("*").eq("user_id",t.id).order("timestamp",{ascending:!1});if(i)throw i;let o=(r||[]).map(s=>({id:s.id,date:s.date,time:s.time,amount:s.amount,comment:s.comment,timestamp:s.timestamp}));this.entriesSubject.next(o)}catch(e){console.error("Error loading entries:",e),this.entriesSubject.next([])}}getAllEntries(){return this.entriesSubject.value}getEntriesByDate(t){return this.entriesSubject.value.filter(e=>e.date===t).sort((e,r)=>r.time.localeCompare(e.time))}getTodayEntries(){let t=this.getTodayDate();return this.getEntriesByDate(t)}getEntryById(t){return this.entriesSubject.value.find(e=>e.id===t)}async createEntry(t){let e=this.authService.currentUser();if(!e)return null;try{let r=this.createTimestamp(t.date,t.time),i=this.authService.getSupabaseClient(),o={user_id:e.id,date:t.date,time:t.time,amount:t.amount,comment:t.comment,timestamp:r,created_at:new Date().toISOString()},{data:s,error:a}=await i.from("feeding_entries").insert(o).select().single();if(a)throw a;let c={id:s.id,date:s.date,time:s.time,amount:s.amount,comment:s.comment,timestamp:s.timestamp},l=[...this.entriesSubject.value,c];return this.entriesSubject.next(l),c}catch(r){return console.error("Error creating entry:",r),null}}async updateEntry(t,e){let r=this.authService.currentUser();if(!r)return!1;try{let i=this.authService.getSupabaseClient(),o=this.entriesSubject.value,s=o.findIndex(u=>u.id===t);if(s===-1)return!1;let a=D(D({},o[s]),e);(e.date||e.time)&&(a.timestamp=this.createTimestamp(a.date,a.time));let c={date:a.date,time:a.time,amount:a.amount,comment:a.comment,timestamp:a.timestamp,updated_at:new Date().toISOString()},{error:l}=await i.from("feeding_entries").update(c).eq("id",t).eq("user_id",r.id);if(l)throw l;return o[s]=a,this.entriesSubject.next([...o]),!0}catch(i){return console.error("Error updating entry:",i),!1}}async deleteEntry(t){let e=this.authService.currentUser();if(!e)return!1;try{let r=this.authService.getSupabaseClient(),{error:i}=await r.from("feeding_entries").delete().eq("id",t).eq("user_id",e.id);if(i)throw i;let o=this.entriesSubject.value,s=o.filter(a=>a.id!==t);return s.length===o.length?!1:(this.entriesSubject.next(s),!0)}catch(r){return console.error("Error deleting entry:",r),!1}}getUniqueDates(){let t=new Set(this.entriesSubject.value.map(e=>e.date));return Array.from(t).sort((e,r)=>r.localeCompare(e))}getStatistics(t,e){let r=this.entriesSubject.value;t&&(r=r.filter(l=>l.date>=t)),e&&(r=r.filter(l=>l.date<=e));let i=r.length,o=r.reduce((l,u)=>l+u.amount,0),s=i>0?o/i:0,a=new Set(r.map(l=>l.date)),c=a.size>0?i/a.size:0;return{totalFeedings:i,totalAmount:o,averageAmount:Math.round(s*10)/10,averageFeedingsPerDay:Math.round(c*10)/10}}generateId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}getTodayDate(){return new Date().toISOString().split("T")[0]}createTimestamp(t,e){return new Date(`${t}T${e}`).getTime()}static \u0275fac=function(e){return new(e||n)(L(Fe))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var Kn=class n{constructor(t){this.authService=t;qe(()=>{this.authService.currentUser()?this.loadSettings():this.settings.set(null)})}settings=R(null);DEFAULT_INTERVAL_HOURS=3;async loadSettings(){let t=this.authService.currentUser();if(t)try{let e=this.authService.getSupabaseClient(),{data:r,error:i}=await e.from("user_settings").select("*").eq("user_id",t.id).single();if(i){if(i.code==="PGRST116"){await this.createDefaultSettings();return}throw i}this.settings.set(r)}catch(e){console.error("Error loading settings:",e)}}async createDefaultSettings(){let t=this.authService.currentUser();if(t)try{let e=this.authService.getSupabaseClient(),r={user_id:t.id,feeding_interval_hours:this.DEFAULT_INTERVAL_HOURS,notifications_enabled:!0},{data:i,error:o}=await e.from("user_settings").insert(r).select().single();if(o)throw o;this.settings.set(i)}catch(e){console.error("Error creating default settings:",e)}}async updateFeedingInterval(t){let e=this.authService.currentUser();if(!e)return!1;try{let r=this.authService.getSupabaseClient(),i=this.settings();if(i?.id){let{data:o,error:s}=await r.from("user_settings").update({feeding_interval_hours:t}).eq("id",i.id).eq("user_id",e.id).select().single();if(s)throw s;this.settings.set(o)}else{let{data:o,error:s}=await r.from("user_settings").insert({user_id:e.id,feeding_interval_hours:t,notifications_enabled:!0}).select().single();if(s)throw s;this.settings.set(o)}return!0}catch(r){return console.error("Error updating feeding interval:",r),!1}}async updateNotificationsEnabled(t){let e=this.authService.currentUser();if(!e)return!1;try{let r=this.authService.getSupabaseClient(),i=this.settings();if(i?.id){let{data:o,error:s}=await r.from("user_settings").update({notifications_enabled:t}).eq("id",i.id).eq("user_id",e.id).select().single();if(s)throw s;this.settings.set(o)}else{let{data:o,error:s}=await r.from("user_settings").insert({user_id:e.id,feeding_interval_hours:this.DEFAULT_INTERVAL_HOURS,notifications_enabled:t}).select().single();if(s)throw s;this.settings.set(o)}return!0}catch(r){return console.error("Error updating notifications enabled:",r),!1}}getFeedingInterval(){let t=this.settings();return t?t.feeding_interval_hours:this.DEFAULT_INTERVAL_HOURS}isFeedingIntervalEnabled(){return this.getFeedingInterval()!==null}getDefaultInterval(){return this.DEFAULT_INTERVAL_HOURS}areNotificationsEnabled(){return this.settings()?.notifications_enabled??!0}static \u0275fac=function(e){return new(e||n)(L(Fe))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var Yn=class n{feedingService=C(sn);settingsService=C(Kn);authService=C(Fe);nextFeedingTimer=null;notificationPermission="default";lastNotificationTime=null;constructor(){"Notification"in window&&(this.notificationPermission=Notification.permission),qe(()=>{let t=this.authService.currentUser(),e=this.settingsService.settings(),r=this.feedingService.getAllEntries();t&&e&&this.scheduleNextNotification()})}async requestPermission(){if(!("Notification"in window))return console.warn("This browser does not support notifications"),!1;if(this.notificationPermission==="granted")return!0;try{let t=await Notification.requestPermission();return this.notificationPermission=t,t==="granted"}catch(t){return console.error("Error requesting notification permission:",t),!1}}isNotificationEnabled(){return"Notification"in window&&this.notificationPermission==="granted"&&this.settingsService.isFeedingIntervalEnabled()&&this.settingsService.areNotificationsEnabled()}scheduleNextNotification(){if(this.nextFeedingTimer&&(clearTimeout(this.nextFeedingTimer),this.nextFeedingTimer=null),!this.isNotificationEnabled())return;let t=this.settingsService.getFeedingInterval();if(t===null)return;let e=this.feedingService.getAllEntries();if(e.length===0)return;let r=e.reduce((c,l)=>{let u=new Date(`${l.date}T${l.time}`).getTime(),d=new Date(`${c.date}T${c.time}`).getTime();return u>d?l:c}),o=new Date(`${r.date}T${r.time}`).getTime()+t*60*60*1e3,s=Date.now(),a=o-s;a>0?(this.nextFeedingTimer=setTimeout(()=>{this.showNotification(o)},a),console.log(`Next feeding notification scheduled in ${Math.round(a/1e3/60)} minutes`)):(this.lastNotificationTime===null||this.lastNotificationTime<o)&&this.showNotification(o)}showNotification(t){if(!this.isNotificationEnabled())return;let e=this.settingsService.getFeedingInterval(),r="\u{1F37C} Feeding Reminder",i=`It's been ${e} hour${e!==1?"s":""} since the last feeding. Time to feed your baby!`;try{let o=new Notification(r,{body:i,icon:"/favicon.ico",badge:"/favicon.ico",tag:"feeding-reminder",requireInteraction:!0});o.onclick=()=>{window.focus(),o.close()},this.lastNotificationTime=t}catch(o){console.error("Error showing notification:",o)}}async testNotification(){if(!await this.requestPermission())return!1;try{let e=new Notification("\u{1F37C} Test Notification",{body:"Notifications are working! You will receive reminders based on your feeding interval.",tag:"test-notification",requireInteraction:!1});return e.onclick=()=>{window.focus(),e.close()},!0}catch(e){return console.error("Error showing test notification:",e),!1}}getTimeUntilNextNotification(){let t=this.settingsService.getFeedingInterval();if(t===null)return null;let e=this.feedingService.getAllEntries();if(e.length===0)return null;let r=e.reduce((c,l)=>{let u=new Date(`${l.date}T${l.time}`).getTime(),d=new Date(`${c.date}T${c.time}`).getTime();return u>d?l:c}),o=new Date(`${r.date}T${r.time}`).getTime()+t*60*60*1e3,s=Date.now();return o-s}ngOnDestroy(){this.nextFeedingTimer&&clearTimeout(this.nextFeedingTimer)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var ww=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,r){this._renderer=e,this._elementRef=r}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(r){return new(r||n)(P(gn),P(pt))};static \u0275dir=ve({type:n})}return n})(),Cw=(()=>{class n extends ww{static \u0275fac=(()=>{let e;return function(i){return(e||(e=jt(n)))(i||n)}})();static \u0275dir=ve({type:n,features:[gt]})}return n})(),rg=new N("");var WA={provide:rg,useExisting:Ot(()=>Qn),multi:!0};function KA(){let n=Dt()?Dt().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var YA=new N(""),Qn=(()=>{class n extends ww{_compositionMode;_composing=!1;constructor(e,r,i){super(e,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!KA())}writeValue(e){let r=e??"";this.setProperty("value",r)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(r){return new(r||n)(P(gn),P(pt),P(YA,8))};static \u0275dir=ve({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&$("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[jn([WA]),gt]})}return n})();function ig(n){return n==null||og(n)===0}function og(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var bu=new N(""),Ew=new N(""),ZA=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,pe=class{static min(t){return Dw(t)}static max(t){return QA(t)}static required(t){return JA(t)}static requiredTrue(t){return XA(t)}static email(t){return eO(t)}static minLength(t){return tO(t)}static maxLength(t){return nO(t)}static pattern(t){return Sw(t)}static nullValidator(t){return fu()}static compose(t){return Ow(t)}static composeAsync(t){return Rw(t)}};function Dw(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function QA(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function JA(n){return ig(n.value)?{required:!0}:null}function XA(n){return n.value===!0?null:{required:!0}}function eO(n){return ig(n.value)||ZA.test(n.value)?null:{email:!0}}function tO(n){return t=>{let e=t.value?.length??og(t.value);return e===null||e===0?null:e<n?{minlength:{requiredLength:n,actualLength:e}}:null}}function nO(n){return t=>{let e=t.value?.length??og(t.value);return e!==null&&e>n?{maxlength:{requiredLength:n,actualLength:e}}:null}}function Sw(n){if(!n)return fu;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(ig(r.value))return null;let i=r.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}function fu(n){return null}function Iw(n){return n!=null}function xw(n){return Ln(n)?we(n):n}function Mw(n){let t={};return n.forEach(e=>{t=e!=null?D(D({},t),e):t}),Object.keys(t).length===0?null:t}function Tw(n,t){return t.map(e=>e(n))}function rO(n){return!n.validate}function Aw(n){return n.map(t=>rO(t)?t:e=>t.validate(e))}function Ow(n){if(!n)return null;let t=n.filter(Iw);return t.length==0?null:function(e){return Mw(Tw(e,t))}}function Nw(n){return n!=null?Ow(Aw(n)):null}function Rw(n){if(!n)return null;let t=n.filter(Iw);return t.length==0?null:function(e){let r=Tw(e,t).map(xw);return sd(r).pipe(oe(Mw))}}function Pw(n){return n!=null?Rw(Aw(n)):null}function hw(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function kw(n){return n._rawValidators}function Fw(n){return n._rawAsyncValidators}function Xp(n){return n?Array.isArray(n)?n:[n]:[]}function hu(n,t){return Array.isArray(n)?n.includes(t):n===t}function pw(n,t){let e=Xp(t);return Xp(n).forEach(i=>{hu(e,i)||e.push(i)}),e}function gw(n,t){return Xp(t).filter(e=>!hu(n,e))}var pu=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Nw(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Pw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},ro=class extends pu{name;get formDirective(){return null}get path(){return null}},ea=class extends pu{_parent=null;name=null;valueAccessor=null},gu=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var oo=(()=>{class n extends gu{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(P(ea,2))};static \u0275dir=ve({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ae("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[gt]})}return n})(),so=(()=>{class n extends gu{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(P(ro,10))};static \u0275dir=ve({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ae("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[gt]})}return n})();var Zs="VALID",uu="INVALID",to="PENDING",Qs="DISABLED",Zn=class{},mu=class extends Zn{value;source;constructor(t,e){super(),this.value=t,this.source=e}},Js=class extends Zn{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},Xs=class extends Zn{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},no=class extends Zn{status;source;constructor(t,e){super(),this.status=t,this.source=e}},eg=class extends Zn{source;constructor(t){super(),this.source=t}},ta=class extends Zn{source;constructor(t){super(),this.source=t}};function sg(n){return(wu(n)?n.validators:n)||null}function iO(n){return Array.isArray(n)?Nw(n):n||null}function ag(n,t){return(wu(t)?t.asyncValidators:n)||null}function oO(n){return Array.isArray(n)?Pw(n):n||null}function wu(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Lw(n,t,e){let r=n.controls;if(!(t?Object.keys(r):r).length)throw new M(1e3,"");if(!r[e])throw new M(1001,"")}function jw(n,t,e){n._forEachChild((r,i)=>{if(e[i]===void 0)throw new M(1002,"")})}var io=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return xe(this.statusReactive)}set status(t){xe(()=>this.statusReactive.set(t))}_status=Ve(()=>this.statusReactive());statusReactive=R(void 0);get valid(){return this.status===Zs}get invalid(){return this.status===uu}get pending(){return this.status==to}get disabled(){return this.status===Qs}get enabled(){return this.status!==Qs}errors;get pristine(){return xe(this.pristineReactive)}set pristine(t){xe(()=>this.pristineReactive.set(t))}_pristine=Ve(()=>this.pristineReactive());pristineReactive=R(!0);get dirty(){return!this.pristine}get touched(){return xe(this.touchedReactive)}set touched(t){xe(()=>this.touchedReactive.set(t))}_touched=Ve(()=>this.touchedReactive());touchedReactive=R(!1);get untouched(){return!this.touched}_events=new De;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(pw(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(pw(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(gw(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(gw(t,this._rawAsyncValidators))}hasValidator(t){return hu(this._rawValidators,t)}hasAsyncValidator(t){return hu(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(z(D({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new Xs(!0,r))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),e&&t.emitEvent!==!1&&this._events.next(new Xs(!1,r))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(z(D({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new Js(!1,r))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),e&&t.emitEvent!==!1&&this._events.next(new Js(!0,r))}markAsPending(t={}){this.status=to;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new no(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(z(D({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Qs,this.errors=null,this._forEachChild(i=>{i.disable(z(D({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new mu(this.value,r)),this._events.next(new no(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(z(D({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Zs,this._forEachChild(r=>{r.enable(z(D({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(z(D({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Zs||this.status===to)&&this._runAsyncValidator(r,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new mu(this.value,e)),this._events.next(new no(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(z(D({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qs:Zs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=to,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:t!==!1};let r=xw(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(t,e){let r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new no(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,r)}_initObservables(){this.valueChanges=new le,this.statusChanges=new le}_calculateStatus(){return this._allControlsDisabled()?Qs:this.errors?uu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(to)?to:this._anyControlsHaveStatus(uu)?uu:Zs}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),i&&this._events.next(new Js(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Xs(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){wu(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=iO(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=oO(this._rawAsyncValidators)}},vu=class extends io{constructor(t,e,r){super(sg(e),ag(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){jw(this,!0,t),Object.keys(t).forEach(r=>{Lw(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,z(D({},e),{onlySelf:!0}))}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new ta(this))}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>r._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,r,i)=>((r.enabled||this.disabled)&&(e[i]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,o)=>{r=e(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var tg=class extends vu{};var cg=new N("",{factory:()=>Cu}),Cu="always";function sO(n,t){return[...t.path,n]}function mw(n,t,e=Cu){lg(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),cO(n,t),uO(n,t),lO(n,t),aO(n,t)}function vw(n,t,e=!0){let r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),_u(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function yu(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function aO(n,t){if(t.valueAccessor.setDisabledState){let e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function lg(n,t){let e=kw(n);t.validator!==null?n.setValidators(hw(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let r=Fw(n);t.asyncValidator!==null?n.setAsyncValidators(hw(r,t.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();yu(t._rawValidators,i),yu(t._rawAsyncValidators,i)}function _u(n,t){let e=!1;if(n!==null){if(t.validator!==null){let i=kw(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.validator);o.length!==i.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let i=Fw(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(e=!0,n.setAsyncValidators(o))}}}let r=()=>{};return yu(t._rawValidators,r),yu(t._rawAsyncValidators,r),e}function cO(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Vw(n,t)})}function lO(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Vw(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function Vw(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function uO(n,t){let e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function dO(n,t){n==null,lg(n,t)}function fO(n,t){return _u(n,t)}function hO(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function pO(n){return Object.getPrototypeOf(n.constructor)===Cw}function gO(n,t){n._syncPendingControls(),t.forEach(e=>{let r=e.control;r.updateOn==="submit"&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function mO(n,t){if(!t)return null;Array.isArray(t);let e,r,i;return t.forEach(o=>{o.constructor===Qn?e=o:pO(o)?r=o:i=o}),i||r||e||null}function vO(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function yw(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function _w(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var du=class extends io{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,r){super(sg(e),ag(r,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wu(e)&&(e.nonNullable||e.initialValueIsDefault)&&(_w(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),e.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,e?.emitEvent!==!1&&this._events.next(new ta(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){yw(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){yw(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){_w(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var yO=n=>n instanceof du;var ao=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ve({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),_O={provide:rg,useExisting:Ot(()=>ug),multi:!0},ug=(()=>{class n extends Cw{writeValue(e){let r=e??"";this.setProperty("value",r)}registerOnChange(e){this.onChange=r=>{e(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=jt(n)))(i||n)}})();static \u0275dir=ve({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&$("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[jn([_O]),gt]})}return n})();var ng=class extends io{constructor(t,e,r){super(sg(e),ag(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){Array.isArray(t)?t.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){jw(this,!1,t),t.forEach((r,i)=>{Lw(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],z(D({},e),{onlySelf:!0}))}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new ta(this))}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,r)=>r._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};var bO=(()=>{class n extends ro{callSetDisabledState;get submitted(){return xe(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=Ve(()=>this._submittedReactive());_submittedReactive=R(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(e,r,i){super(),this.callSetDisabledState=i,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this.onChanges(e)}ngOnDestroy(){this.onDestroy()}onChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(_u(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(e){let r=this.form.get(e.path);return mw(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){vw(e.control||null,e,!1),vO(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}getFormArray(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}updateModel(e,r){this.form.get(e.path).setValue(r)}onReset(){this.resetForm()}resetForm(e=void 0,r={}){this.form.reset(e,r),this._submittedReactive.set(!1)}onSubmit(e){return this.submitted=!0,gO(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new eg(this.control)),e?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(e=>{let r=e.control,i=this.form.get(e.path);r!==i&&(vw(r||null,e),yO(i)&&(mw(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let r=this.form.get(e.path);dO(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let r=this.form.get(e.path);r&&fO(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){lg(this.form,this),this._oldForm&&_u(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(P(bu,10),P(Ew,10),P(cg,8))};static \u0275dir=ve({type:n,features:[gt,ht]})}return n})();var Uw=new N("");var wO={provide:ea,useExisting:Ot(()=>Yr)},Yr=(()=>{class n extends ea{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new le;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=mO(this,o)}ngOnChanges(e){this._added||this._setUpControl(),hO(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return sO(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(P(ro,13),P(bu,10),P(Ew,10),P(rg,10),P(Uw,8))};static \u0275dir=ve({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[jn([wO]),gt,ht]})}return n})();var CO={provide:ro,useExisting:Ot(()=>Zr)},Zr=(()=>{class n extends bO{form=null;ngSubmit=new le;get control(){return this.form}static \u0275fac=(()=>{let e;return function(i){return(e||(e=jt(n)))(i||n)}})();static \u0275dir=ve({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&$("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[jn([CO]),gt]})}return n})();function EO(n){return typeof n=="number"?n:parseFloat(n)}var $w=(()=>{class n{_validator=fu;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let r=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):fu,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ve({type:n,features:[ht]})}return n})();var DO={provide:bu,useExisting:Ot(()=>dg),multi:!0},dg=(()=>{class n extends $w{min;inputName="min";normalizeInput=e=>EO(e);createValidator=e=>Dw(e);static \u0275fac=(()=>{let e;return function(i){return(e||(e=jt(n)))(i||n)}})();static \u0275dir=ve({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ir("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[jn([DO]),gt]})}return n})();var SO={provide:bu,useExisting:Ot(()=>fg),multi:!0},fg=(()=>{class n extends $w{pattern;inputName="pattern";normalizeInput=e=>e;createValidator=e=>Sw(e);static \u0275fac=(()=>{let e;return function(i){return(e||(e=jt(n)))(i||n)}})();static \u0275dir=ve({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ir("pattern",i._enabled?i.pattern:null)},inputs:{pattern:"pattern"},standalone:!1,features:[jn([SO]),gt]})}return n})();var Bw=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=en({type:n});static \u0275inj=Nt({})}return n})();function bw(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var co=(()=>{class n{useNonNullable=!1;get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,r=null){let i=this._reduceControls(e),o={};return bw(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new vu(i,o)}record(e,r=null){let i=this._reduceControls(e);return new tg(i,r)}control(e,r,i){let o={};return this.useNonNullable?(bw(r)?o=r:(o.validators=r,o.asyncValidators=i),new du(e,z(D({},o),{nonNullable:!0}))):new du(e,r,i)}array(e,r,i){let o=e.map(s=>this._createControl(s));return new ng(o,r,i)}_reduceControls(e){let r={};return Object.keys(e).forEach(i=>{r[i]=this._createControl(e[i])}),r}_createControl(e){if(e instanceof du)return e;if(e instanceof io)return e;if(Array.isArray(e)){let r=e[0],i=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(r,i,o)}else return this.control(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Hw=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:cg,useValue:e.callSetDisabledState??Cu}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=en({type:n});static \u0275inj=Nt({imports:[Bw]})}return n})(),lo=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Uw,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:cg,useValue:e.callSetDisabledState??Cu}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=en({type:n});static \u0275inj=Nt({imports:[Bw]})}return n})();function IO(n,t){if(n&1){let e=_e();p(0,"button",19),$("click",function(){G(e);let i=I();return W(i.onCancel())}),b(1,"i",20),p(2,"span"),v(3,"Cancel"),g()()}}var uo=class n{constructor(t){this.fb=t}entry;defaultDate;submitForm=new le;cancel=new le;feedingForm;isEditMode=!1;ngOnInit(){this.initForm()}ngOnChanges(t){t.entry&&this.feedingForm&&(this.isEditMode=!!this.entry,this.initForm())}initForm(){this.isEditMode=!!this.entry;let t=new Date,e=this.defaultDate||t.toISOString().split("T")[0],r=this.formatTime(t);this.feedingForm?this.feedingForm.patchValue({date:this.entry?.date||e,time:this.entry?.time||r,amount:this.entry?.amount||"",comment:this.entry?.comment||""}):this.feedingForm=this.fb.group({date:[this.entry?.date||e,pe.required],time:[this.entry?.time||r,pe.required],amount:[this.entry?.amount||"",[pe.required,pe.min(1)]],comment:[this.entry?.comment||""]})}formatTime(t){let e=t.getHours().toString().padStart(2,"0"),r=t.getMinutes().toString().padStart(2,"0");return`${e}:${r}`}onSubmit(){this.feedingForm.valid&&(this.submitForm.emit(this.feedingForm.value),this.isEditMode||this.feedingForm.reset({date:this.feedingForm.value.date,time:this.formatTime(new Date),amount:"",comment:""}))}onCancel(){this.cancel.emit()}onlyNumbers(t){let e=t.which?t.which:t.keyCode;return e<48||e>57?(t.preventDefault(),!1):!0}static \u0275fac=function(e){return new(e||n)(P(co))};static \u0275cmp=Ce({type:n,selectors:[["app-feeding-form"]],inputs:{entry:"entry",defaultDate:"defaultDate"},outputs:{submitForm:"submitForm",cancel:"cancel"},features:[ht],decls:33,vars:5,consts:[[1,"feeding-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","date"],[1,"fas","fa-calendar"],["type","date","id","date","formControlName","date",1,"form-control"],["for","time"],[1,"fas","fa-clock"],["type","time","id","time","formControlName","time",1,"form-control"],["for","amount"],[1,"fas","fa-bottle-droplet"],[1,"unit"],["type","number","id","amount","formControlName","amount","placeholder","120","min","1","step","1","pattern","[0-9]*","inputmode","numeric",1,"form-control",3,"keypress"],["for","comment"],[1,"fas","fa-message"],["id","comment","formControlName","comment","rows","2","placeholder","Any notes...",1,"form-control"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"fas",3,"ngClass"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times"]],template:function(e,r){e&1&&(p(0,"form",0),$("ngSubmit",function(){return r.onSubmit()}),p(1,"div",1)(2,"label",2),b(3,"i",3),p(4,"span"),v(5,"Date"),g()(),b(6,"input",4),g(),p(7,"div",1)(8,"label",5),b(9,"i",6),p(10,"span"),v(11,"Time"),g()(),b(12,"input",7),g(),p(13,"div",1)(14,"label",8),b(15,"i",9),p(16,"span"),v(17,"Amount "),p(18,"span",10),v(19,"(ml)"),g()()(),p(20,"input",11),$("keypress",function(o){return r.onlyNumbers(o)}),g()(),p(21,"div",1)(22,"label",12),b(23,"i",13),p(24,"span"),v(25,"Comment (optional)"),g()(),b(26,"textarea",14),g(),p(27,"div",15)(28,"button",16),b(29,"i",17),p(30,"span"),v(31),g()(),Ge(32,IO,4,0,"button",18),g()()),e&2&&(F("formGroup",r.feedingForm),_(28),F("disabled",!r.feedingForm.valid),_(),F("ngClass",r.isEditMode?"fa-check":"fa-plus"),_(2),Q("",r.isEditMode?"Update":"Add"," Feeding"),_(),F("ngIf",r.isEditMode))},dependencies:[st,xr,Vt,lo,ao,Qn,ug,oo,so,fg,dg,Zr,Yr],styles:[".feeding-form[_ngcontent-%COMP%]{background:radial-gradient(circle at top left,#d6bdff26,#191a27fa);padding:1.5rem;border-radius:20px;box-shadow:0 12px 32px #00000080,0 0 0 1px #d6bdff4d;border:2px solid rgba(214,189,255,.25);transition:all .3s cubic-bezier(.2,0,.2,1)}.feeding-form[_ngcontent-%COMP%]:hover{border-color:#d6bdff66;box-shadow:0 16px 40px #0009,0 0 0 1px #d6bdff66,0 0 40px #d6bdff26;transform:translateY(-2px)}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;margin-bottom:.625rem;color:var(--accent-beige);font-weight:700;font-size:.95rem;text-transform:uppercase;letter-spacing:.5px}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--accent-lavender);filter:drop-shadow(0 2px 4px rgba(214,189,255,.3))}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{text-transform:none}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;font-size:1rem;font-weight:500;color:#fff;background:linear-gradient(135deg,#2a2d4199,#23253799);border:2px solid rgba(214,189,255,.15);border-radius:14px;transition:all .25s cubic-bezier(.2,0,.2,1);box-shadow:inset 0 2px 6px #0000004d}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--text-light);opacity:.6}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:hover{border-color:#d6bdff4d;background:linear-gradient(135deg,#2d3046b3,#26283ab3)}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-lavender);background:linear-gradient(135deg,#32354bcc,#2a2d3fcc);box-shadow:inset 0 2px 6px #0000004d,0 0 0 3px #d6bdff33,0 4px 16px #d6bdff4d;transform:translateY(-1px)}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-top:1.5rem}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1;border-radius:12px;padding:.875rem 1.5rem;font-size:1rem;font-weight:600}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}@media(min-width:768px){.feeding-form[_ngcontent-%COMP%]{padding:1.5rem}.form-actions[_ngcontent-%COMP%]{gap:1rem}}"]})};function xO(n,t){n&1&&(p(0,"div",3),b(1,"i",4),p(2,"p"),v(3,"No feeding entries yet"),g(),p(4,"small"),v(5,"Add your first feeding above to start tracking."),g()())}function MO(n,t){if(n&1&&(p(0,"span",24),v(1),g()),n&2){let e=I().$implicit,r=I();_(),Ee(r.formatDate(e.date))}}function TO(n,t){if(n&1&&(p(0,"div",25),b(1,"i",26),p(2,"p"),v(3),g()()),n&2){let e=I().$implicit;_(3),Ee(e.comment)}}function AO(n,t){if(n&1){let e=_e();p(0,"article",5),$("click",function(){let i=G(e).$implicit,o=I();return W(o.onEntryClick(i.id))}),p(1,"div",6)(2,"div",7)(3,"div",8),b(4,"i",9),p(5,"span",10),v(6),g()()(),p(7,"div",11),Ge(8,MO,2,1,"span",12),p(9,"div",13),b(10,"i",14),p(11,"div",15)(12,"span",16),v(13),g(),p(14,"span",17),v(15,"ml"),g()()()(),p(16,"div",18)(17,"button",19),$("click",function(i){let o=G(e).$implicit;return I().onEdit(o),W(i.stopPropagation())}),b(18,"i",20),g(),p(19,"button",21),$("click",function(i){let o=G(e).$implicit;return I().onDelete(o.id),W(i.stopPropagation())}),b(20,"i",22),g()()(),Ge(21,TO,4,1,"div",23),g()}if(n&2){let e=t.$implicit,r=I();ae("is-active",r.activeEntryId===e.id),_(6),Ee(e.time),_(2),F("ngIf",r.showDate),_(5),Ee(e.amount),_(8),F("ngIf",e.comment)}}var fo=class n{entries=[];showDate=!1;editEntry=new le;deleteEntry=new le;activeEntryId=null;onEntryClick(t){this.activeEntryId=this.activeEntryId===t?null:t}onEdit(t){this.activeEntryId=null,this.editEntry.emit(t)}onDelete(t){confirm("Are you sure you want to delete this entry?")&&(this.activeEntryId=null,this.deleteEntry.emit(t))}formatDate(t){let e=new Date(t+"T00:00:00"),r=String(e.getDate()).padStart(2,"0"),i=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear();return`${r}.${i}.${o}`}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=Ce({type:n,selectors:[["app-feeding-list"]],inputs:{entries:"entries",showDate:"showDate"},outputs:{editEntry:"editEntry",deleteEntry:"deleteEntry"},decls:3,vars:2,consts:[[1,"feeding-list"],["class","empty-state",4,"ngIf"],["class","feeding-entry",3,"is-active","click",4,"ngFor","ngForOf"],[1,"empty-state"],[1,"fas","fa-baby-carriage"],[1,"feeding-entry",3,"click"],[1,"entry-row"],[1,"entry-time"],[1,"time-chip"],["aria-hidden","true",1,"fas","fa-clock"],[1,"time"],[1,"entry-meta"],["class","date",4,"ngIf"],[1,"entry-amount"],["aria-hidden","true",1,"fas","fa-bottle-droplet"],[1,"amount-text"],[1,"amount"],[1,"unit"],[1,"entry-actions"],[1,"btn-icon","btn-edit",3,"click"],[1,"fas","fa-pen"],[1,"btn-icon","btn-delete",3,"click"],[1,"fas","fa-trash-alt"],["class","entry-comment",4,"ngIf"],[1,"date"],[1,"entry-comment"],["aria-hidden","true",1,"fas","fa-comment"]],template:function(e,r){e&1&&(p(0,"div",0),Ge(1,xO,6,0,"div",1)(2,AO,22,6,"article",2),g()),e&2&&(_(),F("ngIf",r.entries.length===0),_(),F("ngForOf",r.entries))},dependencies:[st,Ai,Vt],styles:[".feeding-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.empty-state[_ngcontent-%COMP%]{border-radius:16px;padding:1.5rem 1.25rem;background:var(--bg-card);border:1px dashed var(--border-color);text-align:center;color:var(--text-light);display:flex;flex-direction:column;align-items:center;gap:.35rem}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem;color:var(--primary-color);margin-bottom:.25rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:600;color:var(--text-dark)}.empty-state[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.8rem;opacity:.8}.feeding-entry[_ngcontent-%COMP%]{border-radius:16px;padding:.9rem 1rem;display:flex;flex-direction:column;gap:.5rem;cursor:pointer;transition:box-shadow .2s ease,border-color .2s ease,transform .12s ease,background .18s ease}.feeding-entry[_ngcontent-%COMP%]:not(.is-active){background:linear-gradient(135deg,#222434,#1f2130);border:1px solid rgba(249,215,196,.08);box-shadow:0 8px 20px #00000059}.feeding-entry[_ngcontent-%COMP%]:not(.is-active):hover{border-color:#f9d7c459;box-shadow:0 10px 24px #00000073;transform:translateY(-1px)}.feeding-entry.is-active[_ngcontent-%COMP%]{background:radial-gradient(circle at top right,#d6bdff38,#191a27fa);border:1px solid rgba(249,215,196,.85);box-shadow:0 14px 32px #0000008c;transform:translateY(-2px)}.entry-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.entry-time[_ngcontent-%COMP%]{display:flex;align-items:center}.time-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.4rem;padding:.4rem .9rem;border-radius:999px;background:var(--bg-dark)}.time-chip[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem;color:var(--accent-beige, #f6e0cf);flex-shrink:0}.time-chip[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#fff;line-height:1}.entry-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-left:.75rem;flex:1;min-width:0}.entry-meta[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-light);padding:.25rem .5rem;border-radius:999px;background:#ffffff05;border:1px solid rgba(255,255,255,.04);white-space:nowrap}.entry-amount[_ngcontent-%COMP%]{margin-left:auto;display:inline-flex;align-items:center;gap:.4rem;padding:.45rem .9rem;border-radius:999px;background:var(--bg-dark);flex-shrink:0}.entry-amount[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem;color:var(--accent-beige, #f6e0cf);margin-top:.05rem}.amount-text[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:.25rem}.amount-text[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:#fff;line-height:1}.amount-text[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-light)}.entry-actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:.35rem;overflow:hidden;max-width:0;opacity:0;pointer-events:none;transform:translate(4px);transition:max-width .18s ease,opacity .18s ease,transform .18s ease}.feeding-entry.is-active[_ngcontent-%COMP%]   .entry-actions[_ngcontent-%COMP%]{max-width:96px;opacity:1;pointer-events:auto;transform:translate(0)}.btn-icon[_ngcontent-%COMP%]{width:2rem;height:2rem;border-radius:999px;border:none;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;transition:transform .15s ease,box-shadow .15s ease,filter .15s ease;flex-shrink:0;box-shadow:0 4px 10px #00000059}.btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.85rem}.btn-icon[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 6px 14px #0006}.btn-icon[_ngcontent-%COMP%]:active{transform:scale(.94);filter:brightness(.9)}.btn-edit[_ngcontent-%COMP%]{background-color:var(--accent-lavender);color:var(--bg-dark)}.btn-delete[_ngcontent-%COMP%]{background-color:var(--danger-color);color:var(--bg-dark)}.entry-comment[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding:.55rem .65rem;border-radius:10px;background:var(--bg-medium);border:1px solid var(--border-color)}.entry-comment[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem;color:var(--primary-color);margin-top:.2rem;flex-shrink:0}.entry-comment[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.85rem;color:var(--text-dark);line-height:1.4}@media(max-width:599px){.feeding-entry[_ngcontent-%COMP%]{padding:.8rem .85rem}.entry-row[_ngcontent-%COMP%]{flex-wrap:wrap;row-gap:.5rem}.entry-meta[_ngcontent-%COMP%]{margin-left:.5rem}}@media(min-width:768px){.feeding-entry[_ngcontent-%COMP%]{padding:1rem 1.1rem;gap:.6rem}.time-chip[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:1.25rem}.amount-text[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:1.4rem}.btn-icon[_ngcontent-%COMP%]{width:2.25rem;height:2.25rem}.btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}}"]})};function OO(n,t){if(n&1&&(p(0,"div",9),b(1,"i",15),p(2,"span",6),v(3),g(),p(4,"span",7),v(5),g()()),n&2){let e=I();F("ngClass",e.feedingStatusClass()),_(),F("ngClass",e.feedingStatusIcon()),_(2),Ee(e.feedingStatusLabel()),_(2),Ee(e.nextFeedCountdown())}}function NO(n,t){if(n&1){let e=_e();p(0,"button",16),$("click",function(){G(e);let i=I();return W(i.openFormModal())}),b(1,"i",17),g()}}function RO(n,t){if(n&1){let e=_e();p(0,"div",18),$("click",function(){G(e);let i=I();return W(i.closeFormModal())}),p(1,"div",19),$("click",function(i){return G(e),W(i.stopPropagation())}),p(2,"div",20)(3,"h3"),b(4,"i",15),v(5),g(),p(6,"button",21),$("click",function(){G(e);let i=I();return W(i.closeFormModal())}),b(7,"i",22),g()(),p(8,"div",23)(9,"app-feeding-form",24),$("submitForm",function(i){G(e);let o=I();return W(o.onSubmit(i))})("cancel",function(){G(e);let i=I();return W(i.closeFormModal())}),g()()()()}if(n&2){let e=I();_(4),F("ngClass",e.editingEntry()?"fa-pen":"fa-plus-circle"),_(),Q(" ",e.editingEntry()?"Edit":"Add New"," Feeding "),_(4),F("entry",e.editingEntry())("defaultDate",e.todayDate)}}var Eu=class n{feedingService=C(sn);notificationService=C(Yn);settingsService=C(Kn);destroyRef=C(et);todayEntries=R([]);editingEntry=R(void 0);todayDate=new Date().toISOString().split("T")[0];nextFeedCountdown=R(null);showFormModal=R(!1);totalAmount=Ve(()=>this.todayEntries().reduce((t,e)=>t+e.amount,0));feedingStatusLabel=Ve(()=>{if(!this.nextFeedCountdown())return null;let e=this.notificationService.getTimeUntilNextNotification();if(e===null)return null;let r=Math.floor(e/1e3/60);return r>=-10&&r<=10?"Status":r<-10?"Feeding overdue":"Next feed in"});feedingStatusIcon=Ve(()=>{if(!this.nextFeedCountdown())return"fa-clock";let e=this.notificationService.getTimeUntilNextNotification();if(e===null)return"fa-clock";let r=Math.floor(e/1e3/60);return r>=-10&&r<=10?"fa-bell":r<-10?"fa-exclamation-triangle":"fa-clock"});feedingStatusClass=Ve(()=>{if(!this.nextFeedCountdown())return"";let e=this.notificationService.getTimeUntilNextNotification();if(e===null)return"";let r=Math.floor(e/1e3/60);return r>=-10&&r<=10?"feeding-time":r<-10?"overdue":""});constructor(){qe(()=>{this.todayEntries(),this.settingsService.settings(),this.updateCountdown()})}ngOnInit(){this.feedingService.entries$.pipe(dp(this.destroyRef)).subscribe(()=>{this.loadTodayEntries()}),this.loadTodayEntries(),ad(6e4).pipe(dp(this.destroyRef)).subscribe(()=>{this.updateCountdown()})}loadTodayEntries(){this.todayEntries.set(this.feedingService.getTodayEntries())}openFormModal(){this.showFormModal.set(!0)}closeFormModal(){this.showFormModal.set(!1),this.editingEntry.set(void 0)}async onSubmit(t){let e=this.editingEntry();e?await this.feedingService.updateEntry(e.id,t):await this.feedingService.createEntry(t),this.editingEntry.set(void 0),this.closeFormModal()}onEdit(t){this.editingEntry.set(t),this.openFormModal()}onCancelEdit(){this.closeFormModal()}async onDelete(t){await this.feedingService.deleteEntry(t)}updateCountdown(){let t=this.notificationService.getTimeUntilNextNotification();if(t===null||!this.settingsService.isFeedingIntervalEnabled()){this.nextFeedCountdown.set(null);return}let e=Math.floor(t/1e3/60);if(e>=-10&&e<=10){this.nextFeedCountdown.set("FEEDING TIME");return}if(e<-10){let o=Math.abs(e),s=Math.floor(o/60),a=o%60;s>0?this.nextFeedCountdown.set(`${s}h ${a}m`):this.nextFeedCountdown.set(`${a}m`);return}let r=Math.floor(e/60),i=e%60;r>0?this.nextFeedCountdown.set(`${r}h ${i}m`):this.nextFeedCountdown.set(`${i}m`)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=Ce({type:n,selectors:[["app-today"]],decls:26,vars:6,consts:[[1,"page-container"],[1,"page-header"],[1,"fas","fa-sun"],[1,"today-stats"],[1,"stat"],[1,"fas","fa-bottle-droplet"],[1,"stat-label"],[1,"stat-value"],[1,"fas","fa-list-check"],[1,"stat","next-feed-stat",3,"ngClass"],["class","fab",3,"click",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"list-section"],[1,"fas","fa-clock"],[3,"editEntry","deleteEntry","entries"],[1,"fas",3,"ngClass"],[1,"fab",3,"click"],[1,"fas","fa-plus"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[3,"submitForm","cancel","entry","defaultDate"]],template:function(e,r){e&1&&(p(0,"div",0)(1,"div",1)(2,"h2"),b(3,"i",2),v(4," Today's Feedings"),g(),p(5,"div",3)(6,"div",4),b(7,"i",5),p(8,"span",6),v(9,"Total"),g(),p(10,"span",7),v(11),g()(),p(12,"div",4),b(13,"i",8),p(14,"span",6),v(15,"Count"),g(),p(16,"span",7),v(17),g()(),de(18,OO,6,4,"div",9),g()(),Ge(19,NO,2,0,"button",10)(20,RO,10,4,"div",11),p(21,"div",12)(22,"h3"),b(23,"i",13),v(24," Today's Entries"),g(),p(25,"app-feeding-list",14),$("editEntry",function(o){return r.onEdit(o)})("deleteEntry",function(o){return r.onDelete(o)}),g()()()),e&2&&(_(11),Q("",r.totalAmount()," ml"),_(6),Ee(r.todayEntries().length),_(),fe(r.nextFeedCountdown()?18:-1),_(),F("ngIf",!r.showFormModal()),_(),F("ngIf",r.showFormModal()),_(5),F("entries",r.todayEntries()))},dependencies:[st,xr,Vt,uo,fo],styles:[".today-stats[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-top:1rem}.stat[_ngcontent-%COMP%]{flex:1;background:linear-gradient(135deg,#222434,#1f2130);padding:1rem;border-radius:16px;box-shadow:var(--shadow);text-align:center;border:1px solid var(--border-subtle);display:flex;flex-direction:column;align-items:center;gap:.5rem;transition:transform .15s ease,box-shadow .15s ease,border-color .15s ease}.stat[_ngcontent-%COMP%]:hover{border-color:var(--border-medium);transform:translateY(-1px);box-shadow:var(--shadow-lg)}.stat[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.4rem;color:var(--accent-beige)}.stat-label[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:var(--text-light);text-transform:uppercase;letter-spacing:.5px;font-weight:600}.stat-value[_ngcontent-%COMP%]{display:block;font-size:1.5rem;font-weight:700;color:var(--accent-beige);line-height:1}.stat.feeding-time[_ngcontent-%COMP%]{border-color:#4caf5080}.stat.feeding-time[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#4caf50;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.stat.feeding-time[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#4caf50}.stat.overdue[_ngcontent-%COMP%]{border-color:#f4433680}.stat.overdue[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .stat.overdue[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#f44336}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.6}}.list-section[_ngcontent-%COMP%]{margin-top:1.5rem;padding-bottom:67px}.list-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;color:var(--text-dark);font-size:1.15rem}.fab[_ngcontent-%COMP%]{position:fixed;bottom:80px;right:1.5rem;width:64px;height:64px;border-radius:50%;background:linear-gradient(135deg,var(--accent-lavender),var(--accent-beige));border:none;box-shadow:0 8px 24px #d6bdff66,0 4px 12px #00000080;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s cubic-bezier(.2,0,.2,1);z-index:100}.fab[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#fff;filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.fab[_ngcontent-%COMP%]:hover{transform:scale(1.1) translateY(-2px);box-shadow:0 12px 32px #d6bdff80,0 6px 16px #0009}.fab[_ngcontent-%COMP%]:active{transform:scale(.95)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.modal-content[_ngcontent-%COMP%]{background:radial-gradient(circle at top left,#d6bdff26,#191a27fa);border-radius:20px;border:2px solid rgba(214,189,255,.3);box-shadow:0 24px 48px #000000b3,0 0 0 1px #d6bdff66;max-width:500px;width:100%;max-height:90vh;overflow:hidden;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.2,0,.2,1)}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1.5rem 1.5rem 1.25rem;background:linear-gradient(135deg,#d6bdff26,#b8d4c81a);border-bottom:2px solid rgba(214,189,255,.2)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.3rem;font-weight:700;letter-spacing:-.5px;text-shadow:0 2px 4px rgba(0,0,0,.3);display:flex;align-items:center;gap:.75rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--accent-lavender);filter:drop-shadow(0 2px 8px rgba(214,189,255,.4))}.btn-close[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;border:2px solid rgba(214,189,255,.2);background:#22243499;color:var(--text-light);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.btn-close[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.btn-close[_ngcontent-%COMP%]:hover{background:#d6bdff33;border-color:#d6bdff66;color:#fff;transform:rotate(90deg)}.btn-close[_ngcontent-%COMP%]:active{transform:rotate(90deg) scale(.95)}.modal-body[_ngcontent-%COMP%]{padding:1.5rem;overflow-y:auto}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media(min-width:768px){.today-stats[_ngcontent-%COMP%]{gap:1rem}.stat[_ngcontent-%COMP%]{padding:1.25rem}.stat[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.6rem}.stat-value[_ngcontent-%COMP%]{font-size:1.75rem}.list-section[_ngcontent-%COMP%]{margin-top:2rem;padding-bottom:120px}.fab[_ngcontent-%COMP%]{width:72px;height:72px;bottom:90px;right:2rem}.fab[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem}.modal-content[_ngcontent-%COMP%]{max-width:600px}.modal-header[_ngcontent-%COMP%]{padding:1.75rem 1.75rem 1.5rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem}.modal-body[_ngcontent-%COMP%]{padding:1.75rem}}"]})};function PO(n,t){n&1&&(p(0,"div",7),b(1,"i",8),p(2,"p"),v(3,"No feeding entries yet."),g(),p(4,"small"),v(5,"Start tracking on the Today page!"),g()())}function kO(n,t){if(n&1){let e=_e();p(0,"div",9)(1,"h3"),b(2,"i",10),v(3," Edit Feeding"),g(),p(4,"app-feeding-form",11),$("submitForm",function(i){G(e);let o=I();return W(o.onSubmit(i))})("cancel",function(){G(e);let i=I();return W(i.onCancelEdit())}),g()()}if(n&2){let e=I();_(4),F("entry",e.editingEntry())}}function FO(n,t){if(n&1){let e=_e();p(0,"div",12)(1,"div",13)(2,"div",14),b(3,"i",15),p(4,"h3"),v(5),g()(),p(6,"div",16)(7,"span",17),v(8),g(),p(9,"div",18)(10,"span",19),b(11,"i",20),v(12),g(),p(13,"span",21),b(14,"i",22),v(15),g()()()(),p(16,"app-feeding-list",23),$("editEntry",function(i){G(e);let o=I();return W(o.onEdit(i))})("deleteEntry",function(i){G(e);let o=I();return W(o.onDelete(i))}),g()()}if(n&2){let e=t.$implicit,r=I();_(5),Ee(r.formatDate(e.date)),_(3),Ee(r.formatDateBadge(e.date)),_(4),Q(" ",e.totalFeedings," "),_(3),Q(" ",e.totalMilk," ml "),_(),F("entries",e.entries)}}var Du=class n{constructor(t){this.feedingService=t;qe(()=>{this.feedingService.entries$.subscribe(()=>{this.loadEntries()})})}dateGroups=R([]);editingEntry=R(void 0);ngOnInit(){this.loadEntries()}loadEntries(){let t=this.feedingService.getUniqueDates();this.dateGroups.set(t.map(e=>{let r=this.feedingService.getEntriesByDate(e),i=r.reduce((o,s)=>o+s.amount,0);return{date:e,entries:r,totalFeedings:r.length,totalMilk:i}}))}onSubmit(t){let e=this.editingEntry();e?this.feedingService.updateEntry(e.id,t):this.feedingService.createEntry(t),this.editingEntry.set(void 0)}onEdit(t){this.editingEntry.set(t)}onCancelEdit(){this.editingEntry.set(void 0)}onDelete(t){this.feedingService.deleteEntry(t)}formatDate(t){let e=new Date(t+"T00:00:00"),r=new Date;r.setHours(0,0,0,0);let i=new Date(r);return i.setDate(i.getDate()-1),e.setHours(0,0,0,0),e.getTime()===r.getTime()?"Today":e.getTime()===i.getTime()?"Yesterday":e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}formatDateBadge(t){let e=new Date(t+"T00:00:00"),r=String(e.getDate()).padStart(2,"0"),i=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear();return`${r}.${i}.${o}`}static \u0275fac=function(e){return new(e||n)(P(sn))};static \u0275cmp=Ce({type:n,selectors:[["app-log"]],decls:9,vars:3,consts:[[1,"page-container"],[1,"page-header"],[1,"fas","fa-calendar-days"],["class","empty-state",4,"ngIf"],["class","form-section",4,"ngIf"],[1,"log-list"],["class","date-group",4,"ngFor","ngForOf"],[1,"empty-state"],[1,"fas","fa-calendar-xmark"],[1,"form-section"],[1,"fas","fa-pen"],[3,"submitForm","cancel","entry"],[1,"date-group"],[1,"date-header"],[1,"date-header-row"],[1,"fas","fa-calendar"],[1,"date-header-row","date-header-bottom"],[1,"date-badge"],[1,"date-header-stats"],["title","Total feedings",1,"stat-badge"],[1,"fas","fa-hashtag"],["title","Total milk (ml)",1,"stat-badge"],[1,"fas","fa-bottle-droplet"],[3,"editEntry","deleteEntry","entries"]],template:function(e,r){e&1&&(p(0,"div",0)(1,"div",1)(2,"h2"),b(3,"i",2),v(4," Feeding Log"),g()(),Ge(5,PO,6,0,"div",3)(6,kO,5,1,"div",4),p(7,"div",5),Ge(8,FO,17,5,"div",6),g()()),e&2&&(_(5),F("ngIf",r.dateGroups().length===0),_(),F("ngIf",r.editingEntry()),_(2),F("ngForOf",r.dateGroups()))},dependencies:[st,Ai,Vt,uo,fo],styles:[".log-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2.5rem}.date-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.date-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;padding:1.25rem 1.5rem;background:radial-gradient(circle at top left,#d6bdff2e,#191a27f2);border-radius:18px;border:2px solid var(--border-medium);box-shadow:0 12px 28px #00000080;position:sticky;top:10px;z-index:10;transition:all .2s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.date-header[_ngcontent-%COMP%]:hover{border-color:var(--border-strong);box-shadow:0 14px 32px #0009;transform:translateY(-2px)}.date-header-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.date-header-row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--accent-beige);font-size:1.5rem;filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.date-header-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.25rem;font-weight:700;letter-spacing:-.5px;text-shadow:0 2px 4px rgba(0,0,0,.3);flex:1}.date-header-row.date-header-bottom[_ngcontent-%COMP%]{justify-content:space-between}.date-header-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.stat-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.35rem;font-size:.75rem;color:var(--text-dark);padding:.35rem .7rem;background:linear-gradient(135deg,#b8d4c840,#a4c0b433);border:1px solid rgba(184,212,200,.35);border-radius:999px;font-weight:600;letter-spacing:.3px;box-shadow:0 2px 6px #0003;white-space:nowrap}.stat-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.7rem;color:var(--accent-lavender);filter:none}.date-badge[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-dark);padding:.45rem .9rem;background:linear-gradient(135deg,#e8d5c433,#d4c5e026);border:1px solid var(--border-medium);border-radius:999px;font-weight:700;letter-spacing:.5px;text-transform:uppercase;box-shadow:0 2px 8px #0000004d}.form-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;color:var(--text-dark);font-size:1.15rem}@media(min-width:768px){.log-list[_ngcontent-%COMP%]{gap:3rem}.date-header[_ngcontent-%COMP%]{padding:1.5rem 1.75rem}.date-header-row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem}.date-header-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem}.stat-badge[_ngcontent-%COMP%]{font-size:.8rem;padding:.4rem .8rem;gap:.4rem}.stat-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.75rem}.date-badge[_ngcontent-%COMP%]{font-size:.85rem;padding:.5rem 1rem}.form-section[_ngcontent-%COMP%]{margin-bottom:2rem}}"]})};function LO(n,t){if(n&1&&(p(0,"div",6)(1,"div",7),b(2,"i",8),p(3,"h3"),v(4,"Last 7 Days"),g()(),p(5,"div",9)(6,"div",10)(7,"div",11),b(8,"i",12),p(9,"span"),v(10,"Total Feedings"),g()(),p(11,"span",13),v(12),g()(),p(13,"div",10)(14,"div",11),b(15,"i",14),p(16,"span"),v(17,"Total Amount"),g()(),p(18,"span",13),v(19),g()(),p(20,"div",10)(21,"div",11),b(22,"i",15),p(23,"span"),v(24,"Average per Feeding"),g()(),p(25,"span",13),v(26),g()(),p(27,"div",10)(28,"div",11),b(29,"i",16),p(30,"span"),v(31,"Average per Day"),g()(),p(32,"span",13),v(33),g()()()()),n&2){let e=I();_(12),Ee(e.weekStats().totalFeedings),_(7),Q("",e.weekStats().totalAmount," ml"),_(7),Q("",e.weekStats().averageAmount," ml"),_(7),Ee(e.weekStats().averageFeedingsPerDay)}}function jO(n,t){if(n&1&&(p(0,"div",6)(1,"div",7),b(2,"i",17),p(3,"h3"),v(4,"Last 30 Days"),g()(),p(5,"div",9)(6,"div",10)(7,"div",11),b(8,"i",12),p(9,"span"),v(10,"Total Feedings"),g()(),p(11,"span",13),v(12),g()(),p(13,"div",10)(14,"div",11),b(15,"i",14),p(16,"span"),v(17,"Total Amount"),g()(),p(18,"span",13),v(19),g()(),p(20,"div",10)(21,"div",11),b(22,"i",15),p(23,"span"),v(24,"Average per Feeding"),g()(),p(25,"span",13),v(26),g()(),p(27,"div",10)(28,"div",11),b(29,"i",16),p(30,"span"),v(31,"Average per Day"),g()(),p(32,"span",13),v(33),g()()()()),n&2){let e=I();_(12),Ee(e.monthStats().totalFeedings),_(7),Q("",e.monthStats().totalAmount," ml"),_(7),Q("",e.monthStats().averageAmount," ml"),_(7),Ee(e.monthStats().averageFeedingsPerDay)}}function VO(n,t){if(n&1&&(p(0,"div",6)(1,"div",7),b(2,"i",18),p(3,"h3"),v(4,"All Time"),g()(),p(5,"div",9)(6,"div",10)(7,"div",11),b(8,"i",12),p(9,"span"),v(10,"Total Feedings"),g()(),p(11,"span",13),v(12),g()(),p(13,"div",10)(14,"div",11),b(15,"i",14),p(16,"span"),v(17,"Total Amount"),g()(),p(18,"span",13),v(19),g()(),p(20,"div",10)(21,"div",11),b(22,"i",15),p(23,"span"),v(24,"Average per Feeding"),g()(),p(25,"span",13),v(26),g()(),p(27,"div",10)(28,"div",11),b(29,"i",16),p(30,"span"),v(31,"Average per Day"),g()(),p(32,"span",13),v(33),g()()()()),n&2){let e=I();_(12),Ee(e.allTimeStats().totalFeedings),_(7),Q("",e.allTimeStats().totalAmount," ml"),_(7),Q("",e.allTimeStats().averageAmount," ml"),_(7),Ee(e.allTimeStats().averageFeedingsPerDay)}}function UO(n,t){n&1&&(p(0,"div",19),b(1,"i",20),p(2,"p"),v(3,"No feeding data available yet."),g(),p(4,"small"),v(5,"Start tracking on the Today page!"),g()())}var Su=class n{constructor(t){this.feedingService=t;qe(()=>{this.feedingService.entries$.subscribe(()=>{this.loadStatistics()})})}weekStats=R(void 0);monthStats=R(void 0);allTimeStats=R(void 0);ngOnInit(){this.loadStatistics()}loadStatistics(){let t=new Date;t.setDate(t.getDate()-7);let e=t.toISOString().split("T")[0],r=new Date;r.setMonth(r.getMonth()-1);let i=r.toISOString().split("T")[0];this.weekStats.set(this.feedingService.getStatistics(e)),this.monthStats.set(this.feedingService.getStatistics(i)),this.allTimeStats.set(this.feedingService.getStatistics())}static \u0275fac=function(e){return new(e||n)(P(sn))};static \u0275cmp=Ce({type:n,selectors:[["app-statistics"]],decls:10,vars:4,consts:[[1,"page-container"],[1,"page-header"],[1,"fas","fa-chart-line"],[1,"stats-grid"],["class","stat-card",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"stat-card"],[1,"card-header"],[1,"fas","fa-calendar-week"],[1,"card-body"],[1,"stat-row"],[1,"stat-label"],[1,"fas","fa-hashtag"],[1,"stat-value"],[1,"fas","fa-bottle-droplet"],[1,"fas","fa-chart-bar"],[1,"fas","fa-calendar-day"],[1,"fas","fa-calendar-alt"],[1,"fas","fa-infinity"],[1,"empty-state"],[1,"fas","fa-chart-pie"]],template:function(e,r){e&1&&(p(0,"div",0)(1,"div",1)(2,"h2"),b(3,"i",2),v(4," Statistics"),g()(),p(5,"div",3),Ge(6,LO,34,4,"div",4)(7,jO,34,4,"div",4)(8,VO,34,4,"div",4),g(),Ge(9,UO,6,0,"div",5),g()),e&2&&(_(6),F("ngIf",r.weekStats()),_(),F("ngIf",r.monthStats()),_(),F("ngIf",r.allTimeStats()),_(),F("ngIf",!r.allTimeStats()||r.allTimeStats().totalFeedings===0))},dependencies:[st,Vt],styles:[".stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1.5rem;margin-top:1.5rem}.stat-card[_ngcontent-%COMP%]{background:radial-gradient(circle at top left,#d6bdff26,#191a27fa);border-radius:20px;border:2px solid rgba(214,189,255,.25);box-shadow:0 12px 32px #00000080,0 0 0 1px #d6bdff4d;overflow:hidden;transition:all .3s cubic-bezier(.2,0,.2,1)}.stat-card[_ngcontent-%COMP%]:hover{border-color:#d6bdff66;box-shadow:0 16px 40px #0009,0 0 0 1px #d6bdff66,0 0 40px #d6bdff26;transform:translateY(-4px)}.card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.875rem;padding:1.5rem 1.5rem 1.25rem;background:linear-gradient(135deg,#d6bdff26,#b8d4c81a);border-bottom:2px solid rgba(214,189,255,.2)}.card-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem;color:var(--accent-lavender);filter:drop-shadow(0 2px 8px rgba(214,189,255,.4))}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.3rem;font-weight:700;letter-spacing:-.5px;text-shadow:0 2px 4px rgba(0,0,0,.3)}.card-body[_ngcontent-%COMP%]{padding:1.25rem 1.5rem 1.5rem}.stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 0;border-bottom:1px solid rgba(214,189,255,.1)}.stat-row[_ngcontent-%COMP%]:first-child{padding-top:0}.stat-row[_ngcontent-%COMP%]:last-child{border-bottom:none;padding-bottom:0}.stat-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;color:var(--text-light);font-weight:500;font-size:.95rem}.stat-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;color:var(--accent-beige);filter:drop-shadow(0 2px 4px rgba(232,213,196,.3));width:1.25rem;text-align:center}.stat-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.stat-value[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-size:1.25rem;letter-spacing:-.5px;text-shadow:0 2px 4px rgba(0,0,0,.3);background:linear-gradient(135deg,var(--accent-lavender),var(--accent-beige));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;padding-left:1rem;text-align:right;min-width:100px}@media(min-width:768px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:2rem}.card-header[_ngcontent-%COMP%]{padding:1.75rem 1.75rem 1.5rem}.card-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem}.card-body[_ngcontent-%COMP%]{padding:1.5rem 1.75rem 1.75rem}.stat-row[_ngcontent-%COMP%]{padding:1.125rem 0}.stat-label[_ngcontent-%COMP%]{font-size:1rem}.stat-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.125rem}.stat-value[_ngcontent-%COMP%]{font-size:1.4rem}}@media(min-width:1200px){.stats-grid[_ngcontent-%COMP%]{gap:2.5rem}}"]})};function $O(n,t){n&1&&(p(0,"div",3),b(1,"i",4),p(2,"span"),v(3,"Loading settings..."),g()())}function BO(n,t){if(n&1){let e=_e();p(0,"button",29),$("click",function(){G(e);let i=I(4);return W(i.testNotification())}),b(1,"i",30),p(2,"span"),v(3,"Test Notification"),g()()}}function HO(n,t){if(n&1&&(p(0,"div",24)(1,"div",25),b(2,"i",26),g(),p(3,"div",27)(4,"strong"),v(5,"Notification Status:"),g(),p(6,"span"),v(7),g()()(),de(8,BO,4,0,"button",28)),n&2){let e=I(3);_(),ae("active",e.notificationsEnabled()),_(),F("ngClass",e.notificationsEnabled()?"fa-bell":"fa-bell-slash"),_(4),ae("success",e.notificationsEnabled())("warning",!e.notificationsEnabled()),_(),Q(" ",e.getNotificationStatusText()," "),_(),fe(e.notificationsSupported()?8:-1)}}function zO(n,t){if(n&1){let e=_e();p(0,"div",8)(1,"label",19),b(2,"i",20),v(3," Interval "),p(4,"span",21),v(5,"(hours)"),g()(),p(6,"input",22),$("input",function(i){G(e);let o=I(2);return W(o.onIntervalChange(+i.target.value))}),g(),p(7,"small",23),v(8," A countdown will appear on the Today screen showing time until next feeding "),g()(),p(9,"div",8)(10,"label",9)(11,"input",10),$("change",function(i){G(e);let o=I(2);return W(o.onToggleNotifications(i.target.checked))}),g(),b(12,"span",11),p(13,"span",12),v(14," Enable Browser Notifications "),g()(),p(15,"small",23),v(16," Get browser notifications when it's time to feed "),g()(),de(17,HO,9,9)}if(n&2){let e=I(2);_(6),F("value",e.intervalHours()),_(5),F("checked",e.notificationsToggleEnabled()),_(6),fe(e.notificationsToggleEnabled()?17:-1)}}function qO(n,t){n&1&&(b(0,"i",4),p(1,"span"),v(2,"Saving..."),g())}function GO(n,t){n&1&&(b(0,"i",31),p(1,"span"),v(2,"Save Settings"),g())}function WO(n,t){if(n&1&&(p(0,"div",32),b(1,"i",26),v(2),g()),n&2){let e=I(2);ae("success",e.saveMessage().includes("success"))("error",e.saveMessage().includes("Failed")),_(),F("ngClass",e.saveMessage().includes("success")?"fa-check-circle":"fa-exclamation-circle"),_(),Q(" ",e.saveMessage()," ")}}function KO(n,t){if(n&1){let e=_e();p(0,"div",5)(1,"h3"),b(2,"i",6),v(3," Feeding Interval Reminder"),g(),p(4,"p",7),v(5," Track the time between feedings and get reminded when it's time to feed. "),g(),p(6,"div",8)(7,"label",9)(8,"input",10),$("change",function(i){G(e);let o=I();return W(o.onToggleInterval(i.target.checked))}),g(),b(9,"span",11),p(10,"span",12),v(11," Enable Feeding Interval "),g()()(),de(12,zO,18,3),g(),p(13,"div",13)(14,"button",14),$("click",function(){G(e);let i=I();return W(i.onSave())}),de(15,qO,3,0)(16,GO,3,0),g()(),de(17,WO,3,6,"div",15),p(18,"div",16)(19,"button",17),$("click",function(){G(e);let i=I();return W(i.logout())}),b(20,"i",18),p(21,"span"),v(22,"Logout"),g()()()}if(n&2){let e=I();_(8),F("checked",e.intervalEnabled()),_(4),fe(e.intervalEnabled()?12:-1),_(2),F("disabled",e.isSaving()),_(),fe(e.isSaving()?15:16),_(2),fe(e.saveMessage()?17:-1)}}var Iu=class n{settingsService=C(Kn);notificationService=C(Yn);authService=C(Fe);isLoading=R(!0);intervalEnabled=R(!1);intervalHours=R(3);notificationsToggleEnabled=R(!1);isSaving=R(!1);saveMessage=R("");notificationsSupported=R(!1);notificationPermission=R("default");notificationsEnabled=Ve(()=>this.notificationPermission()==="granted"&&this.intervalEnabled());constructor(){qe(()=>{if(this.settingsService.settings()){let e=this.settingsService.getFeedingInterval();e===null?(this.intervalEnabled.set(!1),this.intervalHours.set(this.settingsService.getDefaultInterval())):(this.intervalEnabled.set(!0),this.intervalHours.set(e)),this.notificationsToggleEnabled.set(this.settingsService.areNotificationsEnabled()),this.isLoading.set(!1)}})}ngOnInit(){this.notificationsSupported.set("Notification"in window),"Notification"in window&&this.notificationPermission.set(Notification.permission)}async onSave(){this.isSaving.set(!0),this.saveMessage.set("");let t=this.intervalEnabled()?this.intervalHours():null,e=await this.settingsService.updateFeedingInterval(t),r=await this.settingsService.updateNotificationsEnabled(this.notificationsToggleEnabled());if(this.isSaving.set(!1),!e||!r){this.saveMessage.set("Failed to save settings. Please try again."),setTimeout(()=>this.saveMessage.set(""),5e3);return}if(this.intervalEnabled()&&this.notificationsToggleEnabled()&&this.notificationsSupported()){let i=await this.notificationService.requestPermission();if(this.notificationPermission.set(Notification.permission),!i&&this.notificationPermission()!=="granted"){this.saveMessage.set("Settings saved, but notifications are blocked. Enable them in your browser settings."),setTimeout(()=>this.saveMessage.set(""),5e3);return}}this.saveMessage.set("Settings saved successfully!"),setTimeout(()=>this.saveMessage.set(""),3e3)}onToggleInterval(t){this.intervalEnabled.set(t)}onIntervalChange(t){t<.5&&(t=.5),t>24&&(t=24),this.intervalHours.set(t)}onToggleNotifications(t){this.notificationsToggleEnabled.set(t)}async testNotification(){let t=await this.notificationService.testNotification();"Notification"in window&&this.notificationPermission.set(Notification.permission),t&&this.notificationPermission()==="granted"?(this.saveMessage.set("Test notification sent! If you don't see it, check your browser's notification settings or system Do Not Disturb mode."),setTimeout(()=>this.saveMessage.set(""),5e3)):this.notificationPermission()==="denied"?(this.saveMessage.set("Notifications are blocked. Please enable them in your browser settings (usually in the address bar)."),setTimeout(()=>this.saveMessage.set(""),5e3)):this.notificationPermission()==="default"?(this.saveMessage.set("Please allow notifications when prompted by your browser."),setTimeout(()=>this.saveMessage.set(""),5e3)):(this.saveMessage.set("Failed to send notification. Please try again or check your browser settings."),setTimeout(()=>this.saveMessage.set(""),5e3))}getNotificationStatusText(){if(!this.notificationsSupported())return"Browser notifications are not supported on this device.";let t=this.notificationPermission();return t==="granted"?this.intervalEnabled()?"\u2713 Notifications enabled and working":"Enable interval to receive notifications":t==="denied"?"\u2717 Notifications blocked by browser":'Click "Save Settings" to enable notifications'}async logout(){await this.authService.signOut()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=Ce({type:n,selectors:[["app-settings"]],decls:7,vars:1,consts:[[1,"page-container"],[1,"page-header"],[1,"fas","fa-cog"],[1,"loading-container"],[1,"fas","fa-spinner","fa-spin"],[1,"settings-card"],[1,"fas","fa-bell"],[1,"settings-description"],[1,"form-group"],[1,"toggle-label"],["type","checkbox",1,"toggle-input",3,"change","checked"],[1,"toggle-switch"],[1,"toggle-text"],[1,"form-actions"],[1,"btn","btn-primary",3,"click","disabled"],[1,"save-message",3,"success","error"],[1,"logout-section"],[1,"btn","btn-logout",3,"click"],[1,"fas","fa-sign-out-alt"],["for","interval-hours"],[1,"fas","fa-clock"],[1,"unit"],["id","interval-hours","type","number","min","0.5","max","24","step","0.5","placeholder","3",1,"form-control",3,"input","value"],[1,"form-hint"],[1,"notification-status"],[1,"status-indicator"],[1,"fas",3,"ngClass"],[1,"status-text"],["type","button",1,"btn","btn-secondary","test-btn"],["type","button",1,"btn","btn-secondary","test-btn",3,"click"],[1,"fas","fa-vial"],[1,"fas","fa-save"],[1,"save-message"]],template:function(e,r){e&1&&(p(0,"div",0)(1,"div",1)(2,"h2"),b(3,"i",2),v(4," Settings"),g()(),de(5,$O,4,0,"div",3)(6,KO,23,5),g()),e&2&&(_(5),fe(r.isLoading()?5:6))},dependencies:[st,xr,Hw],styles:['.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;padding:3rem 1.5rem;background:radial-gradient(circle at top left,#d6bdff26,#191a27fa);border-radius:20px;box-shadow:0 12px 32px #00000080,0 0 0 1px #d6bdff4d;border:2px solid rgba(214,189,255,.25)}.loading-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;color:var(--accent-lavender);filter:drop-shadow(0 2px 8px rgba(214,189,255,.4))}.loading-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-light);font-weight:500}.settings-card[_ngcontent-%COMP%]{background:radial-gradient(circle at top left,#d6bdff26,#191a27fa);padding:1.5rem;border-radius:20px;box-shadow:0 12px 32px #00000080,0 0 0 1px #d6bdff4d;border:2px solid rgba(214,189,255,.25);transition:all .3s cubic-bezier(.2,0,.2,1)}.settings-card[_ngcontent-%COMP%]:hover{border-color:#d6bdff66;box-shadow:0 16px 40px #0009,0 0 0 1px #d6bdff66,0 0 40px #d6bdff26;transform:translateY(-2px)}.settings-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:.75rem;color:#fff;font-size:1.15rem}.settings-card[_ngcontent-%COMP%]   .settings-description[_ngcontent-%COMP%]{color:var(--text-light);margin:0 0 1.5rem;font-size:.9rem;line-height:1.5}.toggle-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;cursor:pointer;-webkit-user-select:none;user-select:none;padding:.5rem 0}.toggle-input[_ngcontent-%COMP%]{position:absolute;opacity:0;pointer-events:none}.toggle-input[_ngcontent-%COMP%]:checked + .toggle-switch[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--accent-lavender),var(--accent-beige));box-shadow:0 0 12px #d6bdff66}.toggle-input[_ngcontent-%COMP%]:checked + .toggle-switch[_ngcontent-%COMP%]:before{transform:translate(26px)}.toggle-switch[_ngcontent-%COMP%]{position:relative;width:54px;height:30px;background:linear-gradient(135deg,#222434,#1f2130);border-radius:15px;transition:all .3s cubic-bezier(.2,0,.2,1);border:2px solid rgba(214,189,255,.2);box-shadow:inset 0 2px 6px #0000004d}.toggle-switch[_ngcontent-%COMP%]:before{content:"";position:absolute;width:24px;height:24px;border-radius:50%;background:linear-gradient(135deg,var(--accent-beige),var(--accent-peach));top:1px;left:2px;transition:transform .3s cubic-bezier(.2,0,.2,1);box-shadow:0 3px 8px #0006}.toggle-text[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--accent-beige);text-transform:uppercase;letter-spacing:.5px;font-size:.9rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;margin-bottom:.625rem;color:var(--accent-beige);font-weight:700;font-size:.95rem;text-transform:uppercase;letter-spacing:.5px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--accent-lavender);filter:drop-shadow(0 2px 4px rgba(214,189,255,.3))}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{text-transform:none;font-weight:500;color:var(--text-light)}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;font-size:1rem;font-weight:500;color:#fff;background:linear-gradient(135deg,#2a2d4199,#23253799);border:2px solid rgba(214,189,255,.15);border-radius:14px;transition:all .25s cubic-bezier(.2,0,.2,1);box-shadow:inset 0 2px 6px #0000004d}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--text-light);opacity:.6}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:hover{border-color:#d6bdff4d;background:linear-gradient(135deg,#2d3046b3,#26283ab3)}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-lavender);background:linear-gradient(135deg,#32354bcc,#2a2d3fcc);box-shadow:inset 0 2px 6px #0000004d,0 0 0 3px #d6bdff33,0 4px 16px #d6bdff4d;transform:translateY(-1px)}.form-group[_ngcontent-%COMP%]   .form-hint[_ngcontent-%COMP%]{display:block;margin-top:.5rem;color:var(--text-light);font-size:.85rem;font-style:italic}.notification-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;background:linear-gradient(135deg,#22243499,#1f213099);border:2px solid rgba(214,189,255,.15);border-radius:12px;margin-top:1rem}.notification-status[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#e8b4b84d,#d4a0a44d);border:2px solid rgba(232,180,184,.4);transition:all .3s ease}.notification-status[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--danger-color)}.notification-status[_ngcontent-%COMP%]   .status-indicator.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#b8d4c84d,#98c0b44d);border-color:#b8d4c880;box-shadow:0 0 16px #b8d4c84d}.notification-status[_ngcontent-%COMP%]   .status-indicator.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--success-color);animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.notification-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.25rem}.notification-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-dark);font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.notification-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-light)}.notification-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   span.success[_ngcontent-%COMP%]{color:var(--success-color);font-weight:600}.notification-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   span.warning[_ngcontent-%COMP%]{color:var(--accent-peach);font-weight:600}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.8}}.test-btn[_ngcontent-%COMP%]{width:100%;margin-top:1rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-top:1.5rem}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1;border-radius:12px;padding:.875rem 1.5rem;font-size:1rem;font-weight:600}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.save-message[_ngcontent-%COMP%]{margin-top:1rem;padding:.875rem 1.25rem;border-radius:12px;display:flex;align-items:center;gap:.625rem;font-size:.9rem;font-weight:600;animation:_ngcontent-%COMP%_slideIn .3s cubic-bezier(.2,0,.2,1)}.save-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.save-message.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#b8d4c840,#98c0b440);color:var(--success-color);border:2px solid rgba(184,212,200,.4);box-shadow:0 4px 12px #b8d4c833}.save-message.error[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e8b4b840,#d4a0a440);color:var(--danger-color);border:2px solid rgba(232,180,184,.4);box-shadow:0 4px 12px #e8b4b833}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}.logout-section[_ngcontent-%COMP%]{margin-top:2rem;padding-top:2rem;border-top:2px solid rgba(214,189,255,.15)}.logout-section[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,#e8b4b84d,#d4a0a44d);border:2px solid rgba(232,180,184,.4);color:#e8b4b8;border-radius:12px;padding:.875rem 1.5rem;font-size:1rem;font-weight:600;display:flex;align-items:center;justify-content:center;gap:.625rem;cursor:pointer;transition:all .3s cubic-bezier(.2,0,.2,1);box-shadow:0 4px 12px #e8b4b833}.logout-section[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;filter:drop-shadow(0 2px 4px rgba(232,180,184,.3))}.logout-section[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e8b4b866,#d4a0a466);border-color:#e8b4b899;transform:translateY(-2px);box-shadow:0 8px 20px #e8b4b84d;color:#ffc4c8}.logout-section[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 8px #e8b4b833}@media(min-width:768px){.settings-card[_ngcontent-%COMP%]{padding:2rem}.form-actions[_ngcontent-%COMP%]{gap:1rem}.logout-section[_ngcontent-%COMP%]{margin-top:2.5rem;padding-top:2.5rem}}']})};function YO(n,t){if(n&1&&(p(0,"div",13),b(1,"i",20),v(2),g()),n&2){let e=I(2);_(2),Q(" ",e.errorMessage()," ")}}function ZO(n,t){if(n&1&&(p(0,"div",14),b(1,"i",21),v(2),g()),n&2){let e=I(2);_(2),Q(" ",e.successMessage()," ")}}function QO(n,t){if(n&1){let e=_e();p(0,"form",6),$("ngSubmit",function(){G(e);let i=I();return W(i.onForgotPassword())}),p(1,"h2"),b(2,"i",7),v(3," Reset Password "),g(),p(4,"p",8),v(5,"Enter your email address and we'll send you a link to reset your password."),g(),p(6,"div",9)(7,"label",10),b(8,"i",11),v(9," EMAIL "),g(),b(10,"input",12),g(),de(11,YO,3,1,"div",13),de(12,ZO,3,1,"div",14),p(13,"button",15),b(14,"i",16),v(15),g(),p(16,"div",17)(17,"button",18),$("click",function(){G(e);let i=I();return W(i.backToLogin())}),b(18,"i",19),v(19," Back to Login "),g()()()}if(n&2){let e,r=I();F("formGroup",r.forgotPasswordForm),_(10),ae("error",((e=r.forgotPasswordForm.get("email"))==null?null:e.invalid)&&((e=r.forgotPasswordForm.get("email"))==null?null:e.touched)),_(),fe(r.errorMessage()?11:-1),_(),fe(r.successMessage()?12:-1),_(),F("disabled",r.isLoading()),_(),ae("fa-spinner",r.isLoading())("fa-spin",r.isLoading())("fa-paper-plane",!r.isLoading()),_(),Q(" ",r.isLoading()?"Sending...":"Send Reset Link"," ")}}function JO(n,t){if(n&1&&(p(0,"div",13),b(1,"i",20),v(2),g()),n&2){let e=I(2);_(2),Q(" ",e.errorMessage()," ")}}function XO(n,t){if(n&1){let e=_e();p(0,"form",6),$("ngSubmit",function(){G(e);let i=I();return W(i.onLogin())}),p(1,"h2"),b(2,"i",22),v(3," Welcome Back "),g(),p(4,"div",9)(5,"label",23),b(6,"i",24),v(7," USERNAME "),g(),b(8,"input",25),g(),p(9,"div",9)(10,"label",26),b(11,"i",27),v(12," PASSWORD "),g(),b(13,"input",28),g(),de(14,JO,3,1,"div",13),p(15,"button",15),b(16,"i",16),v(17),g(),p(18,"div",29)(19,"button",18),$("click",function(){G(e);let i=I();return W(i.showForgotPassword())}),v(20," Forgot password? "),g()(),p(21,"div",17)(22,"span"),v(23,"Don't have an account?"),g(),p(24,"button",18),$("click",function(){G(e);let i=I();return W(i.toggleMode())}),v(25," Sign up here "),g()()()}if(n&2){let e,r,i=I();F("formGroup",i.loginForm),_(8),ae("error",((e=i.loginForm.get("username"))==null?null:e.invalid)&&((e=i.loginForm.get("username"))==null?null:e.touched)),_(5),ae("error",((r=i.loginForm.get("password"))==null?null:r.invalid)&&((r=i.loginForm.get("password"))==null?null:r.touched)),_(),fe(i.errorMessage()?14:-1),_(),F("disabled",i.isLoading()),_(),ae("fa-spinner",i.isLoading())("fa-spin",i.isLoading())("fa-sign-in-alt",!i.isLoading()),_(),Q(" ",i.isLoading()?"Signing in...":"Sign In"," ")}}function eN(n,t){if(n&1&&(p(0,"div",13),b(1,"i",20),v(2),g()),n&2){let e=I(2);_(2),Q(" ",e.errorMessage()," ")}}function tN(n,t){if(n&1){let e=_e();p(0,"form",6),$("ngSubmit",function(){G(e);let i=I();return W(i.onSignup())}),p(1,"h2"),b(2,"i",30),v(3," Create Account "),g(),p(4,"div",9)(5,"label",31),b(6,"i",24),v(7," USERNAME "),g(),b(8,"input",32),g(),p(9,"div",9)(10,"label",33),b(11,"i",11),v(12," EMAIL "),g(),b(13,"input",34),g(),p(14,"div",9)(15,"label",35),b(16,"i",27),v(17," PASSWORD "),g(),b(18,"input",36),g(),p(19,"div",9)(20,"label",37),b(21,"i",27),v(22," CONFIRM PASSWORD "),g(),b(23,"input",38),g(),de(24,eN,3,1,"div",13),p(25,"button",15),b(26,"i",16),v(27),g(),p(28,"div",17)(29,"span"),v(30,"Already have an account?"),g(),p(31,"button",18),$("click",function(){G(e);let i=I();return W(i.toggleMode())}),v(32," Sign in here "),g()()()}if(n&2){let e,r,i,o,s=I();F("formGroup",s.signupForm),_(8),ae("error",((e=s.signupForm.get("username"))==null?null:e.invalid)&&((e=s.signupForm.get("username"))==null?null:e.touched)),_(5),ae("error",((r=s.signupForm.get("email"))==null?null:r.invalid)&&((r=s.signupForm.get("email"))==null?null:r.touched)),_(5),ae("error",((i=s.signupForm.get("password"))==null?null:i.invalid)&&((i=s.signupForm.get("password"))==null?null:i.touched)),_(5),ae("error",((o=s.signupForm.get("confirmPassword"))==null?null:o.invalid)&&((o=s.signupForm.get("confirmPassword"))==null?null:o.touched)),_(),fe(s.errorMessage()?24:-1),_(),F("disabled",s.isLoading()),_(),ae("fa-spinner",s.isLoading())("fa-spin",s.isLoading())("fa-user-plus",!s.isLoading()),_(),Q(" ",s.isLoading()?"Creating account...":"Create Account"," ")}}var xu=class n{constructor(t,e,r){this.fb=t;this.authService=e;this.router=r;this.authService.isAuthenticated()&&this.router.navigate(["/today"]),this.loginForm=this.fb.group({username:["",[pe.required,pe.minLength(3)]],password:["",[pe.required,pe.minLength(6)]]}),this.signupForm=this.fb.group({username:["",[pe.required,pe.minLength(3)]],email:["",[pe.required,pe.email]],password:["",[pe.required,pe.minLength(6)]],confirmPassword:["",[pe.required]]}),this.forgotPasswordForm=this.fb.group({email:["",[pe.required,pe.email]]})}loginForm;signupForm;forgotPasswordForm;isSignupMode=R(!1);isForgotPasswordMode=R(!1);errorMessage=R("");successMessage=R("");isLoading=R(!1);toggleMode(){this.isSignupMode.set(!this.isSignupMode()),this.isForgotPasswordMode.set(!1),this.errorMessage.set(""),this.successMessage.set(""),this.loginForm.reset(),this.signupForm.reset(),this.forgotPasswordForm.reset()}showForgotPassword(){this.isForgotPasswordMode.set(!0),this.isSignupMode.set(!1),this.errorMessage.set(""),this.successMessage.set(""),this.forgotPasswordForm.reset()}backToLogin(){this.isForgotPasswordMode.set(!1),this.errorMessage.set(""),this.successMessage.set("")}async onLogin(){if(this.loginForm.invalid){this.errorMessage.set("Please fill in all fields correctly");return}this.isLoading.set(!0),this.errorMessage.set("");let{username:t,password:e}=this.loginForm.value,r=await this.authService.signIn(t,e);this.isLoading.set(!1),r.success||this.errorMessage.set(r.error||"Login failed. Please try again.")}async onSignup(){if(this.signupForm.invalid){this.errorMessage.set("Please fill in all fields correctly");return}let{password:t,confirmPassword:e}=this.signupForm.value;if(t!==e){this.errorMessage.set("Passwords do not match");return}this.isLoading.set(!0),this.errorMessage.set("");let{username:r,email:i}=this.signupForm.value,o=await this.authService.signUp(r,i,t);this.isLoading.set(!1),o.success?(this.errorMessage.set(""),this.isSignupMode.set(!1),this.loginForm.patchValue({username:r,password:t}),await this.onLogin()):this.errorMessage.set(o.error||"Signup failed. Please try again.")}async onForgotPassword(){if(this.forgotPasswordForm.invalid){this.errorMessage.set("Please enter a valid email");return}this.isLoading.set(!0),this.errorMessage.set(""),this.successMessage.set("");let{email:t}=this.forgotPasswordForm.value,e=await this.authService.resetPassword(t);this.isLoading.set(!1),e.success?(this.successMessage.set("Password reset email sent! Check your inbox."),this.forgotPasswordForm.reset()):this.errorMessage.set(e.error||"Failed to send reset email. Please try again.")}static \u0275fac=function(e){return new(e||n)(P(co),P(Fe),P(We))};static \u0275cmp=Ce({type:n,selectors:[["app-login"]],decls:11,vars:3,consts:[[1,"login-container"],[1,"login-card"],[1,"logo-section"],[1,"fas","fa-baby-carriage"],[1,"subtitle"],[1,"auth-form",3,"formGroup"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"fas","fa-key"],[1,"reset-info"],[1,"form-group"],["for","reset-email"],[1,"fas","fa-envelope"],["type","email","id","reset-email","formControlName","email","placeholder","Enter your email",1,"form-control"],[1,"error-message"],[1,"success-message"],["type","submit",1,"btn-primary",3,"disabled"],[1,"fas"],[1,"toggle-mode"],["type","button",1,"btn-link",3,"click"],[1,"fas","fa-arrow-left"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-check-circle"],[1,"fas","fa-sign-in-alt"],["for","login-username"],[1,"fas","fa-user"],["type","text","id","login-username","formControlName","username","placeholder","Enter your username",1,"form-control"],["for","login-password"],[1,"fas","fa-lock"],["type","password","id","login-password","formControlName","password","placeholder","Enter your password",1,"form-control"],[1,"forgot-password-link"],[1,"fas","fa-user-plus"],["for","signup-username"],["type","text","id","signup-username","formControlName","username","placeholder","Choose a username",1,"form-control"],["for","signup-email"],["type","email","id","signup-email","formControlName","email","placeholder","Enter your email",1,"form-control"],["for","signup-password"],["type","password","id","signup-password","formControlName","password","placeholder","Choose a password (min 6 characters)",1,"form-control"],["for","signup-confirm-password"],["type","password","id","signup-confirm-password","formControlName","confirmPassword","placeholder","Confirm your password",1,"form-control"]],template:function(e,r){e&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),b(3,"i",3),p(4,"h1"),v(5,"Baby Feeding Tracker"),g(),p(6,"p",4),v(7,"Track your baby's feeding schedule"),g()(),de(8,QO,20,13,"form",5),de(9,XO,26,14,"form",5),de(10,tN,33,18,"form",5),g()()),e&2&&(_(8),fe(r.isForgotPasswordMode()?8:-1),_(),fe(!r.isSignupMode()&&!r.isForgotPasswordMode()?9:-1),_(),fe(r.isSignupMode()?10:-1))},dependencies:[lo,ao,Qn,oo,so,Zr,Yr],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:2rem 1rem;background:linear-gradient(135deg,#14151f,#191a27)}.login-card[_ngcontent-%COMP%]{width:100%;max-width:440px;background:radial-gradient(circle at top left,#d6bdff1f,#191a27fa);padding:2.5rem 2rem;border-radius:24px;box-shadow:0 20px 60px #0009,0 0 0 1px #d6bdff4d;border:2px solid rgba(214,189,255,.25);animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.logo-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.logo-section[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3.5rem;color:var(--accent-lavender);filter:drop-shadow(0 4px 12px rgba(214,189,255,.4));margin-bottom:1rem}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#fff;margin:0 0 .5rem;letter-spacing:.5px;display:block}.logo-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-light);margin:0;opacity:.8}.auth-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--accent-beige);margin:0 0 1.75rem;display:flex;align-items:center;gap:.75rem}.auth-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--accent-lavender);filter:drop-shadow(0 2px 4px rgba(214,189,255,.3))}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;margin-bottom:.625rem;color:var(--accent-beige);font-weight:700;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;color:var(--accent-lavender);filter:drop-shadow(0 2px 4px rgba(214,189,255,.3))}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;font-size:1rem;font-weight:500;color:#fff;background:linear-gradient(135deg,#2a2d4199,#23253799);border:2px solid rgba(214,189,255,.15);border-radius:14px;transition:all .25s cubic-bezier(.2,0,.2,1);box-shadow:inset 0 2px 6px #0000004d}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--text-light);opacity:.6}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:hover{border-color:#d6bdff4d;background:linear-gradient(135deg,#2d3046b3,#26283ab3)}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-lavender);background:linear-gradient(135deg,#32354bcc,#2a2d3fcc);box-shadow:inset 0 2px 6px #0000004d,0 0 0 3px #d6bdff33,0 4px 16px #d6bdff4d;transform:translateY(-1px)}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.error[_ngcontent-%COMP%]{border-color:#ff6b6b80}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.error[_ngcontent-%COMP%]:focus{border-color:#ff6b6bcc;box-shadow:inset 0 2px 6px #0000004d,0 0 0 3px #ff6b6b33,0 4px 16px #ff6b6b4d}.auth-form[_ngcontent-%COMP%]   .reset-info[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--text-light);font-size:.9rem;line-height:1.5;opacity:.9}.auth-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;padding:.875rem 1rem;margin-bottom:1.25rem;background:#ff6b6b26;border:2px solid rgba(255,107,107,.3);border-radius:12px;color:#ff6b6b;font-size:.9rem;font-weight:500}.auth-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.auth-form[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;padding:.875rem 1rem;margin-bottom:1.25rem;background:#6bffae26;border:2px solid rgba(107,255,174,.3);border-radius:12px;color:#6bffae;font-size:.9rem;font-weight:500}.auth-form[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.auth-form[_ngcontent-%COMP%]   .forgot-password-link[_ngcontent-%COMP%]{text-align:center;margin:1rem 0}.auth-form[_ngcontent-%COMP%]   .forgot-password-link[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{background:none;border:none;color:var(--accent-lavender);font-weight:500;font-size:.9rem;cursor:pointer;padding:0;text-decoration:none;transition:all .2s ease;opacity:.8}.auth-form[_ngcontent-%COMP%]   .forgot-password-link[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover{opacity:1;text-decoration:underline}.auth-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{width:100%;padding:1rem 1.5rem;font-size:1.05rem;font-weight:700;color:#fff;background:linear-gradient(135deg,#d6bdffe6,#a48bcde6);border:2px solid rgba(214,189,255,.5);border-radius:14px;cursor:pointer;transition:all .25s cubic-bezier(.2,0,.2,1);display:flex;align-items:center;justify-content:center;gap:.75rem;text-transform:uppercase;letter-spacing:.5px;box-shadow:0 8px 24px #d6bdff4d}.auth-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.auth-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#e0c7ff,#ae95d7);border-color:#d6bdffcc;box-shadow:0 12px 32px #d6bdff66;transform:translateY(-2px)}.auth-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0);box-shadow:0 4px 12px #d6bdff4d}.auth-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.auth-form[_ngcontent-%COMP%]   .toggle-mode[_ngcontent-%COMP%]{margin-top:1.75rem;text-align:center;font-size:.95rem;color:var(--text-light)}.auth-form[_ngcontent-%COMP%]   .toggle-mode[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:.5rem}.auth-form[_ngcontent-%COMP%]   .toggle-mode[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{background:none;border:none;color:var(--accent-lavender);font-weight:600;cursor:pointer;padding:0;text-decoration:underline;transition:all .2s ease}.auth-form[_ngcontent-%COMP%]   .toggle-mode[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover{color:#e0c7ff;text-decoration:none}@media(max-width:480px){.login-card[_ngcontent-%COMP%]{padding:2rem 1.5rem}.logo-section[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.auth-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.35rem}}"]})};function nN(n,t){n&1&&(p(0,"div",5),b(1,"i",7),p(2,"p"),v(3,"Verifying reset link..."),g()())}function rN(n,t){if(n&1){let e=_e();p(0,"div",8),b(1,"i",9),v(2),g(),p(3,"div",10)(4,"button",11),$("click",function(){G(e);let i=I();return W(i.goToLogin())}),b(5,"i",12),v(6," Back to Login "),g()()}if(n&2){let e=I();_(2),Q(" ",e.errorMessage()," ")}}function iN(n,t){if(n&1&&(p(0,"div",8),b(1,"i",9),v(2),g()),n&2){let e=I(2);_(2),Q(" ",e.errorMessage()," ")}}function oN(n,t){if(n&1&&(p(0,"div",20),b(1,"i",23),v(2),g()),n&2){let e=I(2);_(2),Q(" ",e.successMessage()," ")}}function sN(n,t){if(n&1){let e=_e();p(0,"form",13),$("ngSubmit",function(){G(e);let i=I();return W(i.onResetPassword())}),p(1,"div",14)(2,"label",15),b(3,"i",16),v(4," NEW PASSWORD "),g(),b(5,"input",17),g(),p(6,"div",14)(7,"label",18),b(8,"i",16),v(9," CONFIRM PASSWORD "),g(),b(10,"input",19),g(),de(11,iN,3,1,"div",8),de(12,oN,3,1,"div",20),p(13,"button",21),b(14,"i",22),v(15),g(),p(16,"div",10)(17,"button",11),$("click",function(){G(e);let i=I();return W(i.goToLogin())}),b(18,"i",12),v(19," Back to Login "),g()()()}if(n&2){let e,r,i=I();F("formGroup",i.resetForm),_(5),ae("error",((e=i.resetForm.get("password"))==null?null:e.invalid)&&((e=i.resetForm.get("password"))==null?null:e.touched)),_(5),ae("error",((r=i.resetForm.get("confirmPassword"))==null?null:r.invalid)&&((r=i.resetForm.get("confirmPassword"))==null?null:r.touched)),_(),fe(i.errorMessage()?11:-1),_(),fe(i.successMessage()?12:-1),_(),F("disabled",i.isLoading()),_(),ae("fa-spinner",i.isLoading())("fa-spin",i.isLoading())("fa-check",!i.isLoading()),_(),Q(" ",i.isLoading()?"Updating...":"Update Password"," ")}}var Mu=class n{constructor(t,e,r,i){this.fb=t;this.authService=e;this.router=r;this.route=i;this.resetForm=this.fb.group({password:["",[pe.required,pe.minLength(6)]],confirmPassword:["",[pe.required]]})}resetForm;errorMessage=R("");successMessage=R("");isLoading=R(!1);hasValidToken=R(!1);async ngOnInit(){setTimeout(async()=>{let t=await this.authService.getSession();!t||!t.user?(this.errorMessage.set("Invalid or expired reset link. Please request a new one."),this.hasValidToken.set(!1)):this.hasValidToken.set(!0)},500)}async onResetPassword(){if(this.resetForm.invalid){this.errorMessage.set("Please fill in all fields correctly");return}let{password:t,confirmPassword:e}=this.resetForm.value;if(t!==e){this.errorMessage.set("Passwords do not match");return}this.isLoading.set(!0),this.errorMessage.set(""),this.successMessage.set("");let r=await this.authService.updatePassword(t);this.isLoading.set(!1),r.success?(this.successMessage.set("Password updated successfully! Redirecting to login..."),this.resetForm.reset(),setTimeout(()=>{this.authService.signOut()},2e3)):this.errorMessage.set(r.error||"Failed to update password. Please try again.")}goToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||n)(P(co),P(Fe),P(We),P(Ht))};static \u0275cmp=Ce({type:n,selectors:[["app-reset-password"]],decls:11,vars:3,consts:[[1,"reset-password-container"],[1,"reset-password-card"],[1,"logo-section"],[1,"fas","fa-key"],[1,"subtitle"],[1,"loading-state"],[1,"reset-form",3,"formGroup"],[1,"fas","fa-spinner","fa-spin"],[1,"error-message"],[1,"fas","fa-exclamation-circle"],[1,"back-link"],["type","button",1,"btn-link",3,"click"],[1,"fas","fa-arrow-left"],[1,"reset-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","new-password"],[1,"fas","fa-lock"],["type","password","id","new-password","formControlName","password","placeholder","Enter new password (min 6 characters)",1,"form-control"],["for","confirm-password"],["type","password","id","confirm-password","formControlName","confirmPassword","placeholder","Confirm your new password",1,"form-control"],[1,"success-message"],["type","submit",1,"btn-primary",3,"disabled"],[1,"fas"],[1,"fas","fa-check-circle"]],template:function(e,r){e&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),b(3,"i",3),p(4,"h1"),v(5,"Reset Your Password"),g(),p(6,"p",4),v(7,"Enter your new password below"),g()(),de(8,nN,4,0,"div",5),de(9,rN,7,1),de(10,sN,20,15,"form",6),g()()),e&2&&(_(8),fe(!r.hasValidToken()&&!r.errorMessage()?8:-1),_(),fe(r.errorMessage()&&!r.hasValidToken()?9:-1),_(),fe(r.hasValidToken()?10:-1))},dependencies:[lo,ao,Qn,oo,so,Zr,Yr],styles:[".reset-password-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:2rem 1rem;background:linear-gradient(135deg,#14151f,#191a27)}.reset-password-card[_ngcontent-%COMP%]{width:100%;max-width:440px;background:radial-gradient(circle at top left,#d6bdff1f,#191a27fa);padding:2.5rem 2rem;border-radius:24px;box-shadow:0 20px 60px #0009,0 0 0 1px #d6bdff4d;border:2px solid rgba(214,189,255,.25);animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.logo-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.logo-section[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3.5rem;color:var(--accent-lavender);filter:drop-shadow(0 4px 12px rgba(214,189,255,.4));margin-bottom:1rem}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#fff;margin:0 0 .5rem;letter-spacing:.5px;display:block}.logo-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-light);margin:0;opacity:.8}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 2rem;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3.5rem;color:var(--accent-lavender);margin-bottom:1.5rem;filter:drop-shadow(0 4px 20px rgba(214,189,255,.6));animation:_ngcontent-%COMP%_spin 1.5s linear infinite}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.05rem;color:var(--text-light);font-weight:500;letter-spacing:.3px;margin:0}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.85}}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1.25rem;margin-bottom:1.5rem;background:linear-gradient(135deg,#ff6b6b2e,#ff50501f);border:2px solid rgba(255,107,107,.4);border-radius:16px;color:#ff8787;font-size:.95rem;font-weight:600;line-height:1.5;box-shadow:0 4px 20px #ff6b6b26,inset 0 1px #ffffff1a;animation:_ngcontent-%COMP%_slideIn .4s ease-out}.error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;flex-shrink:0;filter:drop-shadow(0 2px 8px rgba(255,107,107,.5))}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.back-link[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem}.back-link[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d6bdff26,#a48bcd1a);border:2px solid rgba(214,189,255,.3);border-radius:12px;padding:.875rem 1.5rem;color:var(--accent-lavender);font-weight:700;font-size:.95rem;cursor:pointer;text-decoration:none;transition:all .25s cubic-bezier(.2,0,.2,1);display:inline-flex;align-items:center;gap:.625rem;text-transform:uppercase;letter-spacing:.5px;box-shadow:0 4px 12px #d6bdff33}.back-link[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;transition:transform .25s ease}.back-link[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#d6bdff40,#a48bcd26);border-color:#d6bdff80;color:#e0c7ff;box-shadow:0 6px 20px #d6bdff4d;transform:translateY(-2px)}.back-link[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:translate(-3px)}.back-link[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 8px #d6bdff33}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;margin-bottom:.625rem;color:var(--accent-beige);font-weight:700;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;color:var(--accent-lavender);filter:drop-shadow(0 2px 4px rgba(214,189,255,.3))}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;font-size:1rem;font-weight:500;color:#fff;background:linear-gradient(135deg,#2a2d4199,#23253799);border:2px solid rgba(214,189,255,.15);border-radius:14px;transition:all .25s cubic-bezier(.2,0,.2,1);box-shadow:inset 0 2px 6px #0000004d}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--text-light);opacity:.6}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:hover{border-color:#d6bdff4d;background:linear-gradient(135deg,#2d3046b3,#26283ab3)}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-lavender);background:linear-gradient(135deg,#32354bcc,#2a2d3fcc);box-shadow:inset 0 2px 6px #0000004d,0 0 0 3px #d6bdff33,0 4px 16px #d6bdff4d;transform:translateY(-1px)}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.error[_ngcontent-%COMP%]{border-color:#ff6b6b80}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.error[_ngcontent-%COMP%]:focus{border-color:#ff6b6bcc;box-shadow:inset 0 2px 6px #0000004d,0 0 0 3px #ff6b6b33,0 4px 16px #ff6b6b4d}.reset-form[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;padding:.875rem 1rem;margin-bottom:1.25rem;background:#6bffae26;border:2px solid rgba(107,255,174,.3);border-radius:12px;color:#6bffae;font-size:.9rem;font-weight:500}.reset-form[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.reset-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{width:100%;padding:1rem 1.5rem;font-size:1.05rem;font-weight:700;color:#fff;background:linear-gradient(135deg,#d6bdffe6,#a48bcde6);border:2px solid rgba(214,189,255,.5);border-radius:14px;cursor:pointer;transition:all .25s cubic-bezier(.2,0,.2,1);display:flex;align-items:center;justify-content:center;gap:.75rem;text-transform:uppercase;letter-spacing:.5px;box-shadow:0 8px 24px #d6bdff4d}.reset-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.reset-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#e0c7ff,#ae95d7);border-color:#d6bdffcc;box-shadow:0 12px 32px #d6bdff66;transform:translateY(-2px)}.reset-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0);box-shadow:0 4px 12px #d6bdff4d}.reset-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media(max-width:480px){.reset-password-card[_ngcontent-%COMP%]{padding:2rem 1.5rem}.logo-section[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}"]})};var na=async(n,t)=>{let e=C(Fe),r=C(We);return await e.getSession()?!0:(r.navigate(["/login"],{queryParams:{returnUrl:t.url}}),!1)};var zw=[{path:"login",component:xu},{path:"reset-password",component:Mu},{path:"",redirectTo:"/today",pathMatch:"full"},{path:"today",component:Eu,canActivate:[na]},{path:"log",component:Du,canActivate:[na]},{path:"statistics",component:Su,canActivate:[na]},{path:"settings",component:Iu,canActivate:[na]},{path:"**",redirectTo:"/login"}];var qw={providers:[df(),lp(zw)]};function aN(n,t){n&1&&(p(0,"nav",2)(1,"a",3),b(2,"i",4),p(3,"span"),v(4,"Today"),g()(),p(5,"a",5),b(6,"i",6),p(7,"span"),v(8,"Log"),g()(),p(9,"a",7),b(10,"i",8),p(11,"span"),v(12,"Stats"),g()(),p(13,"a",9),b(14,"i",10),p(15,"span"),v(16,"Settings"),g()()())}var Tu=class n{authService=C(Fe);router=C(We);notificationService=C(Yn);title="Baby Feeding Tracker";currentUrl=Gb(this.router.events.pipe(oe(()=>this.router.url)),{initialValue:this.router.url});showNavigation=Ve(()=>{let t=this.currentUrl(),e=["/login","/reset-password"];return this.authService.isAuthenticated()&&!e.includes(t)});constructor(){this.registerServiceWorker()}registerServiceWorker(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(t=>{console.log("ServiceWorker registration successful:",t.scope)}).catch(t=>{console.log("ServiceWorker registration failed:",t)})})}async logout(){await this.authService.signOut()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=Ce({type:n,selectors:[["app-root"]],decls:4,vars:3,consts:[[1,"app-container"],[1,"app-content"],[1,"app-nav"],["routerLink","/today","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-home"],["routerLink","/log","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-calendar-days"],["routerLink","/statistics","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-chart-line"],["routerLink","/settings","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-cog"]],template:function(e,r){e&1&&(p(0,"div",0)(1,"main",1),b(2,"router-outlet"),g(),de(3,aN,17,0,"nav",2),g()),e&2&&(_(),ae("no-header",!r.showNavigation()),_(2),fe(r.showNavigation()?3:-1))},dependencies:[Is,Bi,cp],styles:[".app-container[_ngcontent-%COMP%]{height:100vh;height:100dvh;max-height:100vh;max-height:100dvh;display:flex;flex-direction:column;overflow:hidden}.app-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#35394afa,#252930fa);color:var(--primary-color);padding:.5rem 1rem;text-align:center;box-shadow:0 2px 12px #0006;border-bottom:1px solid var(--border-color);display:flex;align-items:center;justify-content:space-between;gap:.75rem;flex-shrink:0;z-index:99}.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;text-shadow:0 2px 10px rgba(232,213,196,.2);flex:1;font-weight:700}.logout-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d6bdff26,#a48bcd26);border:1.5px solid rgba(214,189,255,.3);color:var(--accent-lavender);padding:.375rem .75rem;border-radius:10px;cursor:pointer;font-weight:600;font-size:.75rem;text-transform:uppercase;letter-spacing:.3px;display:flex;align-items:center;gap:.375rem;transition:all .25s cubic-bezier(.2,0,.2,1);box-shadow:0 2px 8px #0000004d}.logout-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem}.logout-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#d6bdff40,#a48bcd40);border-color:#d6bdff80;box-shadow:0 4px 12px #d6bdff4d;transform:translateY(-1px)}.logout-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 8px #0000004d}.app-nav[_ngcontent-%COMP%]{display:flex;background:linear-gradient(180deg,#222434fa,#191a27fa);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);box-shadow:0 -4px 16px #0006;border-top:1px solid var(--border-subtle);padding:.375rem 0 calc(.375rem + env(safe-area-inset-bottom));flex-shrink:0;z-index:100}.nav-link[_ngcontent-%COMP%]{flex:1;padding:.5rem .375rem;text-align:center;text-decoration:none;color:var(--text-light);font-weight:600;transition:all .2s cubic-bezier(.2,0,.2,1);display:flex;flex-direction:column;align-items:center;gap:.1875rem;position:relative}.nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem;transition:all .3s cubic-bezier(.2,0,.2,1)}.nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.625rem;text-transform:uppercase;letter-spacing:.3px;opacity:.8;transition:opacity .3s ease}.nav-link[_ngcontent-%COMP%]:hover{color:var(--accent-beige)}.nav-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.1)}.nav-link[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{opacity:1}.nav-link.active[_ngcontent-%COMP%]{color:var(--accent-beige)}.nav-link.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:scale(1.15);filter:drop-shadow(0 2px 8px rgba(246,224,207,.4))}.nav-link.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:1;font-weight:700}.app-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;min-height:0}.app-content.no-header[_ngcontent-%COMP%]{padding-bottom:0}@media(min-width:768px){.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.7rem}}"]})};Vh(Tu,qw).catch(n=>console.error(n));
