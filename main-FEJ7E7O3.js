var rC=Object.create;var mo=Object.defineProperty,iC=Object.defineProperties,oC=Object.getOwnPropertyDescriptor,sC=Object.getOwnPropertyDescriptors,aC=Object.getOwnPropertyNames,wg=Object.getOwnPropertySymbols,cC=Object.getPrototypeOf,Eg=Object.prototype.hasOwnProperty,lC=Object.prototype.propertyIsEnumerable;var Cg=(n,t,e)=>t in n?mo(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,D=(n,t)=>{for(var e in t||={})Eg.call(t,e)&&Cg(n,e,t[e]);if(wg)for(var e of wg(t))lC.call(t,e)&&Cg(n,e,t[e]);return n},W=(n,t)=>iC(n,sC(t));var uC=(n,t)=>()=>(n&&(t=n(n=0)),t);var nr=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),dC=(n,t)=>{for(var e in t)mo(n,e,{get:t[e],enumerable:!0})},Dg=(n,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of aC(t))!Eg.call(n,i)&&i!==e&&mo(n,i,{get:()=>t[i],enumerable:!(r=oC(t,i))||r.enumerable});return n};var fC=(n,t,e)=>(e=n!=null?rC(cC(n)):{},Dg(t||!n||!n.__esModule?mo(e,"default",{value:n,enumerable:!0}):e,n)),ei=n=>Dg(mo({},"__esModule",{value:!0}),n);var cr={};dC(cr,{__addDisposableResource:()=>cm,__assign:()=>wa,__asyncDelegator:()=>tm,__asyncGenerator:()=>Da,__asyncValues:()=>Sa,__await:()=>Kt,__awaiter:()=>S,__classPrivateFieldGet:()=>om,__classPrivateFieldIn:()=>am,__classPrivateFieldSet:()=>sm,__createBinding:()=>Ea,__decorate:()=>Hg,__disposeResources:()=>lm,__esDecorate:()=>Gg,__exportStar:()=>Qg,__extends:()=>Bg,__generator:()=>Zg,__importDefault:()=>im,__importStar:()=>rm,__makeTemplateObject:()=>nm,__metadata:()=>Yg,__param:()=>zg,__propKey:()=>Wg,__read:()=>ad,__rest:()=>dn,__rewriteRelativeImportExtension:()=>um,__runInitializers:()=>qg,__setFunctionName:()=>Kg,__spread:()=>Jg,__spreadArray:()=>em,__spreadArrays:()=>Xg,__values:()=>Ca,default:()=>MC});function Bg(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");od(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function dn(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e}function Hg(n,t,e,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,t,e,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(t,e,o):s(t,e))||o);return i>3&&o&&Object.defineProperty(t,e,o),o}function zg(n,t){return function(e,r){t(e,r,n)}}function Gg(n,t,e,r,i,o){function s(C){if(C!==void 0&&typeof C!="function")throw new TypeError("Function expected");return C}for(var a=r.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&n?r.static?n:n.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),d,h=!1,f=e.length-1;f>=0;f--){var m={};for(var y in r)m[y]=y==="access"?{}:r[y];for(var y in r.access)m.access[y]=r.access[y];m.addInitializer=function(C){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(C||null))};var E=(0,e[f])(a==="accessor"?{get:u.get,set:u.set}:u[c],m);if(a==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(d=s(E.get))&&(u.get=d),(d=s(E.set))&&(u.set=d),(d=s(E.init))&&i.unshift(d)}else(d=s(E))&&(a==="field"?i.unshift(d):u[c]=d)}l&&Object.defineProperty(l,r.name,u),h=!0}function qg(n,t,e){for(var r=arguments.length>2,i=0;i<t.length;i++)e=r?t[i].call(n,e):t[i].call(n);return r?e:void 0}function Wg(n){return typeof n=="symbol"?n:"".concat(n)}function Kg(n,t,e){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:e?"".concat(e," ",t):t})}function Yg(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)}function S(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})}function Zg(n,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(e=0)),e;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){e.label=l[1];break}if(l[0]===6&&e.label<o[1]){e.label=o[1],o=l;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(l);break}o[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(n,e)}catch(u){l=[6,u],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Qg(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&Ea(t,n,e)}function Ca(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ad(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(s)throw s.error}}return o}function Jg(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(ad(arguments[t]));return n}function Xg(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var r=Array(n),i=0,t=0;t<e;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function em(n,t,e){if(e||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return n.concat(o||Array.prototype.slice.call(t))}function Kt(n){return this instanceof Kt?(this.v=n,this):new Kt(n)}function Da(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(m){return Promise.resolve(m).then(f,d)}}function a(f,m){r[f]&&(i[f]=function(y){return new Promise(function(E,C){o.push([f,y,E,C])>1||c(f,y)})},m&&(i[f]=m(i[f])))}function c(f,m){try{l(r[f](m))}catch(y){h(o[0][3],y)}}function l(f){f.value instanceof Kt?Promise.resolve(f.value.v).then(u,d):h(o[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,m){f(m),o.shift(),o.length&&c(o[0][0],o[0][1])}}function tm(n){var t,e;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,o){t[i]=n[i]?function(s){return(e=!e)?{value:Kt(n[i](s)),done:!1}:o?o(s):s}:o}}function Sa(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof Ca=="function"?Ca(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(o){e[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}function nm(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n}function rm(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e=sd(n),r=0;r<e.length;r++)e[r]!=="default"&&Ea(t,n,e[r]);return IC(t,n),t}function im(n){return n&&n.__esModule?n:{default:n}}function om(n,t,e,r){if(e==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!r:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?r:e==="a"?r.call(n):r?r.value:t.get(n)}function sm(n,t,e,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,e):i?i.value=e:t.set(n,e),e}function am(n,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?t===n:n.has(t)}function cm(n,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],e&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),n.stack.push({value:t,dispose:r,async:e})}else e&&n.stack.push({async:!0});return t}function lm(n){function t(o){n.error=n.hasError?new xC(o,n.error,"An error was suppressed during disposal."):o,n.hasError=!0}var e,r=0;function i(){for(;e=n.stack.pop();)try{if(!e.async&&r===1)return r=0,n.stack.push(e),Promise.resolve().then(i);if(e.dispose){var o=e.dispose.call(e.value);if(e.async)return r|=2,Promise.resolve(o).then(i,function(s){return t(s),i()})}else r|=1}catch(s){t(s)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return i()}function um(n,t){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,r,i,o,s){return r?t?".jsx":".js":i&&(!o||!s)?e:i+o+"."+s.toLowerCase()+"js"}):n}var od,wa,Ea,IC,sd,xC,MC,ve=uC(()=>{"use strict";od=function(n,t){return od=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},od(n,t)};wa=function(){return wa=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},wa.apply(this,arguments)};Ea=Object.create?function(n,t,e,r){r===void 0&&(r=e);var i=Object.getOwnPropertyDescriptor(t,e);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,r,i)}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]};IC=Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t},sd=function(n){return sd=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},sd(n)};xC=typeof SuppressedError=="function"?SuppressedError:function(n,t,e){var r=new Error(e);return r.name="SuppressedError",r.error=n,r.suppressed=t,r};MC={__extends:Bg,__assign:wa,__rest:dn,__decorate:Hg,__param:zg,__esDecorate:Gg,__runInitializers:qg,__propKey:Wg,__setFunctionName:Kg,__metadata:Yg,__awaiter:S,__generator:Zg,__createBinding:Ea,__exportStar:Qg,__values:Ca,__read:ad,__spread:Jg,__spreadArrays:Xg,__spreadArray:em,__await:Kt,__asyncGenerator:Da,__asyncDelegator:tm,__asyncValues:Sa,__makeTemplateObject:nm,__importStar:rm,__importDefault:im,__classPrivateFieldGet:om,__classPrivateFieldSet:sm,__classPrivateFieldIn:am,__addDisposableResource:cm,__disposeResources:lm,__rewriteRelativeImportExtension:um}});var Cp=nr(wp=>{"use strict";Object.defineProperty(wp,"__esModule",{value:!0});var bp=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};wp.default=bp});var Sp=nr(Dp=>{"use strict";Object.defineProperty(Dp,"__esModule",{value:!0});var JT=(ve(),ei(cr)),XT=JT.__importDefault(Cp()),Ep=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var s,a,c,l;let u=null,d=null,h=null,f=o.status,m=o.statusText;if(o.ok){if(this.method!=="HEAD"){let K=await o.text();K===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((s=this.headers.get("Accept"))===null||s===void 0)&&s.includes("application/vnd.pgrst.plan+text"))?d=K:d=JSON.parse(K))}let E=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),C=(c=o.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");E&&C&&C.length>1&&(h=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{let E=await o.text();try{u=JSON.parse(E),Array.isArray(u)&&o.status===404&&(d=[],u=null,f=200,m="OK")}catch{o.status===404&&E===""?(f=204,m="No Content"):u={message:E}}if(u&&this.isMaybeSingle&&(!((l=u?.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,f=200,m="OK"),u&&this.shouldThrowOnError)throw new XT.default(u)}return{error:u,data:d,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(i=i.catch(o=>{var s,a,c,l,u,d;let h="",f=o?.cause;if(f){let m=(s=f?.message)!==null&&s!==void 0?s:"",y=(a=f?.code)!==null&&a!==void 0?a:"";h=`${(c=o?.name)!==null&&c!==void 0?c:"FetchError"}: ${o?.message}`,h+=`

Caused by: ${(l=f?.name)!==null&&l!==void 0?l:"Error"}: ${m}`,y&&(h+=` (${y})`),f?.stack&&(h+=`
${f.stack}`)}else h=(u=o?.stack)!==null&&u!==void 0?u:"";return{error:{message:`${(d=o?.name)!==null&&d!==void 0?d:"FetchError"}: ${o?.message}`,details:h,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}};Dp.default=Ep});var Mp=nr(xp=>{"use strict";Object.defineProperty(xp,"__esModule",{value:!0});var eO=(ve(),ei(cr)),tO=eO.__importDefault(Sp()),Ip=class extends tO.default{select(t){let e=!1,r=(t??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:i,referencedTable:o=i}={}){let s=o?`${o}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){let i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:i=r}={}){let o=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:i=!1,wal:o=!1,format:s="text"}={}){var a;let c=[t?"analyze":null,e?"verbose":null,r?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${c};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};xp.default=Ip});var Al=nr(Op=>{"use strict";Object.defineProperty(Op,"__esModule",{value:!0});var nO=(ve(),ei(cr)),rO=nO.__importDefault(Mp()),iO=new RegExp("[,()]"),Tp=class extends rO.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){let r=Array.from(new Set(e)).map(i=>typeof i=="string"&&iO.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");let s=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${o}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){let i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}};Op.default=Tp});var Np=nr(Rp=>{"use strict";Object.defineProperty(Rp,"__esModule",{value:!0});var oO=(ve(),ei(cr)),Fs=oO.__importDefault(Al()),Ap=class{constructor(t,{headers:e={},schema:r,fetch:i}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=i}select(t,e){let{head:r=!1,count:i}=e??{},o=r?"HEAD":"GET",s=!1,a=(t??"*").split("").map(c=>/\s/.test(c)&&!s?"":(c==='"'&&(s=!s),c)).join("");return this.url.searchParams.set("select",a),i&&this.headers.append("Prefer",`count=${i}`),new Fs.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var i;let o="POST";if(e&&this.headers.append("Prefer",`count=${e}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){let s=t.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(s.length>0){let a=[...new Set(s)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new Fs.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:i,defaultToNull:o=!0}={}){var s;let a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(t)){let c=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){let l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new Fs.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(t,{count:e}={}){var r;let i="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Fs.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;let r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Fs.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}};Rp.default=Ap});var o0=nr(kp=>{"use strict";Object.defineProperty(kp,"__esModule",{value:!0});var i0=(ve(),ei(cr)),sO=i0.__importDefault(Np()),aO=i0.__importDefault(Al()),Pp=class n{constructor(t,{headers:e={},schema:r,fetch:i}={}){this.url=t,this.headers=new Headers(e),this.schemaName=r,this.fetch=i}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");let e=new URL(`${this.url}/${t}`);return new sO.default(e,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new n(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:r=!1,get:i=!1,count:o}={}){var s;let a,c=new URL(`${this.url}/rpc/${t}`),l;r||i?(a=r?"HEAD":"GET",Object.entries(e).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{c.searchParams.append(d,h)})):(a="POST",l=e);let u=new Headers(this.headers);return o&&u.set("Prefer",`count=${o}`),new aO.default({method:a,url:c,headers:u,schema:this.schemaName,body:l,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};kp.default=Pp});var f0=nr(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.PostgrestError=ct.PostgrestBuilder=ct.PostgrestTransformBuilder=ct.PostgrestFilterBuilder=ct.PostgrestQueryBuilder=ct.PostgrestClient=void 0;var qi=(ve(),ei(cr)),s0=qi.__importDefault(o0());ct.PostgrestClient=s0.default;var a0=qi.__importDefault(Np());ct.PostgrestQueryBuilder=a0.default;var c0=qi.__importDefault(Al());ct.PostgrestFilterBuilder=c0.default;var l0=qi.__importDefault(Mp());ct.PostgrestTransformBuilder=l0.default;var u0=qi.__importDefault(Sp());ct.PostgrestBuilder=u0.default;var d0=qi.__importDefault(Cp());ct.PostgrestError=d0.default;ct.default={PostgrestClient:s0.default,PostgrestQueryBuilder:a0.default,PostgrestFilterBuilder:c0.default,PostgrestTransformBuilder:l0.default,PostgrestBuilder:u0.default,PostgrestError:d0.default}});var $e=null,sa=!1,Lu=1,hC=null,lt=Symbol("SIGNAL");function U(n){let t=$e;return $e=n,t}function ca(){return $e}var ti={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function vo(n){if(sa)throw new Error("");if($e===null)return;$e.consumerOnSignalRead(n);let t=$e.producersTail;if(t!==void 0&&t.producer===n)return;let e,r=$e.recomputing;if(r&&(e=t!==void 0?t.nextProducer:$e.producers,e!==void 0&&e.producer===n)){$e.producersTail=e,e.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===$e&&(!r||gC(i,$e)))return;let o=ri($e),s={producer:n,consumer:$e,nextProducer:e,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};$e.producersTail=s,t!==void 0?t.nextProducer=s:$e.producers=s,o&&Mg(n,s)}function Sg(){Lu++}function ju(n){if(!(ri(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Lu)){if(!n.producerMustRecompute(n)&&!_o(n)){Fu(n);return}n.producerRecomputeValue(n),Fu(n)}}function Vu(n){if(n.consumers===void 0)return;let t=sa;sa=!0;try{for(let e=n.consumers;e!==void 0;e=e.nextConsumer){let r=e.consumer;r.dirty||pC(r)}}finally{sa=t}}function Uu(){return $e?.consumerAllowSignalWrites!==!1}function pC(n){n.dirty=!0,Vu(n),n.consumerMarkedDirty?.(n)}function Fu(n){n.dirty=!1,n.lastCleanEpoch=Lu}function ni(n){return n&&Ig(n),U(n)}function Ig(n){n.producersTail=void 0,n.recomputing=!0}function yo(n,t){U(t),n&&xg(n)}function xg(n){n.recomputing=!1;let t=n.producersTail,e=t!==void 0?t.nextProducer:n.producers;if(e!==void 0){if(ri(n))do e=$u(e);while(e!==void 0);t!==void 0?t.nextProducer=void 0:n.producers=void 0}}function _o(n){for(let t=n.producers;t!==void 0;t=t.nextProducer){let e=t.producer,r=t.lastReadVersion;if(r!==e.version||(ju(e),r!==e.version))return!0}return!1}function rr(n){if(ri(n)){let t=n.producers;for(;t!==void 0;)t=$u(t)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function Mg(n,t){let e=n.consumersTail,r=ri(n);if(e!==void 0?(t.nextConsumer=e.nextConsumer,e.nextConsumer=t):(t.nextConsumer=void 0,n.consumers=t),t.prevConsumer=e,n.consumersTail=t,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)Mg(i.producer,i)}function $u(n){let t=n.producer,e=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:t.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(t.consumers=r,!ri(t)){let o=t.producers;for(;o!==void 0;)o=$u(o)}return e}function ri(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Bu(n){hC?.(n)}function gC(n,t){let e=t.producersTail;if(e!==void 0){let r=t.producers;do{if(r===n)return!0;if(r===e)break;r=r.nextProducer}while(r!==void 0)}return!1}function Hu(n,t){return Object.is(n,t)}function la(n,t){let e=Object.create(mC);e.computation=n,t!==void 0&&(e.equal=t);let r=()=>{if(ju(e),vo(e),e.value===aa)throw e.error;return e.value};return r[lt]=e,Bu(e),r}var Pu=Symbol("UNSET"),ku=Symbol("COMPUTING"),aa=Symbol("ERRORED"),mC=W(D({},ti),{value:Pu,dirty:!0,error:null,equal:Hu,kind:"computed",producerMustRecompute(n){return n.value===Pu||n.value===ku},producerRecomputeValue(n){if(n.value===ku)throw new Error("");let t=n.value;n.value=ku;let e=ni(n),r,i=!1;try{r=n.computation(),U(null),i=t!==Pu&&t!==aa&&r!==aa&&n.equal(t,r)}catch(o){r=aa,n.error=o}finally{yo(n,e)}if(i){n.value=t;return}n.value=r,n.version++}});function vC(){throw new Error}var Tg=vC;function Og(n){Tg(n)}function zu(n){Tg=n}var yC=null;function Gu(n,t){let e=Object.create(ua);e.value=n,t!==void 0&&(e.equal=t);let r=()=>Ag(e);return r[lt]=e,Bu(e),[r,s=>bo(e,s),s=>Rg(e,s)]}function Ag(n){return vo(n),n.value}function bo(n,t){Uu()||Og(n),n.equal(n.value,t)||(n.value=t,_C(n))}function Rg(n,t){Uu()||Og(n),bo(n,t(n.value))}var ua=W(D({},ti),{equal:Hu,value:void 0,kind:"signal"});function _C(n){n.version++,Sg(),Vu(n),yC?.(n)}function qu(n){let t=U(null);try{return n()}finally{U(t)}}var Wu=W(D({},ti),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function Ku(n){if(n.dirty=!1,n.version>0&&!_o(n))return;n.version++;let t=ni(n);try{n.cleanup(),n.fn()}finally{yo(n,t)}}function H(n){return typeof n=="function"}function ii(n){let e=n(r=>{Error.call(r),r.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var da=ii(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function ir(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var Me=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:r}=this;if(H(r))try{r()}catch(o){t=o instanceof da?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Ng(o)}catch(s){t=t??[],s instanceof da?t=[...t,...s.errors]:t.push(s)}}if(t)throw new da(t)}}add(t){var e;if(t&&t!==this)if(this.closed)Ng(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&ir(e,t)}remove(t){let{_finalizers:e}=this;e&&ir(e,t),t instanceof n&&t._removeParent(this)}};Me.EMPTY=(()=>{let n=new Me;return n.closed=!0,n})();var Yu=Me.EMPTY;function fa(n){return n instanceof Me||n&&"closed"in n&&H(n.remove)&&H(n.add)&&H(n.unsubscribe)}function Ng(n){H(n)?n():n.unsubscribe()}var Rt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var oi={setTimeout(n,t,...e){let{delegate:r}=oi;return r?.setTimeout?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=oi;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ha(n){oi.setTimeout(()=>{let{onUnhandledError:t}=Rt;if(t)t(n);else throw n})}function or(){}var Pg=Zu("C",void 0,void 0);function kg(n){return Zu("E",void 0,n)}function Fg(n){return Zu("N",n,void 0)}function Zu(n,t,e){return{kind:n,value:t,error:e}}var sr=null;function si(n){if(Rt.useDeprecatedSynchronousErrorHandling){let t=!sr;if(t&&(sr={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:r}=sr;if(sr=null,e)throw r}}else n()}function Lg(n){Rt.useDeprecatedSynchronousErrorHandling&&sr&&(sr.errorThrown=!0,sr.error=n)}var ar=class extends Me{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,fa(t)&&t.add(this)):this.destination=CC}static create(t,e,r){return new ai(t,e,r)}next(t){this.isStopped?Ju(Fg(t),this):this._next(t)}error(t){this.isStopped?Ju(kg(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Ju(Pg,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},bC=Function.prototype.bind;function Qu(n,t){return bC.call(n,t)}var Xu=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){pa(r)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){pa(r)}else pa(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){pa(e)}}},ai=class extends ar{constructor(t,e,r){super();let i;if(H(t)||!t)i={next:t??void 0,error:e??void 0,complete:r??void 0};else{let o;this&&Rt.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Qu(t.next,o),error:t.error&&Qu(t.error,o),complete:t.complete&&Qu(t.complete,o)}):i=t}this.destination=new Xu(i)}};function pa(n){Rt.useDeprecatedSynchronousErrorHandling?Lg(n):ha(n)}function wC(n){throw n}function Ju(n,t){let{onStoppedNotification:e}=Rt;e&&oi.setTimeout(()=>e(n,t))}var CC={closed:!0,next:or,error:wC,complete:or};var ci=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Nt(n){return n}function ed(...n){return td(n)}function td(n){return n.length===0?Nt:n.length===1?n[0]:function(e){return n.reduce((r,i)=>i(r),e)}}var z=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,i){let o=DC(e)?e:new ai(e,r,i);return si(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return r=jg(r),new r((i,o)=>{let s=new ai({next:a=>{try{e(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)}[ci](){return this}pipe(...e){return td(e)(this)}toPromise(e){return e=jg(e),new e((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=t=>new n(t),n})();function jg(n){var t;return(t=n??Rt.Promise)!==null&&t!==void 0?t:Promise}function EC(n){return n&&H(n.next)&&H(n.error)&&H(n.complete)}function DC(n){return n&&n instanceof ar||EC(n)&&fa(n)}function SC(n){return H(n?.lift)}function re(n){return t=>{if(SC(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ie(n,t,e,r,i){return new nd(n,t,e,r,i)}var nd=class extends ar{constructor(t,e,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var Vg=ii(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var me=(()=>{class n extends z{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let r=new ga(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new Vg}next(e){si(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(e)}})}error(e){si(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){si(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Yu:(this.currentObservers=null,o.push(e),new Me(()=>{this.currentObservers=null,ir(o,e)}))}_checkFinalizedStatuses(e){let{hasError:r,thrownError:i,isStopped:o}=this;r?e.error(i):o&&e.complete()}asObservable(){let e=new z;return e.source=this,e}}return n.create=(t,e)=>new ga(t,e),n})(),ga=class extends me{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.next)===null||r===void 0||r.call(e,t)}error(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.error)===null||r===void 0||r.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,r;return(r=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&r!==void 0?r:Yu}};var Te=class extends me{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var rd={now(){return(rd.delegate||Date).now()},delegate:void 0};var ma=class extends Me{constructor(t,e){super()}schedule(t,e=0){return this}};var wo={setInterval(n,t,...e){let{delegate:r}=wo;return r?.setInterval?r.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=wo;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var va=class extends ma{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,e)),this.pending=!0,this.delay=e,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,r=0){return wo.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,e,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return e;e!=null&&wo.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,e);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,ir(r,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var li=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,r){return new this.schedulerActionCtor(this,t).schedule(r,e)}};li.now=rd.now;var ya=class extends li{constructor(t,e=li.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}};var id=new ya(va),Ug=id;var ut=new z(n=>n.complete());function _a(n){return n&&H(n.schedule)}function $g(n){return n[n.length-1]}function ba(n){return H($g(n))?n.pop():void 0}function In(n){return _a($g(n))?n.pop():void 0}ve();var Ia=n=>n&&typeof n.length=="number"&&typeof n!="function";function xa(n){return H(n?.then)}function Ma(n){return H(n[ci])}function Ta(n){return Symbol.asyncIterator&&H(n?.[Symbol.asyncIterator])}function Oa(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function TC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Aa=TC();function Ra(n){return H(n?.[Aa])}ve();function Na(n){return Da(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:r,done:i}=yield Kt(e.read());if(i)return yield Kt(void 0);yield yield Kt(r)}}finally{e.releaseLock()}})}function Pa(n){return H(n?.getReader)}function Se(n){if(n instanceof z)return n;if(n!=null){if(Ma(n))return OC(n);if(Ia(n))return AC(n);if(xa(n))return RC(n);if(Ta(n))return dm(n);if(Ra(n))return NC(n);if(Pa(n))return PC(n)}throw Oa(n)}function OC(n){return new z(t=>{let e=n[ci]();if(H(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function AC(n){return new z(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function RC(n){return new z(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,ha)})}function NC(n){return new z(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function dm(n){return new z(t=>{kC(n,t).catch(e=>t.error(e))})}function PC(n){return dm(Na(n))}function kC(n,t){var e,r,i,o;return S(this,void 0,void 0,function*(){try{for(e=Sa(n);r=yield e.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=e.return)&&(yield o.call(e))}finally{if(i)throw i.error}}t.complete()})}function dt(n,t,e,r=0,i=!1){let o=t.schedule(function(){e(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function ka(n,t=0){return re((e,r)=>{e.subscribe(ie(r,i=>dt(r,n,()=>r.next(i),t),()=>dt(r,n,()=>r.complete(),t),i=>dt(r,n,()=>r.error(i),t)))})}function Fa(n,t=0){return re((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function fm(n,t){return Se(n).pipe(Fa(t),ka(t))}function hm(n,t){return Se(n).pipe(Fa(t),ka(t))}function pm(n,t){return new z(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}function gm(n,t){return new z(e=>{let r;return dt(e,t,()=>{r=n[Aa](),dt(e,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){e.error(s);return}o?e.complete():e.next(i)},0,!0)}),()=>H(r?.return)&&r.return()})}function La(n,t){if(!n)throw new Error("Iterable cannot be null");return new z(e=>{dt(e,t,()=>{let r=n[Symbol.asyncIterator]();dt(e,t,()=>{r.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function mm(n,t){return La(Na(n),t)}function vm(n,t){if(n!=null){if(Ma(n))return fm(n,t);if(Ia(n))return pm(n,t);if(xa(n))return hm(n,t);if(Ta(n))return La(n,t);if(Ra(n))return gm(n,t);if(Pa(n))return mm(n,t)}throw Oa(n)}function Ce(n,t){return t?vm(n,t):Se(n)}function Y(...n){let t=In(n);return Ce(n,t)}function cd(n,t){let e=H(n)?n:()=>n,r=i=>i.error(e());return new z(t?i=>t.schedule(r,0,i):r)}function ja(n){return!!n&&(n instanceof z||H(n.lift)&&H(n.subscribe))}var lr=ii(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ym(n){return n instanceof Date&&!isNaN(n)}function Q(n,t){return re((e,r)=>{let i=0;e.subscribe(ie(r,o=>{r.next(n.call(t,o,i++))}))})}var{isArray:FC}=Array;function LC(n,t){return FC(t)?n(...t):n(t)}function Va(n){return Q(t=>LC(n,t))}var{isArray:jC}=Array,{getPrototypeOf:VC,prototype:UC,keys:$C}=Object;function Ua(n){if(n.length===1){let t=n[0];if(jC(t))return{args:t,keys:null};if(BC(t)){let e=$C(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}function BC(n){return n&&typeof n=="object"&&VC(n)===UC}function $a(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}function ld(...n){let t=In(n),e=ba(n),{args:r,keys:i}=Ua(n);if(r.length===0)return Ce([],t);let o=new z(HC(r,t,i?s=>$a(i,s):Nt));return e?o.pipe(Va(e)):o}function HC(n,t,e=Nt){return r=>{_m(t,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)_m(t,()=>{let l=Ce(n[c],t),u=!1;l.subscribe(ie(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(e(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function _m(n,t,e){n?dt(e,n,t):t()}function bm(n,t,e,r,i,o,s,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&t.complete()},f=y=>l<r?m(y):c.push(y),m=y=>{o&&t.next(y),l++;let E=!1;Se(e(y,u++)).subscribe(ie(t,C=>{i?.(C),o?f(C):t.next(C)},()=>{E=!0},void 0,()=>{if(E)try{for(l--;c.length&&l<r;){let C=c.shift();s?dt(t,s,()=>m(C)):m(C)}h()}catch(C){t.error(C)}}))};return n.subscribe(ie(t,f,()=>{d=!0,h()})),()=>{a?.()}}function Be(n,t,e=1/0){return H(t)?Be((r,i)=>Q((o,s)=>t(r,o,i,s))(Se(n(r,i))),e):(typeof t=="number"&&(e=t),re((r,i)=>bm(r,i,n,e)))}function ui(n=1/0){return Be(Nt,n)}function wm(){return ui(1)}function di(...n){return wm()(Ce(n,In(n)))}function Co(n){return new z(t=>{Se(n()).subscribe(t)})}function ud(...n){let t=ba(n),{args:e,keys:r}=Ua(n),i=new z(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;Se(e[u]).subscribe(ie(o,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?$a(r,a):a),o.complete())}))}});return t?i.pipe(Va(t)):i}function Cm(n=0,t,e=Ug){let r=-1;return t!=null&&(_a(t)?e=t:r=t),new z(i=>{let o=ym(n)?+n-e.now():n;o<0&&(o=0);let s=0;return e.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function dd(n=0,t=id){return n<0&&(n=0),Cm(n,n,t)}var fn=new z(or);function He(n,t){return re((e,r)=>{let i=0;e.subscribe(ie(r,o=>n.call(t,o,i++)&&r.next(o)))})}function fi(n){return re((t,e)=>{let r=null,i=!1,o;r=t.subscribe(ie(e,void 0,void 0,s=>{o=Se(n(s,fi(n)(t))),r?(r.unsubscribe(),r=null,o.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(e))})}function Eo(n,t){return H(t)?Be(n,t,1):Be(n,1)}function fd(n){return re((t,e)=>{let r=!1;t.subscribe(ie(e,i=>{r=!0,e.next(i)},()=>{r||e.next(n),e.complete()}))})}function Je(n){return n<=0?()=>ut:re((t,e)=>{let r=0;t.subscribe(ie(e,i=>{++r<=n&&(e.next(i),n<=r&&e.complete())}))})}function Em(n=zC){return re((t,e)=>{let r=!1;t.subscribe(ie(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(n())))})}function zC(){return new lr}function hd(n){return re((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function hn(n,t){let e=arguments.length>=2;return r=>r.pipe(n?He((i,o)=>n(i,o,r)):Nt,Je(1),e?fd(t):Em(()=>new lr))}function Ba(n){return n<=0?()=>ut:re((t,e)=>{let r=[];t.subscribe(ie(e,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function pd(...n){let t=In(n);return re((e,r)=>{(t?di(n,e,t):di(n,e)).subscribe(r)})}function Xe(n,t){return re((e,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();e.subscribe(ie(r,c=>{i?.unsubscribe();let l=0,u=o++;Se(n(c,u)).subscribe(i=ie(r,d=>r.next(t?t(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function ur(n){return re((t,e)=>{Se(n).subscribe(ie(e,()=>e.complete(),or)),!e.closed&&t.subscribe(e)})}function et(n,t,e){let r=H(n)||t||e?{next:n,error:t,complete:e}:n;return r?re((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ie(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Nt}var gd;function Ha(){return gd}function Yt(n){let t=gd;return gd=n,t}var Dm=Symbol("NotFound");function hi(n){return n===Dm||n?.name==="\u0275NotFound"}var Za="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",I=class extends Error{code;constructor(t,e){super(Tn(t,e)),this.code=t}};function GC(n){return`NG0${Math.abs(n)}`}function Tn(n,t){return`${GC(n)}${t?": "+t:""}`}var Oo=globalThis;function oe(n){for(let t in n)if(n[t]===oe)return t;throw Error("")}function Tm(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function gn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(gn).join(", ")}]`;if(n==null)return""+n;let t=n.overriddenName||n.name;if(t)return`${t}`;let e=n.toString();if(e==null)return""+e;let r=e.indexOf(`
`);return r>=0?e.slice(0,r):e}function Md(n,t){return n?t?`${n} ${t}`:n:t||""}var qC=oe({__forward_ref__:oe});function Pt(n){return n.__forward_ref__=Pt,n.toString=function(){return gn(this())},n}function Le(n){return Td(n)?n():n}function Td(n){return typeof n=="function"&&n.hasOwnProperty(qC)&&n.__forward_ref__===Pt}function T(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function wt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ao(n){return WC(n,Qa)}function Od(n){return Ao(n)!==null}function WC(n,t){return n.hasOwnProperty(t)&&n[t]||null}function KC(n){let t=n?.[Qa]??null;return t||null}function vd(n){return n&&n.hasOwnProperty(Ga)?n[Ga]:null}var Qa=oe({\u0275prov:oe}),Ga=oe({\u0275inj:oe}),R=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=T({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ad(n){return n&&!!n.\u0275providers}var Rd=oe({\u0275cmp:oe}),Nd=oe({\u0275dir:oe}),Pd=oe({\u0275pipe:oe}),kd=oe({\u0275mod:oe}),So=oe({\u0275fac:oe}),vr=oe({__NG_ELEMENT_ID__:oe}),Sm=oe({__NG_ENV_ID__:oe});function Ro(n){return typeof n=="string"?n:n==null?"":String(n)}function Om(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ro(n)}var Am=oe({ngErrorCode:oe}),YC=oe({ngErrorMessage:oe}),ZC=oe({ngTokenPath:oe});function Fd(n,t){return Rm("",-200,t)}function Ja(n,t){throw new I(-201,!1)}function Rm(n,t,e){let r=new I(t,n);return r[Am]=t,r[YC]=n,e&&(r[ZC]=e),r}function QC(n){return n[Am]}var yd;function Nm(){return yd}function ht(n){let t=yd;return yd=n,t}function Ld(n,t,e){let r=Ao(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(e&8)return null;if(t!==void 0)return t;Ja(n,"Injector")}var JC={},dr=JC,XC="__NG_DI_FLAG__",_d=class{injector;constructor(t){this.injector=t}retrieve(t,e){let r=fr(e)||0;try{return this.injector.get(t,r&8?null:dr,r)}catch(i){if(hi(i))return i;throw i}}};function eE(n,t=0){let e=Ha();if(e===void 0)throw new I(-203,!1);if(e===null)return Ld(n,void 0,t);{let r=tE(t),i=e.retrieve(n,r);if(hi(i)){if(r.optional)return null;throw i}return i}}function F(n,t=0){return(Nm()||eE)(Le(n),t)}function w(n,t){return F(n,fr(t))}function fr(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function tE(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function bd(n){let t=[];for(let e=0;e<n.length;e++){let r=Le(n[e]);if(Array.isArray(r)){if(r.length===0)throw new I(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=nE(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(F(i,o))}else t.push(F(r))}return t}function nE(n){return n[XC]}function hr(n,t){let e=n.hasOwnProperty(So);return e?n[So]:null}function Pm(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=t[r];if(e&&(i=e(i),o=e(o)),o!==i)return!1}return!0}function km(n){return n.flat(Number.POSITIVE_INFINITY)}function Xa(n,t){n.forEach(e=>Array.isArray(e)?Xa(e,t):t(e))}function jd(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function No(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Fm(n,t,e,r){let i=n.length;if(i==t)n.push(e,r);else if(i===1)n.push(r,n[0]),n[0]=e;else{for(i--,n.push(n[i-1],n[i]);i>t;){let o=i-2;n[i]=n[o],i--}n[t]=e,n[t+1]=r}}function Lm(n,t,e){let r=gi(n,t);return r>=0?n[r|1]=e:(r=~r,Fm(n,r,t,e)),r}function ec(n,t){let e=gi(n,t);if(e>=0)return n[e|1]}function gi(n,t){return rE(n,t,1)}function rE(n,t,e){let r=0,i=n.length>>e;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<e];if(t===s)return o<<e;s>t?i=o:r=o+1}return~(i<<e)}var On={},pt=[],yr=new R(""),Vd=new R("",-1),Ud=new R(""),Io=class{get(t,e=dr){if(e===dr){let i=Rm("",-201);throw i.name="\u0275NotFound",i}return e}};function $d(n){return n[kd]||null}function An(n){return n[Rd]||null}function Bd(n){return n[Nd]||null}function jm(n){return n[Pd]||null}function Zt(n){return{\u0275providers:n}}function Vm(n){return Zt([{provide:yr,multi:!0,useValue:n}])}function Um(...n){return{\u0275providers:Hd(!0,n),\u0275fromNgModule:!0}}function Hd(n,...t){let e=[],r=new Set,i,o=s=>{e.push(s)};return Xa(t,s=>{let a=s;qa(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&$m(i,o),e}function $m(n,t){for(let e=0;e<n.length;e++){let{ngModule:r,providers:i}=n[e];zd(i,o=>{t(o,r)})}}function qa(n,t,e,r){if(n=Le(n),!n)return!1;let i=null,o=vd(n),s=!o&&An(n);if(!o&&!s){let c=n.ngModule;if(o=vd(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)qa(l,t,e,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Xa(o.imports,u=>{qa(u,t,e,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&$m(l,t)}if(!a){let l=hr(i)||(()=>new i);t({provide:i,useFactory:l,deps:pt},i),t({provide:Ud,useValue:i,multi:!0},i),t({provide:yr,useValue:()=>F(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;zd(c,u=>{t(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function zd(n,t){for(let e of n)Ad(e)&&(e=e.\u0275providers),Array.isArray(e)?zd(e,t):t(e)}var iE=oe({provide:String,useValue:oe});function Bm(n){return n!==null&&typeof n=="object"&&iE in n}function oE(n){return!!(n&&n.useExisting)}function sE(n){return!!(n&&n.useFactory)}function pr(n){return typeof n=="function"}function Hm(n){return!!n.useClass}var Po=new R(""),za={},Im={},md;function ko(){return md===void 0&&(md=new Io),md}var Ne=class{},gr=class extends Ne{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,r,i){super(),this.parent=e,this.source=r,this.scopes=i,Cd(t,s=>this.processProvider(s)),this.records.set(Vd,pi(void 0,this)),i.has("environment")&&this.records.set(Ne,pi(void 0,this));let o=this.records.get(Po);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ud,pt,{self:!0}))}retrieve(t,e){let r=fr(e)||0;try{return this.get(t,dr,r)}catch(i){if(hi(i))return i;throw i}}destroy(){Do(this),this._destroyed=!0;let t=U(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of e)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),U(t)}}onDestroy(t){return Do(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Do(this);let e=Yt(this),r=ht(void 0),i;try{return t()}finally{Yt(e),ht(r)}}get(t,e=dr,r){if(Do(this),t.hasOwnProperty(Sm))return t[Sm](this);let i=fr(r),o,s=Yt(this),a=ht(void 0);try{if(!(i&4)){let l=this.records.get(t);if(l===void 0){let u=dE(t)&&Ao(t);u&&this.injectableDefInScope(u)?l=pi(wd(t),za):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l,i)}let c=i&2?ko():this.parent;return e=i&8&&e===dr?null:e,c.get(t,e)}catch(c){let l=QC(c);throw l===-200||l===-201?new I(l,null):c}finally{ht(a),Yt(s)}}resolveInjectorInitializers(){let t=U(null),e=Yt(this),r=ht(void 0),i;try{let o=this.get(yr,pt,{self:!0});for(let s of o)s()}finally{Yt(e),ht(r),U(t)}}toString(){let t=[],e=this.records;for(let r of e.keys())t.push(gn(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Le(t);let e=pr(t)?t:Le(t&&t.provide),r=cE(t);if(!pr(t)&&t.multi===!0){let i=this.records.get(e);i||(i=pi(void 0,za,!0),i.factory=()=>bd(i.multi),this.records.set(e,i)),e=t,i.multi.push(t)}this.records.set(e,r)}hydrate(t,e,r){let i=U(null);try{if(e.value===Im)throw Fd(gn(t));return e.value===za&&(e.value=Im,e.value=e.factory(void 0,r)),typeof e.value=="object"&&e.value&&uE(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{U(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=Le(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function wd(n){let t=Ao(n),e=t!==null?t.factory:hr(n);if(e!==null)return e;if(n instanceof R)throw new I(204,!1);if(n instanceof Function)return aE(n);throw new I(204,!1)}function aE(n){if(n.length>0)throw new I(204,!1);let e=KC(n);return e!==null?()=>e.factory(n):()=>new n}function cE(n){if(Bm(n))return pi(void 0,n.useValue);{let t=Gd(n);return pi(t,za)}}function Gd(n,t,e){let r;if(pr(n)){let i=Le(n);return hr(i)||wd(i)}else if(Bm(n))r=()=>Le(n.useValue);else if(sE(n))r=()=>n.useFactory(...bd(n.deps||[]));else if(oE(n))r=(i,o)=>F(Le(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Le(n&&(n.useClass||n.provide));if(lE(n))r=()=>new i(...bd(n.deps));else return hr(i)||wd(i)}return r}function Do(n){if(n.destroyed)throw new I(205,!1)}function pi(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function lE(n){return!!n.deps}function uE(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function dE(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Cd(n,t){for(let e of n)Array.isArray(e)?Cd(e,t):e&&Ad(e)?Cd(e.\u0275providers,t):t(e)}function rt(n,t){let e;n instanceof gr?(Do(n),e=n):e=new _d(n);let r,i=Yt(e),o=ht(void 0);try{return t()}finally{Yt(i),ht(o)}}function zm(){return Nm()!==void 0||Ha()!=null}var kt=0,V=1,$=2,Pe=3,Ct=4,Et=5,Fo=6,mi=7,je=8,Rn=9,Qt=10,Ie=11,vi=12,qd=13,_r=14,Dt=15,Nn=16,br=17,Jt=18,Lo=19,Wd=20,pn=21,tc=22,xn=23,gt=24,nc=25,jo=26,ze=27,Gm=1;var Pn=7,Vo=8,wr=9,Ge=10;function Xt(n){return Array.isArray(n)&&typeof n[Gm]=="object"}function Ft(n){return Array.isArray(n)&&n[Gm]===!0}function Kd(n){return(n.flags&4)!==0}function kn(n){return n.componentOffset>-1}function Uo(n){return(n.flags&1)===1}function en(n){return!!n.template}function yi(n){return(n[$]&512)!==0}function Cr(n){return(n[$]&256)===256}var qm="svg",Wm="math";function St(n){for(;Array.isArray(n);)n=n[kt];return n}function Yd(n,t){return St(t[n])}function Lt(n,t){return St(t[n.index])}function $o(n,t){return n.data[t]}function It(n,t){let e=t[n];return Xt(e)?e:e[kt]}function Km(n){return(n[$]&4)===4}function rc(n){return(n[$]&128)===128}function Ym(n){return Ft(n[Pe])}function Fn(n,t){return t==null?null:n[t]}function Zd(n){n[br]=0}function Qd(n){n[$]&1024||(n[$]|=1024,rc(n)&&_i(n))}function Zm(n,t){for(;n>0;)t=t[_r],n--;return t}function Bo(n){return!!(n[$]&9216||n[gt]?.dirty)}function ic(n){n[Qt].changeDetectionScheduler?.notify(8),n[$]&64&&(n[$]|=1024),Bo(n)&&_i(n)}function _i(n){n[Qt].changeDetectionScheduler?.notify(0);let t=Mn(n);for(;t!==null&&!(t[$]&8192||(t[$]|=8192,!rc(t)));)t=Mn(t)}function Jd(n,t){if(Cr(n))throw new I(911,!1);n[pn]===null&&(n[pn]=[]),n[pn].push(t)}function Qm(n,t){if(n[pn]===null)return;let e=n[pn].indexOf(t);e!==-1&&n[pn].splice(e,1)}function Mn(n){let t=n[Pe];return Ft(t)?t[Pe]:t}function Xd(n){return n[mi]??=[]}function ef(n){return n.cleanup??=[]}function Jm(n,t,e,r){let i=Xd(t);i.push(e),n.firstCreatePass&&ef(n).push(r,i.length-1)}var Z={lFrame:pv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Ed=!1;function Xm(){return Z.lFrame.elementDepthCount}function ev(){Z.lFrame.elementDepthCount++}function tv(){Z.lFrame.elementDepthCount--}function tf(){return Z.bindingsEnabled}function nv(){return Z.skipHydrationRootTNode!==null}function rv(n){return Z.skipHydrationRootTNode===n}function iv(){Z.skipHydrationRootTNode=null}function X(){return Z.lFrame.lView}function it(){return Z.lFrame.tView}function G(n){return Z.lFrame.contextLView=n,n[je]}function q(n){return Z.lFrame.contextLView=null,n}function ot(){let n=nf();for(;n!==null&&n.type===64;)n=n.parent;return n}function nf(){return Z.lFrame.currentTNode}function ov(){let n=Z.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function bi(n,t){let e=Z.lFrame;e.currentTNode=n,e.isParent=t}function rf(){return Z.lFrame.isParent}function sv(){Z.lFrame.isParent=!1}function of(){return Ed}function xo(n){let t=Ed;return Ed=n,t}function av(n){return Z.lFrame.bindingIndex=n}function Ho(){return Z.lFrame.bindingIndex++}function cv(n){let t=Z.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function lv(){return Z.lFrame.inI18n}function uv(n,t){let e=Z.lFrame;e.bindingIndex=e.bindingRootIndex=n,oc(t)}function dv(){return Z.lFrame.currentDirectiveIndex}function oc(n){Z.lFrame.currentDirectiveIndex=n}function fv(n){let t=Z.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function sf(){return Z.lFrame.currentQueryIndex}function sc(n){Z.lFrame.currentQueryIndex=n}function fE(n){let t=n[V];return t.type===2?t.declTNode:t.type===1?n[Et]:null}function af(n,t,e){if(e&4){let i=t,o=n;for(;i=i.parent,i===null&&!(e&1);)if(i=fE(o),i===null||(o=o[_r],i.type&10))break;if(i===null)return!1;t=i,n=o}let r=Z.lFrame=hv();return r.currentTNode=t,r.lView=n,!0}function ac(n){let t=hv(),e=n[V];Z.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function hv(){let n=Z.lFrame,t=n===null?null:n.child;return t===null?pv(n):t}function pv(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function gv(){let n=Z.lFrame;return Z.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var cf=gv;function cc(){let n=gv();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function mv(n){return(Z.lFrame.contextLView=Zm(n,Z.lFrame.contextLView))[je]}function Er(){return Z.lFrame.selectedIndex}function Ln(n){Z.lFrame.selectedIndex=n}function lf(){let n=Z.lFrame;return $o(n.tView,n.selectedIndex)}function vv(){return Z.lFrame.currentNamespace}var yv=!0;function lc(){return yv}function uc(n){yv=n}function Dd(n,t=null,e=null,r){let i=uf(n,t,e,r);return i.resolveInjectorInitializers(),i}function uf(n,t=null,e=null,r,i=new Set){let o=[e||pt,Um(n)];return r=r||(typeof n=="object"?void 0:gn(n)),new gr(o,t||ko(),r||null,i)}var tt=class n{static THROW_IF_NOT_FOUND=dr;static NULL=new Io;static create(t,e){if(Array.isArray(t))return Dd({name:""},e,t,"");{let r=t.name??"";return Dd({name:r},t.parent,t.providers,r)}}static \u0275prov=T({token:n,providedIn:"any",factory:()=>F(Vd)});static __NG_ELEMENT_ID__=-1},Oe=new R(""),st=(()=>{class n{static __NG_ELEMENT_ID__=hE;static __NG_ENV_ID__=e=>e}return n})(),Wa=class extends st{_lView;constructor(t){super(),this._lView=t}get destroyed(){return Cr(this._lView)}onDestroy(t){let e=this._lView;return Jd(e,t),()=>Qm(e,t)}};function hE(){return new Wa(X())}var _v=!1,jn=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Te(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new z(e=>{e.next(!1),e.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=T({token:n,providedIn:"root",factory:()=>new n})}return n})(),Sd=class extends me{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,zm()&&(this.destroyRef=w(st,{optional:!0})??void 0,this.pendingTasks=w(jn,{optional:!0})??void 0)}emit(t){let e=U(null);try{super.next(t)}finally{U(e)}}subscribe(t,e,r){let i=t,o=e||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof Me&&t.add(a),a}wrapInTimeout(t){return e=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(e)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},le=Sd;function Ka(...n){}function df(n){let t,e;function r(){n=Ka;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),r()})),()=>r()}function ff(n){return queueMicrotask(()=>n()),()=>{n=Ka}}var hf="isAngularZone",Mo=hf+"_ID",pE=0,nt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new le(!1);onMicrotaskEmpty=new le(!1);onStable=new le(!1);onError=new le(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=_v}=t;if(typeof Zone>"u")throw new I(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,vE(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(hf)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new I(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new I(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,gE,Ka,Ka);try{return o.runTask(s,e,r)}finally{o.cancelTask(s)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}},gE={};function pf(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function mE(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){df(()=>{n.callbackScheduled=!1,Id(n),n.isCheckStableRunning=!0,pf(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),Id(n)}function vE(n){let t=()=>{mE(n)},e=pE++;n._inner=n._inner.fork({name:"angular",properties:{[hf]:!0,[Mo]:e,[Mo+e]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(yE(c))return r.invokeTask(o,s,a,c);try{return xm(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),Mm(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return xm(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!_E(c)&&t(),Mm(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Id(n),pf(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Id(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function xm(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Mm(n){n._nesting--,pf(n)}var To=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new le;onMicrotaskEmpty=new le;onStable=new le;onError=new le;run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,i){return t.apply(e,r)}};function yE(n){return bv(n,"__ignore_ng_zone__")}function _E(n){return bv(n,"__scheduler_tick__")}function bv(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var mn=class{_console=console;handleError(t){this._console.error("ERROR",t)}},xt=new R("",{factory:()=>{let n=w(nt),t=w(Ne),e;return r=>{n.runOutsideAngular(()=>{t.destroyed&&!e?setTimeout(()=>{throw r}):(e??=t.get(mn),e.handleError(r))})}}}),wv={provide:yr,useValue:()=>{let n=w(mn,{optional:!0})},multi:!0},bE=new R("",{factory:()=>{let n=w(Oe).defaultView;if(!n)return;let t=w(xt),e=o=>{t(o.reason),o.preventDefault()},r=o=>{o.error?t(o.error):t(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",e),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),w(st).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",e)})}});function gf(){return Zt([Vm(()=>void w(bE))])}function N(n,t){let[e,r,i]=Gu(n,t?.equal),o=e,s=o[lt];return o.set=r,o.update=i,o.asReadonly=Cv.bind(o),o}function Cv(){let n=this[lt];if(n.readonlyFn===void 0){let t=()=>this();t[lt]=n,n.readonlyFn=t}return n.readonlyFn}var dc=(()=>{class n{view;node;constructor(e,r){this.view=e,this.node=r}static __NG_ELEMENT_ID__=wE}return n})();function wE(){return new dc(X(),ot())}var mr=class{},zo=new R("",{factory:()=>!0});var mf=new R("");var fc=(()=>{class n{static \u0275prov=T({token:n,providedIn:"root",factory:()=>new xd})}return n})(),xd=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let e=t.zone,r=this.queues.get(e);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let r=this.queues.get(e);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[e,r]of this.queues)e===null?t||=this.flushQueue(r):t||=e.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let e=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,e=!0,r.run());return e}},Ya=class{[lt];constructor(t){this[lt]=t}destroy(){this[lt].destroy()}};function qe(n,t){let e=t?.injector??w(tt),r=t?.manualCleanup!==!0?e.get(st):null,i,o=e.get(dc,null,{optional:!0}),s=e.get(mr);return o!==null?(i=DE(o.view,s,n),r instanceof Wa&&r._lView===o.view&&(r=null)):i=SE(n,e.get(fc),s),i.injector=e,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new Ya(i)}var Ev=W(D({},Wu),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=xo(!1);try{Ku(this)}finally{xo(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=U(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],U(n)}}}),CE=W(D({},Ev),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(rr(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),EE=W(D({},Ev),{consumerMarkedDirty(){this.view[$]|=8192,_i(this.view),this.notifier.notify(13)},destroy(){if(rr(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[xn]?.delete(this)}});function DE(n,t,e){let r=Object.create(EE);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=t,r.fn=Dv(r,e),n[xn]??=new Set,n[xn].add(r),r.consumerMarkedDirty(r),r}function SE(n,t,e){let r=Object.create(CE);return r.fn=Dv(r,n),r.scheduler=t,r.notifier=e,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function Dv(n,t){return()=>{t(e=>(n.cleanupFns??=[]).push(e))}}function xe(n){return qu(n)}function Jo(n){return{toString:n}.toString()}function PE(n){return typeof n=="function"}function ny(n,t,e,r){t!==null?t.applyValueToInputSignal(t,r):n[e]=r}var _c=class{previousValue;currentValue;firstChange;constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}},mt=(()=>{let n=()=>ry;return n.ngInherit=!0,n})();function ry(n){return n.type.prototype.ngOnChanges&&(n.setInput=FE),kE}function kE(){let n=oy(this),t=n?.current;if(t){let e=n.previous;if(e===On)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function FE(n,t,e,r,i){let o=this.declaredInputs[r],s=oy(n)||LE(n,{previous:On,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new _c(l&&l.currentValue,e,c===On),ny(n,t,i,e)}var iy="__ngSimpleChanges__";function oy(n){return n[iy]||null}function LE(n,t){return n[iy]=t}var Sv=[];var se=function(n,t=null,e){for(let r=0;r<Sv.length;r++){let i=Sv[r];i(n,t,e)}},ee=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(ee||{});function jE(n,t,e){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=ry(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}i&&(e.preOrderHooks??=[]).push(0-n,i),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}function sy(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){let o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-e,s),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),c&&(n.viewHooks??=[]).push(-e,c),l&&((n.viewHooks??=[]).push(e,l),(n.viewCheckHooks??=[]).push(e,l)),u!=null&&(n.destroyHooks??=[]).push(e,u)}}function gc(n,t,e){ay(n,t,3,e)}function mc(n,t,e,r){(n[$]&3)===e&&ay(n,t,e,r)}function vf(n,t){let e=n[$];(e&3)===t&&(e&=16383,e+=1,n[$]=e)}function ay(n,t,e,r){let i=r!==void 0?n[br]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(n[br]+=65536),(a<o||o==-1)&&(VE(n,e,t,c),n[br]=(n[br]&4294901760)+c+2),c++}function Iv(n,t){se(ee.LifecycleHookStart,n,t);let e=U(null);try{t.call(n)}finally{U(e),se(ee.LifecycleHookEnd,n,t)}}function VE(n,t,e,r){let i=e[r]<0,o=e[r+1],s=i?-e[r]:e[r],a=n[s];i?n[$]>>14<n[br]>>16&&(n[$]&3)===t&&(n[$]+=16384,Iv(a,o)):Iv(a,o)}var Ci=-1,Sr=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,r,i){this.factory=t,this.name=i,this.canSeeViewProviders=e,this.injectImpl=r}};function UE(n){return(n.flags&8)!==0}function $E(n){return(n.flags&16)!==0}function BE(n,t,e){let r=0;for(;r<e.length;){let i=e[r];if(typeof i=="number"){if(i!==0)break;r++;let o=e[r++],s=e[r++],a=e[r++];n.setAttribute(t,s,a,o)}else{let o=i,s=e[++r];HE(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),r++}}return r}function cy(n){return n===3||n===4||n===6}function HE(n){return n.charCodeAt(0)===64}function Wo(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?e=i:e===0||(e===-1||e===2?xv(n,e,i,null,t[++r]):xv(n,e,i,null,null))}}return n}function xv(n,t,e,r,i){let o=0,s=n.length;if(t===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===e){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),i!==null&&n.splice(o++,0,i)}function ly(n){return n!==Ci}function bc(n){return n&32767}function zE(n){return n>>16}function wc(n,t){let e=zE(n),r=t;for(;e>0;)r=r[_r],e--;return r}var xf=!0;function Mv(n){let t=xf;return xf=n,t}var GE=256,uy=GE-1,dy=5,qE=0,tn={};function WE(n,t,e){let r;typeof e=="string"?r=e.charCodeAt(0)||0:e.hasOwnProperty(vr)&&(r=e[vr]),r==null&&(r=e[vr]=qE++);let i=r&uy,o=1<<i;t.data[n+(i>>dy)]|=o}function Cc(n,t){let e=fy(n,t);if(e!==-1)return e;let r=t[V];r.firstCreatePass&&(n.injectorIndex=t.length,yf(r.data,n),yf(t,null),yf(r.blueprint,null));let i=Kf(n,t),o=n.injectorIndex;if(ly(i)){let s=bc(i),a=wc(i,t),c=a[V].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=i,o}function yf(n,t){n.push(0,0,0,0,0,0,0,0,t)}function fy(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function Kf(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,r=null,i=t;for(;i!==null;){if(r=vy(i),r===null)return Ci;if(e++,i=i[_r],r.injectorIndex!==-1)return r.injectorIndex|e<<16}return Ci}function Mf(n,t,e){WE(n,t,e)}function KE(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let r=e.length,i=0;for(;i<r;){let o=e[i];if(cy(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof e[i]=="string";)i++;else{if(o===t)return e[i+1];i=i+2}}}return null}function hy(n,t,e){if(e&8||n!==void 0)return n;Ja(t,"NodeInjector")}function py(n,t,e,r){if(e&8&&r===void 0&&(r=null),(e&3)===0){let i=n[Rn],o=ht(void 0);try{return i?i.get(t,r,e&8):Ld(t,r,e&8)}finally{ht(o)}}return hy(r,t,e)}function gy(n,t,e,r=0,i){if(n!==null){if(t[$]&2048&&!(r&2)){let s=JE(n,t,e,r,tn);if(s!==tn)return s}let o=my(n,t,e,r,tn);if(o!==tn)return o}return py(t,e,r,i)}function my(n,t,e,r,i){let o=ZE(e);if(typeof o=="function"){if(!af(t,n,r))return r&1?hy(i,e,r):py(t,e,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Ja(e);else return s}finally{cf()}}else if(typeof o=="number"){let s=null,a=fy(n,t),c=Ci,l=r&1?t[Dt][Et]:null;for((a===-1||r&4)&&(c=a===-1?Kf(n,t):t[a+8],c===Ci||!Ov(r,!1)?a=-1:(s=t[V],a=bc(c),t=wc(c,t)));a!==-1;){let u=t[V];if(Tv(o,a,u.data)){let d=YE(a,t,e,s,r,l);if(d!==tn)return d}c=t[a+8],c!==Ci&&Ov(r,t[V].data[a+8]===l)&&Tv(o,a,t)?(s=u,a=bc(c),t=wc(c,t)):a=-1}}return i}function YE(n,t,e,r,i,o){let s=t[V],a=s.data[n+8],c=r==null?kn(a)&&xf:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=vc(a,s,e,c,l);return u!==null?Ko(t,s,u,a,i):tn}function vc(n,t,e,r,i){let o=n.providerIndexes,s=t.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,u=o>>20,d=r?a:a+u,h=i?a+u:l;for(let f=d;f<h;f++){let m=s[f];if(f<c&&e===m||f>=c&&m.type===e)return f}if(i){let f=s[c];if(f&&en(f)&&f.type===e)return c}return null}function Ko(n,t,e,r,i){let o=n[e],s=t.data;if(o instanceof Sr){let a=o;if(a.resolving){let f=Om(s[e]);throw Fd(f)}let c=Mv(a.canSeeViewProviders);a.resolving=!0;let l=s[e].type||s[e],u,d=a.injectImpl?ht(a.injectImpl):null,h=af(n,r,0);try{o=n[e]=a.factory(void 0,i,s,n,r),t.firstCreatePass&&e>=r.directiveStart&&jE(e,s[e],t)}finally{d!==null&&ht(d),Mv(c),a.resolving=!1,cf()}}return o}function ZE(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(vr)?n[vr]:void 0;return typeof t=="number"?t>=0?t&uy:QE:t}function Tv(n,t,e){let r=1<<n;return!!(e[t+(n>>dy)]&r)}function Ov(n,t){return!(n&2)&&!(n&1&&t)}var Dr=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return gy(this._tNode,this._lView,t,fr(r),e)}};function QE(){return new Dr(ot(),X())}function Ut(n){return Jo(()=>{let t=n.prototype.constructor,e=t[So]||Tf(t),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[So]||Tf(i);if(o&&o!==e)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Tf(n){return Td(n)?()=>{let t=Tf(Le(n));return t&&t()}:hr(n)}function JE(n,t,e,r,i){let o=n,s=t;for(;o!==null&&s!==null&&s[$]&2048&&!yi(s);){let a=my(o,s,e,r|2,tn);if(a!==tn)return a;let c=o.parent;if(!c){let l=s[Wd];if(l){let u=l.get(e,tn,r);if(u!==tn)return u}c=vy(s),s=s[_r]}o=c}return i}function vy(n){let t=n[V],e=t.type;return e===2?t.declTNode:e===1?n[Et]:null}function Xo(n){return KE(ot(),n)}function XE(){return xi(ot(),X())}function xi(n,t){return new vt(Lt(n,t))}var vt=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=XE}return n})();function eD(n){return n instanceof vt?n.nativeElement:n}function tD(){return this._results[Symbol.iterator]()}var Ec=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new me}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let r=km(t);(this._changesDetected=!Pm(this._results,r,e))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=tD};function yy(n){return(n.flags&128)===128}var Yf=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Yf||{}),_y=new Map,nD=0;function rD(){return nD++}function iD(n){_y.set(n[Lo],n)}function Of(n){_y.delete(n[Lo])}var Av="__ngContext__";function Ei(n,t){Xt(t)?(n[Av]=t[Lo],iD(t)):n[Av]=t}function by(n){return Cy(n[vi])}function wy(n){return Cy(n[Ct])}function Cy(n){for(;n!==null&&!Ft(n);)n=n[Ct];return n}var oD;function Zf(n){oD=n}var Nc=new R("",{factory:()=>sD}),sD="ng";var Pc=new R(""),es=new R("",{providedIn:"platform",factory:()=>"unknown"});var kc=new R("",{factory:()=>w(Oe).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Ey=!1,Dy=new R("",{factory:()=>Ey});var aD=(n,t,e,r)=>{};function cD(n,t,e,r){aD(n,t,e,r)}function Qf(n){return(n.flags&32)===32}var lD=()=>null;function Sy(n,t,e=!1){return lD(n,t,e)}function Iy(n,t){let e=n.contentQueries;if(e!==null){let r=U(null);try{for(let i=0;i<e.length;i+=2){let o=e[i],s=e[i+1];if(s!==-1){let a=n.data[s];sc(o),a.contentQueries(2,t[s],s)}}}finally{U(r)}}}function Af(n,t,e){sc(0);let r=U(null);try{t(n,e)}finally{U(r)}}function xy(n,t,e){if(Kd(t)){let r=U(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=e[s];a.contentQueries(1,c,s)}}}finally{U(r)}}}var Vt=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Vt||{});var hc;function uD(){if(hc===void 0&&(hc=null,Oo.trustedTypes))try{hc=Oo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return hc}function Rv(n){return uD()?.createScriptURL(n)||n}var Dc=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Za})`}};function Fc(n){return n instanceof Dc?n.changingThisBreaksApplicationSecurity:n}function Jf(n,t){let e=My(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${Za})`)}return e===t}function My(n){return n instanceof Dc&&n.getTypeName()||null}var dD=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ty(n){return n=String(n),n.match(dD)?n:"unsafe:"+n}function fD(n,t){return n.createText(t)}function hD(n,t,e){n.setValue(t,e)}function Oy(n,t,e){return n.createElement(t,e)}function Sc(n,t,e,r,i){n.insertBefore(t,e,r,i)}function Ay(n,t,e){n.appendChild(t,e)}function Nv(n,t,e,r,i){r!==null?Sc(n,t,e,r,i):Ay(n,t,e)}function pD(n,t,e,r){n.removeChild(null,t,e,r)}function gD(n,t,e){n.setAttribute(t,"style",e)}function mD(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function Ry(n,t,e){let{mergedAttrs:r,classes:i,styles:o}=e;r!==null&&BE(n,t,r),i!==null&&mD(n,t,i),o!==null&&gD(n,t,o)}var Lc=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Lc||{});function Ny(n){let t=ky();return t?t.sanitize(Lc.URL,n)||"":Jf(n,"URL")?Fc(n):Ty(Ro(n))}function Py(n){let t=ky();if(t)return Rv(t.sanitize(Lc.RESOURCE_URL,n)||"");if(Jf(n,"ResourceURL"))return Rv(Fc(n));throw new I(904,!1)}function vD(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?Py:Ny}function Xf(n,t,e){return vD(t,e)(n)}function ky(){let n=X();return n&&n[Qt].sanitizer}function Fy(n){return n instanceof Function?n():n}function yD(n,t,e){let r=n.length;for(;;){let i=n.indexOf(t,e);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}e=i+1}}var Ly="ng-template";function _D(n,t,e,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&yD(t[i+1].toLowerCase(),e,0)!==-1)return!0}else if(eh(n))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===e)return!0}return!1}function eh(n){return n.type===4&&n.value!==Ly}function bD(n,t,e){let r=n.type===4&&!e?Ly:n.value;return t===r}function wD(n,t,e){let r=4,i=n.attrs,o=i!==null?DD(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!jt(r)&&!jt(c))return!1;if(s&&jt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!bD(n,c,e)||c===""&&t.length===1){if(jt(r))return!1;s=!0}}else if(r&8){if(i===null||!_D(n,i,c,e)){if(jt(r))return!1;s=!0}}else{let l=t[++a],u=CD(c,i,eh(n),e);if(u===-1){if(jt(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(jt(r))return!1;s=!0}}}}return jt(r)||s}function jt(n){return(n&1)===0}function CD(n,t,e,r){if(t===null)return-1;let i=0;if(r||!e){let o=!1;for(;i<t.length;){let s=t[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return SD(t,n)}function ED(n,t,e=!1){for(let r=0;r<t.length;r++)if(wD(n,t[r],e))return!0;return!1}function DD(n){for(let t=0;t<n.length;t++){let e=n[t];if(cy(e))return t}return n.length}function SD(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let r=n[e];if(typeof r=="number")return-1;if(r===t)return e;e++}return-1}function Pv(n,t){return n?":not("+t.trim()+")":t}function ID(n){let t=n[0],e=1,r=2,i="",o=!1;for(;e<n.length;){let s=n[e];if(typeof s=="string")if(r&2){let a=n[++e];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!jt(s)&&(t+=Pv(o,i),i=""),r=s,o=o||!jt(r);e++}return i!==""&&(t+=Pv(o,i)),t}function xD(n){return n.map(ID).join(",")}function MD(n){let t=[],e=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&t.push(o,n[++r]):i===8&&e.push(o);else{if(!jt(i))break;i=o}r++}return e.length&&t.push(1,...e),t}var vn={};function th(n,t,e,r,i,o,s,a,c,l,u){let d=ze+r,h=d+i,f=TD(d,h),m=typeof l=="function"?l():l;return f[V]={type:n,blueprint:f,template:e,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:u}}function TD(n,t){let e=[];for(let r=0;r<t;r++)e.push(r<n?null:vn);return e}function OD(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=th(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function nh(n,t,e,r,i,o,s,a,c,l,u){let d=t.blueprint.slice();return d[kt]=i,d[$]=r|4|128|8|64|1024,(l!==null||n&&n[$]&2048)&&(d[$]|=2048),Zd(d),d[Pe]=d[_r]=n,d[je]=e,d[Qt]=s||n&&n[Qt],d[Ie]=a||n&&n[Ie],d[Rn]=c||n&&n[Rn]||null,d[Et]=o,d[Lo]=rD(),d[Fo]=u,d[Wd]=l,d[Dt]=t.type==2?n[Dt]:d,d}function AD(n,t,e){let r=Lt(t,n),i=OD(e),o=n[Qt].rendererFactory,s=rh(n,nh(n,i,null,jy(e),r,t,null,o.createRenderer(r,e),null,null,null));return n[t.index]=s}function jy(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function Vy(n,t,e,r){if(e===0)return-1;let i=t.length;for(let o=0;o<e;o++)t.push(r),n.blueprint.push(r),n.data.push(null);return i}function rh(n,t){return n[vi]?n[qd][Ct]=t:n[vi]=t,n[qd]=t,t}function _(n=1){Uy(it(),X(),Er()+n,!1)}function Uy(n,t,e,r){if(!r)if((t[$]&3)===3){let o=n.preOrderCheckHooks;o!==null&&gc(t,o,e)}else{let o=n.preOrderHooks;o!==null&&mc(t,o,0,e)}Ln(e)}var jc=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(jc||{});function Rf(n,t,e,r){let i=U(null);try{let[o,s,a]=n.inputs[e],c=null;(s&jc.SignalBased)!==0&&(c=t[o][lt]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(t,r)),n.setInput!==null?n.setInput(t,c,r,e,o):ny(t,c,o,r)}finally{U(i)}}var nn=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(nn||{}),RD;function ih(n,t){return RD(n,t)}var Di=new Set,oh=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(oh||{}),ts=new R(""),kv=new Set;function Mi(n){kv.has(n)||(kv.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var $y=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=T({token:n,providedIn:"root",factory:()=>new n})}return n})();var ND=new R("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:w(Ne)})});function By(n,t,e){let r=n.get(ND);if(Array.isArray(t))for(let i of t)r.queue.add(i),e?.detachedLeaveAnimationFns?.push(i);else r.queue.add(t),e?.detachedLeaveAnimationFns?.push(t);r.scheduler&&r.scheduler(n)}function PD(n,t){for(let[e,r]of t)By(n,r.animateFns)}function Fv(n,t,e,r){let i=n?.[jo]?.enter;t!==null&&i&&i.has(e.index)&&PD(r,i)}function wi(n,t,e,r,i,o,s,a){if(i!=null){let c,l=!1;Ft(i)?c=i:Xt(i)&&(l=!0,i=i[kt]);let u=St(i);n===0&&r!==null?(Fv(a,r,o,e),s==null?Ay(t,r,u):Sc(t,r,u,s||null,!0)):n===1&&r!==null?(Fv(a,r,o,e),Sc(t,r,u,s||null,!0)):n===2?Lv(a,o,e,d=>{pD(t,u,l,d)}):n===3&&Lv(a,o,e,()=>{t.destroyNode(u)}),c!=null&&WD(t,n,e,c,o,r,s)}}function kD(n,t){Hy(n,t),t[kt]=null,t[Et]=null}function FD(n,t,e,r,i,o){r[kt]=i,r[Et]=t,Vc(n,r,e,1,i,o)}function Hy(n,t){t[Qt].changeDetectionScheduler?.notify(9),Vc(n,t,t[Ie],2,null,null)}function LD(n){let t=n[vi];if(!t)return _f(n[V],n);for(;t;){let e=null;if(Xt(t))e=t[vi];else{let r=t[Ge];r&&(e=r)}if(!e){for(;t&&!t[Ct]&&t!==n;)Xt(t)&&_f(t[V],t),t=t[Pe];t===null&&(t=n),Xt(t)&&_f(t[V],t),e=t&&t[Ct]}t=e}}function sh(n,t){let e=n[wr],r=e.indexOf(t);e.splice(r,1)}function ah(n,t){if(Cr(t))return;let e=t[Ie];e.destroyNode&&Vc(n,t,e,3,null,null),LD(t)}function _f(n,t){if(Cr(t))return;let e=U(null);try{t[$]&=-129,t[$]|=256,t[gt]&&rr(t[gt]),UD(n,t),VD(n,t),t[V].type===1&&t[Ie].destroy();let r=t[Nn];if(r!==null&&Ft(t[Pe])){r!==t[Pe]&&sh(r,t);let i=t[Jt];i!==null&&i.detachView(n)}Of(t)}finally{U(e)}}function Lv(n,t,e,r){let i=n?.[jo];if(i==null||i.leave==null||!i.leave.has(t.index))return r(!1);n&&Di.add(n),By(e,()=>{if(i.leave&&i.leave.has(t.index)){let s=i.leave.get(t.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),jD(n,r)}else n&&Di.delete(n),r(!1)},i)}function jD(n,t){let e=n[jo]?.running;if(e){e.then(()=>{n[jo].running=void 0,Di.delete(n),t(!0)});return}t(!1)}function VD(n,t){let e=n.cleanup,r=t[mi];if(e!==null)for(let s=0;s<e.length-1;s+=2)if(typeof e[s]=="string"){let a=e[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[e[s+1]];e[s].call(a)}r!==null&&(t[mi]=null);let i=t[pn];if(i!==null){t[pn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[xn];if(o!==null){t[xn]=null;for(let s of o)s.destroy()}}function UD(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let r=0;r<e.length;r+=2){let i=t[e[r]];if(!(i instanceof Sr)){let o=e[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];se(ee.LifecycleHookStart,a,c);try{c.call(a)}finally{se(ee.LifecycleHookEnd,a,c)}}else{se(ee.LifecycleHookStart,i,o);try{o.call(i)}finally{se(ee.LifecycleHookEnd,i,o)}}}}}function $D(n,t,e){return BD(n,t.parent,e)}function BD(n,t,e){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return e[kt];if(kn(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Vt.None||i===Vt.Emulated)return null}return Lt(r,e)}function HD(n,t,e){return GD(n,t,e)}function zD(n,t,e){return n.type&40?Lt(n,e):null}var GD=zD,jv;function ch(n,t,e,r){let i=$D(n,r,t),o=t[Ie],s=r.parent||t[Et],a=HD(s,r,t);if(i!=null)if(Array.isArray(e))for(let c=0;c<e.length;c++)Nv(o,i,e[c],a,!1);else Nv(o,i,e,a,!1);jv!==void 0&&jv(o,r,t,e,i)}function Go(n,t){if(t!==null){let e=t.type;if(e&3)return Lt(t,n);if(e&4)return Nf(-1,n[t.index]);if(e&8){let r=t.child;if(r!==null)return Go(n,r);{let i=n[t.index];return Ft(i)?Nf(-1,i):St(i)}}else{if(e&128)return Go(n,t.next);if(e&32)return ih(t,n)()||St(n[t.index]);{let r=zy(n,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Mn(n[Dt]);return Go(i,r)}else return Go(n,t.next)}}}return null}function zy(n,t){if(t!==null){let r=n[Dt][Et],i=t.projection;return r.projection[i]}return null}function Nf(n,t){let e=Ge+n+1;if(e<t.length){let r=t[e],i=r[V].firstChild;if(i!==null)return Go(r,i)}return t[Pn]}function lh(n,t,e,r,i,o,s){for(;e!=null;){let a=r[Rn];if(e.type===128){e=e.next;continue}let c=r[e.index],l=e.type;if(s&&t===0&&(c&&Ei(St(c),r),e.flags|=2),!Qf(e))if(l&8)lh(n,t,e.child,r,i,o,!1),wi(t,n,a,i,c,e,o,r);else if(l&32){let u=ih(e,r),d;for(;d=u();)wi(t,n,a,i,d,e,o,r);wi(t,n,a,i,c,e,o,r)}else l&16?qD(n,t,r,e,i,o):wi(t,n,a,i,c,e,o,r);e=s?e.projectionNext:e.next}}function Vc(n,t,e,r,i,o){lh(e,r,n.firstChild,t,i,o,!1)}function qD(n,t,e,r,i,o){let s=e[Dt],c=s[Et].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];wi(t,n,e[Rn],i,u,r,o,e)}else{let l=c,u=s[Pe];yy(r)&&(l.flags|=128),lh(n,t,l,u,i,o,!0)}}function WD(n,t,e,r,i,o,s){let a=r[Pn],c=St(r);a!==c&&wi(t,n,e,o,a,i,s);for(let l=Ge;l<r.length;l++){let u=r[l];Vc(u[V],u,n,t,o,a)}}function KD(n,t,e,r,i){if(t)i?n.addClass(e,r):n.removeClass(e,r);else{let o=r.indexOf("-")===-1?void 0:nn.DashCase;i==null?n.removeStyle(e,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=nn.Important),n.setStyle(e,r,i,o))}}function Gy(n,t,e,r,i){let o=Er(),s=r&2;try{Ln(-1),s&&t.length>ze&&Uy(n,t,ze,!1);let a=s?ee.TemplateUpdateStart:ee.TemplateCreateStart;se(a,i,e),e(r,i)}finally{Ln(o);let a=s?ee.TemplateUpdateEnd:ee.TemplateCreateEnd;se(a,i,e)}}function uh(n,t,e){nS(n,t,e),(e.flags&64)===64&&rS(n,t,e)}function dh(n,t,e=Lt){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?e(t,n):n[s];n[i++]=a}}}function YD(n,t,e,r){let o=r.get(Dy,Ey)||e===Vt.ShadowDom||e===Vt.ExperimentalIsolatedShadowDom,s=n.selectRootElement(t,o);return ZD(s),s}function ZD(n){QD(n)}var QD=()=>null;function JD(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function XD(n,t,e,r,i,o){let s=t[V];if(fh(n,s,t,e,r)){kn(n)&&tS(t,n.index);return}n.type&3&&(e=JD(e)),eS(n,t,e,r,i,o)}function eS(n,t,e,r,i,o){if(n.type&3){let s=Lt(n,t);r=o!=null?o(r,n.value||"",e):r,i.setProperty(s,e,r)}else n.type&12}function tS(n,t){let e=It(t,n);e[$]&16||(e[$]|=64)}function nS(n,t,e){let r=e.directiveStart,i=e.directiveEnd;kn(e)&&AD(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||Cc(e,t);let o=e.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=Ko(t,n,s,e);if(Ei(c,t),o!==null&&aS(t,s-r,c,a,e,o),en(a)){let l=It(e.index,t);l[je]=Ko(t,n,s,e)}}}function rS(n,t,e){let r=e.directiveStart,i=e.directiveEnd,o=e.index,s=dv();try{Ln(o);for(let a=r;a<i;a++){let c=n.data[a],l=t[a];oc(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&iS(c,l)}}finally{Ln(-1),oc(s)}}function iS(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function qy(n,t){let e=n.directiveRegistry,r=null;if(e)for(let i=0;i<e.length;i++){let o=e[i];ED(t,o.selectors,!1)&&(r??=[],en(o)?r.unshift(o):r.push(o))}return r}function oS(n,t,e,r,i,o){let s=Lt(n,t);sS(t[Ie],s,o,n.value,e,r,i)}function sS(n,t,e,r,i,o,s){if(o==null)n.removeAttribute(t,i,e);else{let a=s==null?Ro(o):s(o,r||"",i);n.setAttribute(t,i,a,e)}}function aS(n,t,e,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];Rf(r,e,c,l)}}function cS(n,t,e,r,i){let o=ze+e,s=t[V],a=i(s,t,n,r,e);t[o]=a,bi(n,!0);let c=n.type===2;return c?(Ry(t[Ie],a,n),(Xm()===0||Uo(n))&&Ei(a,t),ev()):Ei(a,t),lc()&&(!c||!Qf(n))&&ch(s,t,a,n),n}function lS(n){let t=n;return rf()?sv():(t=t.parent,bi(t,!1)),t}function uS(n,t){let e=n[Rn];if(!e)return;let r;try{r=e.get(xt,null)}catch{r=null}r?.(t)}function fh(n,t,e,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],d=t.data[l];Rf(d,e[l],u,i),a=!0}if(o)for(let c of o){let l=e[c],u=t.data[c];Rf(u,l,r,i),a=!0}return a}function dS(n,t){let e=It(t,n),r=e[V];fS(r,e);let i=e[kt];i!==null&&e[Fo]===null&&(e[Fo]=Sy(i,e[Rn])),se(ee.ComponentStart);try{hh(r,e,e[je])}finally{se(ee.ComponentEnd,e[je])}}function fS(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function hh(n,t,e){ac(t);try{let r=n.viewQuery;r!==null&&Af(1,r,e);let i=n.template;i!==null&&Gy(n,t,i,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[Jt]?.finishViewCreation(n),n.staticContentQueries&&Iy(n,t),n.staticViewQueries&&Af(2,n.viewQuery,e);let o=n.components;o!==null&&hS(t,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[$]&=-5,cc()}}function hS(n,t){for(let e=0;e<t.length;e++)dS(n,t[e])}function Wy(n,t,e,r){let i=U(null);try{let o=t.tView,a=n[$]&4096?4096:16,c=nh(n,o,e,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[t.index];c[Nn]=l;let u=n[Jt];return u!==null&&(c[Jt]=u.createEmbeddedView(o)),hh(o,c,e),c}finally{U(i)}}function Pf(n,t){return!t||t.firstChild===null||yy(n)}function Yo(n,t,e,r,i=!1){for(;e!==null;){if(e.type===128){e=i?e.projectionNext:e.next;continue}let o=t[e.index];o!==null&&r.push(St(o)),Ft(o)&&Ky(o,r);let s=e.type;if(s&8)Yo(n,t,e.child,r);else if(s&32){let a=ih(e,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=zy(t,e);if(Array.isArray(a))r.push(...a);else{let c=Mn(t[Dt]);Yo(c[V],c,a,r,!0)}}e=i?e.projectionNext:e.next}return r}function Ky(n,t){for(let e=Ge;e<n.length;e++){let r=n[e],i=r[V].firstChild;i!==null&&Yo(r[V],r,i,t)}n[Pn]!==n[kt]&&t.push(n[Pn])}function Yy(n){if(n[nc]!==null){for(let t of n[nc])t.impl.addSequence(t);n[nc].length=0}}var Zy=[];function pS(n){return n[gt]??gS(n)}function gS(n){let t=Zy.pop()??Object.create(vS);return t.lView=n,t}function mS(n){n.lView[gt]!==n&&(n.lView=null,Zy.push(n))}var vS=W(D({},ti),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{_i(n.lView)},consumerOnSignalRead(){this.lView[gt]=this}});function yS(n){let t=n[gt]??Object.create(_S);return t.lView=n,t}var _S=W(D({},ti),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=Mn(n.lView);for(;t&&!Qy(t[V]);)t=Mn(t);t&&Qd(t)},consumerOnSignalRead(){this.lView[gt]=this}});function Qy(n){return n.type!==2}function Jy(n){if(n[xn]===null)return;let t=!0;for(;t;){let e=!1;for(let r of n[xn])r.dirty&&(e=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=e&&!!(n[$]&8192)}}var bS=100;function Xy(n,t=0){let r=n[Qt].rendererFactory,i=!1;i||r.begin?.();try{wS(n,t)}finally{i||r.end?.()}}function wS(n,t){let e=of();try{xo(!0),kf(n,t);let r=0;for(;Bo(n);){if(r===bS)throw new I(103,!1);r++,kf(n,1)}}finally{xo(e)}}function CS(n,t,e,r){if(Cr(t))return;let i=t[$],o=!1,s=!1;ac(t);let a=!0,c=null,l=null;o||(Qy(n)?(l=pS(t),c=ni(l)):ca()===null?(a=!1,l=yS(t),c=ni(l)):t[gt]&&(rr(t[gt]),t[gt]=null));try{Zd(t),av(n.bindingStartIndex),e!==null&&Gy(n,t,e,2,r);let u=(i&3)===3;if(!o)if(u){let f=n.preOrderCheckHooks;f!==null&&gc(t,f,null)}else{let f=n.preOrderHooks;f!==null&&mc(t,f,0,null),vf(t,0)}if(s||ES(t),Jy(t),e_(t,0),n.contentQueries!==null&&Iy(n,t),!o)if(u){let f=n.contentCheckHooks;f!==null&&gc(t,f)}else{let f=n.contentHooks;f!==null&&mc(t,f,1),vf(t,1)}SS(n,t);let d=n.components;d!==null&&n_(t,d,0);let h=n.viewQuery;if(h!==null&&Af(2,h,r),!o)if(u){let f=n.viewCheckHooks;f!==null&&gc(t,f)}else{let f=n.viewHooks;f!==null&&mc(t,f,2),vf(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[tc]){for(let f of t[tc])f();t[tc]=null}o||(Yy(t),t[$]&=-73)}catch(u){throw o||_i(t),u}finally{l!==null&&(yo(l,c),a&&mS(l)),cc()}}function e_(n,t){for(let e=by(n);e!==null;e=wy(e))for(let r=Ge;r<e.length;r++){let i=e[r];t_(i,t)}}function ES(n){for(let t=by(n);t!==null;t=wy(t)){if(!(t[$]&2))continue;let e=t[wr];for(let r=0;r<e.length;r++){let i=e[r];Qd(i)}}}function DS(n,t,e){se(ee.ComponentStart);let r=It(t,n);try{t_(r,e)}finally{se(ee.ComponentEnd,r[je])}}function t_(n,t){rc(n)&&kf(n,t)}function kf(n,t){let r=n[V],i=n[$],o=n[gt],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&_o(o)),s||=!1,o&&(o.dirty=!1),n[$]&=-9217,s)CS(r,n,r.template,n[je]);else if(i&8192){let a=U(null);try{Jy(n),e_(n,1);let c=r.components;c!==null&&n_(n,c,1),Yy(n)}finally{U(a)}}}function n_(n,t,e){for(let r=0;r<t.length;r++)DS(n,t[r],e)}function SS(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let r=0;r<e.length;r++){let i=e[r];if(i<0)Ln(~i);else{let o=i,s=e[++r],a=e[++r];uv(s,o);let c=t[o];se(ee.HostBindingsUpdateStart,c);try{a(2,c)}finally{se(ee.HostBindingsUpdateEnd,c)}}}}finally{Ln(-1)}}function ph(n,t){let e=of()?64:1088;for(n[Qt].changeDetectionScheduler?.notify(t);n;){n[$]|=e;let r=Mn(n);if(yi(n)&&!r)return n;n=r}return null}function r_(n,t,e,r){return[n,!0,0,t,null,r,null,e,null,null]}function IS(n,t){let e=Ge+t;if(e<n.length)return n[e]}function i_(n,t,e,r=!0){let i=t[V];if(MS(i,t,n,e),r){let s=Nf(e,n),a=t[Ie],c=a.parentNode(n[Pn]);c!==null&&FD(i,n[Et],a,t,c,s)}let o=t[Fo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function xS(n,t){let e=Ic(n,t);return e!==void 0&&ah(e[V],e),e}function Ic(n,t){if(n.length<=Ge)return;let e=Ge+t,r=n[e];if(r){let i=r[Nn];i!==null&&i!==n&&sh(i,r),t>0&&(n[e-1][Ct]=r[Ct]);let o=No(n,Ge+t);kD(r[V],r);let s=o[Jt];s!==null&&s.detachView(o[V]),r[Pe]=null,r[Ct]=null,r[$]&=-129}return r}function MS(n,t,e,r){let i=Ge+r,o=e.length;r>0&&(e[i-1][Ct]=t),r<o-Ge?(t[Ct]=e[i],jd(e,Ge+r,t)):(e.push(t),t[Ct]=null),t[Pe]=e;let s=t[Nn];s!==null&&e!==s&&o_(s,t);let a=t[Jt];a!==null&&a.insertView(n),ic(t),t[$]|=128}function o_(n,t){let e=n[wr],r=t[Pe];if(Xt(r))n[$]|=2;else{let i=r[Pe][Dt];t[Dt]!==i&&(n[$]|=2)}e===null?n[wr]=[t]:e.push(t)}var Vn=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,e=t[V];return Yo(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e}get context(){return this._lView[je]}set context(t){this._lView[je]=t}get destroyed(){return Cr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Pe];if(Ft(t)){let e=t[Vo],r=e?e.indexOf(this):-1;r>-1&&(Ic(t,r),No(e,r))}this._attachedToViewContainer=!1}ah(this._lView[V],this._lView)}onDestroy(t){Jd(this._lView,t)}markForCheck(){ph(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[$]&=-129}reattach(){ic(this._lView),this._lView[$]|=128}detectChanges(){this._lView[$]|=1024,Xy(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new I(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=yi(this._lView),e=this._lView[Nn];e!==null&&!t&&sh(e,this._lView),Hy(this._lView[V],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new I(902,!1);this._appRef=t;let e=yi(this._lView),r=this._lView[Nn];r!==null&&!e&&o_(r,this._lView),ic(this._lView)}};var Un=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=TS;constructor(e,r,i){this._declarationLView=e,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,r){return this.createEmbeddedViewImpl(e,r)}createEmbeddedViewImpl(e,r,i){let o=Wy(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:r,dehydratedView:i});return new Vn(o)}}return n})();function TS(){return gh(ot(),X())}function gh(n,t){return n.type&4?new Un(t,n,xi(n,t)):null}function Uc(n,t,e,r,i){let o=n.data[t];if(o===null)o=OS(n,t,e,r,i),lv()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=r,o.attrs=i;let s=ov();o.injectorIndex=s===null?-1:s.injectorIndex}return bi(o,!0),o}function OS(n,t,e,r,i){let o=nf(),s=rf(),a=s?o:o&&o.parent,c=n.data[t]=RS(n,a,e,t,r,i);return AS(n,c,o,s),c}function AS(n,t,e,r){n.firstChild===null&&(n.firstChild=t),e!==null&&(r?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function RS(n,t,e,r,i,o){let s=t?t.injectorIndex:-1,a=0;return nv()&&(a|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var NS=()=>null,PS=()=>null;function Vv(n,t){return NS(n,t)}function kS(n,t,e){return PS(n,t,e)}var s_=class{},$c=class{},Ff=class{resolveComponentFactory(t){throw new I(917,!1)}},ns=class{static NULL=new Ff},Ir=class{},yn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>FS()}return n})();function FS(){let n=X(),t=ot(),e=It(t.index,n);return(Xt(e)?e:n)[Ie]}var a_=(()=>{class n{static \u0275prov=T({token:n,providedIn:"root",factory:()=>null})}return n})();var yc={},Lf=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){let i=this.injector.get(t,yc,r);return i!==yc||e===yc?i:this.parentInjector.get(t,e,r)}};function Uv(n,t,e){let r=e?n.styles:null,i=e?n.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=Md(i,a);else if(o==2){let c=a,l=t[++s];r=Md(r,c+": "+l+";")}}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=i:n.classesWithoutHost=i}function P(n,t=0){let e=X();if(e===null)return F(n,t);let r=ot();return gy(r,e,Le(n),t)}function c_(n,t,e,r,i){let o=r===null?null:{"":-1},s=i(n,e);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}VS(n,t,e,a,o,c,l)}o!==null&&r!==null&&LS(e,r,o)}function LS(n,t,e){let r=n.localNames=[];for(let i=0;i<t.length;i+=2){let o=e[t[i+1]];if(o==null)throw new I(-301,!1);r.push(t[i],o)}}function jS(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function VS(n,t,e,r,i,o,s){let a=r.length,c=null;for(let h=0;h<a;h++){let f=r[h];c===null&&en(f)&&(c=f,jS(n,e,h)),Mf(Cc(e,t),n,f.type)}GS(e,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let h=0;h<a;h++){let f=r[h];f.providersResolver&&f.providersResolver(f)}let l=!1,u=!1,d=Vy(n,t,a,null);a>0&&(e.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=r[h];if(e.mergedAttrs=Wo(e.mergedAttrs,f.hostAttrs),$S(n,e,t,d,f),zS(d,f,i),s!==null&&s.has(f)){let[y,E]=s.get(f);e.directiveToIndex.set(f.type,[d,y+e.directiveStart,E+e.directiveStart])}else(o===null||!o.has(f))&&e.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(e.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(e.flags|=64);let m=f.type.prototype;!l&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),l=!0),!u&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),u=!0),d++}US(n,e,o)}function US(n,t,e){for(let r=t.directiveStart;r<t.directiveEnd;r++){let i=n.data[r];if(e===null||!e.has(i))$v(0,t,i,r),$v(1,t,i,r),Hv(t,r,!1);else{let o=e.get(i);Bv(0,t,o,r),Bv(1,t,o,r),Hv(t,r,!0)}}}function $v(n,t,e,r){let i=n===0?e.inputs:e.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(r),l_(t,o)}}function Bv(n,t,e,r){let i=n===0?e.inputs:e.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),l_(t,s)}}function l_(n,t){t==="class"?n.flags|=8:t==="style"&&(n.flags|=16)}function Hv(n,t,e){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!e&&i===null||e&&o===null||eh(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!e&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===t){s??=[],s.push(c,r[a+1]);break}}else if(e&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===t){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function $S(n,t,e,r,i){n.data[r]=i;let o=i.factory||(i.factory=hr(i.type,!0)),s=new Sr(o,en(i),P,null);n.blueprint[r]=s,e[r]=s,BS(n,t,r,Vy(n,e,i.hostVars,vn),i)}function BS(n,t,e,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~t.index;HS(s)!=a&&s.push(a),s.push(e,r,o)}}function HS(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function zS(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;en(t)&&(e[""]=n)}}function GS(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function u_(n,t,e,r,i,o,s,a){let c=t[V],l=c.consts,u=Fn(l,s),d=Uc(c,n,e,r,u);return o&&c_(c,t,d,Fn(l,a),i),d.mergedAttrs=Wo(d.mergedAttrs,d.attrs),d.attrs!==null&&Uv(d,d.attrs,!1),d.mergedAttrs!==null&&Uv(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function d_(n,t){sy(n,t),Kd(t)&&n.queries.elementEnd(t)}function mh(n){return h_(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function f_(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),r;for(;!(r=e.next()).done;)t(r.value)}}function h_(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function rs(n,t,e){if(e===vn)return!1;let r=n[t];return Object.is(r,e)?!1:(n[t]=e,!0)}function bf(n,t,e){return function r(i){let o=kn(n)?It(n.index,t):t;ph(o,5);let s=t[je],a=zv(t,s,e,i),c=r.__ngNextListenerFn__;for(;c;)a=zv(t,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function zv(n,t,e,r){let i=U(null);try{return se(ee.OutputStart,t,e),e(r)!==!1}catch(o){return uS(n,o),!1}finally{se(ee.OutputEnd,t,e),U(i)}}function qS(n,t,e,r,i,o,s,a){let c=Uo(n),l=!1,u=null;if(!r&&c&&(u=KS(t,e,o,n.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let d=Lt(n,e),h=r?r(d):d;cD(e,h,o,a);let f=i.listen(h,o,a);if(!WS(o)){let m=r?y=>r(St(y[n.index])):n.index;p_(m,t,e,o,a,f,!1)}}return l}function WS(n){return n.startsWith("animation")||n.startsWith("transition")}function KS(n,t,e,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===e&&i[o+1]===r){let a=t[mi],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function p_(n,t,e,r,i,o,s){let a=t.firstCreatePass?ef(t):null,c=Xd(e),l=c.length;c.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function Gv(n,t,e,r,i,o){let s=t[e],a=t[V],l=a.data[e].outputs[r],d=s[l].subscribe(o);p_(n.index,a,t,i,o,d,!0)}var jf=Symbol("BINDING");var xc=class extends ns{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=An(t);return new Si(e,this.ngModule)}};function YS(n){return Object.keys(n).map(t=>{let[e,r,i]=n[t],o={propName:e,templateName:t,isSignal:(r&jc.SignalBased)!==0};return i&&(o.transform=i),o})}function ZS(n){return Object.keys(n).map(t=>({propName:n[t],templateName:t}))}function QS(n,t,e){let r=t instanceof Ne?t:t?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Lf(e,r):e}function JS(n){let t=n.get(Ir,null);if(t===null)throw new I(407,!1);let e=n.get(a_,null),r=n.get(mr,null);return{rendererFactory:t,sanitizer:e,changeDetectionScheduler:r,ngReflect:!1}}function XS(n,t){let e=g_(n);return Oy(t,e,e==="svg"?qm:e==="math"?Wm:null)}function g_(n){return(n.selectors[0][0]||"div").toLowerCase()}var Si=class extends $c{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=YS(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=ZS(this.componentDef.outputs),this.cachedOutputs}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=xD(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,r,i,o,s){se(ee.DynamicComponentStart);let a=U(null);try{let c=this.componentDef,l=eI(r,c,s,o),u=QS(c,i||this.ngModule,t),d=JS(u),h=d.rendererFactory.createRenderer(null,c),f=r?YD(h,r,c.encapsulation,u):XS(c,h),m=s?.some(qv)||o?.some(C=>typeof C!="function"&&C.bindings.some(qv)),y=nh(null,l,null,512|jy(c),null,null,d,h,u,null,Sy(f,u,!0));y[ze]=f,ac(y);let E=null;try{let C=u_(ze,y,2,"#host",()=>l.directiveRegistry,!0,0);Ry(h,f,C),Ei(f,y),uh(l,y,C),xy(l,C,y),d_(l,C),e!==void 0&&nI(C,this.ngContentSelectors,e),E=It(C.index,y),y[je]=E[je],hh(l,y,null)}catch(C){throw E!==null&&Of(E),Of(y),C}finally{se(ee.DynamicComponentEnd),cc()}return new Mc(this.componentType,y,!!m)}finally{U(a)}}};function eI(n,t,e,r){let i=n?["ng-version","21.0.3"]:MD(t.selectors[0]),o=null,s=null,a=0;if(e)for(let u of e)a+=u[jf].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let h of d.bindings){a+=h[jf].requiredVars;let f=u+1;h.create&&(h.targetIdx=f,(o??=[]).push(h)),h.update&&(h.targetIdx=f,(s??=[]).push(h))}}let c=[t];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,h=Bd(d);c.push(h)}return th(0,null,tI(o,s),1,a,c,null,null,null,[i],null)}function tI(n,t){return!n&&!t?null:e=>{if(e&1&&n)for(let r of n)r.create();if(e&2&&t)for(let r of t)r.update()}}function qv(n){let t=n[jf].kind;return t==="input"||t==="twoWay"}var Mc=class extends s_{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e,r){super(),this._rootLView=e,this._hasInputBindings=r,this._tNode=$o(e[V],ze),this.location=xi(this._tNode,e),this.instance=It(this._tNode.index,e)[je],this.hostView=this.changeDetectorRef=new Vn(e,void 0),this.componentType=t}setInput(t,e){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let i=this._rootLView,o=fh(r,i[V],i,t,e);this.previousInputValues.set(t,e);let s=It(r.index,i);ph(s,1)}get injector(){return new Dr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function nI(n,t,e){let r=n.projection=[];for(let i=0;i<t.length;i++){let o=e[i];r.push(o!=null&&o.length?Array.from(o):null)}}var _n=(()=>{class n{static __NG_ELEMENT_ID__=rI}return n})();function rI(){let n=ot();return v_(n,X())}var iI=_n,m_=class extends iI{_lContainer;_hostTNode;_hostLView;constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return xi(this._hostTNode,this._hostLView)}get injector(){return new Dr(this._hostTNode,this._hostLView)}get parentInjector(){let t=Kf(this._hostTNode,this._hostLView);if(ly(t)){let e=wc(t,this._hostLView),r=bc(t),i=e[V].data[r+8];return new Dr(i,e)}else return new Dr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=Wv(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Ge}createEmbeddedView(t,e,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Vv(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,i,Pf(this._hostTNode,s)),a}createComponent(t,e,r,i,o,s,a){let c=t&&!PE(t),l;if(c)l=e;else{let E=e||{};l=E.index,r=E.injector,i=E.projectableNodes,o=E.environmentInjector||E.ngModuleRef,s=E.directives,a=E.bindings}let u=c?t:new Si(An(t)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let C=(c?d:this.parentInjector).get(Ne,null);C&&(o=C)}let h=An(u.componentType??{}),f=Vv(this._lContainer,h?.id??null),m=f?.firstChild??null,y=u.create(d,i,m,o,s,a);return this.insertImpl(y.hostView,l,Pf(this._hostTNode,f)),y}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,r){let i=t._lView;if(Ym(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[Pe],l=new m_(c,c[Et],c[Pe]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return i_(s,i,o,r),t.attachToViewContainerRef(),jd(wf(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=Wv(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),r=Ic(this._lContainer,e);r&&(No(wf(this._lContainer),e),ah(r[V],r))}detach(t){let e=this._adjustIndex(t,-1),r=Ic(this._lContainer,e);return r&&No(wf(this._lContainer),e)!=null?new Vn(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function Wv(n){return n[Vo]}function wf(n){return n[Vo]||(n[Vo]=[])}function v_(n,t){let e,r=t[n.index];return Ft(r)?e=r:(e=r_(r,t,null,n),t[n.index]=e,rh(t,e)),sI(e,t,n,r),new m_(e,n,t)}function oI(n,t){let e=n[Ie],r=e.createComment(""),i=Lt(t,n),o=e.parentNode(i);return Sc(e,o,r,e.nextSibling(i),!1),r}var sI=lI,aI=()=>!1;function cI(n,t,e){return aI(n,t,e)}function lI(n,t,e,r){if(n[Pn])return;let i;e.type&8?i=St(r):i=oI(t,e),n[Pn]=i}var Vf=class n{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Uf=class n{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let r=t.contentQueries!==null?t.contentQueries[0]:e.length,i=[];for(let o=0;o<r;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)vh(t,e).matches!==null&&this.queries[e].setDirty()}},$f=class{flags;read;predicate;constructor(t,e,r=null){this.flags=e,this.read=r,typeof t=="string"?this.predicate=vI(t):this.predicate=t}},Bf=class n{queries;constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){let i=e!==null?e.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,e!==null?e.push(o):e=[o])}return e!==null?new n(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},Hf=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,e=-1){this.metadata=t,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==e;)r=r.parent;return e===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,e,uI(e,o)),this.matchTNodeWithReadOption(t,e,vc(e,t,o,!1,!1))}else r===Un?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,vc(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===vt||i===_n||i===Un&&e.type&4)this.addMatch(e.index,-2);else{let o=vc(e,t,i,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,r)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function uI(n,t){let e=n.localNames;if(e!==null){for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1]}return null}function dI(n,t){return n.type&11?xi(n,t):n.type&4?gh(n,t):null}function fI(n,t,e,r){return e===-1?dI(t,n):e===-2?hI(n,t,r):Ko(n,n[V],e,t)}function hI(n,t,e){if(e===vt)return xi(t,n);if(e===Un)return gh(t,n);if(e===_n)return v_(t,n)}function y_(n,t,e,r){let i=t[Jt].queries[r];if(i.matches===null){let o=n.data,s=e.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(fI(t,u,s[c+1],e.metadata.read))}}i.matches=a}return i.matches}function zf(n,t,e,r){let i=n.queries.getByIndex(e),o=i.matches;if(o!==null){let s=y_(n,t,i,e);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],u=t[-c];for(let d=Ge;d<u.length;d++){let h=u[d];h[Nn]===h[Pe]&&zf(h[V],h,l,r)}if(u[wr]!==null){let d=u[wr];for(let h=0;h<d.length;h++){let f=d[h];zf(f[V],f,l,r)}}}}}return r}function pI(n,t){return n[Jt].queries[t].queryList}function gI(n,t,e){let r=new Ec((e&4)===4);return Jm(n,t,r,r.destroy),(t[Jt]??=new Uf).queries.push(new Vf(r))-1}function mI(n,t,e,r){let i=it();if(i.firstCreatePass){let o=ot();yI(i,new $f(t,e,r),o.index),_I(i,n),(e&2)===2&&(i.staticContentQueries=!0)}return gI(i,X(),e)}function vI(n){return n.split(",").map(t=>t.trim())}function yI(n,t,e){n.queries===null&&(n.queries=new Bf),n.queries.track(new Hf(t,e))}function _I(n,t){let e=n.contentQueries||(n.contentQueries=[]),r=e.length?e[e.length-1]:-1;t!==r&&e.push(n.queries.length-1,t)}function vh(n,t){return n.queries.getByIndex(t)}function bI(n,t){let e=n[V],r=vh(e,t);return r.crossesNgTemplate?zf(e,n,t,[]):y_(e,n,r,t)}var xr=class{},Bc=class{};var Tc=class extends xr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new xc(this);constructor(t,e,r,i=!0){super(),this.ngModuleType=t,this._parent=e;let o=$d(t);this._bootstrapComponents=Fy(o.bootstrap),this._r3Injector=uf(t,e,[{provide:xr,useValue:this},{provide:ns,useValue:this.componentFactoryResolver},...r],gn(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Oc=class extends Bc{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Tc(this.moduleType,t,[])}};var Zo=class extends xr{injector;componentFactoryResolver=new xc(this);instance=null;constructor(t){super();let e=new gr([...t.providers,{provide:xr,useValue:this},{provide:ns,useValue:this.componentFactoryResolver}],t.parent||ko(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function is(n,t,e=null){return new Zo({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var wI=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let r=Hd(!1,e.type),i=r.length>0?is([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,i)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=T({token:n,providedIn:"environment",factory:()=>new n(F(Ne))})}return n})();function Ee(n){return Jo(()=>{let t=__(n),e=W(D({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Yf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(wI).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Vt.Emulated,styles:n.styles||pt,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&Mi("NgStandalone"),b_(e);let r=n.dependencies;return e.directiveDefs=Kv(r,CI),e.pipeDefs=Kv(r,jm),e.id=SI(e),e})}function CI(n){return An(n)||Bd(n)}function $t(n){return Jo(()=>({type:n.type,bootstrap:n.bootstrap||pt,declarations:n.declarations||pt,imports:n.imports||pt,exports:n.exports||pt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function EI(n,t){if(n==null)return On;let e={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=jc.None,c=null),e[o]=[r,a,c],t[o]=s}return e}function DI(n){if(n==null)return On;let t={};for(let e in n)n.hasOwnProperty(e)&&(t[n[e]]=e);return t}function ye(n){return Jo(()=>{let t=__(n);return b_(t),t})}function __(n){let t={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputConfig:n.inputs||On,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||pt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:EI(n.inputs,t),outputs:DI(n.outputs),debugInfo:null}}function b_(n){n.features?.forEach(t=>t(n))}function Kv(n,t){return n?()=>{let e=typeof n=="function"?n():n,r=[];for(let i of e){let o=t(i);o!==null&&r.push(o)}return r}:null}function SI(n){let t=0,e=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function II(n){return Object.getPrototypeOf(n.prototype).constructor}function yt(n){let t=II(n.type),e=!0,r=[n];for(;t;){let i;if(en(n))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new I(903,!1);i=t.\u0275dir}if(i){if(e){r.push(i);let s=n;s.inputs=Cf(n.inputs),s.declaredInputs=Cf(n.declaredInputs),s.outputs=Cf(n.outputs);let a=i.hostBindings;a&&AI(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&TI(n,c),l&&OI(n,l),xI(n,i),Tm(n.outputs,i.outputs),en(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===yt&&(e=!1)}}t=Object.getPrototypeOf(t)}MI(r)}function xI(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let r=t.inputs[e];r!==void 0&&(n.inputs[e]=r,n.declaredInputs[e]=t.declaredInputs[e])}}function MI(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Wo(i.hostAttrs,e=Wo(e,i.hostAttrs))}}function Cf(n){return n===On?{}:n===pt?[]:n}function TI(n,t){let e=n.viewQuery;e?n.viewQuery=(r,i)=>{t(r,i),e(r,i)}:n.viewQuery=t}function OI(n,t){let e=n.contentQueries;e?n.contentQueries=(r,i,o)=>{t(r,i,o),e(r,i,o)}:n.contentQueries=t}function AI(n,t){let e=n.hostBindings;e?n.hostBindings=(r,i)=>{t(r,i),e(r,i)}:n.hostBindings=t}function w_(n,t,e,r,i,o,s,a){if(e.firstCreatePass){n.mergedAttrs=Wo(n.mergedAttrs,n.attrs);let u=n.tView=th(2,n,i,o,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,e.consts,null);e.queries!==null&&(e.queries.template(e,n),u.queries=e.queries.embeddedTView(n))}a&&(n.flags|=a),bi(n,!1);let c=NI(e,t,n,r);lc()&&ch(e,t,c,n),Ei(c,t);let l=r_(c,t,c,n);t[r+ze]=l,rh(t,l),cI(l,n,t)}function RI(n,t,e,r,i,o,s,a,c,l,u){let d=e+ze,h;return t.firstCreatePass?(h=Uc(t,d,4,s||null,a||null),tf()&&c_(t,n,h,Fn(t.consts,l),qy),sy(t,h)):h=t.data[d],w_(h,n,t,e,r,i,o,c),Uo(h)&&uh(t,n,h),l!=null&&dh(n,h,u),h}function C_(n,t,e,r,i,o,s,a,c,l,u){let d=e+ze,h;if(t.firstCreatePass){if(h=Uc(t,d,4,s||null,a||null),l!=null){let f=Fn(t.consts,l);h.localNames=[];for(let m=0;m<f.length;m+=2)h.localNames.push(f[m],-1)}}else h=t.data[d];return w_(h,n,t,e,r,i,o,c),l!=null&&dh(n,h,u),h}function We(n,t,e,r,i,o,s,a){let c=X(),l=it(),u=Fn(l.consts,o);return RI(c,l,n,t,e,r,i,u,void 0,s,a),We}var NI=PI;function PI(n,t,e,r){return uc(!0),t[Ie].createComment("")}var yh=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var _h=new R("");function $n(n){return!!n&&typeof n.then=="function"}function bh(n){return!!n&&typeof n.subscribe=="function"}var wh=new R("");function Hc(n){return Zt([{provide:wh,multi:!0,useValue:n}])}var Ch=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,r)=>{this.resolve=e,this.reject=r});appInits=w(wh,{optional:!0})??[];injector=w(tt);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let i of this.appInits){let o=rt(this.injector,i);if($n(o))e.push(o);else if(bh(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});e.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{r()}).catch(i=>{this.reject(i)}),e.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zc=new R("");function E_(){zu(()=>{let n="";throw new I(600,n)})}function D_(n){return n.isBoundToModule}var kI=10;var rn=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=w(xt);afterRenderManager=w($y);zonelessEnabled=w(zo);rootEffectScheduler=w(fc);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new me;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=w(jn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Q(e=>!e))}constructor(){w(ts,{optional:!0})}whenStable(){let e;return new Promise(r=>{e=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{e.unsubscribe()})}_injector=w(Ne);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,r){return this.bootstrapImpl(e,r)}bootstrapImpl(e,r,i=tt.NULL){return this._injector.get(nt).run(()=>{se(ee.BootstrapComponentStart);let s=e instanceof $c;if(!this._injector.get(Ch).done){let m="";throw new I(405,m)}let c;s?c=e:c=this._injector.get(ns).resolveComponentFactory(e),this.componentTypes.push(c.componentType);let l=D_(c)?void 0:this._injector.get(xr),u=r||c.selector,d=c.create(i,[],u,l),h=d.location.nativeElement,f=d.injector.get(_h,null);return f?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),qo(this.components,d),f?.unregisterApplication(h)}),this._loadComponent(d),se(ee.BootstrapComponentEnd,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){se(ee.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(oh.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw se(ee.ChangeDetectionEnd),new I(101,!1);let e=U(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,U(e),this.afterTick.next(),se(ee.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ir,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<kI;){se(ee.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{se(ee.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let e=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Bo(i))continue;let o=r&&!this.zonelessEnabled?0:1;Xy(i,o),e=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}e||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>Bo(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){let r=e;qo(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(e),this._injector.get(zc,[]).forEach(i=>i(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>qo(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new I(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qo(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Tr(n,t,e,r){let i=X(),o=Ho();if(rs(i,o,t)){let s=it(),a=lf();oS(a,i,n,t,e,r)}return Tr}var Yj=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function ue(n,t,e,r,i,o,s,a){Mi("NgControlFlow");let c=X(),l=it(),u=Fn(l.consts,o);return C_(c,l,n,t,e,r,i,u,256,s,a),Eh}function Eh(n,t,e,r,i,o,s,a){Mi("NgControlFlow");let c=X(),l=it(),u=Fn(l.consts,o);return C_(c,l,n,t,e,r,i,u,512,s,a),Eh}function de(n,t){Mi("NgControlFlow");let e=X(),r=Ho(),i=e[r]!==vn?e[r]:-1,o=i!==-1?Yv(e,ze+i):void 0,s=0;if(rs(e,r,n)){let a=U(null);try{if(o!==void 0&&xS(o,s),n!==-1){let c=ze+n,l=Yv(e,c),u=FI(e[V],c),d=kS(l,u,e),h=Wy(e,u,t,{dehydratedView:d});i_(l,h,s,Pf(u,d))}}finally{U(a)}}else if(o!==void 0){let a=IS(o,s);a!==void 0&&(a[je]=t)}}function Yv(n,t){return n[t]}function FI(n,t){return $o(n,t)}function L(n,t,e){let r=X(),i=Ho();if(rs(r,i,t)){let o=it(),s=lf();XD(s,r,n,t,r[Ie],e)}return L}function Zv(n,t,e,r,i){fh(t,n,e,i?"class":"style",r)}function p(n,t,e,r){let i=X(),o=i[V],s=n+ze,a=o.firstCreatePass?u_(s,i,2,t,qy,tf(),e,r):o.data[s];if(cS(a,i,n,t,LI),Uo(a)){let c=i[V];uh(c,i,a),xy(c,a,i)}return r!=null&&dh(i,a),p}function g(){let n=it(),t=ot(),e=lS(t);return n.firstCreatePass&&d_(n,e),rv(e)&&iv(),tv(),e.classesWithoutHost!=null&&UE(e)&&Zv(n,e,X(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&$E(e)&&Zv(n,e,X(),e.stylesWithoutHost,!1),g}function b(n,t,e,r){return p(n,t,e,r),g(),b}var LI=(n,t,e,r,i)=>(uc(!0),Oy(t[Ie],r,vv()));function _e(){return X()}var os="en-US";var jI=os;function S_(n){typeof n=="string"&&(jI=n.toLowerCase().replace(/_/g,"-"))}function j(n,t,e){let r=X(),i=it(),o=ot();return VI(i,r,r[Ie],o,n,t,e),j}function VI(n,t,e,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=bf(r,t,o),qS(r,n,t,s,e,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let d=0;d<u.length;d+=2){let h=u[d],f=u[d+1];c??=bf(r,t,o),Gv(r,t,h,f,i,c)}if(l&&l.length)for(let d of l)c??=bf(r,t,o),Gv(r,t,d,i,i,c)}}function x(n=1){return mv(n)}function Dh(n,t,e,r){mI(n,t,e,r)}function Sh(n){let t=X(),e=it(),r=sf();sc(r+1);let i=vh(e,r);if(n.dirty&&Km(t)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=bI(t,r);n.reset(o,eD),n.notifyOnChanges()}return!0}return!1}function Ih(){return pI(X(),sf())}function pc(n,t){return n<<17|t<<2}function Mr(n){return n>>17&32767}function UI(n){return(n&2)==2}function $I(n,t){return n&131071|t<<17}function Gf(n){return n|2}function Ii(n){return(n&131068)>>2}function Ef(n,t){return n&-131069|t<<2}function BI(n){return(n&1)===1}function qf(n){return n|1}function HI(n,t,e,r,i,o){let s=o?t.classBindings:t.styleBindings,a=Mr(s),c=Ii(s);n[r]=e;let l=!1,u;if(Array.isArray(e)){let d=e;u=d[1],(u===null||gi(d,u)>0)&&(l=!0)}else u=e;if(i)if(c!==0){let h=Mr(n[a+1]);n[r+1]=pc(h,a),h!==0&&(n[h+1]=Ef(n[h+1],r)),n[a+1]=$I(n[a+1],r)}else n[r+1]=pc(a,0),a!==0&&(n[a+1]=Ef(n[a+1],r)),a=r;else n[r+1]=pc(c,0),a===0?a=r:n[c+1]=Ef(n[c+1],r),c=r;l&&(n[r+1]=Gf(n[r+1])),Qv(n,u,r,!0),Qv(n,u,r,!1),zI(t,u,n,r,o),s=pc(a,c),o?t.classBindings=s:t.styleBindings=s}function zI(n,t,e,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof t=="string"&&gi(o,t)>=0&&(e[r+1]=qf(e[r+1]))}function Qv(n,t,e,r){let i=n[e+1],o=t===null,s=r?Mr(i):Ii(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];GI(c,t)&&(a=!0,n[s+1]=r?qf(l):Gf(l)),s=r?Mr(l):Ii(l)}a&&(n[e+1]=r?Gf(i):qf(i))}function GI(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?gi(n,t)>=0:!1}function ae(n,t){return qI(n,t,null,!0),ae}function qI(n,t,e,r){let i=X(),o=it(),s=cv(2);if(o.firstUpdatePass&&KI(o,n,s,r),t!==vn&&rs(i,s,t)){let a=o.data[Er()];XI(o,a,i,i[Ie],n,i[s+1]=ex(t,e),r,s)}}function WI(n,t){return t>=n.expandoStartIndex}function KI(n,t,e,r){let i=n.data;if(i[e+1]===null){let o=i[Er()],s=WI(n,e);tx(o,r)&&t===null&&!s&&(t=!1),t=YI(i,o,t,r),HI(i,o,t,e,s,r)}}function YI(n,t,e,r){let i=fv(n),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(e=Df(null,n,t,e,r),e=Qo(e,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||n[s]!==i)if(e=Df(i,n,t,e,r),o===null){let c=ZI(n,t,r);c!==void 0&&Array.isArray(c)&&(c=Df(null,n,t,c[1],r),c=Qo(c,t.attrs,r),QI(n,t,r,c))}else o=JI(n,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),e}function ZI(n,t,e){let r=e?t.classBindings:t.styleBindings;if(Ii(r)!==0)return n[Mr(r)]}function QI(n,t,e,r){let i=e?t.classBindings:t.styleBindings;n[Mr(i)]=r}function JI(n,t,e){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Qo(r,s,e)}return Qo(r,t.attrs,e)}function Df(n,t,e,r,i){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=t[a],r=Qo(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(e.directiveStylingLast=a),r}function Qo(n,t,e){let r=e?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Lm(n,s,e?!0:t[++o]))}return n===void 0?null:n}function XI(n,t,e,r,i,o,s,a){if(!(t.type&3))return;let c=n.data,l=c[a+1],u=BI(l)?Jv(c,t,e,i,Ii(l),s):void 0;if(!Ac(u)){Ac(o)||UI(l)&&(o=Jv(c,null,e,i,a,s));let d=Yd(Er(),e);KD(r,s,d,i,o)}}function Jv(n,t,e,r,i,o){let s=t===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=e[i+1];h===vn&&(h=d?pt:void 0);let f=d?ec(h,r):u===r?h:void 0;if(l&&!Ac(f)&&(f=ec(c,r)),Ac(f)&&(a=f,s))return a;let m=n[i+1];i=s?Mr(m):Ii(m)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=ec(c,r))}return a}function Ac(n){return n!==void 0}function ex(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=gn(Fc(n)))),n}function tx(n,t){return(n.flags&(t?8:16))!==0}function v(n,t=""){let e=X(),r=it(),i=n+ze,o=r.firstCreatePass?Uc(r,i,1,t,null):r.data[i],s=nx(r,e,o,t,n);e[i]=s,lc()&&ch(r,e,s,o),bi(o,!1)}var nx=(n,t,e,r,i)=>(uc(!0),fD(t[Ie],r));function rx(n,t,e,r=""){return rs(n,Ho(),e)?t+Ro(e)+r:vn}function De(n){return J("",n),De}function J(n,t,e){let r=X(),i=rx(r,n,t,e);return i!==vn&&ix(r,Er(),i),J}function ix(n,t,e){let r=Yd(t,n);hD(n[Ie],r,e)}function Xv(n,t,e){let r=it();r.firstCreatePass&&I_(t,r.data,r.blueprint,en(n),e)}function I_(n,t,e,r,i){if(n=Le(n),Array.isArray(n))for(let o=0;o<n.length;o++)I_(n[o],t,e,r,i);else{let o=it(),s=X(),a=ot(),c=pr(n)?n:Le(n.provide),l=Gd(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(pr(n)||!n.multi){let f=new Sr(l,i,P,null),m=If(c,t,i?u:u+h,d);m===-1?(Mf(Cc(a,s),o,c),Sf(o,n,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(f),s.push(f)):(e[m]=f,s[m]=f)}else{let f=If(c,t,u+h,d),m=If(c,t,u,u+h),y=f>=0&&e[f],E=m>=0&&e[m];if(i&&!E||!i&&!y){Mf(Cc(a,s),o,c);let C=ax(i?sx:ox,e.length,i,r,l,n);!i&&E&&(e[m].providerFactory=C),Sf(o,n,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(C),s.push(C)}else{let C=x_(e[i?m:f],l,!i&&r);Sf(o,n,f>-1?f:m,C)}!i&&r&&E&&e[m].componentProviders++}}}function Sf(n,t,e,r){let i=pr(t),o=Hm(t);if(i||o){let c=(o?Le(t.useClass):t).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(e);u===-1?l.push(e,[r,c]):l[u+1].push(r,c)}else l.push(e,c)}}}function x_(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function If(n,t,e,r){for(let i=e;i<r;i++)if(t[i]===n)return i;return-1}function ox(n,t,e,r,i){return Wf(this.multi,[])}function sx(n,t,e,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Ko(r,r[V],this.providerFactory.index,i);s=c.slice(0,a),Wf(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],Wf(o,s);return s}function Wf(n,t){for(let e=0;e<n.length;e++){let r=n[e];t.push(r())}return t}function ax(n,t,e,r,i,o){let s=new Sr(n,e,P,null);return s.multi=[],s.index=t,s.componentProviders=0,x_(s,i,r&&!e),s}function Bn(n,t){return e=>{e.providersResolver=(r,i)=>Xv(r,i?i(n):n,!1),t&&(e.viewProvidersResolver=(r,i)=>Xv(r,i?i(t):t,!0))}}var Rc=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},xh=(()=>{class n{compileModuleSync(e){return new Oc(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let r=this.compileModuleSync(e),i=$d(e),o=Fy(i.declarations).reduce((s,a)=>{let c=An(a);return c&&s.push(new Si(c)),s},[]);return new Rc(r,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var M_=(()=>{class n{applicationErrorHandler=w(xt);appRef=w(rn);taskService=w(jn);ngZone=w(nt);zonelessEnabled=w(zo);tracing=w(ts,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Me;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Mo):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(w(mf,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(e){if(!this.zonelessEnabled&&e===5)return;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?ff:df;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Mo+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(e),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ff(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function T_(){return[{provide:mr,useExisting:M_},{provide:nt,useClass:To},{provide:zo,useValue:!0}]}function cx(){return typeof $localize<"u"&&$localize.locale||os}var Gc=new R("",{factory:()=>w(Gc,{optional:!0,skipSelf:!0})||cx()});function Ve(n,t){return la(n,t?.equal)}var P_=Symbol("InputSignalNode#UNSET"),xx=W(D({},ua),{transformFn:void 0,applyValueToInputSignal(n,t){bo(n,t)}});function k_(n,t){let e=Object.create(xx);e.value=n,e.transformFn=t?.transform;function r(){if(vo(e),e.value===P_){let i=null;throw new I(-950,i)}return e.value}return r[lt]=e,r}var Wc=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>Xo(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function O_(n,t){return k_(n,t)}function Mx(n){return k_(P_,n)}var F_=(O_.required=Mx,O_);var Mh=new R(""),Tx=new R("");function ss(n){return!n.moduleRef}function Ox(n){let t=ss(n)?n.r3Injector:n.moduleRef.injector,e=t.get(nt);return e.run(()=>{ss(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=t.get(xt),i;if(e.runOutsideAngular(()=>{i=e.onError.subscribe({next:r})}),ss(n)){let o=()=>t.destroy(),s=n.platformInjector.get(Mh);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Mh);s.add(o),n.moduleRef.onDestroy(()=>{qo(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return Rx(r,e,()=>{let o=t.get(jn),s=o.add(),a=t.get(Ch);return a.runInitializers(),a.donePromise.then(()=>{let c=t.get(Gc,os);if(S_(c||os),!t.get(Tx,!0))return ss(n)?t.get(rn):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(ss(n)){let u=t.get(rn);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return Ax?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var Ax;function Rx(n,t,e){try{let r=e();return $n(r)?r.catch(i=>{throw t.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>n(r)),r}}var qc=null;function Nx(n=[],t){return tt.create({name:t,providers:[{provide:Po,useValue:"platform"},{provide:Mh,useValue:new Set([()=>qc=null])},...n]})}function Px(n=[]){if(qc)return qc;let t=Nx(n);return qc=t,E_(),kx(t),t}function kx(n){let t=n.get(Pc,null);rt(n,()=>{t?.forEach(e=>e())})}function L_(){return!1}var Ti=(()=>{class n{static __NG_ELEMENT_ID__=Fx}return n})();function Fx(n){return Lx(ot(),X(),(n&16)===16)}function Lx(n,t,e){if(kn(n)&&!e){let r=It(n.index,t);return new Vn(r,r)}else if(n.type&175){let r=t[Dt];return new Vn(r,t)}return null}var Th=class{constructor(){}supports(t){return mh(t)}create(t){return new Oh(t)}},jx=(n,t)=>t,Oh=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||jx}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,i=0,o=null;for(;e||r;){let s=!r||e&&e.currentIndex<A_(r,i,o)?e:r,a=A_(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(e=e._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let h=0;h<l;h++){let f=h<o.length?o[h]:o[h]=0,m=f+h;u<=m&&m<l&&(o[h]=f+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!mh(t))throw new I(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,a),r=!0):(r&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else i=0,f_(t,a=>{s=this._trackByFn(i,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,i),r=!0):(r&&(e=this._verifyReinsertion(e,a,s,i)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,i)):t=this._addAfter(new Ah(e,r),o,i)),t}_verifyReinsertion(t,e,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){let i=e===null?this._itHead:e._next;return t._next=i,t._prev=e,i===null?this._itTail=t:i._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new Kc),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,r=t._next;return e===null?this._itHead=r:e._next=r,r===null?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Kc),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Ah=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},Rh=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;r!==null;r=r._nextDup)if((e===null||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let e=t._prevDup,r=t._nextDup;return e===null?this._head=r:e._nextDup=r,r===null?this._tail=e:r._prevDup=e,this._head===null}},Kc=class{map=new Map;put(t){let e=t.trackById,r=this.map.get(e);r||(r=new Rh,this.map.set(e,r)),r.add(t)}get(t,e){let r=t,i=this.map.get(r);return i?i.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function A_(n,t,e){let r=n.previousIndex;if(r===null)return r;let i=0;return e&&r<e.length&&(i=e[r]),r+t+i}function R_(){return new Nh([new Th])}var Nh=(()=>{class n{factories;static \u0275prov=T({token:n,providedIn:"root",factory:R_});constructor(e){this.factories=e}static create(e,r){if(r!=null){let i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:()=>{let r=w(n,{optional:!0,skipSelf:!0});return n.create(e,r||R_())}}}find(e){let r=this.factories.find(i=>i.supports(e));if(r!=null)return r;throw new I(901,!1)}}return n})();function j_(n){let{rootComponent:t,appProviders:e,platformProviders:r,platformRef:i}=n;se(ee.BootstrapApplicationStart);try{let o=i?.injector??Px(r),s=[T_(),wv,...e||[]],a=new Zo({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return Ox({r3Injector:a.injector,platformInjector:o,rootComponent:t})}catch(o){return Promise.reject(o)}finally{se(ee.BootstrapApplicationEnd)}}function as(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var V_=null;function Mt(){return V_}function Ph(n){V_??=n}var cs=class{},Yc=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:()=>w(U_),providedIn:"platform"})}return n})();var U_=(()=>{class n extends Yc{_location;_history;_doc=w(Oe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Mt().getBaseHref(this._doc)}onPopState(e){let r=Mt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){let r=Mt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,i){this._history.pushState(e,r,i)}replaceState(e,r,i){this._history.replaceState(e,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function H_(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function $_(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function Hn(n){return n&&n[0]!=="?"?`?${n}`:n}var Oi=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:()=>w(Ux),providedIn:"root"})}return n})(),Vx=new R(""),Ux=(()=>{class n extends Oi{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??w(Oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return H_(this._baseHref,e)}path(e=!1){let r=this._platformLocation.pathname+Hn(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,o){let s=this.prepareExternalUrl(i+Hn(o));this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){let s=this.prepareExternalUrl(i+Hn(o));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(F(Yc),F(Vx,8))};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ai=(()=>{class n{_subject=new me;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let r=this._locationStrategy.getBaseHref();this._basePath=Hx($_(B_(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Hn(r))}normalize(e){return n.stripTrailingSlash(Bx(this._basePath,B_(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._locationStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Hn(r)),i)}replaceState(e,r="",i=null){this._locationStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Hn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Hn;static joinWithSlash=H_;static stripTrailingSlash=$_;static \u0275fac=function(r){return new(r||n)(F(Oi))};static \u0275prov=T({token:n,factory:()=>$x(),providedIn:"root"})}return n})();function $x(){return new Ai(F(Oi))}function Bx(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function B_(n){return n.replace(/\/index.html$/,"")}function Hx(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var kh=/\s+/,z_=[],Or=(()=>{class n{_ngEl;_renderer;initialClasses=z_;rawClass;stateMap=new Map;constructor(e,r){this._ngEl=e,this._renderer=r}set klass(e){this.initialClasses=e!=null?e.trim().split(kh):z_}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(kh):e}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let r of e)this._updateState(r,!0);else if(e!=null)for(let r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){let i=this.stateMap.get(e);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let r=e[0],i=e[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(e,r){e=e.trim(),e.length>0&&e.split(kh).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(P(vt),P(yn))};static \u0275dir=ye({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Zc=class{$implicit;ngForOf;index;count;constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ri=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let r=this._viewContainer;e.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Zc(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),G_(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);G_(o,i)})}static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(P(_n),P(Un),P(Nh))};static \u0275dir=ye({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function G_(n,t){n.context.$implicit=t.item}var Bt=(()=>{class n{_viewContainer;_context=new Qc;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,r){this._viewContainer=e,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){q_(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){q_(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(P(_n),P(Un))};static \u0275dir=ye({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Qc=class{$implicit=null;ngIf=null};function q_(n,t){if(n&&!n.createEmbeddedView)throw new I(2020,!1)}var Ke=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=wt({})}return n})();function Fh(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let r=e.indexOf("="),[i,o]=r==-1?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var ls=class{};var W_="browser";var us=class{_doc;constructor(t){this._doc=t}manager},Jc=(()=>{class n extends us{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i,o){return e.addEventListener(r,i,o),()=>this.removeEventListener(e,r,i,o)}removeEventListener(e,r,i,o){return e.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(F(Oe))};static \u0275prov=T({token:n,factory:n.\u0275fac})}return n})(),tl=new R(""),Uh=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(s=>{s.manager=this});let i=e.filter(s=>!(s instanceof Jc));this._plugins=i.slice().reverse();let o=e.find(s=>s instanceof Jc);o&&this._plugins.push(o)}addEventListener(e,r,i,o){return this._findPluginFor(r).addEventListener(e,r,i,o)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(o=>o.supports(e)),!r)throw new I(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||n)(F(tl),F(nt))};static \u0275prov=T({token:n,factory:n.\u0275fac})}return n})(),Lh="ng-app-id";function K_(n){for(let t of n)t.remove()}function Y_(n,t){let e=t.createElement("style");return e.textContent=n,e}function zx(n,t,e,r){let i=n.head?.querySelectorAll(`style[${Lh}="${t}"],link[${Lh}="${t}"]`);if(i)for(let o of i)o.removeAttribute(Lh),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&e.set(o.textContent,{usage:0,elements:[o]})}function Vh(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var $h=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(e,r,i,o={}){this.doc=e,this.appId=r,this.nonce=i,zx(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let i of e)this.addUsage(i,this.inline,Y_);r?.forEach(i=>this.addUsage(i,this.external,Vh))}removeStyles(e,r){for(let i of e)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,r,i){let o=r.get(e);o?o.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(e,this.doc)))})}removeUsage(e,r){let i=r.get(e);i&&(i.usage--,i.usage<=0&&(K_(i.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])K_(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(e,Y_(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(e,Vh(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),e.appendChild(r)}static \u0275fac=function(r){return new(r||n)(F(Oe),F(Nc),F(kc,8),F(es))};static \u0275prov=T({token:n,factory:n.\u0275fac})}return n})(),jh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Bh=/%COMP%/g;var Q_="%COMP%",Gx=`_nghost-${Q_}`,qx=`_ngcontent-${Q_}`,Wx=!0,Kx=new R("",{factory:()=>Wx});function Yx(n){return qx.replace(Bh,n)}function Zx(n){return Gx.replace(Bh,n)}function J_(n,t){return t.map(e=>e.replace(Bh,n))}var Hh=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,i,o,s,a,c=null,l=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new ds(e,s,a,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(e,r);return i instanceof el?i.applyToHost(e):i instanceof fs&&i.applyStyles(),i}getOrCreateRenderer(e,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(r.encapsulation){case Vt.Emulated:o=new el(c,l,r,this.appId,u,s,a,d,h);break;case Vt.ShadowDom:return new Xc(c,e,r,s,a,this.nonce,d,h,l);case Vt.ExperimentalIsolatedShadowDom:return new Xc(c,e,r,s,a,this.nonce,d,h);default:o=new fs(c,l,r,u,s,a,d,h);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||n)(F(Uh),F($h),F(Nc),F(Kx),F(Oe),F(nt),F(kc),F(ts,8))};static \u0275prov=T({token:n,factory:n.\u0275fac})}return n})(),ds=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,r,i,o){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(jh[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(Z_(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(Z_(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){e.remove()}selectRootElement(t,e){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new I(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;let o=jh[i];o?t.setAttributeNS(o,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){let i=jh[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(nn.DashCase|nn.Important)?t.style.setProperty(e,r,i&nn.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&nn.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t!=null&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r,i){if(typeof t=="string"&&(t=Mt().getGlobalEventTarget(this.doc,t),!t))throw new I(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,e,o)),this.eventManager.addEventListener(t,e,o,i)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;t(e)===!1&&e.preventDefault()}}};function Z_(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Xc=class extends ds{hostEl;sharedStylesHost;shadowRoot;constructor(t,e,r,i,o,s,a,c,l){super(t,i,o,a,c),this.hostEl=e,this.sharedStylesHost=l,this.shadowRoot=e.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=J_(r.id,u);for(let h of u){let f=document.createElement("style");s&&f.setAttribute("nonce",s),f.textContent=h,this.shadowRoot.appendChild(f)}let d=r.getExternalStyles?.();if(d)for(let h of d){let f=Vh(h,i);s&&f.setAttribute("nonce",s),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},fs=class extends ds{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,r,i,o,s,a,c,l){super(t,o,s,a,c),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?J_(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Di.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},el=class extends fs{contentAttr;hostAttr;constructor(t,e,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(t,e,r,o,s,a,c,l,u),this.contentAttr=Yx(u),this.hostAttr=Zx(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}};var nl=class n extends cs{supportsDOMEvents=!0;static makeCurrent(){Ph(new n)}onAndCancel(t,e,r,i){return t.addEventListener(e,r,i),()=>{t.removeEventListener(e,r,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=Qx();return e==null?null:Jx(e)}resetBaseElement(){hs=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Fh(document.cookie,t)}},hs=null;function Qx(){return hs=hs||document.head.querySelector("base"),hs?hs.getAttribute("href"):null}function Jx(n){return new URL(n,document.baseURI).pathname}var Xx=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:n.\u0275fac})}return n})(),X_=["alt","control","meta","shift"],eM={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tM={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},eb=(()=>{class n extends us{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Mt().onAndCancel(e,s.domEventName,a,o))}static parseEventName(e){let r=e.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),X_.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(e,r){let i=eM[e.key]||e.key,o="";return r.indexOf("code.")>-1&&(i=e.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),X_.forEach(s=>{if(s!==i){let a=tM[s];a(e)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(e,r,i){return o=>{n.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||n)(F(Oe))};static \u0275prov=T({token:n,factory:n.\u0275fac})}return n})();function zh(n,t,e){let r=D({rootComponent:n,platformRef:e?.platformRef},nM(t));return j_(r)}function nM(n){return{appProviders:[...aM,...n?.providers??[]],platformProviders:sM}}function rM(){nl.makeCurrent()}function iM(){return new mn}function oM(){return Zf(document),document}var sM=[{provide:es,useValue:W_},{provide:Pc,useValue:rM,multi:!0},{provide:Oe,useFactory:oM}];var aM=[{provide:Po,useValue:"root"},{provide:mn,useFactory:iM},{provide:tl,useClass:Jc,multi:!0},{provide:tl,useClass:eb,multi:!0},Hh,$h,Uh,{provide:Ir,useExisting:Hh},{provide:ls,useClass:Xx},[]];var tb=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||n)(F(Oe))};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var B="primary",Is=Symbol("RouteTitle"),Yh=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function kr(n){return new Yh(n)}function ub(n,t,e){let r=e.path.split("/");if(r.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function cl(n){return new Promise((t,e)=>{n.pipe(hn()).subscribe({next:r=>t(r),error:r=>e(r)})})}function lM(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!on(n[e],t[e]))return!1;return!0}function on(n,t){let e=n?Zh(n):void 0,r=t?Zh(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!db(n[i],t[i]))return!1;return!0}function Zh(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function db(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),r=[...t].sort();return e.every((i,o)=>r[o]===i)}else return n===t}function fb(n){return n.length>0?n[n.length-1]:null}function Lr(n){return ja(n)?n:$n(n)?Ce(Promise.resolve(n)):Y(n)}function hb(n){return ja(n)?cl(n):Promise.resolve(n)}var uM={exact:gb,subset:mb},pb={exact:dM,subset:fM,ignored:()=>!0};function nb(n,t,e){return uM[e.paths](n.root,t.root,e.matrixParams)&&pb[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function dM(n,t){return on(n,t)}function gb(n,t,e){if(!Nr(n.segments,t.segments)||!ol(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!n.children[r]||!gb(n.children[r],t.children[r],e))return!1;return!0}function fM(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>db(n[e],t[e]))}function mb(n,t,e){return vb(n,t,t.segments,e)}function vb(n,t,e,r){if(n.segments.length>e.length){let i=n.segments.slice(0,e.length);return!(!Nr(i,e)||t.hasChildren()||!ol(i,e,r))}else if(n.segments.length===e.length){if(!Nr(n.segments,e)||!ol(n.segments,e,r))return!1;for(let i in t.children)if(!n.children[i]||!mb(n.children[i],t.children[i],r))return!1;return!0}else{let i=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!Nr(n.segments,i)||!ol(n.segments,i,r)||!n.children[B]?!1:vb(n.children[B],t,o,r)}}function ol(n,t,e){return t.every((r,i)=>pb[e](n[i].parameters,r.parameters))}var zt=class{root;queryParams;fragment;_queryParamMap;constructor(t=new te([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=kr(this.queryParams),this._queryParamMap}toString(){return gM.serialize(this)}},te=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sl(this)}},zn=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=kr(this.parameters),this._parameterMap}toString(){return _b(this)}};function hM(n,t){return Nr(n,t)&&n.every((e,r)=>on(e.parameters,t[r].parameters))}function Nr(n,t){return n.length!==t.length?!1:n.every((e,r)=>e.path===t[r].path)}function pM(n,t){let e=[];return Object.entries(n.children).forEach(([r,i])=>{r===B&&(e=e.concat(t(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==B&&(e=e.concat(t(i,r)))}),e}var xs=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:()=>new Gn,providedIn:"root"})}return n})(),Gn=class{parse(t){let e=new Jh(t);return new zt(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${ps(t.root,!0)}`,r=yM(t.queryParams),i=typeof t.fragment=="string"?`#${mM(t.fragment)}`:"";return`${e}${r}${i}`}},gM=new Gn;function sl(n){return n.segments.map(t=>_b(t)).join("/")}function ps(n,t){if(!n.hasChildren())return sl(n);if(t){let e=n.children[B]?ps(n.children[B],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==B&&r.push(`${i}:${ps(o,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=pM(n,(r,i)=>i===B?[ps(n.children[B],!1)]:[`${i}:${ps(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[B]!=null?`${sl(n)}/${e[0]}`:`${sl(n)}/(${e.join("//")})`}}function yb(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rl(n){return yb(n).replace(/%3B/gi,";")}function mM(n){return encodeURI(n)}function Qh(n){return yb(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function al(n){return decodeURIComponent(n)}function rb(n){return al(n.replace(/\+/g,"%20"))}function _b(n){return`${Qh(n.path)}${vM(n.parameters)}`}function vM(n){return Object.entries(n).map(([t,e])=>`;${Qh(t)}=${Qh(e)}`).join("")}function yM(n){let t=Object.entries(n).map(([e,r])=>Array.isArray(r)?r.map(i=>`${rl(e)}=${rl(i)}`).join("&"):`${rl(e)}=${rl(r)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var _M=/^[^\/()?;#]+/;function Gh(n){let t=n.match(_M);return t?t[0]:""}var bM=/^[^\/()?;=#]+/;function wM(n){let t=n.match(bM);return t?t[0]:""}var CM=/^[^=?&#]+/;function EM(n){let t=n.match(CM);return t?t[0]:""}var DM=/^[^&#]+/;function SM(n){let t=n.match(DM);return t?t[0]:""}var Jh=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new te([],{}):new te([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[B]=new te(t,e)),r}parseSegment(){let t=Gh(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new I(4009,!1);return this.capture(t),new zn(al(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=wM(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let i=Gh(this.remaining);i&&(r=i,this.capture(r))}t[al(e)]=al(r)}parseQueryParam(t){let e=EM(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let s=SM(this.remaining);s&&(r=s,this.capture(r))}let i=rb(e),o=rb(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Gh(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new I(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=B);let s=this.parseChildren();e[o??B]=Object.keys(s).length===1&&s[B]?s[B]:new te([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new I(4011,!1)}};function bb(n){return n.segments.length>0?new te([],{[B]:n}):n}function wb(n){let t={};for(let[r,i]of Object.entries(n.children)){let o=wb(i);if(r===B&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let e=new te(n.segments,t);return IM(e)}function IM(n){if(n.numberOfChildren===1&&n.children[B]){let t=n.children[B];return new te(n.segments.concat(t.segments),t.children)}return n}function qn(n){return n instanceof zt}function Cb(n,t,e=null,r=null,i=new Gn){let o=Eb(n);return Db(o,t,e,r,i)}function Eb(n){let t;function e(o){let s={};for(let c of o.children){let l=e(c);s[c.outlet]=l}let a=new te(o.url,s);return o===n&&(t=a),a}let r=e(n.root),i=bb(r);return t??i}function Db(n,t,e,r,i){let o=n;for(;o.parent;)o=o.parent;if(t.length===0)return qh(o,o,o,e,r,i);let s=xM(t);if(s.toRoot())return qh(o,o,new te([],{}),e,r,i);let a=MM(s,o,n),c=a.processChildren?ms(a.segmentGroup,a.index,s.commands):Ib(a.segmentGroup,a.index,s.commands);return qh(o,a.segmentGroup,c,e,r,i)}function ll(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function _s(n){return typeof n=="object"&&n!=null&&n.outlets}function ib(n,t,e){n||="\u0275";let r=new zt;return r.queryParams={[n]:t},e.parse(e.serialize(r)).queryParams[n]}function qh(n,t,e,r,i,o){let s={};for(let[l,u]of Object.entries(r??{}))s[l]=Array.isArray(u)?u.map(d=>ib(l,d,o)):ib(l,u,o);let a;n===t?a=e:a=Sb(n,t,e);let c=bb(wb(a));return new zt(c,s,i)}function Sb(n,t,e){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===t?r[i]=e:r[i]=Sb(o,t,e)}),new te(n.segments,r)}var ul=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&ll(r[0]))throw new I(4003,!1);let i=r.find(_s);if(i&&i!==fb(r))throw new I(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function xM(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ul(!0,0,n);let t=0,e=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?e=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new ul(e,t,r)}var Pi=class{segmentGroup;processChildren;index;constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}};function MM(n,t,e){if(n.isAbsolute)return new Pi(t,!0,0);if(!e)return new Pi(t,!1,NaN);if(e.parent===null)return new Pi(e,!0,0);let r=ll(n.commands[0])?0:1,i=e.segments.length-1+r;return TM(e,i,n.numberOfDoubleDots)}function TM(n,t,e){let r=n,i=t,o=e;for(;o>i;){if(o-=i,r=r.parent,!r)throw new I(4005,!1);i=r.segments.length}return new Pi(r,!1,i-o)}function OM(n){return _s(n[0])?n[0].outlets:{[B]:n}}function Ib(n,t,e){if(n??=new te([],{}),n.segments.length===0&&n.hasChildren())return ms(n,t,e);let r=AM(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new te(n.segments.slice(0,r.pathIndex),{});return o.children[B]=new te(n.segments.slice(r.pathIndex),n.children),ms(o,0,i)}else return r.match&&i.length===0?new te(n.segments,{}):r.match&&!n.hasChildren()?Xh(n,t,e):r.match?ms(n,0,i):Xh(n,t,e)}function ms(n,t,e){if(e.length===0)return new te(n.segments,{});{let r=OM(e),i={};if(Object.keys(r).some(o=>o!==B)&&n.children[B]&&n.numberOfChildren===1&&n.children[B].segments.length===0){let o=ms(n.children[B],t,e);return new te(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Ib(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new te(n.segments,i)}}function AM(n,t,e){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return o;let s=n.segments[i],a=e[r];if(_s(a))break;let c=`${a}`,l=r<e.length-1?e[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!sb(c,l,s))return o;r+=2}else{if(!sb(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Xh(n,t,e){let r=n.segments.slice(0,t),i=0;for(;i<e.length;){let o=e[i];if(_s(o)){let c=RM(o.outlets);return new te(r,c)}if(i===0&&ll(e[0])){let c=n.segments[t];r.push(new zn(c.path,ob(e[0]))),i++;continue}let s=_s(o)?o.outlets[B]:`${o}`,a=i<e.length-1?e[i+1]:null;s&&a&&ll(a)?(r.push(new zn(s,ob(a))),i+=2):(r.push(new zn(s,{})),i++)}return new te(r,{})}function RM(n){let t={};return Object.entries(n).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[e]=Xh(new te([],{}),0,r))}),t}function ob(n){let t={};return Object.entries(n).forEach(([e,r])=>t[e]=`${r}`),t}function sb(n,t,e){return n==e.path&&on(t,e.parameters)}var vs="imperative",ke=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(ke||{}),bt=class{id;url;constructor(t,e){this.id=t,this.url=e}},Fr=class extends bt{type=ke.NavigationStart;navigationTrigger;restoredState;constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Gt=class extends bt{urlAfterRedirects;type=ke.NavigationEnd;constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},at=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(at||{}),bs=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(bs||{}),sn=class extends bt{reason;code;type=ke.NavigationCancel;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},wn=class extends bt{reason;code;type=ke.NavigationSkipped;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}},Fi=class extends bt{error;target;type=ke.NavigationError;constructor(t,e,r,i){super(t,e),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ws=class extends bt{urlAfterRedirects;state;type=ke.RoutesRecognized;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dl=class extends bt{urlAfterRedirects;state;type=ke.GuardsCheckStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fl=class extends bt{urlAfterRedirects;state;shouldActivate;type=ke.GuardsCheckEnd;constructor(t,e,r,i,o){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},hl=class extends bt{urlAfterRedirects;state;type=ke.ResolveStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pl=class extends bt{urlAfterRedirects;state;type=ke.ResolveEnd;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gl=class{route;type=ke.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ml=class{route;type=ke.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},vl=class{snapshot;type=ke.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yl=class{snapshot;type=ke.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_l=class{snapshot;type=ke.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bl=class{snapshot;type=ke.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Cs=class{},Li=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function NM(n){return!(n instanceof Cs)&&!(n instanceof Li)}function PM(n,t){return n.providers&&!n._injector&&(n._injector=is(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Ht(n){return n.outlet||B}function kM(n,t){let e=n.filter(r=>Ht(r)===t);return e.push(...n.filter(r=>Ht(r)!==t)),e}function Ui(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var wl=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ui(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new $i(this.rootInjector)}},$i=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new wl(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||n)(F(Ne))};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Cl=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=ep(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){let e=ep(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=tp(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return tp(t,this._root).map(e=>e.value)}};function ep(n,t){if(n===t.value)return t;for(let e of t.children){let r=ep(n,e);if(r)return r}return null}function tp(n,t){if(n===t.value)return[t];for(let e of t.children){let r=tp(n,e);if(r.length)return r.unshift(t),r}return[]}var _t=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Ni(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Es=class extends Cl{snapshot;constructor(t,e){super(t),this.snapshot=e,ap(this,t)}toString(){return this.snapshot.toString()}};function xb(n){let t=FM(n),e=new Te([new zn("",{})]),r=new Te({}),i=new Te({}),o=new Te({}),s=new Te(""),a=new qt(e,r,o,s,i,B,n,t.root);return a.snapshot=t.root,new Es(new _t(a,[]),t)}function FM(n){let t={},e={},r={},o=new Pr([],t,r,"",e,B,n,null,{});return new Ds("",new _t(o,[]))}var qt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Q(l=>l[Is]))??Y(void 0),this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Q(t=>kr(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Q(t=>kr(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function El(n,t,e="emptyOnly"){let r,{routeConfig:i}=n;return t!==null&&(e==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:D(D({},t.params),n.params),data:D(D({},t.data),n.data),resolve:D(D(D(D({},n.data),t.data),i?.data),n._resolvedData)}:r={params:D({},n.params),data:D({},n.data),resolve:D(D({},n.data),n._resolvedData??{})},i&&Tb(i)&&(r.resolve[Is]=i.title),r}var Pr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Is]}constructor(t,e,r,i,o,s,a,c,l){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=kr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=kr(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Ds=class extends Cl{url;constructor(t,e){super(e),this.url=t,ap(this,e)}toString(){return Mb(this._root)}};function ap(n,t){t.value._routerState=n,t.children.forEach(e=>ap(n,e))}function Mb(n){let t=n.children.length>0?` { ${n.children.map(Mb).join(", ")} } `:"";return`${n.value}${t}`}function Wh(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,on(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),on(t.params,e.params)||n.paramsSubject.next(e.params),lM(t.url,e.url)||n.urlSubject.next(e.url),on(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function np(n,t){let e=on(n.params,t.params)&&hM(n.url,t.url),r=!n.parent!=!t.parent;return e&&!r&&(!n.parent||np(n.parent,t.parent))}function Tb(n){return typeof n.title=="string"||n.title===null}var Ob=new R(""),Ms=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=B;activateEvents=new le;deactivateEvents=new le;attachEvents=new le;detachEvents=new le;routerOutletData=F_();parentContexts=w($i);location=w(_n);changeDetector=w(Ti);inputBinder=w(xl,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new I(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new I(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new I(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new I(4013,!1);this._activatedRoute=e;let i=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new rp(e,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ye({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[mt]})}return n})(),rp=class{route;childContexts;parent;outletData;constructor(t,e,r,i){this.route=t,this.childContexts=e,this.parent=r,this.outletData=i}get(t,e){return t===qt?this.route:t===$i?this.childContexts:t===Ob?this.outletData:this.parent.get(t,e)}},xl=new R("");var cp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ee({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&b(0,"router-outlet")},dependencies:[Ms],encapsulation:2})}return n})();function lp(n){let t=n.children&&n.children.map(lp),e=t?W(D({},n),{children:t}):D({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==B&&(e.component=cp),e}function LM(n,t,e){let r=Ss(n,t._root,e?e._root:void 0);return new Es(r,t)}function Ss(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=t.value;let i=jM(n,t,e);return new _t(r,i)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Ss(n,a)),s}}let r=VM(t.value),i=t.children.map(o=>Ss(n,o));return new _t(r,i)}}function jM(n,t,e){return t.children.map(r=>{for(let i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ss(n,r,i);return Ss(n,r)})}function VM(n){return new qt(new Te(n.url),new Te(n.params),new Te(n.queryParams),new Te(n.fragment),new Te(n.data),n.outlet,n.component,n)}var ji=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},Ab="ngNavigationCancelingError";function Dl(n,t){let{redirectTo:e,navigationBehaviorOptions:r}=qn(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=Rb(!1,at.Redirect);return i.url=e,i.navigationBehaviorOptions=r,i}function Rb(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[Ab]=!0,e.cancellationCode=t,e}function UM(n){return Nb(n)&&qn(n.url)}function Nb(n){return!!n&&n[Ab]}var $M=(n,t,e,r)=>Q(i=>(new ip(t,i.targetRouterState,i.currentRouterState,e,r).activate(n),i)),ip=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,r,i,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),Wh(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){let i=Ni(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,r);else o&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=Ni(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=Ni(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,e,r){let i=Ni(e);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new bl(o.value.snapshot))}),t.children.length&&this.forwardEvent(new yl(t.value.snapshot))}activateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(Wh(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Wh(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},Sl=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},ki=class{component;route;constructor(t,e){this.component=t,this.route=e}};function BM(n,t,e){let r=n._root,i=t?t._root:null;return gs(r,i,e,[r.value])}function HM(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function Bi(n,t){let e=Symbol(),r=t.get(n,e);return r===e?typeof n=="function"&&!Od(n)?n:t.get(n):r}function gs(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ni(t);return n.children.forEach(s=>{zM(s,o[s.value.outlet],e,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ys(a,e.getContext(s),i)),i}function zM(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=GM(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Sl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?gs(n,t,a?a.children:null,r,i):gs(n,t,e,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ki(a.outlet.component,s))}else s&&ys(t,a,i),i.canActivateChecks.push(new Sl(r)),o.component?gs(n,null,a?a.children:null,r,i):gs(n,null,e,r,i);return i}function GM(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Nr(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Nr(n.url,t.url)||!on(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!np(n,t)||!on(n.queryParams,t.queryParams);case"paramsChange":default:return!np(n,t)}}function ys(n,t,e){let r=Ni(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?t?ys(s,t.children.getContext(o),e):ys(s,null,e):ys(s,t,e)}),i.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new ki(t.outlet.component,i)):e.canDeactivateChecks.push(new ki(null,i)):e.canDeactivateChecks.push(new ki(null,i))}function Ts(n){return typeof n=="function"}function qM(n){return typeof n=="boolean"}function WM(n){return n&&Ts(n.canLoad)}function KM(n){return n&&Ts(n.canActivate)}function YM(n){return n&&Ts(n.canActivateChild)}function ZM(n){return n&&Ts(n.canDeactivate)}function QM(n){return n&&Ts(n.canMatch)}function Pb(n){return n instanceof lr||n?.name==="EmptyError"}var il=Symbol("INITIAL_VALUE");function Vi(){return Xe(n=>ld(n.map(t=>t.pipe(Je(1),pd(il)))).pipe(Q(t=>{for(let e of t)if(e!==!0){if(e===il)return il;if(e===!1||JM(e))return e}return!0}),He(t=>t!==il),Je(1)))}function JM(n){return qn(n)||n instanceof ji}function kb(n){return n.aborted?Y(void 0).pipe(Je(1)):new z(t=>{let e=()=>{t.next(),t.complete()};return n.addEventListener("abort",e),()=>n.removeEventListener("abort",e)})}function Fb(n){return ur(kb(n))}function XM(n,t){return Be(e=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?Y(W(D({},e),{guardsResult:!0})):eT(s,r,i,n).pipe(Be(a=>a&&qM(a)?tT(r,o,n,t):Y(a)),Q(a=>W(D({},e),{guardsResult:a})))})}function eT(n,t,e,r){return Ce(n).pipe(Be(i=>sT(i.component,i.route,e,t,r)),hn(i=>i!==!0,!0))}function tT(n,t,e,r){return Ce(t).pipe(Eo(i=>di(rT(i.route.parent,r),nT(i.route,r),oT(n,i.path,e),iT(n,i.route,e))),hn(i=>i!==!0,!0))}function nT(n,t){return n!==null&&t&&t(new _l(n)),Y(!0)}function rT(n,t){return n!==null&&t&&t(new vl(n)),Y(!0)}function iT(n,t,e){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(o=>Co(()=>{let s=Ui(t)??e,a=Bi(o,s),c=KM(a)?a.canActivate(t,n):rt(s,()=>a(t,n));return Lr(c).pipe(hn())}));return Y(i).pipe(Vi())}function oT(n,t,e){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>HM(s)).filter(s=>s!==null).map(s=>Co(()=>{let a=s.guards.map(c=>{let l=Ui(s.node)??e,u=Bi(c,l),d=YM(u)?u.canActivateChild(r,n):rt(l,()=>u(r,n));return Lr(d).pipe(hn())});return Y(a).pipe(Vi())}));return Y(o).pipe(Vi())}function sT(n,t,e,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return Y(!0);let s=o.map(a=>{let c=Ui(t)??i,l=Bi(a,c),u=ZM(l)?l.canDeactivate(n,t,e,r):rt(c,()=>l(n,t,e,r));return Lr(u).pipe(hn())});return Y(s).pipe(Vi())}function aT(n,t,e,r,i){let o=t.canLoad;if(o===void 0||o.length===0)return Y(!0);let s=o.map(a=>{let c=Bi(a,n),l=WM(c)?c.canLoad(t,e):rt(n,()=>c(t,e)),u=Lr(l);return i?u.pipe(Fb(i)):u});return Y(s).pipe(Vi(),Lb(r))}function Lb(n){return ed(et(t=>{if(typeof t!="boolean")throw Dl(n,t)}),Q(t=>t===!0))}function cT(n,t,e,r,i){let o=t.canMatch;if(!o||o.length===0)return Y(!0);let s=o.map(a=>{let c=Bi(a,n),l=QM(c)?c.canMatch(t,e):rt(n,()=>c(t,e)),u=Lr(l);return i?u.pipe(Fb(i)):u});return Y(s).pipe(Vi(),Lb(r))}var Rr=class jb extends Error{segmentGroup;constructor(t){super(),this.segmentGroup=t||null,Object.setPrototypeOf(this,jb.prototype)}},op=class Vb extends Error{urlTree;constructor(t){super(),this.urlTree=t,Object.setPrototypeOf(this,Vb.prototype)}};function lT(n){throw new I(4e3,!1)}function uT(n){throw Rb(!1,at.GuardRejected)}var dT=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}async lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[B])throw lT(`${t.redirectTo}`);i=i.children[B]}}async applyRedirectCommands(t,e,r,i,o){let s=await fT(e,i,o);if(s instanceof zt)throw new op(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,r);if(s[0]==="/")throw new op(a);return a}applyRedirectCreateUrlTree(t,e,r,i){let o=this.createSegmentGroup(t,e.root,r,i);return new zt(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=e[a]}else r[i]=o}),r}createSegmentGroup(t,e,r,i){let o=this.createSegments(t,e.segments,r,i),s={};return Object.entries(e.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new te(o,s)}createSegments(t,e,r,i){return e.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,e,r){let i=r[e.path.substring(1)];if(!i)throw new I(4001,!1);return i}findOrReturn(t,e){let r=0;for(let i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}};function fT(n,t,e){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:d}=t;return cl(Lr(rt(e,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:d}))))}var sp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function hT(n,t,e,r,i,o){let s=Ub(n,t,e);return s.matched?(r=PM(t,r),cT(r,t,e,i,o).pipe(Q(a=>a===!0?s:D({},sp)))):Y(s)}function Ub(n,t,e){if(t.path==="**")return pT(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?D({},sp):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(t.matcher||ub)(e,n,t);if(!i)return D({},sp);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?D(D({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function pT(n){return{matched:!0,parameters:n.length>0?fb(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function ab(n,t,e,r){return e.length>0&&vT(n,e,r)?{segmentGroup:new te(t,mT(r,new te(e,n.children))),slicedSegments:[]}:e.length===0&&yT(n,e,r)?{segmentGroup:new te(n.segments,gT(n,e,r,n.children)),slicedSegments:e}:{segmentGroup:new te(n.segments,n.children),slicedSegments:e}}function gT(n,t,e,r){let i={};for(let o of e)if(Ml(n,t,o)&&!r[Ht(o)]){let s=new te([],{});i[Ht(o)]=s}return D(D({},r),i)}function mT(n,t){let e={};e[B]=t;for(let r of n)if(r.path===""&&Ht(r)!==B){let i=new te([],{});e[Ht(r)]=i}return e}function vT(n,t,e){return e.some(r=>Ml(n,t,r)&&Ht(r)!==B)}function yT(n,t,e){return e.some(r=>Ml(n,t,r))}function Ml(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function _T(n,t,e){return t.length===0&&!n.children[e]}var bT=class{};async function wT(n,t,e,r,i,o,s="emptyOnly",a){return new ET(n,t,e,r,i,s,o,a).recognize()}var CT=31,ET=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,r,i,o,s,a,c){this.injector=t,this.configLoader=e,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new dT(this.urlSerializer,this.urlTree)}noMatchError(t){return new I(4002,`'${t.segmentGroup}'`)}async recognize(){let t=ab(this.urlTree.root,[],[],this.config).segmentGroup,{children:e,rootSnapshot:r}=await this.match(t),i=new _t(r,e),o=new Ds("",i),s=Cb(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(t){let e=new Pr([],Object.freeze({}),Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),B,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,t,B,e),rootSnapshot:e}}catch(r){if(r instanceof op)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Rr?this.noMatchError(r):r}}async processSegmentGroup(t,e,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(t,e,r,o);let s=await this.processSegment(t,e,r,r.segments,i,!0,o);return s instanceof _t?[s]:[]}async processChildren(t,e,r,i){let o=[];for(let c of Object.keys(r.children))c==="primary"?o.unshift(c):o.push(c);let s=[];for(let c of o){let l=r.children[c],u=kM(e,c),d=await this.processSegmentGroup(t,u,l,c,i);s.push(...d)}let a=$b(s);return DT(a),a}async processSegment(t,e,r,i,o,s,a){for(let c of e)try{return await this.processSegmentAgainstRoute(c._injector??t,e,c,r,i,o,s,a)}catch(l){if(l instanceof Rr||Pb(l))continue;throw l}if(_T(r,i,o))return new bT;throw new Rr(r)}async processSegmentAgainstRoute(t,e,r,i,o,s,a,c){if(Ht(r)!==s&&(s===B||!Ml(i,o,r)))throw new Rr(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(t,i,r,o,s,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(t,i,e,r,o,s,c);throw new Rr(i)}async expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=Ub(e,i,o);if(!c)throw new Rr(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>CT&&(this.allowRedirects=!1));let f=new Pr(o,l,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,cb(i),Ht(i),i.component??i._loadedComponent??null,i,lb(i)),m=El(f,a,this.paramsInheritanceStrategy);if(f.params=Object.freeze(m.params),f.data=Object.freeze(m.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let y=await this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,f,t),E=await this.applyRedirects.lineralizeSegments(i,y);return this.processSegment(t,r,e,E.concat(h),s,!1,a)}async matchSegmentAgainstRoute(t,e,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await cl(hT(e,r,i,t,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(e.children={}),!a?.matched)throw new Rr(e);t=r._injector??t;let{routes:c}=await this.getChildConfig(t,r,i),l=r._loadedInjector??t,{parameters:u,consumedSegments:d,remainingSegments:h}=a,f=new Pr(d,u,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,cb(r),Ht(r),r.component??r._loadedComponent??null,r,lb(r)),m=El(f,s,this.paramsInheritanceStrategy);f.params=Object.freeze(m.params),f.data=Object.freeze(m.data);let{segmentGroup:y,slicedSegments:E}=ab(e,d,h,c);if(E.length===0&&y.hasChildren()){let A=await this.processChildren(l,c,y,f);return new _t(f,A)}if(c.length===0&&E.length===0)return new _t(f,[]);let C=Ht(r)===o,K=await this.processSegment(l,c,y,E,C?B:o,!0,f);return new _t(f,K instanceof _t?[K]:[])}async getChildConfig(t,e,r){if(e.children)return{routes:e.children,injector:t};if(e.loadChildren){if(e._loadedRoutes!==void 0)return{routes:e._loadedRoutes,injector:e._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await cl(aT(t,e,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(t,e);return e._loadedRoutes=o.routes,e._loadedInjector=o.injector,o}throw uT(e)}return{routes:[],injector:t}}};function DT(n){n.sort((t,e)=>t.value.outlet===B?-1:e.value.outlet===B?1:t.value.outlet.localeCompare(e.value.outlet))}function ST(n){let t=n.value.routeConfig;return t&&t.path===""}function $b(n){let t=[],e=new Set;for(let r of n){if(!ST(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),e.add(i)):t.push(r)}for(let r of e){let i=$b(r.children);t.push(new _t(r.value,i))}return t.filter(r=>!e.has(r))}function cb(n){return n.data||{}}function lb(n){return n.resolve||{}}var IT=new R("",{factory:()=>wT});function xT(n,t,e,r,i,o,s){let a=n.get(IT);return Be(c=>Y(c).pipe(Xe(l=>a(n,t,e,r,l.extractedUrl,i,o,s)),Q(({state:l,tree:u})=>W(D({},c),{targetSnapshot:l,urlAfterRedirects:u}))))}function MT(n,t){return Be(e=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return Y(e);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of Bb(c))s.add(l);let a=0;return Ce(s).pipe(Eo(c=>o.has(c)?TT(c,r,n,t):(c.data=El(c,c.parent,n).resolve,Y(void 0))),et(()=>a++),Ba(1),Be(c=>a===s.size?Y(e):ut))})}function Bb(n){let t=n.children.map(e=>Bb(e)).flat();return[n,...t]}function TT(n,t,e,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!Tb(i)&&(o[Is]=i.title),Co(()=>(n.data=El(n,n.parent,e).resolve,OT(o,n,t,r).pipe(Q(s=>(n._resolvedData=s,n.data=D(D({},n.data),s),null)))))}function OT(n,t,e,r){let i=Zh(n);if(i.length===0)return Y({});let o={};return Ce(i).pipe(Be(s=>AT(n[s],t,e,r).pipe(hn(),et(a=>{if(a instanceof ji)throw Dl(new Gn,a);o[s]=a}))),Ba(1),Q(()=>o),fi(s=>Pb(s)?ut:cd(s)))}function AT(n,t,e,r){let i=Ui(t)??r,o=Bi(n,i),s=o.resolve?o.resolve(t,e):rt(i,()=>o(t,e));return Lr(s)}function Kh(n){return Xe(t=>{let e=n(t);return e?Ce(e).pipe(Q(()=>t)):Y(t)})}var up=(()=>{class n{buildTitle(e){let r,i=e.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===B);return r}getResolvedTitleForRoute(e){return e.data[Is]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:()=>w(Hb),providedIn:"root"})}return n})(),Hb=(()=>{class n extends up{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(F(tb))};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hi=new R("",{factory:()=>({})}),Os=new R(""),zb=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=w(xh);async loadComponent(e,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await hb(rt(e,()=>r.loadComponent())),s=await Wb(qb(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await Gb(r,this.compiler,e,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function Gb(n,t,e,r){let i=await hb(rt(e,()=>n.loadChildren())),o=await Wb(qb(i)),s;o instanceof Bc||Array.isArray(o)?s=o:s=await t.compileModuleAsync(o),r&&r(n);let a,c,l=!1;return Array.isArray(s)?(c=s,l=!0):(a=s.create(e).injector,c=a.get(Os,[],{optional:!0,self:!0}).flat()),{routes:c.map(lp),injector:a}}function RT(n){return n&&typeof n=="object"&&"default"in n}function qb(n){return RT(n)?n.default:n}async function Wb(n){return n}var Tl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:()=>w(NT),providedIn:"root"})}return n})(),NT=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Kb=new R("");var PT=()=>{},Yb=new R(""),Zb=(()=>{class n{currentNavigation=N(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=N(null);events=new me;transitionAbortWithErrorSubject=new me;configLoader=w(zb);environmentInjector=w(Ne);destroyRef=w(st);urlSerializer=w(xs);rootContexts=w($i);location=w(Ai);inputBindingEnabled=w(xl,{optional:!0})!==null;titleStrategy=w(up);options=w(Hi,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=w(Tl);createViewTransition=w(Kb,{optional:!0});navigationErrorHandler=w(Yb,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Y(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=i=>this.events.next(new gl(i)),r=i=>this.events.next(new ml(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;xe(()=>{this.transitions?.next(W(D({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(e){return this.transitions=new Te(null),this.transitions.pipe(He(r=>r!==null),Xe(r=>{let i=!1,o=new AbortController;return Y(r).pipe(Xe(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",at.SupersededByNewNavigation),ut;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?W(D({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!c&&l!=="reload")return this.events.next(new wn(s.id,this.urlSerializer.serialize(s.rawUrl),"",bs.IgnoredSameUrlNavigation)),s.resolve(!1),ut;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Y(s).pipe(Xe(u=>(this.events.next(new Fr(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?ut:Promise.resolve(u))),xT(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),et(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let d=new ws(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:u,extractedUrl:d,source:h,restoredState:f,extras:m}=s,y=new Fr(u,this.urlSerializer.serialize(d),h,f);this.events.next(y);let E=xb(this.rootComponentType).snapshot;return this.currentTransition=r=W(D({},s),{targetSnapshot:E,urlAfterRedirects:d,extras:W(D({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(C=>(C.finalUrl=d,C)),Y(r)}else return this.events.next(new wn(s.id,this.urlSerializer.serialize(s.extractedUrl),"",bs.IgnoredByUrlHandlingStrategy)),s.resolve(!1),ut}),et(s=>{let a=new dl(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Q(s=>(this.currentTransition=r=W(D({},s),{guards:BM(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),XM(this.environmentInjector,s=>this.events.next(s)),et(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Dl(this.urlSerializer,s.guardsResult);let a=new fl(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),He(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",at.GuardRejected),!1)),Kh(s=>{if(s.guards.canActivateChecks.length!==0)return Y(s).pipe(et(a=>{let c=new hl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Xe(a=>{let c=!1;return Y(a).pipe(MT(this.paramsInheritanceStrategy,this.environmentInjector),et({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",at.NoDataFromResolver)}}))}),et(a=>{let c=new pl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),Kh(s=>{let a=l=>{let u=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let d=Ui(l)??this.environmentInjector;u.push(this.configLoader.loadComponent(d,l.routeConfig).then(h=>{l.component=h}))}for(let d of l.children)u.push(...a(d));return u},c=a(s.targetSnapshot.root);return c.length===0?Y(s):Ce(Promise.all(c).then(()=>s))}),Kh(()=>this.afterPreactivation()),Xe(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?Ce(c).pipe(Q(()=>r)):Y(r)}),Q(s=>{let a=LM(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=W(D({},s),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),et(()=>{this.events.next(new Cs)}),$M(this.rootContexts,e.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Je(1),ur(kb(o.signal).pipe(He(()=>!i&&!r.targetRouterState),et(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",at.Aborted)}))),et({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=PT,a)),this.lastSuccessfulNavigation.set(xe(this.currentNavigation)),this.events.next(new Gt(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),ur(this.transitionAbortWithErrorSubject.pipe(et(s=>{throw s}))),hd(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",at.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),fi(s=>{if(this.destroyed)return r.resolve(!1),ut;if(i=!0,Nb(s))this.events.next(new sn(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),UM(s)?this.events.next(new Li(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Fi(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=rt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof ji){let{message:l,cancellationCode:u}=Dl(this.urlSerializer,c);this.events.next(new sn(r.id,this.urlSerializer.serialize(r.extractedUrl),l,u)),this.events.next(new Li(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return ut}))}))}cancelNavigationTransition(e,r,i){let o=new sn(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=xe(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return e.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kT(n){return n!==vs}var Qb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:()=>w(FT),providedIn:"root"})}return n})(),Il=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},FT=(()=>{class n extends Il{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ut(n)))(i||n)}})();static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dp=(()=>{class n{urlSerializer=w(xs);options=w(Hi,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=w(Ai);urlHandlingStrategy=w(Tl);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new zt;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:r,targetBrowserUrl:i}){let o=e!==void 0?this.urlHandlingStrategy.merge(e,r):r,s=i??o;return s instanceof zt?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:e,finalUrl:r,initialUrl:i}){r&&e?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=e):this.rawUrlTree=i}routerState=xb(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:()=>w(Jb),providedIn:"root"})}return n})(),Jb=(()=>{class n extends dp{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{e(r.url,r.state,"popstate")})})}handleRouterEvent(e,r){e instanceof Fr?this.updateStateMemento():e instanceof wn?this.commitTransition(r):e instanceof ws?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof Cs?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof sn&&e.code!==at.SupersededByNewNavigation&&e.code!==at.Redirect?this.restoreHistory(r):e instanceof Fi?this.restoreHistory(r,!0):e instanceof Gt&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(e)||o){let a=this.browserPageId,c=D(D({},s),this.generateNgRouterState(i,a));this.location.replaceState(e,"",c)}else{let a=D(D({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===e.finalUrl&&o===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ut(n)))(i||n)}})();static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fp(n,t){n.events.pipe(He(e=>e instanceof Gt||e instanceof sn||e instanceof Fi||e instanceof wn),Q(e=>e instanceof Gt||e instanceof wn?0:(e instanceof sn?e.code===at.Redirect||e.code===at.SupersededByNewNavigation:!1)?2:1),He(e=>e!==2),Je(1)).subscribe(()=>{t()})}var LT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},jT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ye=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=w(yh);stateManager=w(dp);options=w(Hi,{optional:!0})||{};pendingTasks=w(jn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=w(Zb);urlSerializer=w(xs);location=w(Ai);urlHandlingStrategy=w(Tl);injector=w(Ne);_events=new me;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=w(Qb);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=w(Os,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!w(xl,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Me;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=xe(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof sn&&r.code!==at.Redirect&&r.code!==at.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Gt)this.navigated=!0;else if(r instanceof Li){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=D({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||kT(i.source)},s);this.scheduleNavigation(a,vs,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}NM(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),vs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r,i)=>{this.navigateToSyncWithBrowser(e,i,r)})}navigateToSyncWithBrowser(e,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=D({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(e);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(xt)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return xe(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(lp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=D(D({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=Eb(h)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),d=this.currentUrlTree.root}return Db(d,e,u,l??null,this.urlSerializer)}navigateByUrl(e,r={skipLocationChange:!1}){let i=qn(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,vs,null,r)}navigate(e,r={skipLocationChange:!1}){return VT(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.console.warn(Tn(4018,!1)),this.urlSerializer.parse("/")}}isActive(e,r){let i;if(r===!0?i=D({},LT):r===!1?i=D({},jT):i=r,qn(e))return nb(this.currentUrlTree,e,i);let o=this.parseUrl(e);return nb(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.entries(e).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(e,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,h)=>{a=d,c=h});let u=this.pendingTasks.add();return fp(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function VT(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new I(4008,!1)}var zi=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=N(null);get href(){return xe(this.reactiveHref)}set href(e){this.reactiveHref.set(e)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new me;applicationErrorHandler=w(xt);options=w(Hi,{optional:!0});constructor(e,r,i,o,s,a){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(w(new Wc("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let e=this.preserveFragment,r=i=>i==="merge"||i==="preserve";e||=r(this.queryParamsHandling),e||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),e&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Gt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(qn(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.reactiveHref.set(e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e))??"":null)}applyAttributeValue(e,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,e,r):i.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:qn(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(P(Ye),P(qt),Xo("tabindex"),P(yn),P(vt),P(Oi))};static \u0275dir=ye({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&j("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Tr("href",i.reactiveHref(),Xf)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",as],skipLocationChange:[2,"skipLocationChange","skipLocationChange",as],replaceUrl:[2,"replaceUrl","replaceUrl",as],routerLink:"routerLink"},features:[mt]})}return n})(),hp=(()=>{class n{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new le;link=w(zi,{optional:!0});constructor(e,r,i,o){this.router=e,this.element=r,this.renderer=i,this.cdr=o,this.routerEventsSubscription=e.events.subscribe(s=>{s instanceof Gt&&this.update()})}ngAfterContentInit(){Y(this.links.changes,Y(null)).pipe(ui()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Ce(e).pipe(ui()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){let r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let r=$T(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?e.isActive(o,r):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static \u0275fac=function(r){return new(r||n)(P(Ye),P(vt),P(yn),P(Ti))};static \u0275dir=ye({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Dh(o,zi,5),r&2){let s;Sh(s=Ih())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[mt]})}return n})();function $T(n){return!!n.paths}var BT=new R("");function pp(n,...t){return Zt([{provide:Os,multi:!0,useValue:n},[],{provide:qt,useFactory:HT},{provide:zc,multi:!0,useFactory:zT},t.map(e=>e.\u0275providers)])}function HT(){return w(Ye).routerState.root}function zT(){let n=w(tt);return t=>{let e=n.get(rn);if(t!==e.components[0])return;let r=n.get(Ye),i=n.get(GT);n.get(qT)===1&&r.initialNavigation(),n.get(WT,null,{optional:!0})?.setUpPreloading(),n.get(BT,null,{optional:!0})?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var GT=new R("",{factory:()=>new me}),qT=new R("",{factory:()=>1});var WT=new R("");var mp="Service workers are disabled or not supported by this browser",Gi=class{serviceWorker;worker;registration;events;constructor(t,e){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=new z(r=>r.error(new I(5601,!1)));else{let r=null,i=new me;this.worker=new z(l=>(r!==null&&l.next(r),i.subscribe(u=>l.next(u))));let o=()=>{let{controller:l}=t;l!==null&&(r=l,i.next(r))};t.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(Xe(()=>t.getRegistration().then(l=>{if(!l)throw new I(5601,!1);return l})));let s=new me;this.events=s.asObservable();let a=l=>{let{data:u}=l;u?.type&&s.next(u)};t.addEventListener("message",a),e?.get(rn,null,{optional:!0})?.onDestroy(()=>{t.removeEventListener("controllerchange",o),t.removeEventListener("message",a)})}}postMessage(t,e){return new Promise(r=>{this.worker.pipe(Je(1)).subscribe(i=>{i.postMessage(D({action:t},e)),r()})})}postMessageWithOperation(t,e,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(t,e);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let e;return typeof t=="string"?e=r=>r.type===t:e=r=>t.includes(r.type),this.events.pipe(He(e))}nextEventOfType(t){return this.eventsOfType(t).pipe(Je(1))}waitForOperationCompleted(t){return new Promise((e,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(He(i=>i.nonce===t),Je(1),Q(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:e,error:r})})}get isEnabled(){return!!this.serviceWorker}},KT=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new me;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=fn,this.notificationClicks=fn,this.notificationCloses=fn,this.pushSubscriptionChanges=fn,this.subscription=fn;return}this.messages=this.sw.eventsOfType("PUSH").pipe(Q(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Q(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(Q(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(Q(i=>i.data)),this.pushManager=this.sw.registration.pipe(Q(i=>i.pushManager));let r=this.pushManager.pipe(Xe(i=>i.getSubscription()));this.subscription=new z(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(mp));let r={userVisibleOnly:!0},i=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,a)=>{this.pushManager.pipe(Xe(c=>c.subscribe(r)),Je(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),s(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(mp));let e=r=>{if(r===null)throw new I(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new I(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(Je(1),Xe(e)).subscribe({next:r,error:i})})}decodeBase64(e){return atob(e)}static \u0275fac=function(r){return new(r||n)(F(Gi))};static \u0275prov=T({token:n,factory:n.\u0275fac})}return n})(),vp=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=fn,this.unrecoverable=fn;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(mp));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let e=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new I(5601,!1));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(r){return new(r||n)(F(Gi))};static \u0275prov=T({token:n,factory:n.\u0275fac})}return n})(),e0=new R("");function YT(){let n=w(As);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let t=w(e0),e=w(nt),r=w(rn);e.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),e.runOutsideAngular(()=>{let i,{registrationStrategy:o}=n;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...a]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=Xb(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),Xb(+a[0])]);break;default:throw new I(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(t,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(s=>console.error(Tn(5604,!1)))})})}function Xb(n){return new Promise(t=>setTimeout(t,n))}function ZT(){let n=w(As),t=w(tt),e=!0;return new Gi(e&&n.enabled!==!1?navigator.serviceWorker:void 0,t)}var As=class{enabled;updateViaCache;type;scope;registrationStrategy};function t0(n,t={}){return Zt([KT,vp,{provide:e0,useValue:n},{provide:As,useValue:t},{provide:Gi,useFactory:ZT},Hc(YT)])}function yp(n){n||(n=w(st));let t=new z(e=>{if(n.destroyed){e.next();return}return n.onDestroy(e.next.bind(e))});return e=>e.pipe(ur(t))}function n0(n,t){let r=!t?.manualCleanup?t?.injector?.get(st)??w(st):null,i=QT(t?.equal),o;t?.requireSync?o=N({kind:0},{equal:i}):o=N({kind:1,value:t?.initialValue},{equal:i});let s,a=n.subscribe({next:c=>o.set({kind:1,value:c}),error:c=>{o.set({kind:2,error:c}),s?.()},complete:()=>{s?.()}});if(t?.requireSync&&o().kind===0)throw new I(601,!1);return s=r?.onDestroy(a.unsubscribe.bind(a)),Ve(()=>{let c=o();switch(c.kind){case 1:return c.value;case 2:throw c.error;case 0:throw new I(601,!1)}},{equal:t?.equal})}function QT(n=Object.is){return(t,e)=>t.kind===1&&e.kind===1&&n(t.value,e.value)}ve();var r0=n=>n?(...t)=>n(...t):(...t)=>fetch(...t);var Rs=class extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}},Ol=class extends Rs{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},Ns=class extends Rs{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},Ps=class extends Rs{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},_p=(function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n})(_p||{});var ks=class{constructor(t,{headers:e={},customFetch:r,region:i=_p.Any}={}){this.url=t,this.headers=e,this.region=i,this.fetch=r0(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return S(this,arguments,void 0,function*(e,r={}){var i;let o,s;try{let{headers:a,method:c,body:l,signal:u,timeout:d}=r,h={},{region:f}=r;f||(f=this.region);let m=new URL(`${this.url}/${e}`);f&&f!=="any"&&(h["x-region"]=f,m.searchParams.set("forceFunctionRegion",f));let y;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",y=l):typeof l=="string"?(h["Content-Type"]="text/plain",y=l):typeof FormData<"u"&&l instanceof FormData?y=l:(h["Content-Type"]="application/json",y=JSON.stringify(l)):y=l;let E=u;d&&(s=new AbortController,o=setTimeout(()=>s.abort(),d),u?(E=s.signal,u.addEventListener("abort",()=>s.abort())):E=s.signal);let C=yield this.fetch(m.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:y,signal:E}).catch(ne=>{throw new Ol(ne)}),K=C.headers.get("x-relay-error");if(K&&K==="true")throw new Ns(C);if(!C.ok)throw new Ps(C);let A=((i=C.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),M;return A==="application/json"?M=yield C.json():A==="application/octet-stream"||A==="application/pdf"?M=yield C.blob():A==="text/event-stream"?M=C:A==="multipart/form-data"?M=yield C.formData():M=yield C.text(),{data:M,error:null,response:C}}catch(a){return{data:null,error:a,response:a instanceof Ps||a instanceof Ns?a.context:void 0}}finally{o&&clearTimeout(o)}})}};var Fp=fC(f0(),1),{PostgrestClient:h0,PostgrestQueryBuilder:mz,PostgrestFilterBuilder:vz,PostgrestTransformBuilder:yz,PostgrestBuilder:_z,PostgrestError:cO}=Fp.default||Fp;var Lp=class{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){let e=process.versions;if(e&&e.node){let r=e.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let t=this.detectEnvironment();if(t.constructor)return t.constructor;let e=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(e+=`

Suggested solution: ${t.workaround}`),new Error(e)}static createWebSocket(t,e){let r=this.getWebSocketConstructor();return new r(t,e)}static isWebSocketSupported(){try{let t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}},jp=Lp;var p0="2.86.0";var g0=`realtime-js/${p0}`,Vp="1.0.0",m0="2.0.0",Up=Vp;var Ls=1e4,v0=1e3,y0=100,jr=(function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n})(jr||{}),Ae=(function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n})(Ae||{}),Tt=(function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n})(Tt||{}),$p=(function(n){return n.websocket="websocket",n})($p||{}),Vr=(function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n})(Vr||{});var Rl=class{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,e){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return e(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return e(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var e;return this._isArrayBuffer((e=t.payload)===null||e===void 0?void 0:e.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var e,r;let i=(r=(e=t.payload)===null||e===void 0?void 0:e.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var e,r;let i=(r=(e=t.payload)===null||e===void 0?void 0:e.payload)!==null&&r!==void 0?r:{},s=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(t,e,r){var i,o;let s=t.topic,a=(i=t.ref)!==null&&i!==void 0?i:"",c=(o=t.join_ref)!==null&&o!==void 0?o:"",l=t.payload.event,u=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(u).length===0?"":JSON.stringify(u);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);let h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+s.length+l.length+d.length,f=new ArrayBuffer(this.HEADER_LENGTH+h),m=new DataView(f),y=0;m.setUint8(y++,this.KINDS.userBroadcastPush),m.setUint8(y++,c.length),m.setUint8(y++,a.length),m.setUint8(y++,s.length),m.setUint8(y++,l.length),m.setUint8(y++,d.length),m.setUint8(y++,e),Array.from(c,C=>m.setUint8(y++,C.charCodeAt(0))),Array.from(a,C=>m.setUint8(y++,C.charCodeAt(0))),Array.from(s,C=>m.setUint8(y++,C.charCodeAt(0))),Array.from(l,C=>m.setUint8(y++,C.charCodeAt(0))),Array.from(d,C=>m.setUint8(y++,C.charCodeAt(0)));var E=new Uint8Array(f.byteLength+r.byteLength);return E.set(new Uint8Array(f),0),E.set(new Uint8Array(r),f.byteLength),E.buffer}decode(t,e){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return e(r)}if(typeof t=="string"){let r=JSON.parse(t),[i,o,s,a,c]=r;return e({join_ref:i,ref:o,topic:s,event:a,payload:c})}return e({})}_binaryDecode(t){let e=new DataView(t),r=e.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,e,i)}}_decodeUserBroadcast(t,e,r){let i=e.getUint8(1),o=e.getUint8(2),s=e.getUint8(3),a=e.getUint8(4),c=this.HEADER_LENGTH+4,l=r.decode(t.slice(c,c+i));c=c+i;let u=r.decode(t.slice(c,c+o));c=c+o;let d=r.decode(t.slice(c,c+s));c=c+s;let h=t.slice(c,t.byteLength),f=a===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,m={type:this.BROADCAST_EVENT,event:u,payload:f};return s>0&&(m.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(t){var e;return t instanceof ArrayBuffer||((e=t?.constructor)===null||e===void 0?void 0:e.name)==="ArrayBuffer"}_pick(t,e){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>e.includes(r)))}};var Wi=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var he=(function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n})(he||{}),Hp=(n,t,e={})=>{var r;let i=(r=e.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,s)=>(o[s]=lO(s,n,t,i),o),{}):{}},lO=(n,t,e,r)=>{let i=t.find(a=>a.name===n),o=i?.type,s=e[n];return o&&!r.includes(o)?_0(o,s):Bp(s)},_0=(n,t)=>{if(n.charAt(0)==="_"){let e=n.slice(1,n.length);return hO(t,e)}switch(n){case he.bool:return uO(t);case he.float4:case he.float8:case he.int2:case he.int4:case he.int8:case he.numeric:case he.oid:return dO(t);case he.json:case he.jsonb:return fO(t);case he.timestamp:return pO(t);case he.abstime:case he.date:case he.daterange:case he.int4range:case he.int8range:case he.money:case he.reltime:case he.text:case he.time:case he.timestamptz:case he.timetz:case he.tsrange:case he.tstzrange:return Bp(t);default:return Bp(t)}},Bp=n=>n,uO=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},dO=n=>{if(typeof n=="string"){let t=parseFloat(n);if(!Number.isNaN(t))return t}return n},fO=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},hO=(n,t)=>{if(typeof n!="string")return n;let e=n.length-1,r=n[e];if(n[0]==="{"&&r==="}"){let o,s=n.slice(1,e);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>_0(t,a))}return n},pO=n=>typeof n=="string"?n.replace(" ","T"):n,Nl=n=>{let t=new URL(n);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};var Ki=class{constructor(t,e,r={},i=Ls){this.channel=t,this.event=e,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var js=class n{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,i,o,s),this.pendingDiffs.forEach(c=>{this.state=n.syncDiff(this.state,c,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=n.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,i){let o=this.cloneDeep(t),s=this.transformState(e),a={},c={};return this.map(o,(l,u)=>{s[l]||(c[l]=u)}),this.map(s,(l,u)=>{let d=o[l];if(d){let h=u.map(E=>E.presence_ref),f=d.map(E=>E.presence_ref),m=u.filter(E=>f.indexOf(E.presence_ref)<0),y=d.filter(E=>h.indexOf(E.presence_ref)<0);m.length>0&&(a[l]=m),y.length>0&&(c[l]=y)}else a[l]=u}),this.syncDiff(o,{joins:a,leaves:c},r,i)}static syncDiff(t,e,r,i){let{joins:o,leaves:s}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,c)=>{var l;let u=(l=t[a])!==null&&l!==void 0?l:[];if(t[a]=this.cloneDeep(c),u.length>0){let d=t[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...h)}r(a,u,c)}),this.map(s,(a,c)=>{let l=t[a];if(!l)return;let u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=l,i(a,l,c),l.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{let i=t[r];return"metas"in i?e[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):e[r]=i,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Vs=(function(n){return n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system",n})(Vs||{}),Cn=(function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n})(Cn||{});var Us=class n{constructor(t,e={config:{}},r){var i,o;if(this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=Ae.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new Ki(this,Tt.join,this.params,this.timeout),this.rejoinTimer=new Wi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ae.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ae.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ae.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ae.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ae.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Tt.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new js(this),this.broadcastEndpointURL=Nl(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,e=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Ae.closed){let{config:{broadcast:s,presence:a,private:c}}=this.params,l=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[Vs.PRESENCE]&&this.bindings[Vs.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},h={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:l,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>t?.(Cn.CHANNEL_ERROR,f)),this._onClose(()=>t?.(Cn.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",async({postgres_changes:f})=>{var m;if(this.socket.setAuth(),f===void 0){t?.(Cn.SUBSCRIBED);return}else{let y=this.bindings.postgres_changes,E=(m=y?.length)!==null&&m!==void 0?m:0,C=[];for(let K=0;K<E;K++){let A=y[K],{filter:{event:M,schema:ne,table:Wt,filter:fe}}=A,ge=f&&f[K];if(ge&&ge.event===M&&ge.schema===ne&&ge.table===Wt&&ge.filter===fe)C.push(Object.assign(Object.assign({},A),{id:ge.id}));else{this.unsubscribe(),this.state=Ae.errored,t?.(Cn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,t&&t(Cn.SUBSCRIBED);return}}).receive("error",f=>{this.state=Ae.errored,t?.(Cn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t?.(Cn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,e={}){return await this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,e,r){return this.state===Ae.joined&&t===Vs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,e,r)}async httpSend(t,e,r={}){var i;let o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(e==null)return Promise.reject("Payload is required for httpSend()");let s={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:e,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let c=a.statusText;try{let l=await a.json();c=l.error||l.message||c}catch{}return Promise.reject(new Error(c))}async send(t,e={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:o,payload:s}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{let l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=e.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=l.body)===null||i===void 0?void 0:i.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var s,a,c;let l=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(a=(s=this.params)===null||s===void 0?void 0:s.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),l.receive("ok",()=>o("ok")),l.receive("error",()=>o("error")),l.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ae.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Tt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Ki(this,Tt.leave,{},t),r.receive("ok",()=>{e(),i("ok")}).receive("timeout",()=>{e(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ae.closed,this.bindings={}}async _fetchWithTimeout(t,e,r){let i=new AbortController,o=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(o),s}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ki(this,t,e,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>y0){let e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var i,o;let s=t.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=Tt;if(r&&[a,c,l,u].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,e,r);if(e&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var m,y,E;return((m=f.filter)===null||m===void 0?void 0:m.event)==="*"||((E=(y=f.filter)===null||y===void 0?void 0:y.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===s}).map(f=>f.callback(h,r)):(o=this.bindings[s])===null||o===void 0||o.filter(f=>{var m,y,E,C,K,A;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in f){let M=f.id,ne=(m=f.filter)===null||m===void 0?void 0:m.event;return M&&((y=e.ids)===null||y===void 0?void 0:y.includes(M))&&(ne==="*"||ne?.toLocaleLowerCase()===((E=e.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{let M=(K=(C=f?.filter)===null||C===void 0?void 0:C.event)===null||K===void 0?void 0:K.toLocaleLowerCase();return M==="*"||M===((A=e?.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===s}).map(f=>{if(typeof h=="object"&&"ids"in h){let m=h.data,{schema:y,table:E,commit_timestamp:C,type:K,errors:A}=m;h=Object.assign(Object.assign({},{schema:y,table:E,commit_timestamp:C,eventType:K,new:{},old:{},errors:A}),this._getPayloadRecords(m))}f.callback(h,r)})}_isClosed(){return this.state===Ae.closed}_isJoined(){return this.state===Ae.joined}_isJoining(){return this.state===Ae.joining}_isLeaving(){return this.state===Ae.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){let i=t.toLocaleLowerCase(),o={type:i,filter:e,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,e){let r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&n.isEqual(i.filter,e))})),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Tt.close,{},t)}_onError(t){this._on(Tt.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ae.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=Hp(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=Hp(t.columns,t.old_record)),e}};var zp=()=>{},Pl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},mO=[1e3,2e3,5e3,1e4],vO=1e4,yO=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,$s=class{constructor(t,e){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ls,this.transport=null,this.heartbeatIntervalMs=Pl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=zp,this.ref=0,this.reconnectTimer=null,this.vsn=Up,this.logger=zp,this.conn=null,this.sendBuffer=[],this.serializer=new Rl,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=e?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${t}/${$p.websocket}`,this.httpEndpoint=Nl(t),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=jp.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let e=t.message;throw e.includes("Node.js")?new Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,e??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){let e=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),e}async removeAllChannels(){let t=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case jr.connecting:return Vr.Connecting;case jr.open:return Vr.Open;case jr.closing:return Vr.Closing;default:return Vr.Closed}}isConnected(){return this.connectionState()===Vr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,e={config:{}}){let r=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{let o=new Us(`realtime:${t}`,e,this);return this.channels.push(o),o}}push(t){let{topic:e,event:r,payload:i,ref:o}=t,s=()=>{this.encode(t,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${e} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(v0,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout()},Pl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,e=>{if(e.topic==="phoenix"&&e.event==="phx_reply")try{this.heartbeatCallback(e.payload.status==="ok"?"ok":"error")}catch(l){this.log("error","error in heartbeat callback",l)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:r,event:i,payload:o,ref:s}=e,a=s?`(${s})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${i} ${a}`.trim(),o),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(i,o,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(t){var e;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((e=this.reconnectTimer)===null||e===void 0||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===jr.open||this.conn.readyState===jr.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var e;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Tt.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;let r=t.match(/\?/)?"&":"?",i=new URLSearchParams(e);return`${t}${r}${i}`}_workerObjectUrl(t){let e;if(t)e=t;else{let r=new Blob([yO],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}_setConnectionState(t,e=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=e)}async _performAuth(t=null){let e;t?e=t:this.accessToken?e=await this.accessToken():e=this.accessTokenValue,this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(r=>{let i={access_token:e,version:g0};e&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Tt.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(e=>{this.log("error",`error setting auth in ${t}`,e)})}_triggerStateCallbacks(t,e){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(e)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Wi(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Pl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var e,r,i,o,s,a,c,l,u,d,h,f;switch(this.transport=(e=t?.transport)!==null&&e!==void 0?e:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:Ls,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:Pl.HEARTBEAT_INTERVAL,this.worker=(o=t?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(s=t?.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(a=t?.heartbeatCallback)!==null&&a!==void 0?a:zp,this.vsn=(c=t?.vsn)!==null&&c!==void 0?c:Up,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t?.reconnectAfterMs)!==null&&l!==void 0?l:m=>mO[m-1]||vO,this.vsn){case Vp:this.encode=(u=t?.encode)!==null&&u!==void 0?u:(m,y)=>y(JSON.stringify(m)),this.decode=(d=t?.decode)!==null&&d!==void 0?d:(m,y)=>y(JSON.parse(m));break;case m0:this.encode=(h=t?.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(f=t?.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};ve();var Wn=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function ce(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var kl=class extends Wn{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Ur=class extends Wn{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};ve();var Yi=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),b0=()=>Response,Fl=n=>{if(Array.isArray(n))return n.map(e=>Fl(e));if(typeof n=="function"||n!==Object(n))return n;let t={};return Object.entries(n).forEach(([e,r])=>{let i=e.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=Fl(r)}),t},w0=n=>{if(typeof n!="object"||n===null)return!1;let t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},C0=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);var Gp=n=>{var t;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(t=n.error)===null||t===void 0?void 0:t.message)||JSON.stringify(n)},_O=(n,t,e)=>S(void 0,void 0,void 0,function*(){let r=yield b0();n instanceof r&&!e?.noResolveJson?n.json().then(i=>{let o=n.status||500,s=i?.statusCode||o+"";t(new kl(Gp(i),o,s))}).catch(i=>{t(new Ur(Gp(i),i))}):t(new Ur(Gp(n),n))}),bO=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"||!r?i:(w0(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),e))};function Bs(n,t,e,r,i,o){return S(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(e,bO(t,r,i,o)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>_O(c,a,r))})})}function Kn(n,t,e,r){return S(this,void 0,void 0,function*(){return Bs(n,"GET",t,e,r)})}function ft(n,t,e,r,i){return S(this,void 0,void 0,function*(){return Bs(n,"POST",t,r,i,e)})}function Hs(n,t,e,r,i){return S(this,void 0,void 0,function*(){return Bs(n,"PUT",t,r,i,e)})}function E0(n,t,e,r){return S(this,void 0,void 0,function*(){return Bs(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}function Zi(n,t,e,r,i){return S(this,void 0,void 0,function*(){return Bs(n,"DELETE",t,r,i,e)})}ve();ve();var Ll=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}execute(){return S(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ce(t))return{data:null,error:t};throw t}})}};var D0,qp=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[D0]="BlobDownloadBuilder",this.promise=null}asStream(){return new Ll(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return S(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ce(t))return{data:null,error:t};throw t}})}};D0=Symbol.toStringTag;var S0=qp;var wO={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},I0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},jl=class{constructor(t,e={},r,i){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=Yi(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,e,r,i){return S(this,void 0,void 0,function*(){try{let o,s=Object.assign(Object.assign({},I0),i),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)}),c=s.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.has("cacheControl")||o.append("cacheControl",s.cacheControl),c&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(c))):(o=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!s.duplex&&(s.duplex="half")),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));let l=this._removeEmptyFolders(e),u=this._getFinalPath(l),d=yield(t=="PUT"?Hs:ft)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ce(o))return{data:null,error:o};throw o}})}upload(t,e,r){return S(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,i){return S(this,void 0,void 0,function*(){let o=this._removeEmptyFolders(t),s=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",e);try{let c,l=Object.assign({upsert:I0.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);let d=yield Hs(this.fetch,a.toString(),c,{headers:u});return{data:{path:o,fullPath:d.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(ce(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,e){return S(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),i=Object.assign({},this.headers);e?.upsert&&(i["x-upsert"]="true");let o=yield ft(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+o.url),a=s.searchParams.get("token");if(!a)throw new Wn("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r))return{data:null,error:r};throw r}})}update(t,e,r){return S(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e,r){return S(this,void 0,void 0,function*(){try{return{data:yield ft(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ce(i))return{data:null,error:i};throw i}})}copy(t,e,r){return S(this,void 0,void 0,function*(){try{return{data:{path:(yield ft(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ce(i))return{data:null,error:i};throw i}})}createSignedUrl(t,e,r){return S(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield ft(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ce(i))return{data:null,error:i};throw i}})}createSignedUrls(t,e,r){return S(this,void 0,void 0,function*(){try{let i=yield ft(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ce(i))return{data:null,error:i};throw i}})}download(t,e){let i=typeof e?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(e?.transform||{}),s=o?`?${o}`:"",a=this._getFinalPath(t),c=()=>Kn(this.fetch,`${this.url}/${i}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new S0(c,this.shouldThrowOnError)}info(t){return S(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{let r=yield Kn(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:Fl(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r))return{data:null,error:r};throw r}})}exists(t){return S(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{return yield E0(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r)&&r instanceof Ur){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,e){let r=this._getFinalPath(t),i=[],o=e?.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&i.push(o);let a=typeof e?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(e?.transform||{});c!==""&&i.push(c);let l=i.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(t){return S(this,void 0,void 0,function*(){try{return{data:yield Zi(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ce(e))return{data:null,error:e};throw e}})}list(t,e,r){return S(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},wO),e),{prefix:t||""});return{data:yield ft(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ce(i))return{data:null,error:i};throw i}})}listV2(t,e){return S(this,void 0,void 0,function*(){try{let r=Object.assign({},t);return{data:yield ft(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};ve();var Vl="2.86.0";var Ul={"X-Client-Info":`storage-js/${Vl}`};var $l=class{constructor(t,e={},r,i){this.shouldThrowOnError=!1;let o=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ul),e),this.fetch=Yi(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return S(this,void 0,void 0,function*(){try{let e=this.listBucketOptionsToQueryString(t);return{data:yield Kn(this.fetch,`${this.url}/bucket${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ce(e))return{data:null,error:e};throw e}})}getBucket(t){return S(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ce(e))return{data:null,error:e};throw e}})}createBucket(t){return S(this,arguments,void 0,function*(e,r={public:!1}){try{return{data:yield ft(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ce(i))return{data:null,error:i};throw i}})}updateBucket(t,e){return S(this,void 0,void 0,function*(){try{return{data:yield Hs(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ce(r))return{data:null,error:r};throw r}})}emptyBucket(t){return S(this,void 0,void 0,function*(){try{return{data:yield ft(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ce(e))return{data:null,error:e};throw e}})}deleteBucket(t){return S(this,void 0,void 0,function*(){try{return{data:yield Zi(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ce(e))return{data:null,error:e};throw e}})}listBucketOptionsToQueryString(t){let e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}};ve();var zs=class extends Error{constructor(n,t){super(n),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function CO(n,t,e){let r=new URL(t,n);if(e)for(let[i,o]of Object.entries(e))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function EO(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function DO(n){let t=n.fetchImpl??globalThis.fetch;return{async request({method:e,path:r,query:i,body:o,headers:s}){let a=CO(n.baseUrl,r,i),c=await EO(n.auth),l=await t(a,{method:e,headers:D(D(D({},o?{"Content-Type":"application/json"}:{}),c),s),body:o?JSON.stringify(o):void 0}),u=await l.text(),d=(l.headers.get("content-type")||"").includes("application/json"),h=d&&u?JSON.parse(u):u;if(!l.ok){let f=d?h:void 0,m=f?.error;throw new zs(m?.message??`Request failed with status ${l.status}`,{status:l.status,icebergType:m?.type,icebergCode:m?.code,details:f})}return{status:l.status,headers:l.headers,data:h}}}}function Bl(n){return n.join("")}var SO=class{constructor(n,t=""){this.client=n,this.prefix=t}async listNamespaces(n){let t=n?{parent:Bl(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(n,t){let e={namespace:n.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:e})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Bl(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Bl(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Bl(n.namespace)}`}),!0}catch(t){if(t instanceof zs&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(n,t){try{return await this.createNamespace(n,t)}catch(e){if(e instanceof zs&&e.status===409)return;throw e}}};function Qi(n){return n.join("")}var IO=class{constructor(n,t="",e){this.client=n,this.prefix=t,this.accessDelegation=e}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Qi(n.namespace)}/tables`})).data.identifiers}async createTable(n,t){let e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Qi(n.namespace)}/tables`,body:t,headers:e})).data.metadata}async updateTable(n,t){let e=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Qi(n.namespace)}/tables/${n.name}`,body:t});return{"metadata-location":e.data["metadata-location"],metadata:e.data.metadata}}async dropTable(n,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Qi(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(n){let t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Qi(n.namespace)}/tables/${n.name}`,headers:t})).data.metadata}async tableExists(n){let t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Qi(n.namespace)}/tables/${n.name}`,headers:t}),!0}catch(e){if(e instanceof zs&&e.status===404)return!1;throw e}}async createTableIfNotExists(n,t){try{return await this.createTable(n,t)}catch(e){if(e instanceof zs&&e.status===409)return await this.loadTable({namespace:n.namespace,name:t.name});throw e}}},x0=class{constructor(n){let t="v1";n.catalogName&&(t+=`/${n.catalogName}`);let e=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=DO({baseUrl:e,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=n.accessDelegation?.join(","),this.namespaceOps=new SO(this.client,t),this.tableOps=new IO(this.client,t,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,t){return this.namespaceOps.createNamespace(n,t)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,t){return this.tableOps.createTable(n,t)}async updateTable(n,t){return this.tableOps.updateTable(n,t)}async dropTable(n,t){await this.tableOps.dropTable(n,t)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,t){return this.namespaceOps.createNamespaceIfNotExists(n,t)}async createTableIfNotExists(n,t){return this.tableOps.createTableIfNotExists(n,t)}};var Hl=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ul),e),this.fetch=Yi(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return S(this,void 0,void 0,function*(){try{return{data:yield ft(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ce(e))return{data:null,error:e};throw e}})}listBuckets(t){return S(this,void 0,void 0,function*(){try{let e=new URLSearchParams;t?.limit!==void 0&&e.set("limit",t.limit.toString()),t?.offset!==void 0&&e.set("offset",t.offset.toString()),t?.sortColumn&&e.set("sortColumn",t.sortColumn),t?.sortOrder&&e.set("sortOrder",t.sortOrder),t?.search&&e.set("search",t.search);let r=e.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Kn(this.fetch,i,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ce(e))return{data:null,error:e};throw e}})}deleteBucket(t){return S(this,void 0,void 0,function*(){try{return{data:yield Zi(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ce(e))return{data:null,error:e};throw e}})}from(t){if(!C0(t))throw new Wn("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new x0({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>S(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}};ve();ve();var Ji={"X-Client-Info":`storage-js/${Vl}`,"Content-Type":"application/json"};var zl=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Ze(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var Xi=class extends zl{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Gl=class extends zl{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};ve();var eo=n=>n?(...t)=>n(...t):(...t)=>fetch(...t);var M0=n=>{if(typeof n!="object"||n===null)return!1;let t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var T0=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),xO=(n,t,e)=>S(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!e?.noResolveJson){let i=n.status||500,o=n;if(typeof o.json=="function")o.json().then(s=>{let a=s?.statusCode||s?.code||i+"";t(new Xi(T0(s),i,a))}).catch(()=>{let s=i+"",a=o.statusText||`HTTP ${i} error`;t(new Xi(a,i,s))});else{let s=i+"",a=o.statusText||`HTTP ${i} error`;t(new Xi(a,i,s))}}else t(new Gl(T0(n),n))}),MO=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"||!r?i:(M0(r)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),e))};function TO(n,t,e,r,i,o){return S(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(e,MO(t,r,i,o)).then(c=>{if(!c.ok)throw c;if(r?.noResolveJson)return c;let l=c.headers.get("content-type");return!l||!l.includes("application/json")?{}:c.json()}).then(c=>s(c)).catch(c=>xO(c,a,r))})})}function Qe(n,t,e,r,i){return S(this,void 0,void 0,function*(){return TO(n,"POST",t,r,i,e)})}var ql=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ji),e),this.fetch=eo(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return S(this,void 0,void 0,function*(){try{return{data:(yield Qe(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}getIndex(t,e){return S(this,void 0,void 0,function*(){try{return{data:yield Qe(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}listIndexes(t){return S(this,void 0,void 0,function*(){try{return{data:yield Qe(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}deleteIndex(t,e){return S(this,void 0,void 0,function*(){try{return{data:(yield Qe(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}};ve();var Wl=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ji),e),this.fetch=eo(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return S(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Qe(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}getVectors(t){return S(this,void 0,void 0,function*(){try{return{data:yield Qe(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}listVectors(t){return S(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Qe(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}queryVectors(t){return S(this,void 0,void 0,function*(){try{return{data:yield Qe(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}deleteVectors(t){return S(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Qe(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}};ve();var Kl=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ji),e),this.fetch=eo(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return S(this,void 0,void 0,function*(){try{return{data:(yield Qe(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}getBucket(t){return S(this,void 0,void 0,function*(){try{return{data:yield Qe(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}listBuckets(){return S(this,arguments,void 0,function*(t={}){try{return{data:yield Qe(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}deleteBucket(t){return S(this,void 0,void 0,function*(){try{return{data:(yield Qe(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ze(e))return{data:null,error:e};throw e}})}};var Gs=class extends Kl{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new Yl(this.url,this.headers,t,this.fetch)}createBucket(t){let e=Object.create(null,{createBucket:{get:()=>super.createBucket}});return S(this,void 0,void 0,function*(){return e.createBucket.call(this,t)})}getBucket(t){let e=Object.create(null,{getBucket:{get:()=>super.getBucket}});return S(this,void 0,void 0,function*(){return e.getBucket.call(this,t)})}listBuckets(){let t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return S(this,arguments,void 0,function*(e={}){return t.listBuckets.call(this,e)})}deleteBucket(t){let e=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return S(this,void 0,void 0,function*(){return e.deleteBucket.call(this,t)})}},Yl=class extends ql{constructor(t,e,r,i){super(t,e,i),this.vectorBucketName=r}createIndex(t){let e=Object.create(null,{createIndex:{get:()=>super.createIndex}});return S(this,void 0,void 0,function*(){return e.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){let t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return S(this,arguments,void 0,function*(e={}){return t.listIndexes.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){let e=Object.create(null,{getIndex:{get:()=>super.getIndex}});return S(this,void 0,void 0,function*(){return e.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){let e=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return S(this,void 0,void 0,function*(){return e.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new Zl(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},Zl=class extends Wl{constructor(t,e,r,i,o){super(t,e,o),this.vectorBucketName=r,this.indexName=i}putVectors(t){let e=Object.create(null,{putVectors:{get:()=>super.putVectors}});return S(this,void 0,void 0,function*(){return e.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){let e=Object.create(null,{getVectors:{get:()=>super.getVectors}});return S(this,void 0,void 0,function*(){return e.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){let t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return S(this,arguments,void 0,function*(e={}){return t.listVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){let e=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return S(this,void 0,void 0,function*(){return e.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){let e=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return S(this,void 0,void 0,function*(){return e.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}};var qs=class extends $l{constructor(t,e={},r,i){super(t,e,r,i)}from(t){return new jl(this.url,this.headers,t,this.fetch)}get vectors(){return new Gs(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Hl(this.url+"/iceberg",this.headers,this.fetch)}};var O0="2.86.0";var Ws="";typeof Deno<"u"?Ws="deno":typeof document<"u"?Ws="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ws="react-native":Ws="node";var OO={"X-Client-Info":`supabase-js-${Ws}/${O0}`},A0={headers:OO},R0={schema:"public"},N0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},P0={};var AO=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),RO=()=>Headers,k0=(n,t,e)=>{let r=AO(e),i=RO();return async(o,s)=>{var a;let c=(a=await t())!==null&&a!==void 0?a:n,l=new i(s?.headers);return l.has("apikey")||l.set("apikey",n),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},s),{headers:l}))}};function NO(n){return n.endsWith("/")?n:n+"/"}function F0(n,t){var e,r;let{db:i,auth:o,realtime:s,global:a}=n,{db:c,auth:l,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},l),o),realtime:Object.assign(Object.assign({},u),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(e=d?.headers)!==null&&e!==void 0?e:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?h.accessToken=n.accessToken:delete h.accessToken,h}function L0(n){let t=n?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(NO(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}ve();ve();var Ql="2.86.0";var $r=30*1e3,Jl=3,Xl=Jl*$r,j0="http://localhost:9999",V0="supabase.auth.token";var U0={"X-Client-Info":`gotrue-js/${Ql}`};var Ks="X-Supabase-Api-Version",Wp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,B0=600*1e3;var Yn=class extends Error{constructor(t,e,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=r}};function O(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var eu=class extends Yn{constructor(t,e,r){super(t,e,r),this.name="AuthApiError",this.status=e,this.code=r}};function H0(n){return O(n)&&n.name==="AuthApiError"}var Ot=class extends Yn{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},an=class extends Yn{constructor(t,e,r,i){super(t,r,i),this.name=e,this.status=r}},Ue=class extends an{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function z0(n){return O(n)&&n.name==="AuthSessionMissingError"}var En=class extends an{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Br=class extends an{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},Hr=class extends an{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function G0(n){return O(n)&&n.name==="AuthImplicitGrantRedirectError"}var Ys=class extends an{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},to=class extends an{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}};function tu(n){return O(n)&&n.name==="AuthRetryableFetchError"}var Zs=class extends an{constructor(t,e,r){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=r}};var zr=class extends an{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};var nu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),q0=` 	
\r=`.split(""),PO=(()=>{let n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<q0.length;t+=1)n[q0[t].charCodeAt(0)]=-2;for(let t=0;t<nu.length;t+=1)n[nu[t].charCodeAt(0)]=t;return n})();function W0(n,t,e){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;e(nu[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;e(nu[r]),t.queuedBits-=6}}function K0(n,t,e){let r=PO[n];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Kp(n){let t=[],e=s=>{t.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=s=>{LO(s,r,e)};for(let s=0;s<n.length;s+=1)K0(n.charCodeAt(s),i,o);return t.join("")}function kO(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function FO(n,t){for(let e=0;e<n.length;e+=1){let r=n.charCodeAt(e);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(n.charCodeAt(e+1)-56320&65535|i)+65536,e+=1}kO(r,t)}}function LO(n,t,e){if(t.utf8seq===0){if(n<=127){e(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&e(t.codepoint)}}function Zn(n){let t=[],e={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<n.length;i+=1)K0(n.charCodeAt(i),e,r);return new Uint8Array(t)}function Y0(n){let t=[];return FO(n,e=>t.push(e)),new Uint8Array(t)}function Dn(n){let t=[],e={queue:0,queuedBits:0},r=i=>{t.push(i)};return n.forEach(i=>W0(i,e,r)),W0(null,e,r),t.join("")}function Z0(n){return Math.round(Date.now()/1e3)+n}function Q0(){return Symbol("auth-callback")}var Re=()=>typeof window<"u"&&typeof document<"u",Gr={tested:!1,writable:!1},ru=()=>{if(!Re())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Gr.tested)return Gr.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Gr.tested=!0,Gr.writable=!0}catch{Gr.tested=!0,Gr.writable=!1}return Gr.writable};function J0(n){let t={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return e.searchParams.forEach((r,i)=>{t[i]=r}),t}var iu=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),X0=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",qr=async(n,t,e)=>{await n.setItem(t,JSON.stringify(e))},Qn=async(n,t)=>{let e=await n.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}},Sn=async(n,t)=>{await n.removeItem(t)},Qs=class n{constructor(){this.promise=new n.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}};Qs.promiseConstructor=Promise;function ou(n){let t=n.split(".");if(t.length!==3)throw new zr("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!$0.test(t[r]))throw new zr("JWT not in base64url format");return{header:JSON.parse(Kp(t[0])),payload:JSON.parse(Kp(t[1])),signature:Zn(t[2]),raw:{header:t[0],payload:t[1]}}}async function ew(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function tw(n,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{let s=await n(o);if(!t(o,null,s)){r(s);return}}catch(s){if(!t(o,s)){i(s);return}}})()})}function jO(n){return("0"+n.toString(16)).substr(-2)}function VO(){let t=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length,i="";for(let o=0;o<56;o++)i+=e.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,jO).join("")}async function UO(n){let e=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",e),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function $O(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let e=await UO(n);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Wr(n,t,e=!1){let r=VO(),i=r;e&&(i+="/PASSWORD_RECOVERY"),await qr(n,`${t}-code-verifier`,i);let o=await $O(r);return[o,r===o?"plain":"s256"]}var BO=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function nw(n){let t=n.headers.get(Ks);if(!t||!t.match(BO))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function rw(n){if(!n)throw new Error("Missing exp claim");let t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function iw(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var HO=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Kr(n){if(!HO.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function su(){let n={};return new Proxy(n,{get:(t,e)=>{if(e==="__isUserNotAvailableProxy")return!0;if(typeof e=="symbol"){let r=e.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ow(n,t){return new Proxy(n,{get:(e,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){let o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(e,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(e,r,i)}})}function Yp(n){return JSON.parse(JSON.stringify(n))}var Yr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),zO=[502,503,504];async function sw(n){var t;if(!X0(n))throw new to(Yr(n),0);if(zO.includes(n.status))throw new to(Yr(n),n.status);let e;try{e=await n.json()}catch(o){throw new Ot(Yr(o),o)}let r,i=nw(n);if(i&&i.getTime()>=Wp["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?r=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(r=e.error_code),r){if(r==="weak_password")throw new Zs(Yr(e),n.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ue}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new Zs(Yr(e),n.status,e.weak_password.reasons);throw new eu(Yr(e),n.status||500,r)}var GO=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),e))};async function k(n,t,e,r){var i;let o=Object.assign({},r?.headers);o[Ks]||(o[Ks]=Wp["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);let s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await qO(n,t,e+a,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}async function qO(n,t,e,r,i,o){let s=GO(t,r,i,o),a;try{a=await n(e,Object.assign({},s))}catch(c){throw console.error(c),new to(Yr(c),0)}if(a.ok||await sw(a),r?.noResolveJson)return a;try{return await a.json()}catch(c){await sw(c)}}function At(n){var t;let e=null;WO(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=Z0(n.expires_in)));let r=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:e,user:r},error:null}}function Zp(n){let t=At(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)&&(t.data.weak_password=n.weak_password),t}function cn(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function aw(n){return{data:n,error:null}}function cw(n){let{action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:o}=n,s=dn(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},s);return{data:{properties:a,user:c},error:null}}function Qp(n){return n}function WO(n){return n.access_token&&n.refresh_token&&n.expires_in}var au=["global","local","others"];var no=class{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=iu(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,e=au[0]){if(au.indexOf(e)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${au.join(", ")}`);try{return await k(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(O(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,e={}){try{return await k(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:cn})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{let{options:e}=t,r=dn(t,["options"]),i=Object.assign(Object.assign({},r),e);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await k(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:cw,redirectTo:e?.redirectTo})}catch(e){if(O(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(t){try{return await k(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:cn})}catch(e){if(O(e))return{data:{user:null},error:e};throw e}}async listUsers(t){var e,r,i,o,s,a,c;try{let l={nextPage:null,lastPage:0,total:0},u=await k(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Qp});if(u.error)throw u.error;let d=await u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(m=>{let y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(m.split(";")[1].split("=")[1]);l[`${E}Page`]=y}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(O(l))return{data:{users:[]},error:l};throw l}}async getUserById(t){Kr(t);try{return await k(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:cn})}catch(e){if(O(e))return{data:{user:null},error:e};throw e}}async updateUserById(t,e){Kr(t);try{return await k(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:cn})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,e=!1){Kr(t);try{return await k(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:cn})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Kr(t.userId);try{let{data:e,error:r}=await k(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:e,error:r}}catch(e){if(O(e))return{data:null,error:e};throw e}}async _deleteFactor(t){Kr(t.userId),Kr(t.id);try{return{data:await k(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(O(e))return{data:null,error:e};throw e}}async _listOAuthClients(t){var e,r,i,o,s,a,c;try{let l={nextPage:null,lastPage:0,total:0},u=await k(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Qp});if(u.error)throw u.error;let d=await u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(m=>{let y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(m.split(";")[1].split("=")[1]);l[`${E}Page`]=y}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(O(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(t){try{return await k(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(O(e))return{data:null,error:e};throw e}}async _getOAuthClient(t){try{return await k(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(O(e))return{data:null,error:e};throw e}}async _updateOAuthClient(t,e){try{return await k(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(O(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await k(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(e){if(O(e))return{data:null,error:e};throw e}}async _regenerateOAuthClientSecret(t){try{return await k(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(O(e))return{data:null,error:e};throw e}}};function Jp(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}var Zr={debug:!!(globalThis&&ru()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Js=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}},cu=class extends Js{};async function Xp(n,t,e){Zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);let r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Zr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await e()}finally{Zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(t===0)throw Zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new cu(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Zr.debug)try{let o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await e()}}))}function lw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function eg(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function uw(n){return parseInt(n,16)}function dw(n){let t=new TextEncoder().encode(n);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function fw(n){var t;let{chainId:e,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:s,notBefore:a,requestId:c,resources:l,scheme:u,uri:d,version:h}=n;{if(!Number.isInteger(e))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${e}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=n.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}let f=eg(n.address),m=u?`${u}://${r}`:r,y=n.statement?`${n.statement}
`:"",E=`${m} wants you to sign in with your Ethereum account:
${f}

${y}`,C=`URI: ${d}
Version: ${h}
Chain ID: ${e}${s?`
Nonce: ${s}`:""}
Issued At: ${o.toISOString()}`;if(i&&(C+=`
Expiration Time: ${i.toISOString()}`),a&&(C+=`
Not Before: ${a.toISOString()}`),c&&(C+=`
Request ID: ${c}`),l){let K=`
Resources:`;for(let A of l){if(!A||typeof A!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);K+=`
- ${A}`}C+=K}return`${E}
${C}`}ve();var we=class extends Error{constructor({message:t,code:e,cause:r,name:i}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=e}},Qr=class extends we{constructor(t,e){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e,message:t}),this.name="WebAuthnUnknownError",this.originalError=e}};function hw({error:n,options:t}){var e,r,i;let{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new we({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((e=o.authenticatorSelection)===null||e===void 0?void 0:e.requireResidentKey)===!0)return new we({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new we({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new we({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new we({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new we({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return o.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new we({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new we({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){let s=window.location.hostname;if(tg(s)){if(o.rp.id!==s)return new we({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new we({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new we({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new we({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new we({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function pw({error:n,options:t}){let{publicKey:e}=t;if(!e)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new we({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new we({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){let r=window.location.hostname;if(tg(r)){if(e.rpId!==r)return new we({message:`The RP ID "${e.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new we({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new we({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new we({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}var ng=class{createNewAbortSignal(){if(this.controller){let e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}let t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){let t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}},KO=new ng;function mw(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);let{challenge:t,user:e,excludeCredentials:r}=n,i=dn(n,["challenge","user","excludeCredentials"]),o=Zn(t).buffer,s=Object.assign(Object.assign({},e),{id:Zn(e.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:o,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){let l=r[c];a.excludeCredentials[c]=Object.assign(Object.assign({},l),{id:Zn(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function vw(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);let{challenge:t,allowCredentials:e}=n,r=dn(n,["challenge","allowCredentials"]),i=Zn(t).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(e&&e.length>0){o.allowCredentials=new Array(e.length);for(let s=0;s<e.length;s++){let a=e[s];o.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Zn(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return o}function yw(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();let e=n;return{id:n.id,rawId:n.id,response:{attestationObject:Dn(new Uint8Array(n.response.attestationObject)),clientDataJSON:Dn(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function _w(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();let e=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Dn(new Uint8Array(i.authenticatorData)),clientDataJSON:Dn(new Uint8Array(i.clientDataJSON)),signature:Dn(new Uint8Array(i.signature)),userHandle:i.userHandle?Dn(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function tg(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function gw(){var n,t;return!!(Re()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function YO(n){try{let t=await navigator.credentials.create(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Qr("Browser returned unexpected credential type",t)}:{data:null,error:new Qr("Empty credential response",t)}}catch(t){return{data:null,error:hw({error:t,options:n})}}}async function ZO(n){try{let t=await navigator.credentials.get(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Qr("Browser returned unexpected credential type",t)}:{data:null,error:new Qr("Empty credential response",t)}}catch(t){return{data:null,error:pw({error:t,options:n})}}}var QO={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},JO={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function lu(...n){let t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),e=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(let i of n)if(i)for(let o in i){let s=i[o];if(s!==void 0)if(Array.isArray(s))r[o]=s;else if(e(s))r[o]=s;else if(t(s)){let a=r[o];t(a)?r[o]=lu(a,s):r[o]=lu(s)}else r[o]=s}return r}function XO(n,t){return lu(QO,n,t||{})}function eA(n,t){return lu(JO,n,t||{})}var uu=class{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:e,friendlyName:r,signal:i},o){try{let{data:s,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:e});if(!s)return{data:null,error:a};let c=i??KO.createNewAbortSignal();if(s.webauthn.type==="create"){let{user:l}=s.webauthn.credential_options.publicKey;l.name||(l.name=`${l.id}:${r}`),l.displayName||(l.displayName=l.name)}switch(s.webauthn.type){case"create":{let l=XO(s.webauthn.credential_options.publicKey,o?.create),{data:u,error:d}=await YO({publicKey:l,signal:c});return u?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}case"request":{let l=eA(s.webauthn.credential_options.publicKey,o?.request),{data:u,error:d}=await ZO(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:l,signal:c}));return u?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}}}catch(s){return O(s)?{data:null,error:s}:{data:null,error:new Ot("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:e,webauthn:r}){return this.client.mfa.verify({factorId:e,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!e)return{data:null,error:new Yn("rpId is required for WebAuthn authentication")};try{if(!gw())return{data:null,error:new Ot("Browser does not support WebAuthn",null)};let{data:s,error:a}=await this.challenge({factorId:t,webauthn:{rpId:e,rpOrigins:r},signal:i},{request:o});if(!s)return{data:null,error:a};let{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:e,rpOrigins:r,credential_response:c.credential_response}})}catch(s){return O(s)?{data:null,error:s}:{data:null,error:new Ot("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!e)return{data:null,error:new Yn("rpId is required for WebAuthn registration")};try{if(!gw())return{data:null,error:new Ot("Browser does not support WebAuthn",null)};let{data:s,error:a}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:a};let{data:c,error:l}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:e,rpOrigins:r},signal:i},{create:o});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:e,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:l}}catch(s){return O(s)?{data:null,error:s}:{data:null,error:new Ot("Unexpected error in register",s)}}}};lw();var tA={url:j0,storageKey:V0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:U0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function bw(n,t,e){return await e()}var ro={},nA=(()=>{class n{get jwks(){var e,r;return(r=(e=ro[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){ro[this.storageKey]=Object.assign(Object.assign({},ro[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=ro[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ro[this.storageKey]=Object.assign(Object.assign({},ro[this.storageKey]),{cachedAt:e})}constructor(e){var r,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;let s=Object.assign(Object.assign({},tA),e);if(this.storageKey=s.storageKey,this.instanceID=(r=n.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,n.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Re()){let a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new no({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=iu(s.fetch),this.lock=s.lock||bw,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:Re()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=Xp:this.lock=bw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new uu(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:ru()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Jp(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Jp(this.memoryStorage)),Re()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ql}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},i="none";if(Re()&&(r=J0(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),Re()&&this.detectSessionInUrl&&i!=="none"){let{data:o,error:s}=await this._getSessionFromURL(r,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),G0(s)){let l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}let{session:a,redirectType:c}=o;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),await this._saveSession(a),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return O(r)?this._returnResult({error:r}):this._returnResult({error:new Ot("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,i,o;try{let s=await k(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:At}),{data:a,error:c}=s;if(c||!a)return this._returnResult({data:{user:null,session:null},error:c});let l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(O(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var r,i,o;try{let s;if("email"in e){let{email:d,password:h,options:f}=e,m=null,y=null;this.flowType==="pkce"&&([m,y]=await Wr(this.storage,this.storageKey)),s=await k(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:h,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:m,code_challenge_method:y},xform:At})}else if("phone"in e){let{phone:d,password:h,options:f}=e;s=await k(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(i=f?.data)!==null&&i!==void 0?i:{},channel:(o=f?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:At})}else throw new Br("You must provide either an email or phone number and a password");let{data:a,error:c}=s;if(c||!a)return this._returnResult({data:{user:null,session:null},error:c});let l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(O(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let r;if("email"in e){let{email:s,password:a,options:c}=e;r=await k(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Zp})}else if("phone"in e){let{phone:s,password:a,options:c}=e;r=await k(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Zp})}else throw new Br("You must provide either an email or phone number and a password");let{data:i,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){let s=new En;return this._returnResult({data:{user:null,session:null},error:s})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,i,o,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){let{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,i,o,s,a,c,l,u,d,h,f;let m,y;if("message"in e)m=e.message,y=e.signature;else{let{chain:E,wallet:C,statement:K,options:A}=e,M;if(Re())if(typeof C=="object")M=C;else{let un=window;if("ethereum"in un&&typeof un.ethereum=="object"&&"request"in un.ethereum&&typeof un.ethereum.request=="function")M=un.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=C}let ne=new URL((r=A?.url)!==null&&r!==void 0?r:window.location.href),Wt=await M.request({method:"eth_requestAccounts"}).then(un=>un).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Wt||Wt.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let fe=eg(Wt[0]),ge=(i=A?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!ge){let un=await M.request({method:"eth_chainId"});ge=uw(un)}let nC={domain:ne.host,address:fe,statement:K,uri:ne.href,version:"1",chainId:ge,nonce:(o=A?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(a=(s=A?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(c=A?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(l=A?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=A?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=A?.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=fw(nC),y=await M.request({method:"personal_sign",params:[dw(m),fe]})}try{let{data:E,error:C}=await k(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:y},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:At});if(C)throw C;if(!E||!E.session||!E.user){let K=new En;return this._returnResult({data:{user:null,session:null},error:K})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:C})}catch(E){if(O(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async signInWithSolana(e){var r,i,o,s,a,c,l,u,d,h,f,m;let y,E;if("message"in e)y=e.message,E=e.signature;else{let{chain:C,wallet:K,statement:A,options:M}=e,ne;if(Re())if(typeof K=="object")ne=K;else{let fe=window;if("solana"in fe&&typeof fe.solana=="object"&&("signIn"in fe.solana&&typeof fe.solana.signIn=="function"||"signMessage"in fe.solana&&typeof fe.solana.signMessage=="function"))ne=fe.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof K!="object"||!M?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ne=K}let Wt=new URL((r=M?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in ne&&ne.signIn){let fe=await ne.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M?.signInWithSolana),{version:"1",domain:Wt.host,uri:Wt.href}),A?{statement:A}:null)),ge;if(Array.isArray(fe)&&fe[0]&&typeof fe[0]=="object")ge=fe[0];else if(fe&&typeof fe=="object"&&"signedMessage"in fe&&"signature"in fe)ge=fe;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ge&&"signature"in ge&&(typeof ge.signedMessage=="string"||ge.signedMessage instanceof Uint8Array)&&ge.signature instanceof Uint8Array)y=typeof ge.signedMessage=="string"?ge.signedMessage:new TextDecoder().decode(ge.signedMessage),E=ge.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ne)||typeof ne.signMessage!="function"||!("publicKey"in ne)||typeof ne!="object"||!ne.publicKey||!("toBase58"in ne.publicKey)||typeof ne.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${Wt.host} wants you to sign in with your Solana account:`,ne.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${Wt.href}`,`Issued At: ${(o=(i=M?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=M?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((a=M?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((c=M?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((l=M?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((u=M?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((h=(d=M?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...M.signInWithSolana.resources.map(ge=>`- ${ge}`)]:[]].join(`
`);let fe=await ne.signMessage(new TextEncoder().encode(y),"utf8");if(!fe||!(fe instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=fe}}try{let{data:C,error:K}=await k(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Dn(E)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:At});if(K)throw K;if(!C||!C.session||!C.user){let A=new En;return this._returnResult({data:{user:null,session:null},error:A})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:K})}catch(C){if(O(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(e){let r=await Qn(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{let{data:s,error:a}=await k(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:At});if(await Sn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){let c=new En;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:a})}catch(s){if(O(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{let{options:r,provider:i,token:o,access_token:s,nonce:a}=e,c=await k(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:At}),{data:l,error:u}=c;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){let d=new En;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,i,o,s,a;try{if("email"in e){let{email:c,options:l}=e,u=null,d=null;this.flowType==="pkce"&&([u,d]=await Wr(this.storage,this.storageKey));let{error:h}=await k(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){let{phone:c,options:l}=e,{data:u,error:d}=await k(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(o=l?.data)!==null&&o!==void 0?o:{},create_user:(s=l?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new Br("You must provide either an email or phone number.")}catch(c){if(O(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(e){var r,i;try{let o,s;"options"in e&&(o=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:c}=await k(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:At});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");let l=a.session,u=a.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(o){if(O(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var r,i,o,s,a;try{let c=null,l=null;this.flowType==="pkce"&&([c,l]=await Wr(this.storage,this.storageKey));let u=await k(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:l}),headers:this.headers,xform:aw});return!((s=u.data)===null||s===void 0)&&s.url&&Re()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(c){if(O(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:r},error:i}=e;if(i)throw i;if(!r)throw new Ue;let{error:o}=await k(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(O(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{let r=`${this.url}/resend`;if("email"in e){let{email:i,type:o,options:s}=e,{error:a}=await k(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){let{phone:i,type:o,options:s}=e,{data:a,error:c}=await k(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:c})}throw new Br("You must provide either an email or phone number and a type")}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){let o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,r=await Qn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};let i=e.expires_at?e.expires_at*1e3-Date.now()<Xl:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){let a=await Qn(this.userStorage,this.storageKey+"-user");a?.user?e.user=a.user:e.user=su()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){let a={value:this.suppressGetSessionWarning};e.user=ow(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}let{data:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await k(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:cn}):await this._useSession(async r=>{var i,o,s;let{data:a,error:c}=r;if(c)throw c;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ue}:await k(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=a.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:cn})})}catch(r){if(O(r))return z0(r)&&(await this._removeSession(),await Sn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async i=>{let{data:o,error:s}=i;if(s)throw s;if(!o.session)throw new Ue;let a=o.session,c=null,l=null;this.flowType==="pkce"&&e.email!=null&&([c,l]=await Wr(this.storage,this.storageKey));let{data:u,error:d}=await k(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:l}),jwt:a.access_token,xform:cn});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(i){if(O(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ue;let r=Date.now()/1e3,i=r,o=!0,s=null,{payload:a}=ou(e.access_token);if(a.exp&&(i=a.exp,o=i<=r),o){let{data:c,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!c)return{data:{user:null,session:null},error:null};s=c}else{let{data:c,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(O(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var i;if(!e){let{data:a,error:c}=r;if(c)throw c;e=(i=a.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new Ue;let{data:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Re())throw new Hr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Hr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Ys("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hr("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ys("No code detected.");let{data:A,error:M}=await this._exchangeCodeForSession(e.code);if(M)throw M;let ne=new URL(window.location.href);return ne.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ne.toString()),{data:{session:A.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:o,access_token:s,refresh_token:a,expires_in:c,expires_at:l,token_type:u}=e;if(!s||!c||!a||!u)throw new Hr("No session defined in URL");let d=Math.round(Date.now()/1e3),h=parseInt(c),f=d+h;l&&(f=parseInt(l));let m=f-d;m*1e3<=$r&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);let y=f-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,d);let{data:E,error:C}=await this._getUser(s);if(C)throw C;let K={provider_token:i,provider_refresh_token:o,access_token:s,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:K,redirectType:e.type},error:null})}catch(i){if(O(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){let r=await Qn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return this._returnResult({error:s});let a=(i=o.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:c}=await this.admin.signOut(a,e);if(c&&!(H0(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return e!=="others"&&(await this._removeSession(),await Sn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){let r=Q0(),i={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async r=>{var i,o;try{let{data:{session:s},error:a}=r;if(a)throw a;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Wr(this.storage,this.storageKey,!0));try{return await k(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(O(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{let{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{let{data:i,error:o}=await this._useSession(async s=>{var a,c,l,u,d;let{data:h,error:f}=s;if(f)throw f;let m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await k(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(o)throw o;return Re()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:e.provider,url:i?.url},error:null})}catch(i){if(O(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var i;try{let{error:o,data:{session:s}}=r;if(o)throw o;let{options:a,provider:c,token:l,access_token:u,nonce:d}=e,h=await k(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=s?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:c,id_token:l,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:At}),{data:f,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new En}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:m}))}catch(o){if(O(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)throw a;return await k(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){let r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return await tw(async o=>(o>0&&await ew(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await k(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:At})),(o,s)=>{let a=200*Math.pow(2,o);return s&&tu(s)&&Date.now()+a-i<$r})}catch(i){if(this._debug(r,"error",i),O(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){let i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),Re()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,r;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let o=await Qn(this.storage,this.storageKey);if(o&&this.userStorage){let a=await Qn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:o.user},await qr(this.userStorage,this.storageKey+"-user",a)),o.user=(e=a?.user)!==null&&e!==void 0?e:su()}else if(o&&!o.user&&!o.user){let a=await Qn(this.storage,this.storageKey+"-user");a&&a?.user?(o.user=a.user,await Sn(this.storage,this.storageKey+"-user"),await qr(this.storage,this.storageKey,o)):o.user=su()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}let s=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Xl;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${Xl}s`),s){if(this.autoRefreshToken&&o.refresh_token){let{error:a}=await this._callRefreshToken(o.refresh_token);a&&(console.error(a),tu(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{let{data:a,error:c}=await this._getUser(o.access_token);!c&&a?.user?(o.user=a.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var r,i;if(!e)throw new Ue;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Qs;let{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Ue;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let c={data:s.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(s){if(this._debug(o,"error",s),O(s)){let a={data:null,error:s};return tu(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,r,i=!0){let o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:r});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,r)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let c=0;c<s.length;c+=1)console.error(s[c]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;let r=Object.assign({},e),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await qr(this.userStorage,this.storageKey+"-user",{user:r.user});let o=Object.assign({},r);delete o.user;let s=Yp(o);await qr(this.storage,this.storageKey,s)}else{let o=Yp(r);await qr(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Sn(this.storage,this.storageKey),await Sn(this.storage,this.storageKey+"-code-verifier"),await Sn(this.storage,this.storageKey+"-user"),this.userStorage&&await Sn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Re()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),$r);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async r=>{let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((i.expires_at*1e3-e)/$r);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${$r}ms, refresh threshold is ${Jl} ticks`),o<=Jl&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Js)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Re()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,i){let o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[s,a]=await Wr(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});o.push(c.toString())}if(i?.queryParams){let s=new URLSearchParams(i.queryParams);o.push(s.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;return s?this._returnResult({data:null,error:s}):await k(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});let c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await k(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((o=l?.totp)===null||o===void 0)&&o.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?yw(e.webauthn.credential_response):_w(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:l}=await k(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:l}))})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=await k(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;let{data:c}=a;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:mw(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:vw(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){let{data:r,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;let{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};let o={all:[],phone:[],totp:[],webauthn:[]};for(let s of(e=r?.factors)!==null&&e!==void 0?e:[])o.all.push(s),s.status==="verified"&&o[s.factor_type].push(s);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;let{data:{session:i},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:s}=ou(i.access_token),a=null;s.aal&&(a=s.aal);let c=a;((r=(e=i.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");let u=s.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?await k(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ue})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async i=>{let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new Ue});let a=await k(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&Re()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(O(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,r){try{return await this._useSession(async i=>{let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new Ue});let a=await k(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&Re()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(O(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{let{data:{session:r},error:i}=e;return i?this._returnResult({data:null,error:i}):r?await k(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Ue})})}catch(e){if(O(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?(await k(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ue})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let i=r.keys.find(c=>c.kid===e);if(i)return i;let o=Date.now();if(i=this.jwks.keys.find(c=>c.kid===e),i&&this.jwks_cached_at+B0>o)return i;let{data:s,error:a}=await k(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=o,i=s.keys.find(c=>c.kid===e),!i)?null:i}async getClaims(e,r={}){try{let i=e;if(!i){let{data:m,error:y}=await this.getSession();if(y||!m.session)return this._returnResult({data:null,error:y});i=m.session.access_token}let{header:o,payload:s,signature:a,raw:{header:c,payload:l}}=ou(i);r?.allowExpired||rw(s.exp);let u=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!u){let{error:m}=await this.getUser(i);if(m)throw m;return{data:{claims:s,header:o,signature:a},error:null}}let d=iw(o.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,Y0(`${c}.${l}`)))throw new zr("Invalid JWT signature");return{data:{claims:s,header:o,signature:a},error:null}}catch(i){if(O(i))return this._returnResult({data:null,error:i});throw i}}}return n.nextInstanceID={},n})(),rg=nA;var rA=rg,ig=rA;var du=class extends ig{constructor(t){super(t)}};var fu=class{constructor(t,e,r){var i,o,s;this.supabaseUrl=t,this.supabaseKey=e;let a=L0(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);let c=`sb-${a.hostname.split(".")[0]}-auth-token`,l={db:R0,realtime:P0,auth:Object.assign(Object.assign({},N0),{storageKey:c}),global:A0},u=F0(r??{},l);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=u.auth)!==null&&s!==void 0?s:{},this.headers,u.global.fetch),this.fetch=k0(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new h0(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new qs(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new ks(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,e;if(this.accessToken)return await this.accessToken();let{data:r}=await this.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:s,flowType:a,lock:c,debug:l,throwOnError:u},d,h){let f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new du({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,userStorage:o,flowType:a,lock:c,debug:l,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new $s(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var ww=(n,t,e)=>new fu(n,t,e);function iA(){if(typeof window<"u"||typeof process>"u")return!1;let n=process.version;if(n==null)return!1;let t=n.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}iA()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var og={production:!0,supabase:{url:"https://odiykkgeipobqgqiqvam.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9kaXlra2dlaXBvYnFncWlxdmFtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ3ODUwNTksImV4cCI6MjA4MDM2MTA1OX0.YEcIgiPDKe1tD8y5MfCMIrpY0jLijKgbi0qFv-0SIII"}};var Fe=class n{constructor(t){this.router=t;this.supabase=ww(og.supabase.url,og.supabase.anonKey),this.supabase.auth.onAuthStateChange((e,r)=>{this.currentUser.set(r?.user??null),this.isAuthenticated.set(!!r?.user),r?.user?this.loadUserProfile(r.user.id):this.currentProfile.set(null)}),this.checkSession()}supabase;currentUser=N(null);currentProfile=N(null);isAuthenticated=N(!1);async checkSession(){let{data:{session:t}}=await this.supabase.auth.getSession();t?.user&&(this.currentUser.set(t.user),this.isAuthenticated.set(!0),await this.loadUserProfile(t.user.id))}async loadUserProfile(t){try{let{data:e,error:r}=await this.supabase.from("profiles").select("*").eq("id",t).single();if(r)throw r;this.currentProfile.set(e)}catch(e){console.error("Error loading user profile:",e)}}async signUp(t,e,r){try{let{data:i,error:o}=await this.supabase.auth.signUp({email:e,password:r});if(o)throw o;if(!i.user)throw new Error("No user returned from signup");let{error:s}=await this.supabase.from("profiles").insert({id:i.user.id,username:t,email:e,created_at:new Date().toISOString()});if(s)throw s;return{success:!0,data:i}}catch(i){return console.error("Signup error:",i),{success:!1,error:i.message}}}async signIn(t,e){try{let{data:r,error:i}=await this.supabase.from("profiles").select("email").ilike("username",t).single();if(i||!r){console.error("Profile lookup error:",i),console.log("Searching for username:",t);let{data:a}=await this.supabase.from("profiles").select("username");throw console.log("Available usernames:",a),new Error("Invalid username or password")}console.log("Found email for username:",r.email);let{data:o,error:s}=await this.supabase.auth.signInWithPassword({email:r.email,password:e});if(s)throw console.error("Supabase auth error:",s),new Error("Invalid username or password");return await this.loadUserProfile(o.user.id),this.router.navigate(["/today"]),{success:!0,data:o}}catch(r){return console.error("Sign in error:",r),{success:!1,error:r.message||"Invalid username or password"}}}async signOut(){try{let{error:t}=await this.supabase.auth.signOut();if(t)throw t;return this.currentUser.set(null),this.currentProfile.set(null),this.isAuthenticated.set(!1),this.router.navigate(["/login"]),{success:!0}}catch(t){return console.error("Sign out error:",t),{success:!1,error:t.message}}}async resetPassword(t){try{let{error:e}=await this.supabase.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/reset-password`});if(e)throw e;return{success:!0}}catch(e){return console.error("Password reset error:",e),{success:!1,error:e.message}}}async updatePassword(t){try{let{error:e}=await this.supabase.auth.updateUser({password:t});if(e)throw e;return{success:!0}}catch(e){return console.error("Update password error:",e),{success:!1,error:e.message}}}getSupabaseClient(){return this.supabase}async getSession(){let{data:{session:t}}=await this.supabase.auth.getSession();return t}static \u0275fac=function(e){return new(e||n)(F(Ye))};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})};var ln=class n{constructor(t){this.authService=t;qe(()=>{this.authService.currentUser()?this.loadEntries():this.entriesSubject.next([])})}entriesSubject=new Te([]);entries$=this.entriesSubject.asObservable();async loadEntries(){let t=this.authService.currentUser();if(t)try{let e=this.authService.getSupabaseClient(),{data:r,error:i}=await e.from("feeding_entries").select("*").eq("user_id",t.id).order("timestamp",{ascending:!1});if(i)throw i;let o=(r||[]).map(s=>({id:s.id,date:s.date,time:s.time,amount:s.amount,comment:s.comment,timestamp:s.timestamp}));this.entriesSubject.next(o)}catch(e){console.error("Error loading entries:",e),this.entriesSubject.next([])}}getAllEntries(){return this.entriesSubject.value}getEntriesByDate(t){return this.entriesSubject.value.filter(e=>e.date===t).sort((e,r)=>r.time.localeCompare(e.time))}getTodayEntries(){let t=this.getTodayDate();return this.getEntriesByDate(t)}getEntryById(t){return this.entriesSubject.value.find(e=>e.id===t)}async createEntry(t){let e=this.authService.currentUser();if(!e)return null;try{let r=this.createTimestamp(t.date,t.time),i=this.authService.getSupabaseClient(),o={user_id:e.id,date:t.date,time:t.time,amount:t.amount,comment:t.comment,timestamp:r,created_at:new Date().toISOString()},{data:s,error:a}=await i.from("feeding_entries").insert(o).select().single();if(a)throw a;let c={id:s.id,date:s.date,time:s.time,amount:s.amount,comment:s.comment,timestamp:s.timestamp},l=[...this.entriesSubject.value,c];return this.entriesSubject.next(l),c}catch(r){return console.error("Error creating entry:",r),null}}async updateEntry(t,e){let r=this.authService.currentUser();if(!r)return!1;try{let i=this.authService.getSupabaseClient(),o=this.entriesSubject.value,s=o.findIndex(u=>u.id===t);if(s===-1)return!1;let a=D(D({},o[s]),e);(e.date||e.time)&&(a.timestamp=this.createTimestamp(a.date,a.time));let c={date:a.date,time:a.time,amount:a.amount,comment:a.comment,timestamp:a.timestamp,updated_at:new Date().toISOString()},{error:l}=await i.from("feeding_entries").update(c).eq("id",t).eq("user_id",r.id);if(l)throw l;return o[s]=a,this.entriesSubject.next([...o]),!0}catch(i){return console.error("Error updating entry:",i),!1}}async deleteEntry(t){let e=this.authService.currentUser();if(!e)return!1;try{let r=this.authService.getSupabaseClient(),{error:i}=await r.from("feeding_entries").delete().eq("id",t).eq("user_id",e.id);if(i)throw i;let o=this.entriesSubject.value,s=o.filter(a=>a.id!==t);return s.length===o.length?!1:(this.entriesSubject.next(s),!0)}catch(r){return console.error("Error deleting entry:",r),!1}}getUniqueDates(){let t=new Set(this.entriesSubject.value.map(e=>e.date));return Array.from(t).sort((e,r)=>r.localeCompare(e))}getStatistics(t,e){let r=this.entriesSubject.value;t&&(r=r.filter(l=>l.date>=t)),e&&(r=r.filter(l=>l.date<=e));let i=r.length,o=r.reduce((l,u)=>l+u.amount,0),s=i>0?o/i:0,a=new Set(r.map(l=>l.date)),c=a.size>0?i/a.size:0;return{totalFeedings:i,totalAmount:o,averageAmount:Math.round(s*10)/10,averageFeedingsPerDay:Math.round(c*10)/10}}generateId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}getTodayDate(){return new Date().toISOString().split("T")[0]}createTimestamp(t,e){return new Date(`${t}T${e}`).getTime()}static \u0275fac=function(e){return new(e||n)(F(Fe))};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})};var Jn=class n{constructor(t){this.authService=t;qe(()=>{this.authService.currentUser()?this.loadSettings():this.settings.set(null)})}settings=N(null);DEFAULT_INTERVAL_HOURS=3;async loadSettings(){let t=this.authService.currentUser();if(t)try{let e=this.authService.getSupabaseClient(),{data:r,error:i}=await e.from("user_settings").select("*").eq("user_id",t.id).single();if(i){if(i.code==="PGRST116"){await this.createDefaultSettings();return}throw i}this.settings.set(r)}catch(e){console.error("Error loading settings:",e)}}async createDefaultSettings(){let t=this.authService.currentUser();if(t)try{let e=this.authService.getSupabaseClient(),r={user_id:t.id,feeding_interval_hours:this.DEFAULT_INTERVAL_HOURS,notifications_enabled:!0},{data:i,error:o}=await e.from("user_settings").insert(r).select().single();if(o)throw o;this.settings.set(i)}catch(e){console.error("Error creating default settings:",e)}}async updateFeedingInterval(t){let e=this.authService.currentUser();if(!e)return!1;try{let r=this.authService.getSupabaseClient(),i=this.settings();if(i?.id){let{data:o,error:s}=await r.from("user_settings").update({feeding_interval_hours:t}).eq("id",i.id).eq("user_id",e.id).select().single();if(s)throw s;this.settings.set(o)}else{let{data:o,error:s}=await r.from("user_settings").insert({user_id:e.id,feeding_interval_hours:t,notifications_enabled:!0}).select().single();if(s)throw s;this.settings.set(o)}return!0}catch(r){return console.error("Error updating feeding interval:",r),!1}}async updateNotificationsEnabled(t){let e=this.authService.currentUser();if(!e)return!1;try{let r=this.authService.getSupabaseClient(),i=this.settings();if(i?.id){let{data:o,error:s}=await r.from("user_settings").update({notifications_enabled:t}).eq("id",i.id).eq("user_id",e.id).select().single();if(s)throw s;this.settings.set(o)}else{let{data:o,error:s}=await r.from("user_settings").insert({user_id:e.id,feeding_interval_hours:this.DEFAULT_INTERVAL_HOURS,notifications_enabled:t}).select().single();if(s)throw s;this.settings.set(o)}return!0}catch(r){return console.error("Error updating notifications enabled:",r),!1}}getFeedingInterval(){let t=this.settings();return t?t.feeding_interval_hours:this.DEFAULT_INTERVAL_HOURS}isFeedingIntervalEnabled(){return this.getFeedingInterval()!==null}getDefaultInterval(){return this.DEFAULT_INTERVAL_HOURS}areNotificationsEnabled(){return this.settings()?.notifications_enabled??!0}static \u0275fac=function(e){return new(e||n)(F(Fe))};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})};var Xn=class n{feedingService=w(ln);settingsService=w(Jn);authService=w(Fe);nextFeedingTimer=null;notificationPermission="default";lastNotificationTime=null;constructor(){"Notification"in window&&(this.notificationPermission=Notification.permission),qe(()=>{let t=this.authService.currentUser(),e=this.settingsService.settings(),r=this.feedingService.getAllEntries();t&&e&&this.scheduleNextNotification()})}async requestPermission(){if(!("Notification"in window))return console.warn("This browser does not support notifications"),!1;if(this.notificationPermission==="granted")return!0;try{let t=await Notification.requestPermission();return this.notificationPermission=t,t==="granted"}catch(t){return console.error("Error requesting notification permission:",t),!1}}isNotificationEnabled(){return"Notification"in window&&this.notificationPermission==="granted"&&this.settingsService.isFeedingIntervalEnabled()&&this.settingsService.areNotificationsEnabled()}scheduleNextNotification(){if(this.nextFeedingTimer&&(clearTimeout(this.nextFeedingTimer),this.nextFeedingTimer=null),!this.isNotificationEnabled())return;let t=this.settingsService.getFeedingInterval();if(t===null)return;let e=this.feedingService.getAllEntries();if(e.length===0)return;let r=e.reduce((c,l)=>{let u=new Date(`${l.date}T${l.time}`).getTime(),d=new Date(`${c.date}T${c.time}`).getTime();return u>d?l:c}),o=new Date(`${r.date}T${r.time}`).getTime()+t*60*60*1e3,s=Date.now(),a=o-s;a>0?(this.nextFeedingTimer=setTimeout(()=>{this.showNotification(o)},a),console.log(`Next feeding notification scheduled in ${Math.round(a/1e3/60)} minutes`)):(this.lastNotificationTime===null||this.lastNotificationTime<o)&&this.showNotification(o)}showNotification(t){if(!this.isNotificationEnabled())return;let e=this.settingsService.getFeedingInterval(),r="\u{1F37C} Feeding Reminder",i=`It's been ${e} hour${e!==1?"s":""} since the last feeding. Time to feed your baby!`;try{let o=new Notification(r,{body:i,icon:"/favicon.ico",badge:"/favicon.ico",tag:"feeding-reminder",requireInteraction:!0});o.onclick=()=>{window.focus(),o.close()},this.lastNotificationTime=t}catch(o){console.error("Error showing notification:",o)}}async testNotification(){if(!await this.requestPermission())return!1;try{let e=new Notification("\u{1F37C} Test Notification",{body:"Notifications are working! You will receive reminders based on your feeding interval.",tag:"test-notification",requireInteraction:!1});return e.onclick=()=>{window.focus(),e.close()},!0}catch(e){return console.error("Error showing test notification:",e),!1}}getTimeUntilNextNotification(){let t=this.settingsService.getFeedingInterval();if(t===null)return null;let e=this.feedingService.getAllEntries();if(e.length===0)return null;let r=e.reduce((c,l)=>{let u=new Date(`${l.date}T${l.time}`).getTime(),d=new Date(`${c.date}T${c.time}`).getTime();return u>d?l:c}),o=new Date(`${r.date}T${r.time}`).getTime()+t*60*60*1e3,s=Date.now();return o-s}ngOnDestroy(){this.nextFeedingTimer&&clearTimeout(this.nextFeedingTimer)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})};var Aw=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,r){this._renderer=e,this._elementRef=r}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(r){return new(r||n)(P(yn),P(vt))};static \u0275dir=ye({type:n})}return n})(),Rw=(()=>{class n extends Aw{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ut(n)))(i||n)}})();static \u0275dir=ye({type:n,features:[yt]})}return n})(),ug=new R("");var oA={provide:ug,useExisting:Pt(()=>tr),multi:!0};function sA(){let n=Mt()?Mt().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var aA=new R(""),tr=(()=>{class n extends Aw{_compositionMode;_composing=!1;constructor(e,r,i){super(e,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!sA())}writeValue(e){let r=e??"";this.setProperty("value",r)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(r){return new(r||n)(P(yn),P(vt),P(aA,8))};static \u0275dir=ye({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&j("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Bn([oA]),yt]})}return n})();function dg(n){return n==null||fg(n)===0}function fg(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Du=new R(""),Nw=new R(""),cA=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,pe=class{static min(t){return Pw(t)}static max(t){return lA(t)}static required(t){return uA(t)}static requiredTrue(t){return dA(t)}static email(t){return fA(t)}static minLength(t){return hA(t)}static maxLength(t){return pA(t)}static pattern(t){return kw(t)}static nullValidator(t){return mu()}static compose(t){return $w(t)}static composeAsync(t){return Hw(t)}};function Pw(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function lA(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function uA(n){return dg(n.value)?{required:!0}:null}function dA(n){return n.value===!0?null:{required:!0}}function fA(n){return dg(n.value)||cA.test(n.value)?null:{email:!0}}function hA(n){return t=>{let e=t.value?.length??fg(t.value);return e===null||e===0?null:e<n?{minlength:{requiredLength:n,actualLength:e}}:null}}function pA(n){return t=>{let e=t.value?.length??fg(t.value);return e!==null&&e>n?{maxlength:{requiredLength:n,actualLength:e}}:null}}function kw(n){if(!n)return mu;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(dg(r.value))return null;let i=r.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}function mu(n){return null}function Fw(n){return n!=null}function Lw(n){return $n(n)?Ce(n):n}function jw(n){let t={};return n.forEach(e=>{t=e!=null?D(D({},t),e):t}),Object.keys(t).length===0?null:t}function Vw(n,t){return t.map(e=>e(n))}function gA(n){return!n.validate}function Uw(n){return n.map(t=>gA(t)?t:e=>t.validate(e))}function $w(n){if(!n)return null;let t=n.filter(Fw);return t.length==0?null:function(e){return jw(Vw(e,t))}}function Bw(n){return n!=null?$w(Uw(n)):null}function Hw(n){if(!n)return null;let t=n.filter(Fw);return t.length==0?null:function(e){let r=Vw(e,t).map(Lw);return ud(r).pipe(Q(jw))}}function zw(n){return n!=null?Hw(Uw(n)):null}function Ew(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Gw(n){return n._rawValidators}function qw(n){return n._rawAsyncValidators}function sg(n){return n?Array.isArray(n)?n:[n]:[]}function vu(n,t){return Array.isArray(n)?n.includes(t):n===t}function Dw(n,t){let e=sg(t);return sg(n).forEach(i=>{vu(e,i)||e.push(i)}),e}function Sw(n,t){return sg(t).filter(e=>!vu(n,e))}var yu=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Bw(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=zw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},so=class extends yu{name;get formDirective(){return null}get path(){return null}},ra=class extends yu{_parent=null;name=null;valueAccessor=null},_u=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var co=(()=>{class n extends _u{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(P(ra,2))};static \u0275dir=ye({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ae("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[yt]})}return n})(),lo=(()=>{class n extends _u{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(P(so,10))};static \u0275dir=ye({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ae("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[yt]})}return n})();var Xs="VALID",pu="INVALID",io="PENDING",ea="DISABLED",er=class{},bu=class extends er{value;source;constructor(t,e){super(),this.value=t,this.source=e}},ta=class extends er{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},na=class extends er{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},oo=class extends er{status;source;constructor(t,e){super(),this.status=t,this.source=e}},ag=class extends er{source;constructor(t){super(),this.source=t}},ia=class extends er{source;constructor(t){super(),this.source=t}};function hg(n){return(Su(n)?n.validators:n)||null}function mA(n){return Array.isArray(n)?Bw(n):n||null}function pg(n,t){return(Su(t)?t.asyncValidators:n)||null}function vA(n){return Array.isArray(n)?zw(n):n||null}function Su(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Ww(n,t,e){let r=n.controls;if(!(t?Object.keys(r):r).length)throw new I(1e3,"");if(!r[e])throw new I(1001,"")}function Kw(n,t,e){n._forEachChild((r,i)=>{if(e[i]===void 0)throw new I(1002,"")})}var ao=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return xe(this.statusReactive)}set status(t){xe(()=>this.statusReactive.set(t))}_status=Ve(()=>this.statusReactive());statusReactive=N(void 0);get valid(){return this.status===Xs}get invalid(){return this.status===pu}get pending(){return this.status==io}get disabled(){return this.status===ea}get enabled(){return this.status!==ea}errors;get pristine(){return xe(this.pristineReactive)}set pristine(t){xe(()=>this.pristineReactive.set(t))}_pristine=Ve(()=>this.pristineReactive());pristineReactive=N(!0);get dirty(){return!this.pristine}get touched(){return xe(this.touchedReactive)}set touched(t){xe(()=>this.touchedReactive.set(t))}_touched=Ve(()=>this.touchedReactive());touchedReactive=N(!1);get untouched(){return!this.touched}_events=new me;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Dw(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Dw(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Sw(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Sw(t,this._rawAsyncValidators))}hasValidator(t){return vu(this._rawValidators,t)}hasAsyncValidator(t){return vu(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(W(D({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new na(!0,r))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),e&&t.emitEvent!==!1&&this._events.next(new na(!1,r))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(W(D({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new ta(!1,r))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),e&&t.emitEvent!==!1&&this._events.next(new ta(!0,r))}markAsPending(t={}){this.status=io;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new oo(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(W(D({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=ea,this.errors=null,this._forEachChild(i=>{i.disable(W(D({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new bu(this.value,r)),this._events.next(new oo(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(W(D({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Xs,this._forEachChild(r=>{r.enable(W(D({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(W(D({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xs||this.status===io)&&this._runAsyncValidator(r,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new bu(this.value,e)),this._events.next(new oo(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(W(D({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ea:Xs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=io,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:t!==!1};let r=Lw(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(t,e){let r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new oo(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,r)}_initObservables(){this.valueChanges=new le,this.statusChanges=new le}_calculateStatus(){return this._allControlsDisabled()?ea:this.errors?pu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(io)?io:this._anyControlsHaveStatus(pu)?pu:Xs}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),i&&this._events.next(new ta(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new na(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Su(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=mA(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=vA(this._rawAsyncValidators)}},wu=class extends ao{constructor(t,e,r){super(hg(e),pg(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){Kw(this,!0,t),Object.keys(t).forEach(r=>{Ww(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,W(D({},e),{onlySelf:!0}))}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new ia(this))}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>r._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,r,i)=>((r.enabled||this.disabled)&&(e[i]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,o)=>{r=e(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var cg=class extends wu{};var gg=new R("",{factory:()=>Iu}),Iu="always";function yA(n,t){return[...t.path,n]}function Iw(n,t,e=Iu){mg(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),bA(n,t),CA(n,t),wA(n,t),_A(n,t)}function xw(n,t,e=!0){let r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),Eu(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Cu(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function _A(n,t){if(t.valueAccessor.setDisabledState){let e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function mg(n,t){let e=Gw(n);t.validator!==null?n.setValidators(Ew(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let r=qw(n);t.asyncValidator!==null?n.setAsyncValidators(Ew(r,t.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Cu(t._rawValidators,i),Cu(t._rawAsyncValidators,i)}function Eu(n,t){let e=!1;if(n!==null){if(t.validator!==null){let i=Gw(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.validator);o.length!==i.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let i=qw(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(e=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Cu(t._rawValidators,r),Cu(t._rawAsyncValidators,r),e}function bA(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Yw(n,t)})}function wA(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Yw(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function Yw(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function CA(n,t){let e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function EA(n,t){n==null,mg(n,t)}function DA(n,t){return Eu(n,t)}function SA(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function IA(n){return Object.getPrototypeOf(n.constructor)===Rw}function xA(n,t){n._syncPendingControls(),t.forEach(e=>{let r=e.control;r.updateOn==="submit"&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function MA(n,t){if(!t)return null;Array.isArray(t);let e,r,i;return t.forEach(o=>{o.constructor===tr?e=o:IA(o)?r=o:i=o}),i||r||e||null}function TA(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Mw(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function Tw(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var gu=class extends ao{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,r){super(hg(e),pg(r,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Su(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Tw(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),e.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,e?.emitEvent!==!1&&this._events.next(new ia(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Mw(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Mw(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Tw(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var OA=n=>n instanceof gu;var uo=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ye({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),AA={provide:ug,useExisting:Pt(()=>vg),multi:!0},vg=(()=>{class n extends Rw{writeValue(e){let r=e??"";this.setProperty("value",r)}registerOnChange(e){this.onChange=r=>{e(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ut(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&j("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Bn([AA]),yt]})}return n})();var lg=class extends ao{constructor(t,e,r){super(hg(e),pg(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){Array.isArray(t)?t.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){Kw(this,!1,t),t.forEach((r,i)=>{Ww(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],W(D({},e),{onlySelf:!0}))}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new ia(this))}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,r)=>r._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};var RA=(()=>{class n extends so{callSetDisabledState;get submitted(){return xe(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=Ve(()=>this._submittedReactive());_submittedReactive=N(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(e,r,i){super(),this.callSetDisabledState=i,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this.onChanges(e)}ngOnDestroy(){this.onDestroy()}onChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(Eu(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(e){let r=this.form.get(e.path);return Iw(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){xw(e.control||null,e,!1),TA(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}getFormArray(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}updateModel(e,r){this.form.get(e.path).setValue(r)}onReset(){this.resetForm()}resetForm(e=void 0,r={}){this.form.reset(e,r),this._submittedReactive.set(!1)}onSubmit(e){return this.submitted=!0,xA(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new ag(this.control)),e?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(e=>{let r=e.control,i=this.form.get(e.path);r!==i&&(xw(r||null,e),OA(i)&&(Iw(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let r=this.form.get(e.path);EA(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let r=this.form.get(e.path);r&&DA(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){mg(this.form,this),this._oldForm&&Eu(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(P(Du,10),P(Nw,10),P(gg,8))};static \u0275dir=ye({type:n,features:[yt,mt]})}return n})();var Zw=new R("");var NA={provide:ra,useExisting:Pt(()=>Jr)},Jr=(()=>{class n extends ra{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new le;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=MA(this,o)}ngOnChanges(e){this._added||this._setUpControl(),SA(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return yA(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(P(so,13),P(Du,10),P(Nw,10),P(ug,10),P(Zw,8))};static \u0275dir=ye({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Bn([NA]),yt,mt]})}return n})();var PA={provide:so,useExisting:Pt(()=>Xr)},Xr=(()=>{class n extends RA{form=null;ngSubmit=new le;get control(){return this.form}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ut(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&j("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Bn([PA]),yt]})}return n})();function kA(n){return typeof n=="number"?n:parseFloat(n)}var Qw=(()=>{class n{_validator=mu;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let r=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):mu,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ye({type:n,features:[mt]})}return n})();var FA={provide:Du,useExisting:Pt(()=>yg),multi:!0},yg=(()=>{class n extends Qw{min;inputName="min";normalizeInput=e=>kA(e);createValidator=e=>Pw(e);static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ut(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Tr("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[Bn([FA]),yt]})}return n})();var LA={provide:Du,useExisting:Pt(()=>_g),multi:!0},_g=(()=>{class n extends Qw{pattern;inputName="pattern";normalizeInput=e=>e;createValidator=e=>kw(e);static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ut(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Tr("pattern",i._enabled?i.pattern:null)},inputs:{pattern:"pattern"},standalone:!1,features:[Bn([LA]),yt]})}return n})();var Jw=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=wt({})}return n})();function Ow(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var fo=(()=>{class n{useNonNullable=!1;get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,r=null){let i=this._reduceControls(e),o={};return Ow(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new wu(i,o)}record(e,r=null){let i=this._reduceControls(e);return new cg(i,r)}control(e,r,i){let o={};return this.useNonNullable?(Ow(r)?o=r:(o.validators=r,o.asyncValidators=i),new gu(e,W(D({},o),{nonNullable:!0}))):new gu(e,r,i)}array(e,r,i){let o=e.map(s=>this._createControl(s));return new lg(o,r,i)}_reduceControls(e){let r={};return Object.keys(e).forEach(i=>{r[i]=this._createControl(e[i])}),r}_createControl(e){if(e instanceof gu)return e;if(e instanceof ao)return e;if(Array.isArray(e)){let r=e[0],i=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(r,i,o)}else return this.control(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Xw=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:gg,useValue:e.callSetDisabledState??Iu}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=wt({imports:[Jw]})}return n})(),ho=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Zw,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:gg,useValue:e.callSetDisabledState??Iu}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=$t({type:n});static \u0275inj=wt({imports:[Jw]})}return n})();function jA(n,t){if(n&1){let e=_e();p(0,"button",19),j("click",function(){G(e);let i=x();return q(i.onCancel())}),b(1,"i",20),p(2,"span"),v(3,"Cancel"),g()()}}var po=class n{constructor(t){this.fb=t}entry;defaultDate;submitForm=new le;cancel=new le;feedingForm;isEditMode=!1;ngOnInit(){this.initForm()}ngOnChanges(t){t.entry&&this.feedingForm&&(this.isEditMode=!!this.entry,this.initForm())}initForm(){this.isEditMode=!!this.entry;let t=new Date,e=this.defaultDate||t.toISOString().split("T")[0],r=this.formatTime(t);this.feedingForm?this.feedingForm.patchValue({date:this.entry?.date||e,time:this.entry?.time||r,amount:this.entry?.amount||"",comment:this.entry?.comment||""}):this.feedingForm=this.fb.group({date:[this.entry?.date||e,pe.required],time:[this.entry?.time||r,pe.required],amount:[this.entry?.amount||"",[pe.required,pe.min(1)]],comment:[this.entry?.comment||""]})}formatTime(t){let e=t.getHours().toString().padStart(2,"0"),r=t.getMinutes().toString().padStart(2,"0");return`${e}:${r}`}onSubmit(){this.feedingForm.valid&&(this.submitForm.emit(this.feedingForm.value),this.isEditMode||this.feedingForm.reset({date:this.feedingForm.value.date,time:this.formatTime(new Date),amount:"",comment:""}))}onCancel(){this.cancel.emit()}onlyNumbers(t){let e=t.which?t.which:t.keyCode;return e<48||e>57?(t.preventDefault(),!1):!0}static \u0275fac=function(e){return new(e||n)(P(fo))};static \u0275cmp=Ee({type:n,selectors:[["app-feeding-form"]],inputs:{entry:"entry",defaultDate:"defaultDate"},outputs:{submitForm:"submitForm",cancel:"cancel"},features:[mt],decls:33,vars:5,consts:[[1,"feeding-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","date"],[1,"fas","fa-calendar"],["type","date","id","date","formControlName","date",1,"form-control"],["for","time"],[1,"fas","fa-clock"],["type","time","id","time","formControlName","time",1,"form-control"],["for","amount"],[1,"fas","fa-bottle-droplet"],[1,"unit"],["type","number","id","amount","formControlName","amount","placeholder","120","min","1","step","1","pattern","[0-9]*","inputmode","numeric",1,"form-control",3,"keypress"],["for","comment"],[1,"fas","fa-message"],["id","comment","formControlName","comment","rows","2","placeholder","Any notes...",1,"form-control"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"fas",3,"ngClass"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times"]],template:function(e,r){e&1&&(p(0,"form",0),j("ngSubmit",function(){return r.onSubmit()}),p(1,"div",1)(2,"label",2),b(3,"i",3),p(4,"span"),v(5,"Date"),g()(),b(6,"input",4),g(),p(7,"div",1)(8,"label",5),b(9,"i",6),p(10,"span"),v(11,"Time"),g()(),b(12,"input",7),g(),p(13,"div",1)(14,"label",8),b(15,"i",9),p(16,"span"),v(17,"Amount "),p(18,"span",10),v(19,"(ml)"),g()()(),p(20,"input",11),j("keypress",function(o){return r.onlyNumbers(o)}),g()(),p(21,"div",1)(22,"label",12),b(23,"i",13),p(24,"span"),v(25,"Comment (optional)"),g()(),b(26,"textarea",14),g(),p(27,"div",15)(28,"button",16),b(29,"i",17),p(30,"span"),v(31),g()(),We(32,jA,4,0,"button",18),g()()),e&2&&(L("formGroup",r.feedingForm),_(28),L("disabled",!r.feedingForm.valid),_(),L("ngClass",r.isEditMode?"fa-check":"fa-plus"),_(2),J("",r.isEditMode?"Update":"Add"," Feeding"),_(),L("ngIf",r.isEditMode))},dependencies:[Ke,Or,Bt,ho,uo,tr,vg,co,lo,_g,yg,Xr,Jr],styles:[".feeding-form[_ngcontent-%COMP%]{background:radial-gradient(circle at top left,#d6bdff26,#191a27fa);padding:1.5rem;border-radius:20px;box-shadow:0 12px 32px #00000080,0 0 0 1px #d6bdff4d;border:2px solid rgba(214,189,255,.25);transition:all .3s cubic-bezier(.2,0,.2,1)}.feeding-form[_ngcontent-%COMP%]:hover{border-color:#d6bdff66;box-shadow:0 16px 40px #0009,0 0 0 1px #d6bdff66,0 0 40px #d6bdff26;transform:translateY(-2px)}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;margin-bottom:.625rem;color:var(--accent-beige);font-weight:700;font-size:.95rem;text-transform:uppercase;letter-spacing:.5px}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--accent-lavender);filter:drop-shadow(0 2px 4px rgba(214,189,255,.3))}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{text-transform:none}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;font-size:1rem;font-weight:500;color:#fff;background:linear-gradient(135deg,#2a2d4199,#23253799);border:2px solid rgba(214,189,255,.15);border-radius:14px;transition:all .25s cubic-bezier(.2,0,.2,1);box-shadow:inset 0 2px 6px #0000004d}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--text-light);opacity:.6}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:hover{border-color:#d6bdff4d;background:linear-gradient(135deg,#2d3046b3,#26283ab3)}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-lavender);background:linear-gradient(135deg,#32354bcc,#2a2d3fcc);box-shadow:inset 0 2px 6px #0000004d,0 0 0 3px #d6bdff33,0 4px 16px #d6bdff4d;transform:translateY(-1px)}.feeding-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-top:1.5rem}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1;border-radius:12px;padding:.875rem 1.5rem;font-size:1rem;font-weight:600}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}@media(min-width:768px){.feeding-form[_ngcontent-%COMP%]{padding:1.5rem}.form-actions[_ngcontent-%COMP%]{gap:1rem}}"]})};function VA(n,t){n&1&&(p(0,"div",3),b(1,"i",4),p(2,"p"),v(3,"No feeding entries yet"),g(),p(4,"small"),v(5,"Add your first feeding above to start tracking."),g()())}function UA(n,t){if(n&1&&(p(0,"span",24),v(1),g()),n&2){let e=x().$implicit,r=x();_(),De(r.formatDate(e.date))}}function $A(n,t){if(n&1&&(p(0,"div",25),b(1,"i",26),p(2,"p"),v(3),g()()),n&2){let e=x().$implicit;_(3),De(e.comment)}}function BA(n,t){if(n&1){let e=_e();p(0,"article",5),j("click",function(){let i=G(e).$implicit,o=x();return q(o.onEntryClick(i.id))}),p(1,"div",6)(2,"div",7)(3,"div",8),b(4,"i",9),p(5,"span",10),v(6),g()()(),p(7,"div",11),We(8,UA,2,1,"span",12),p(9,"div",13),b(10,"i",14),p(11,"div",15)(12,"span",16),v(13),g(),p(14,"span",17),v(15,"ml"),g()()()(),p(16,"div",18)(17,"button",19),j("click",function(i){let o=G(e).$implicit;return x().onEdit(o),q(i.stopPropagation())}),b(18,"i",20),g(),p(19,"button",21),j("click",function(i){let o=G(e).$implicit;return x().onDelete(o.id),q(i.stopPropagation())}),b(20,"i",22),g()()(),We(21,$A,4,1,"div",23),g()}if(n&2){let e=t.$implicit,r=x();ae("is-active",r.activeEntryId===e.id),_(6),De(e.time),_(2),L("ngIf",r.showDate),_(5),De(e.amount),_(8),L("ngIf",e.comment)}}var go=class n{entries=[];showDate=!1;editEntry=new le;deleteEntry=new le;activeEntryId=null;onEntryClick(t){this.activeEntryId=this.activeEntryId===t?null:t}onEdit(t){this.activeEntryId=null,this.editEntry.emit(t)}onDelete(t){confirm("Are you sure you want to delete this entry?")&&(this.activeEntryId=null,this.deleteEntry.emit(t))}formatDate(t){let e=new Date(t+"T00:00:00"),r=String(e.getDate()).padStart(2,"0"),i=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear();return`${r}.${i}.${o}`}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=Ee({type:n,selectors:[["app-feeding-list"]],inputs:{entries:"entries",showDate:"showDate"},outputs:{editEntry:"editEntry",deleteEntry:"deleteEntry"},decls:3,vars:2,consts:[[1,"feeding-list"],["class","empty-state",4,"ngIf"],["class","feeding-entry",3,"is-active","click",4,"ngFor","ngForOf"],[1,"empty-state"],[1,"fas","fa-baby-carriage"],[1,"feeding-entry",3,"click"],[1,"entry-row"],[1,"entry-time"],[1,"time-chip"],["aria-hidden","true",1,"fas","fa-clock"],[1,"time"],[1,"entry-meta"],["class","date",4,"ngIf"],[1,"entry-amount"],["aria-hidden","true",1,"fas","fa-bottle-droplet"],[1,"amount-text"],[1,"amount"],[1,"unit"],[1,"entry-actions"],[1,"btn-icon","btn-edit",3,"click"],[1,"fas","fa-pen"],[1,"btn-icon","btn-delete",3,"click"],[1,"fas","fa-trash-alt"],["class","entry-comment",4,"ngIf"],[1,"date"],[1,"entry-comment"],["aria-hidden","true",1,"fas","fa-comment"]],template:function(e,r){e&1&&(p(0,"div",0),We(1,VA,6,0,"div",1)(2,BA,22,6,"article",2),g()),e&2&&(_(),L("ngIf",r.entries.length===0),_(),L("ngForOf",r.entries))},dependencies:[Ke,Ri,Bt],styles:[".feeding-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.empty-state[_ngcontent-%COMP%]{border-radius:16px;padding:1.5rem 1.25rem;background:var(--bg-card);border:1px dashed var(--border-color);text-align:center;color:var(--text-light);display:flex;flex-direction:column;align-items:center;gap:.35rem}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem;color:var(--primary-color);margin-bottom:.25rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:600;color:var(--text-dark)}.empty-state[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.8rem;opacity:.8}.feeding-entry[_ngcontent-%COMP%]{border-radius:16px;padding:.9rem 1rem;display:flex;flex-direction:column;gap:.5rem;cursor:pointer;transition:box-shadow .2s ease,border-color .2s ease,transform .12s ease,background .18s ease}.feeding-entry[_ngcontent-%COMP%]:not(.is-active){background:linear-gradient(135deg,#222434,#1f2130);border:1px solid rgba(249,215,196,.08);box-shadow:0 8px 20px #00000059}.feeding-entry[_ngcontent-%COMP%]:not(.is-active):hover{border-color:#f9d7c459;box-shadow:0 10px 24px #00000073;transform:translateY(-1px)}.feeding-entry.is-active[_ngcontent-%COMP%]{background:radial-gradient(circle at top right,#d6bdff38,#191a27fa);border:1px solid rgba(249,215,196,.85);box-shadow:0 14px 32px #0000008c;transform:translateY(-2px)}.entry-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.entry-time[_ngcontent-%COMP%]{display:flex;align-items:center}.time-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.4rem;padding:.4rem .9rem;border-radius:999px;background:var(--bg-dark)}.time-chip[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem;color:var(--accent-beige, #f6e0cf);flex-shrink:0}.time-chip[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#fff;line-height:1}.entry-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-left:.75rem;flex:1;min-width:0}.entry-meta[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-light);padding:.25rem .5rem;border-radius:999px;background:#ffffff05;border:1px solid rgba(255,255,255,.04);white-space:nowrap}.entry-amount[_ngcontent-%COMP%]{margin-left:auto;display:inline-flex;align-items:center;gap:.4rem;padding:.45rem .9rem;border-radius:999px;background:var(--bg-dark);flex-shrink:0}.entry-amount[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem;color:var(--accent-beige, #f6e0cf);margin-top:.05rem}.amount-text[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:.25rem}.amount-text[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:#fff;line-height:1}.amount-text[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-light)}.entry-actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:.35rem;overflow:hidden;max-width:0;opacity:0;pointer-events:none;transform:translate(4px);transition:max-width .18s ease,opacity .18s ease,transform .18s ease}.feeding-entry.is-active[_ngcontent-%COMP%]   .entry-actions[_ngcontent-%COMP%]{max-width:96px;opacity:1;pointer-events:auto;transform:translate(0)}.btn-icon[_ngcontent-%COMP%]{width:2rem;height:2rem;border-radius:999px;border:none;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;transition:transform .15s ease,box-shadow .15s ease,filter .15s ease;flex-shrink:0;box-shadow:0 4px 10px #00000059}.btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.85rem}.btn-icon[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 6px 14px #0006}.btn-icon[_ngcontent-%COMP%]:active{transform:scale(.94);filter:brightness(.9)}.btn-edit[_ngcontent-%COMP%]{background-color:var(--accent-lavender);color:var(--bg-dark)}.btn-delete[_ngcontent-%COMP%]{background-color:var(--danger-color);color:var(--bg-dark)}.entry-comment[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding:.55rem .65rem;border-radius:10px;background:var(--bg-medium);border:1px solid var(--border-color)}.entry-comment[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem;color:var(--primary-color);margin-top:.2rem;flex-shrink:0}.entry-comment[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.85rem;color:var(--text-dark);line-height:1.4}@media(max-width:599px){.feeding-entry[_ngcontent-%COMP%]{padding:.8rem .85rem}.entry-row[_ngcontent-%COMP%]{flex-wrap:wrap;row-gap:.5rem}.entry-meta[_ngcontent-%COMP%]{margin-left:.5rem}}@media(min-width:768px){.feeding-entry[_ngcontent-%COMP%]{padding:1rem 1.1rem;gap:.6rem}.time-chip[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:1.25rem}.amount-text[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:1.4rem}.btn-icon[_ngcontent-%COMP%]{width:2.25rem;height:2.25rem}.btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}}"]})};function HA(n,t){if(n&1&&(p(0,"div",9),b(1,"i",15),p(2,"span",6),v(3),g(),p(4,"span",7),v(5),g()()),n&2){let e=x();L("ngClass",e.feedingStatusClass()),_(),L("ngClass",e.feedingStatusIcon()),_(2),De(e.feedingStatusLabel()),_(2),De(e.nextFeedCountdown())}}function zA(n,t){if(n&1){let e=_e();p(0,"button",16),j("click",function(){G(e);let i=x();return q(i.openFormModal())}),b(1,"i",17),g()}}function GA(n,t){if(n&1){let e=_e();p(0,"div",18),j("click",function(){G(e);let i=x();return q(i.closeFormModal())}),p(1,"div",19),j("click",function(i){return G(e),q(i.stopPropagation())}),p(2,"div",20)(3,"h3"),b(4,"i",15),v(5),g(),p(6,"button",21),j("click",function(){G(e);let i=x();return q(i.closeFormModal())}),b(7,"i",22),g()(),p(8,"div",23)(9,"app-feeding-form",24),j("submitForm",function(i){G(e);let o=x();return q(o.onSubmit(i))})("cancel",function(){G(e);let i=x();return q(i.closeFormModal())}),g()()()()}if(n&2){let e=x();_(4),L("ngClass",e.editingEntry()?"fa-pen":"fa-plus-circle"),_(),J(" ",e.editingEntry()?"Edit":"Add New"," Feeding "),_(4),L("entry",e.editingEntry())("defaultDate",e.todayDate)}}var xu=class n{feedingService=w(ln);notificationService=w(Xn);settingsService=w(Jn);destroyRef=w(st);todayEntries=N([]);editingEntry=N(void 0);todayDate=new Date().toISOString().split("T")[0];nextFeedCountdown=N(null);showFormModal=N(!1);totalAmount=Ve(()=>this.todayEntries().reduce((t,e)=>t+e.amount,0));feedingStatusLabel=Ve(()=>{if(!this.nextFeedCountdown())return null;let e=this.notificationService.getTimeUntilNextNotification();if(e===null)return null;let r=Math.floor(e/1e3/60);return r>=-10&&r<=10?"Status":r<-10?"Feeding overdue":"Next feed in"});feedingStatusIcon=Ve(()=>{if(!this.nextFeedCountdown())return"fa-clock";let e=this.notificationService.getTimeUntilNextNotification();if(e===null)return"fa-clock";let r=Math.floor(e/1e3/60);return r>=-10&&r<=10?"fa-bell":r<-10?"fa-exclamation-triangle":"fa-clock"});feedingStatusClass=Ve(()=>{if(!this.nextFeedCountdown())return"";let e=this.notificationService.getTimeUntilNextNotification();if(e===null)return"";let r=Math.floor(e/1e3/60);return r>=-10&&r<=10?"feeding-time":r<-10?"overdue":""});constructor(){qe(()=>{this.todayEntries(),this.settingsService.settings(),this.updateCountdown()})}ngOnInit(){this.feedingService.entries$.pipe(yp(this.destroyRef)).subscribe(()=>{this.loadTodayEntries()}),this.loadTodayEntries(),dd(6e4).pipe(yp(this.destroyRef)).subscribe(()=>{this.updateCountdown()})}loadTodayEntries(){this.todayEntries.set(this.feedingService.getTodayEntries())}openFormModal(){this.showFormModal.set(!0)}closeFormModal(){this.showFormModal.set(!1),this.editingEntry.set(void 0)}async onSubmit(t){let e=this.editingEntry();e?await this.feedingService.updateEntry(e.id,t):await this.feedingService.createEntry(t),this.editingEntry.set(void 0),this.closeFormModal()}onEdit(t){this.editingEntry.set(t),this.openFormModal()}onCancelEdit(){this.closeFormModal()}async onDelete(t){await this.feedingService.deleteEntry(t)}updateCountdown(){let t=this.notificationService.getTimeUntilNextNotification();if(t===null||!this.settingsService.isFeedingIntervalEnabled()){this.nextFeedCountdown.set(null);return}let e=Math.floor(t/1e3/60);if(e>=-10&&e<=10){this.nextFeedCountdown.set("FEEDING TIME");return}if(e<-10){let o=Math.abs(e),s=Math.floor(o/60),a=o%60;s>0?this.nextFeedCountdown.set(`${s}h ${a}m`):this.nextFeedCountdown.set(`${a}m`);return}let r=Math.floor(e/60),i=e%60;r>0?this.nextFeedCountdown.set(`${r}h ${i}m`):this.nextFeedCountdown.set(`${i}m`)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=Ee({type:n,selectors:[["app-today"]],decls:26,vars:6,consts:[[1,"page-container"],[1,"page-header"],[1,"fas","fa-sun"],[1,"today-stats"],[1,"stat"],[1,"fas","fa-bottle-droplet"],[1,"stat-label"],[1,"stat-value"],[1,"fas","fa-list-check"],[1,"stat","next-feed-stat",3,"ngClass"],["class","fab",3,"click",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"list-section"],[1,"fas","fa-clock"],[3,"editEntry","deleteEntry","entries"],[1,"fas",3,"ngClass"],[1,"fab",3,"click"],[1,"fas","fa-plus"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[3,"submitForm","cancel","entry","defaultDate"]],template:function(e,r){e&1&&(p(0,"div",0)(1,"div",1)(2,"h2"),b(3,"i",2),v(4," Today's Feedings"),g(),p(5,"div",3)(6,"div",4),b(7,"i",5),p(8,"span",6),v(9,"Total"),g(),p(10,"span",7),v(11),g()(),p(12,"div",4),b(13,"i",8),p(14,"span",6),v(15,"Count"),g(),p(16,"span",7),v(17),g()(),ue(18,HA,6,4,"div",9),g()(),We(19,zA,2,0,"button",10)(20,GA,10,4,"div",11),p(21,"div",12)(22,"h3"),b(23,"i",13),v(24," Today's Entries"),g(),p(25,"app-feeding-list",14),j("editEntry",function(o){return r.onEdit(o)})("deleteEntry",function(o){return r.onDelete(o)}),g()()()),e&2&&(_(11),J("",r.totalAmount()," ml"),_(6),De(r.todayEntries().length),_(),de(r.nextFeedCountdown()?18:-1),_(),L("ngIf",!r.showFormModal()),_(),L("ngIf",r.showFormModal()),_(5),L("entries",r.todayEntries()))},dependencies:[Ke,Or,Bt,po,go],styles:[".today-stats[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-top:1rem}.stat[_ngcontent-%COMP%]{flex:1;background:linear-gradient(135deg,#222434,#1f2130);padding:1rem;border-radius:16px;box-shadow:var(--shadow);text-align:center;border:1px solid var(--border-subtle);display:flex;flex-direction:column;align-items:center;gap:.5rem;transition:transform .15s ease,box-shadow .15s ease,border-color .15s ease}.stat[_ngcontent-%COMP%]:hover{border-color:var(--border-medium);transform:translateY(-1px);box-shadow:var(--shadow-lg)}.stat[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.4rem;color:var(--accent-beige)}.stat-label[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:var(--text-light);text-transform:uppercase;letter-spacing:.5px;font-weight:600}.stat-value[_ngcontent-%COMP%]{display:block;font-size:1.5rem;font-weight:700;color:var(--accent-beige);line-height:1}.stat.feeding-time[_ngcontent-%COMP%]{border-color:#4caf5080}.stat.feeding-time[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#4caf50;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.stat.feeding-time[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#4caf50}.stat.overdue[_ngcontent-%COMP%]{border-color:#f4433680}.stat.overdue[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .stat.overdue[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#f44336}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.6}}.list-section[_ngcontent-%COMP%]{margin-top:1.5rem;padding-bottom:67px}.list-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;color:var(--text-dark);font-size:1.15rem}.fab[_ngcontent-%COMP%]{position:fixed;bottom:calc(70px + env(safe-area-inset-bottom));right:1.5rem;width:64px;height:64px;border-radius:50%;background:linear-gradient(135deg,var(--accent-lavender),var(--accent-beige));border:none;box-shadow:0 8px 24px #d6bdff66,0 4px 12px #00000080;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s cubic-bezier(.2,0,.2,1);z-index:100}.fab[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#fff;filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.fab[_ngcontent-%COMP%]:hover{transform:scale(1.1) translateY(-2px);box-shadow:0 12px 32px #d6bdff80,0 6px 16px #0009}.fab[_ngcontent-%COMP%]:active{transform:scale(.95)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:max(1rem,env(safe-area-inset-top)) max(1rem,env(safe-area-inset-right)) calc(80px + env(safe-area-inset-bottom)) max(1rem,env(safe-area-inset-left));animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.modal-content[_ngcontent-%COMP%]{background:radial-gradient(circle at top left,#d6bdff26,#191a27fa);border-radius:20px;border:2px solid rgba(214,189,255,.3);box-shadow:0 24px 48px #000000b3,0 0 0 1px #d6bdff66;max-width:500px;width:100%;max-height:100%;overflow:hidden;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.2,0,.2,1)}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1.5rem 1.5rem 1.25rem;background:linear-gradient(135deg,#d6bdff26,#b8d4c81a);border-bottom:2px solid rgba(214,189,255,.2)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.3rem;font-weight:700;letter-spacing:-.5px;text-shadow:0 2px 4px rgba(0,0,0,.3);display:flex;align-items:center;gap:.75rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--accent-lavender);filter:drop-shadow(0 2px 8px rgba(214,189,255,.4))}.btn-close[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;border:2px solid rgba(214,189,255,.2);background:#22243499;color:var(--text-light);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.btn-close[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.btn-close[_ngcontent-%COMP%]:hover{background:#d6bdff33;border-color:#d6bdff66;color:#fff;transform:rotate(90deg)}.btn-close[_ngcontent-%COMP%]:active{transform:rotate(90deg) scale(.95)}.modal-body[_ngcontent-%COMP%]{padding:1.5rem;overflow-y:auto}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media(min-width:768px){.today-stats[_ngcontent-%COMP%]{gap:1rem}.stat[_ngcontent-%COMP%]{padding:1.25rem}.stat[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.6rem}.stat-value[_ngcontent-%COMP%]{font-size:1.75rem}.list-section[_ngcontent-%COMP%]{margin-top:2rem;padding-bottom:120px}.fab[_ngcontent-%COMP%]{width:72px;height:72px;bottom:calc(80px + env(safe-area-inset-bottom));right:2rem}.fab[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem}.modal-content[_ngcontent-%COMP%]{max-width:600px}.modal-header[_ngcontent-%COMP%]{padding:1.75rem 1.75rem 1.5rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem}.modal-body[_ngcontent-%COMP%]{padding:1.75rem}}"]})};function qA(n,t){n&1&&(p(0,"div",7),b(1,"i",8),p(2,"p"),v(3,"No feeding entries yet."),g(),p(4,"small"),v(5,"Start tracking on the Today page!"),g()())}function WA(n,t){if(n&1){let e=_e();p(0,"div",9)(1,"h3"),b(2,"i",10),v(3," Edit Feeding"),g(),p(4,"app-feeding-form",11),j("submitForm",function(i){G(e);let o=x();return q(o.onSubmit(i))})("cancel",function(){G(e);let i=x();return q(i.onCancelEdit())}),g()()}if(n&2){let e=x();_(4),L("entry",e.editingEntry())}}function KA(n,t){if(n&1){let e=_e();p(0,"div",12)(1,"div",13)(2,"div",14),b(3,"i",15),p(4,"h3"),v(5),g()(),p(6,"div",16)(7,"span",17),v(8),g(),p(9,"div",18)(10,"span",19),b(11,"i",20),v(12),g(),p(13,"span",21),b(14,"i",22),v(15),g()()()(),p(16,"app-feeding-list",23),j("editEntry",function(i){G(e);let o=x();return q(o.onEdit(i))})("deleteEntry",function(i){G(e);let o=x();return q(o.onDelete(i))}),g()()}if(n&2){let e=t.$implicit,r=x();_(5),De(r.formatDate(e.date)),_(3),De(r.formatDateBadge(e.date)),_(4),J(" ",e.totalFeedings," "),_(3),J(" ",e.totalMilk," ml "),_(),L("entries",e.entries)}}var Mu=class n{constructor(t){this.feedingService=t;qe(()=>{this.feedingService.entries$.subscribe(()=>{this.loadEntries()})})}dateGroups=N([]);editingEntry=N(void 0);ngOnInit(){this.loadEntries()}loadEntries(){let t=this.feedingService.getUniqueDates();this.dateGroups.set(t.map(e=>{let r=this.feedingService.getEntriesByDate(e),i=r.reduce((o,s)=>o+s.amount,0);return{date:e,entries:r,totalFeedings:r.length,totalMilk:i}}))}onSubmit(t){let e=this.editingEntry();e?this.feedingService.updateEntry(e.id,t):this.feedingService.createEntry(t),this.editingEntry.set(void 0)}onEdit(t){this.editingEntry.set(t)}onCancelEdit(){this.editingEntry.set(void 0)}onDelete(t){this.feedingService.deleteEntry(t)}formatDate(t){let e=new Date(t+"T00:00:00"),r=new Date;r.setHours(0,0,0,0);let i=new Date(r);return i.setDate(i.getDate()-1),e.setHours(0,0,0,0),e.getTime()===r.getTime()?"Today":e.getTime()===i.getTime()?"Yesterday":e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}formatDateBadge(t){let e=new Date(t+"T00:00:00"),r=String(e.getDate()).padStart(2,"0"),i=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear();return`${r}.${i}.${o}`}static \u0275fac=function(e){return new(e||n)(P(ln))};static \u0275cmp=Ee({type:n,selectors:[["app-log"]],decls:9,vars:3,consts:[[1,"page-container"],[1,"page-header"],[1,"fas","fa-calendar-days"],["class","empty-state",4,"ngIf"],["class","form-section",4,"ngIf"],[1,"log-list"],["class","date-group",4,"ngFor","ngForOf"],[1,"empty-state"],[1,"fas","fa-calendar-xmark"],[1,"form-section"],[1,"fas","fa-pen"],[3,"submitForm","cancel","entry"],[1,"date-group"],[1,"date-header"],[1,"date-header-row"],[1,"fas","fa-calendar"],[1,"date-header-row","date-header-bottom"],[1,"date-badge"],[1,"date-header-stats"],["title","Total feedings",1,"stat-badge"],[1,"fas","fa-hashtag"],["title","Total milk (ml)",1,"stat-badge"],[1,"fas","fa-bottle-droplet"],[3,"editEntry","deleteEntry","entries"]],template:function(e,r){e&1&&(p(0,"div",0)(1,"div",1)(2,"h2"),b(3,"i",2),v(4," Feeding Log"),g()(),We(5,qA,6,0,"div",3)(6,WA,5,1,"div",4),p(7,"div",5),We(8,KA,17,5,"div",6),g()()),e&2&&(_(5),L("ngIf",r.dateGroups().length===0),_(),L("ngIf",r.editingEntry()),_(2),L("ngForOf",r.dateGroups()))},dependencies:[Ke,Ri,Bt,po,go],styles:[".log-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2.5rem}.date-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.date-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;padding:1.25rem 1.5rem;background:radial-gradient(circle at top left,#d6bdff2e,#191a27f2);border-radius:18px;border:2px solid var(--border-medium);box-shadow:0 12px 28px #00000080;position:sticky;top:10px;z-index:10;transition:all .2s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.date-header[_ngcontent-%COMP%]:hover{border-color:var(--border-strong);box-shadow:0 14px 32px #0009;transform:translateY(-2px)}.date-header-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.date-header-row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--accent-beige);font-size:1.5rem;filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.date-header-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.25rem;font-weight:700;letter-spacing:-.5px;text-shadow:0 2px 4px rgba(0,0,0,.3);flex:1}.date-header-row.date-header-bottom[_ngcontent-%COMP%]{justify-content:space-between}.date-header-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.stat-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.35rem;font-size:.75rem;color:var(--text-dark);padding:.35rem .7rem;background:linear-gradient(135deg,#b8d4c840,#a4c0b433);border:1px solid rgba(184,212,200,.35);border-radius:999px;font-weight:600;letter-spacing:.3px;box-shadow:0 2px 6px #0003;white-space:nowrap}.stat-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.7rem;color:var(--accent-lavender);filter:none}.date-badge[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-dark);padding:.45rem .9rem;background:linear-gradient(135deg,#e8d5c433,#d4c5e026);border:1px solid var(--border-medium);border-radius:999px;font-weight:700;letter-spacing:.5px;text-transform:uppercase;box-shadow:0 2px 8px #0000004d}.form-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;color:var(--text-dark);font-size:1.15rem}@media(min-width:768px){.log-list[_ngcontent-%COMP%]{gap:3rem}.date-header[_ngcontent-%COMP%]{padding:1.5rem 1.75rem}.date-header-row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem}.date-header-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem}.stat-badge[_ngcontent-%COMP%]{font-size:.8rem;padding:.4rem .8rem;gap:.4rem}.stat-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.75rem}.date-badge[_ngcontent-%COMP%]{font-size:.85rem;padding:.5rem 1rem}.form-section[_ngcontent-%COMP%]{margin-bottom:2rem}}"]})};function YA(n,t){if(n&1&&(p(0,"div",6)(1,"div",7),b(2,"i",8),p(3,"h3"),v(4,"Last 7 Days"),g()(),p(5,"div",9)(6,"div",10)(7,"div",11),b(8,"i",12),p(9,"span"),v(10,"Total Feedings"),g()(),p(11,"span",13),v(12),g()(),p(13,"div",10)(14,"div",11),b(15,"i",14),p(16,"span"),v(17,"Total Amount"),g()(),p(18,"span",13),v(19),g()(),p(20,"div",10)(21,"div",11),b(22,"i",15),p(23,"span"),v(24,"Average per Feeding"),g()(),p(25,"span",13),v(26),g()(),p(27,"div",10)(28,"div",11),b(29,"i",16),p(30,"span"),v(31,"Average per Day"),g()(),p(32,"span",13),v(33),g()()()()),n&2){let e=x();_(12),De(e.weekStats().totalFeedings),_(7),J("",e.weekStats().totalAmount," ml"),_(7),J("",e.weekStats().averageAmount," ml"),_(7),De(e.weekStats().averageFeedingsPerDay)}}function ZA(n,t){if(n&1&&(p(0,"div",6)(1,"div",7),b(2,"i",17),p(3,"h3"),v(4,"Last 30 Days"),g()(),p(5,"div",9)(6,"div",10)(7,"div",11),b(8,"i",12),p(9,"span"),v(10,"Total Feedings"),g()(),p(11,"span",13),v(12),g()(),p(13,"div",10)(14,"div",11),b(15,"i",14),p(16,"span"),v(17,"Total Amount"),g()(),p(18,"span",13),v(19),g()(),p(20,"div",10)(21,"div",11),b(22,"i",15),p(23,"span"),v(24,"Average per Feeding"),g()(),p(25,"span",13),v(26),g()(),p(27,"div",10)(28,"div",11),b(29,"i",16),p(30,"span"),v(31,"Average per Day"),g()(),p(32,"span",13),v(33),g()()()()),n&2){let e=x();_(12),De(e.monthStats().totalFeedings),_(7),J("",e.monthStats().totalAmount," ml"),_(7),J("",e.monthStats().averageAmount," ml"),_(7),De(e.monthStats().averageFeedingsPerDay)}}function QA(n,t){if(n&1&&(p(0,"div",6)(1,"div",7),b(2,"i",18),p(3,"h3"),v(4,"All Time"),g()(),p(5,"div",9)(6,"div",10)(7,"div",11),b(8,"i",12),p(9,"span"),v(10,"Total Feedings"),g()(),p(11,"span",13),v(12),g()(),p(13,"div",10)(14,"div",11),b(15,"i",14),p(16,"span"),v(17,"Total Amount"),g()(),p(18,"span",13),v(19),g()(),p(20,"div",10)(21,"div",11),b(22,"i",15),p(23,"span"),v(24,"Average per Feeding"),g()(),p(25,"span",13),v(26),g()(),p(27,"div",10)(28,"div",11),b(29,"i",16),p(30,"span"),v(31,"Average per Day"),g()(),p(32,"span",13),v(33),g()()()()),n&2){let e=x();_(12),De(e.allTimeStats().totalFeedings),_(7),J("",e.allTimeStats().totalAmount," ml"),_(7),J("",e.allTimeStats().averageAmount," ml"),_(7),De(e.allTimeStats().averageFeedingsPerDay)}}function JA(n,t){n&1&&(p(0,"div",19),b(1,"i",20),p(2,"p"),v(3,"No feeding data available yet."),g(),p(4,"small"),v(5,"Start tracking on the Today page!"),g()())}var Tu=class n{constructor(t){this.feedingService=t;qe(()=>{this.feedingService.entries$.subscribe(()=>{this.loadStatistics()})})}weekStats=N(void 0);monthStats=N(void 0);allTimeStats=N(void 0);ngOnInit(){this.loadStatistics()}loadStatistics(){let t=new Date;t.setDate(t.getDate()-7);let e=t.toISOString().split("T")[0],r=new Date;r.setMonth(r.getMonth()-1);let i=r.toISOString().split("T")[0];this.weekStats.set(this.feedingService.getStatistics(e)),this.monthStats.set(this.feedingService.getStatistics(i)),this.allTimeStats.set(this.feedingService.getStatistics())}static \u0275fac=function(e){return new(e||n)(P(ln))};static \u0275cmp=Ee({type:n,selectors:[["app-statistics"]],decls:10,vars:4,consts:[[1,"page-container"],[1,"page-header"],[1,"fas","fa-chart-line"],[1,"stats-grid"],["class","stat-card",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"stat-card"],[1,"card-header"],[1,"fas","fa-calendar-week"],[1,"card-body"],[1,"stat-row"],[1,"stat-label"],[1,"fas","fa-hashtag"],[1,"stat-value"],[1,"fas","fa-bottle-droplet"],[1,"fas","fa-chart-bar"],[1,"fas","fa-calendar-day"],[1,"fas","fa-calendar-alt"],[1,"fas","fa-infinity"],[1,"empty-state"],[1,"fas","fa-chart-pie"]],template:function(e,r){e&1&&(p(0,"div",0)(1,"div",1)(2,"h2"),b(3,"i",2),v(4," Statistics"),g()(),p(5,"div",3),We(6,YA,34,4,"div",4)(7,ZA,34,4,"div",4)(8,QA,34,4,"div",4),g(),We(9,JA,6,0,"div",5),g()),e&2&&(_(6),L("ngIf",r.weekStats()),_(),L("ngIf",r.monthStats()),_(),L("ngIf",r.allTimeStats()),_(),L("ngIf",!r.allTimeStats()||r.allTimeStats().totalFeedings===0))},dependencies:[Ke,Bt],styles:[".stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1.5rem;margin-top:1.5rem}.stat-card[_ngcontent-%COMP%]{background:radial-gradient(circle at top left,#d6bdff26,#191a27fa);border-radius:20px;border:2px solid rgba(214,189,255,.25);box-shadow:0 12px 32px #00000080,0 0 0 1px #d6bdff4d;overflow:hidden;transition:all .3s cubic-bezier(.2,0,.2,1)}.stat-card[_ngcontent-%COMP%]:hover{border-color:#d6bdff66;box-shadow:0 16px 40px #0009,0 0 0 1px #d6bdff66,0 0 40px #d6bdff26;transform:translateY(-4px)}.card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.875rem;padding:1.5rem 1.5rem 1.25rem;background:linear-gradient(135deg,#d6bdff26,#b8d4c81a);border-bottom:2px solid rgba(214,189,255,.2)}.card-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem;color:var(--accent-lavender);filter:drop-shadow(0 2px 8px rgba(214,189,255,.4))}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.3rem;font-weight:700;letter-spacing:-.5px;text-shadow:0 2px 4px rgba(0,0,0,.3)}.card-body[_ngcontent-%COMP%]{padding:1.25rem 1.5rem 1.5rem}.stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 0;border-bottom:1px solid rgba(214,189,255,.1)}.stat-row[_ngcontent-%COMP%]:first-child{padding-top:0}.stat-row[_ngcontent-%COMP%]:last-child{border-bottom:none;padding-bottom:0}.stat-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;color:var(--text-light);font-weight:500;font-size:.95rem}.stat-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;color:var(--accent-beige);filter:drop-shadow(0 2px 4px rgba(232,213,196,.3));width:1.25rem;text-align:center}.stat-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.stat-value[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-size:1.25rem;letter-spacing:-.5px;text-shadow:0 2px 4px rgba(0,0,0,.3);background:linear-gradient(135deg,var(--accent-lavender),var(--accent-beige));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;padding-left:1rem;text-align:right;min-width:100px}@media(min-width:768px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:2rem}.card-header[_ngcontent-%COMP%]{padding:1.75rem 1.75rem 1.5rem}.card-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem}.card-body[_ngcontent-%COMP%]{padding:1.5rem 1.75rem 1.75rem}.stat-row[_ngcontent-%COMP%]{padding:1.125rem 0}.stat-label[_ngcontent-%COMP%]{font-size:1rem}.stat-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.125rem}.stat-value[_ngcontent-%COMP%]{font-size:1.4rem}}@media(min-width:1200px){.stats-grid[_ngcontent-%COMP%]{gap:2.5rem}}"]})};function XA(n,t){n&1&&(p(0,"div",3),b(1,"i",4),p(2,"span"),v(3,"Loading settings..."),g()())}function eR(n,t){if(n&1){let e=_e();p(0,"button",29),j("click",function(){G(e);let i=x(4);return q(i.testNotification())}),b(1,"i",30),p(2,"span"),v(3,"Test Notification"),g()()}}function tR(n,t){if(n&1&&(p(0,"div",24)(1,"div",25),b(2,"i",26),g(),p(3,"div",27)(4,"strong"),v(5,"Notification Status:"),g(),p(6,"span"),v(7),g()()(),ue(8,eR,4,0,"button",28)),n&2){let e=x(3);_(),ae("active",e.notificationsEnabled()),_(),L("ngClass",e.notificationsEnabled()?"fa-bell":"fa-bell-slash"),_(4),ae("success",e.notificationsEnabled())("warning",!e.notificationsEnabled()),_(),J(" ",e.getNotificationStatusText()," "),_(),de(e.notificationsSupported()?8:-1)}}function nR(n,t){if(n&1){let e=_e();p(0,"div",8)(1,"label",19),b(2,"i",20),v(3," Interval "),p(4,"span",21),v(5,"(hours)"),g()(),p(6,"input",22),j("input",function(i){G(e);let o=x(2);return q(o.onIntervalChange(+i.target.value))}),g(),p(7,"small",23),v(8," A countdown will appear on the Today screen showing time until next feeding "),g()(),p(9,"div",8)(10,"label",9)(11,"input",10),j("change",function(i){G(e);let o=x(2);return q(o.onToggleNotifications(i.target.checked))}),g(),b(12,"span",11),p(13,"span",12),v(14," Enable Browser Notifications "),g()(),p(15,"small",23),v(16," Get browser notifications when it's time to feed "),g()(),ue(17,tR,9,9)}if(n&2){let e=x(2);_(6),L("value",e.intervalHours()),_(5),L("checked",e.notificationsToggleEnabled()),_(6),de(e.notificationsToggleEnabled()?17:-1)}}function rR(n,t){n&1&&(b(0,"i",4),p(1,"span"),v(2,"Saving..."),g())}function iR(n,t){n&1&&(b(0,"i",31),p(1,"span"),v(2,"Save Settings"),g())}function oR(n,t){if(n&1&&(p(0,"div",32),b(1,"i",26),v(2),g()),n&2){let e=x(2);ae("success",e.saveMessage().includes("success"))("error",e.saveMessage().includes("Failed")),_(),L("ngClass",e.saveMessage().includes("success")?"fa-check-circle":"fa-exclamation-circle"),_(),J(" ",e.saveMessage()," ")}}function sR(n,t){if(n&1){let e=_e();p(0,"div",5)(1,"h3"),b(2,"i",6),v(3," Feeding Interval Reminder"),g(),p(4,"p",7),v(5," Track the time between feedings and get reminded when it's time to feed. "),g(),p(6,"div",8)(7,"label",9)(8,"input",10),j("change",function(i){G(e);let o=x();return q(o.onToggleInterval(i.target.checked))}),g(),b(9,"span",11),p(10,"span",12),v(11," Enable Feeding Interval "),g()()(),ue(12,nR,18,3),g(),p(13,"div",13)(14,"button",14),j("click",function(){G(e);let i=x();return q(i.onSave())}),ue(15,rR,3,0)(16,iR,3,0),g()(),ue(17,oR,3,6,"div",15),p(18,"div",16)(19,"button",17),j("click",function(){G(e);let i=x();return q(i.logout())}),b(20,"i",18),p(21,"span"),v(22,"Logout"),g()()()}if(n&2){let e=x();_(8),L("checked",e.intervalEnabled()),_(4),de(e.intervalEnabled()?12:-1),_(2),L("disabled",e.isSaving()),_(),de(e.isSaving()?15:16),_(2),de(e.saveMessage()?17:-1)}}var Ou=class n{settingsService=w(Jn);notificationService=w(Xn);authService=w(Fe);isLoading=N(!0);intervalEnabled=N(!1);intervalHours=N(3);notificationsToggleEnabled=N(!1);isSaving=N(!1);saveMessage=N("");notificationsSupported=N(!1);notificationPermission=N("default");notificationsEnabled=Ve(()=>this.notificationPermission()==="granted"&&this.intervalEnabled());constructor(){qe(()=>{if(this.settingsService.settings()){let e=this.settingsService.getFeedingInterval();e===null?(this.intervalEnabled.set(!1),this.intervalHours.set(this.settingsService.getDefaultInterval())):(this.intervalEnabled.set(!0),this.intervalHours.set(e)),this.notificationsToggleEnabled.set(this.settingsService.areNotificationsEnabled()),this.isLoading.set(!1)}})}ngOnInit(){this.notificationsSupported.set("Notification"in window),"Notification"in window&&this.notificationPermission.set(Notification.permission)}async onSave(){this.isSaving.set(!0),this.saveMessage.set("");let t=this.intervalEnabled()?this.intervalHours():null,e=await this.settingsService.updateFeedingInterval(t),r=await this.settingsService.updateNotificationsEnabled(this.notificationsToggleEnabled());if(this.isSaving.set(!1),!e||!r){this.saveMessage.set("Failed to save settings. Please try again."),setTimeout(()=>this.saveMessage.set(""),5e3);return}if(this.intervalEnabled()&&this.notificationsToggleEnabled()&&this.notificationsSupported()){let i=await this.notificationService.requestPermission();if(this.notificationPermission.set(Notification.permission),!i&&this.notificationPermission()!=="granted"){this.saveMessage.set("Settings saved, but notifications are blocked. Enable them in your browser settings."),setTimeout(()=>this.saveMessage.set(""),5e3);return}}this.saveMessage.set("Settings saved successfully!"),setTimeout(()=>this.saveMessage.set(""),3e3)}onToggleInterval(t){this.intervalEnabled.set(t)}onIntervalChange(t){t<.5&&(t=.5),t>24&&(t=24),this.intervalHours.set(t)}onToggleNotifications(t){this.notificationsToggleEnabled.set(t)}async testNotification(){let t=await this.notificationService.testNotification();"Notification"in window&&this.notificationPermission.set(Notification.permission),t&&this.notificationPermission()==="granted"?(this.saveMessage.set("Test notification sent! If you don't see it, check your browser's notification settings or system Do Not Disturb mode."),setTimeout(()=>this.saveMessage.set(""),5e3)):this.notificationPermission()==="denied"?(this.saveMessage.set("Notifications are blocked. Please enable them in your browser settings (usually in the address bar)."),setTimeout(()=>this.saveMessage.set(""),5e3)):this.notificationPermission()==="default"?(this.saveMessage.set("Please allow notifications when prompted by your browser."),setTimeout(()=>this.saveMessage.set(""),5e3)):(this.saveMessage.set("Failed to send notification. Please try again or check your browser settings."),setTimeout(()=>this.saveMessage.set(""),5e3))}getNotificationStatusText(){if(!this.notificationsSupported())return"Browser notifications are not supported on this device.";let t=this.notificationPermission();return t==="granted"?this.intervalEnabled()?"\u2713 Notifications enabled and working":"Enable interval to receive notifications":t==="denied"?"\u2717 Notifications blocked by browser":'Click "Save Settings" to enable notifications'}async logout(){await this.authService.signOut()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=Ee({type:n,selectors:[["app-settings"]],decls:7,vars:1,consts:[[1,"page-container"],[1,"page-header"],[1,"fas","fa-cog"],[1,"loading-container"],[1,"fas","fa-spinner","fa-spin"],[1,"settings-card"],[1,"fas","fa-bell"],[1,"settings-description"],[1,"form-group"],[1,"toggle-label"],["type","checkbox",1,"toggle-input",3,"change","checked"],[1,"toggle-switch"],[1,"toggle-text"],[1,"form-actions"],[1,"btn","btn-primary",3,"click","disabled"],[1,"save-message",3,"success","error"],[1,"logout-section"],[1,"btn","btn-logout",3,"click"],[1,"fas","fa-sign-out-alt"],["for","interval-hours"],[1,"fas","fa-clock"],[1,"unit"],["id","interval-hours","type","number","min","0.5","max","24","step","0.5","placeholder","3",1,"form-control",3,"input","value"],[1,"form-hint"],[1,"notification-status"],[1,"status-indicator"],[1,"fas",3,"ngClass"],[1,"status-text"],["type","button",1,"btn","btn-secondary","test-btn"],["type","button",1,"btn","btn-secondary","test-btn",3,"click"],[1,"fas","fa-vial"],[1,"fas","fa-save"],[1,"save-message"]],template:function(e,r){e&1&&(p(0,"div",0)(1,"div",1)(2,"h2"),b(3,"i",2),v(4," Settings"),g()(),ue(5,XA,4,0,"div",3)(6,sR,23,5),g()),e&2&&(_(5),de(r.isLoading()?5:6))},dependencies:[Ke,Or,Xw],styles:['.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;padding:3rem 1.5rem;background:radial-gradient(circle at top left,#d6bdff26,#191a27fa);border-radius:20px;box-shadow:0 12px 32px #00000080,0 0 0 1px #d6bdff4d;border:2px solid rgba(214,189,255,.25)}.loading-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;color:var(--accent-lavender);filter:drop-shadow(0 2px 8px rgba(214,189,255,.4))}.loading-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-light);font-weight:500}.settings-card[_ngcontent-%COMP%]{background:radial-gradient(circle at top left,#d6bdff26,#191a27fa);padding:1.5rem;border-radius:20px;box-shadow:0 12px 32px #00000080,0 0 0 1px #d6bdff4d;border:2px solid rgba(214,189,255,.25);transition:all .3s cubic-bezier(.2,0,.2,1)}.settings-card[_ngcontent-%COMP%]:hover{border-color:#d6bdff66;box-shadow:0 16px 40px #0009,0 0 0 1px #d6bdff66,0 0 40px #d6bdff26;transform:translateY(-2px)}.settings-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:.75rem;color:#fff;font-size:1.15rem}.settings-card[_ngcontent-%COMP%]   .settings-description[_ngcontent-%COMP%]{color:var(--text-light);margin:0 0 1.5rem;font-size:.9rem;line-height:1.5}.toggle-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;cursor:pointer;-webkit-user-select:none;user-select:none;padding:.5rem 0}.toggle-input[_ngcontent-%COMP%]{position:absolute;opacity:0;pointer-events:none}.toggle-input[_ngcontent-%COMP%]:checked + .toggle-switch[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--accent-lavender),var(--accent-beige));box-shadow:0 0 12px #d6bdff66}.toggle-input[_ngcontent-%COMP%]:checked + .toggle-switch[_ngcontent-%COMP%]:before{transform:translate(26px)}.toggle-switch[_ngcontent-%COMP%]{position:relative;width:54px;height:30px;background:linear-gradient(135deg,#222434,#1f2130);border-radius:15px;transition:all .3s cubic-bezier(.2,0,.2,1);border:2px solid rgba(214,189,255,.2);box-shadow:inset 0 2px 6px #0000004d}.toggle-switch[_ngcontent-%COMP%]:before{content:"";position:absolute;width:24px;height:24px;border-radius:50%;background:linear-gradient(135deg,var(--accent-beige),var(--accent-peach));top:1px;left:2px;transition:transform .3s cubic-bezier(.2,0,.2,1);box-shadow:0 3px 8px #0006}.toggle-text[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--accent-beige);text-transform:uppercase;letter-spacing:.5px;font-size:.9rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;margin-bottom:.625rem;color:var(--accent-beige);font-weight:700;font-size:.95rem;text-transform:uppercase;letter-spacing:.5px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--accent-lavender);filter:drop-shadow(0 2px 4px rgba(214,189,255,.3))}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{text-transform:none;font-weight:500;color:var(--text-light)}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;font-size:1rem;font-weight:500;color:#fff;background:linear-gradient(135deg,#2a2d4199,#23253799);border:2px solid rgba(214,189,255,.15);border-radius:14px;transition:all .25s cubic-bezier(.2,0,.2,1);box-shadow:inset 0 2px 6px #0000004d}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--text-light);opacity:.6}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:hover{border-color:#d6bdff4d;background:linear-gradient(135deg,#2d3046b3,#26283ab3)}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-lavender);background:linear-gradient(135deg,#32354bcc,#2a2d3fcc);box-shadow:inset 0 2px 6px #0000004d,0 0 0 3px #d6bdff33,0 4px 16px #d6bdff4d;transform:translateY(-1px)}.form-group[_ngcontent-%COMP%]   .form-hint[_ngcontent-%COMP%]{display:block;margin-top:.5rem;color:var(--text-light);font-size:.85rem;font-style:italic}.notification-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;background:linear-gradient(135deg,#22243499,#1f213099);border:2px solid rgba(214,189,255,.15);border-radius:12px;margin-top:1rem}.notification-status[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#e8b4b84d,#d4a0a44d);border:2px solid rgba(232,180,184,.4);transition:all .3s ease}.notification-status[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--danger-color)}.notification-status[_ngcontent-%COMP%]   .status-indicator.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#b8d4c84d,#98c0b44d);border-color:#b8d4c880;box-shadow:0 0 16px #b8d4c84d}.notification-status[_ngcontent-%COMP%]   .status-indicator.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--success-color);animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.notification-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.25rem}.notification-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-dark);font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.notification-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-light)}.notification-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   span.success[_ngcontent-%COMP%]{color:var(--success-color);font-weight:600}.notification-status[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   span.warning[_ngcontent-%COMP%]{color:var(--accent-peach);font-weight:600}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.8}}.test-btn[_ngcontent-%COMP%]{width:100%;margin-top:1rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-top:1.5rem}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1;border-radius:12px;padding:.875rem 1.5rem;font-size:1rem;font-weight:600}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.save-message[_ngcontent-%COMP%]{margin-top:1rem;padding:.875rem 1.25rem;border-radius:12px;display:flex;align-items:center;gap:.625rem;font-size:.9rem;font-weight:600;animation:_ngcontent-%COMP%_slideIn .3s cubic-bezier(.2,0,.2,1)}.save-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.save-message.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#b8d4c840,#98c0b440);color:var(--success-color);border:2px solid rgba(184,212,200,.4);box-shadow:0 4px 12px #b8d4c833}.save-message.error[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e8b4b840,#d4a0a440);color:var(--danger-color);border:2px solid rgba(232,180,184,.4);box-shadow:0 4px 12px #e8b4b833}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}.logout-section[_ngcontent-%COMP%]{margin-top:2rem;padding-top:2rem;border-top:2px solid rgba(214,189,255,.15)}.logout-section[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,#e8b4b84d,#d4a0a44d);border:2px solid rgba(232,180,184,.4);color:#e8b4b8;border-radius:12px;padding:.875rem 1.5rem;font-size:1rem;font-weight:600;display:flex;align-items:center;justify-content:center;gap:.625rem;cursor:pointer;transition:all .3s cubic-bezier(.2,0,.2,1);box-shadow:0 4px 12px #e8b4b833}.logout-section[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;filter:drop-shadow(0 2px 4px rgba(232,180,184,.3))}.logout-section[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e8b4b866,#d4a0a466);border-color:#e8b4b899;transform:translateY(-2px);box-shadow:0 8px 20px #e8b4b84d;color:#ffc4c8}.logout-section[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 8px #e8b4b833}@media(min-width:768px){.settings-card[_ngcontent-%COMP%]{padding:2rem}.form-actions[_ngcontent-%COMP%]{gap:1rem}.logout-section[_ngcontent-%COMP%]{margin-top:2.5rem;padding-top:2.5rem}}']})};function aR(n,t){if(n&1&&(p(0,"div",13),b(1,"i",20),v(2),g()),n&2){let e=x(2);_(2),J(" ",e.errorMessage()," ")}}function cR(n,t){if(n&1&&(p(0,"div",14),b(1,"i",21),v(2),g()),n&2){let e=x(2);_(2),J(" ",e.successMessage()," ")}}function lR(n,t){if(n&1){let e=_e();p(0,"form",6),j("ngSubmit",function(){G(e);let i=x();return q(i.onForgotPassword())}),p(1,"h2"),b(2,"i",7),v(3," Reset Password "),g(),p(4,"p",8),v(5,"Enter your email address and we'll send you a link to reset your password."),g(),p(6,"div",9)(7,"label",10),b(8,"i",11),v(9," EMAIL "),g(),b(10,"input",12),g(),ue(11,aR,3,1,"div",13),ue(12,cR,3,1,"div",14),p(13,"button",15),b(14,"i",16),v(15),g(),p(16,"div",17)(17,"button",18),j("click",function(){G(e);let i=x();return q(i.backToLogin())}),b(18,"i",19),v(19," Back to Login "),g()()()}if(n&2){let e,r=x();L("formGroup",r.forgotPasswordForm),_(10),ae("error",((e=r.forgotPasswordForm.get("email"))==null?null:e.invalid)&&((e=r.forgotPasswordForm.get("email"))==null?null:e.touched)),_(),de(r.errorMessage()?11:-1),_(),de(r.successMessage()?12:-1),_(),L("disabled",r.isLoading()),_(),ae("fa-spinner",r.isLoading())("fa-spin",r.isLoading())("fa-paper-plane",!r.isLoading()),_(),J(" ",r.isLoading()?"Sending...":"Send Reset Link"," ")}}function uR(n,t){if(n&1&&(p(0,"div",13),b(1,"i",20),v(2),g()),n&2){let e=x(2);_(2),J(" ",e.errorMessage()," ")}}function dR(n,t){if(n&1){let e=_e();p(0,"form",6),j("ngSubmit",function(){G(e);let i=x();return q(i.onLogin())}),p(1,"h2"),b(2,"i",22),v(3," Welcome Back "),g(),p(4,"div",9)(5,"label",23),b(6,"i",24),v(7," USERNAME "),g(),b(8,"input",25),g(),p(9,"div",9)(10,"label",26),b(11,"i",27),v(12," PASSWORD "),g(),b(13,"input",28),g(),ue(14,uR,3,1,"div",13),p(15,"button",15),b(16,"i",16),v(17),g(),p(18,"div",29)(19,"button",18),j("click",function(){G(e);let i=x();return q(i.showForgotPassword())}),v(20," Forgot password? "),g()(),p(21,"div",17)(22,"span"),v(23,"Don't have an account?"),g(),p(24,"button",18),j("click",function(){G(e);let i=x();return q(i.toggleMode())}),v(25," Sign up here "),g()()()}if(n&2){let e,r,i=x();L("formGroup",i.loginForm),_(8),ae("error",((e=i.loginForm.get("username"))==null?null:e.invalid)&&((e=i.loginForm.get("username"))==null?null:e.touched)),_(5),ae("error",((r=i.loginForm.get("password"))==null?null:r.invalid)&&((r=i.loginForm.get("password"))==null?null:r.touched)),_(),de(i.errorMessage()?14:-1),_(),L("disabled",i.isLoading()),_(),ae("fa-spinner",i.isLoading())("fa-spin",i.isLoading())("fa-sign-in-alt",!i.isLoading()),_(),J(" ",i.isLoading()?"Signing in...":"Sign In"," ")}}function fR(n,t){if(n&1&&(p(0,"div",13),b(1,"i",20),v(2),g()),n&2){let e=x(2);_(2),J(" ",e.errorMessage()," ")}}function hR(n,t){if(n&1){let e=_e();p(0,"form",6),j("ngSubmit",function(){G(e);let i=x();return q(i.onSignup())}),p(1,"h2"),b(2,"i",30),v(3," Create Account "),g(),p(4,"div",9)(5,"label",31),b(6,"i",24),v(7," USERNAME "),g(),b(8,"input",32),g(),p(9,"div",9)(10,"label",33),b(11,"i",11),v(12," EMAIL "),g(),b(13,"input",34),g(),p(14,"div",9)(15,"label",35),b(16,"i",27),v(17," PASSWORD "),g(),b(18,"input",36),g(),p(19,"div",9)(20,"label",37),b(21,"i",27),v(22," CONFIRM PASSWORD "),g(),b(23,"input",38),g(),ue(24,fR,3,1,"div",13),p(25,"button",15),b(26,"i",16),v(27),g(),p(28,"div",17)(29,"span"),v(30,"Already have an account?"),g(),p(31,"button",18),j("click",function(){G(e);let i=x();return q(i.toggleMode())}),v(32," Sign in here "),g()()()}if(n&2){let e,r,i,o,s=x();L("formGroup",s.signupForm),_(8),ae("error",((e=s.signupForm.get("username"))==null?null:e.invalid)&&((e=s.signupForm.get("username"))==null?null:e.touched)),_(5),ae("error",((r=s.signupForm.get("email"))==null?null:r.invalid)&&((r=s.signupForm.get("email"))==null?null:r.touched)),_(5),ae("error",((i=s.signupForm.get("password"))==null?null:i.invalid)&&((i=s.signupForm.get("password"))==null?null:i.touched)),_(5),ae("error",((o=s.signupForm.get("confirmPassword"))==null?null:o.invalid)&&((o=s.signupForm.get("confirmPassword"))==null?null:o.touched)),_(),de(s.errorMessage()?24:-1),_(),L("disabled",s.isLoading()),_(),ae("fa-spinner",s.isLoading())("fa-spin",s.isLoading())("fa-user-plus",!s.isLoading()),_(),J(" ",s.isLoading()?"Creating account...":"Create Account"," ")}}var Au=class n{constructor(t,e,r){this.fb=t;this.authService=e;this.router=r;this.authService.isAuthenticated()&&this.router.navigate(["/today"]),this.loginForm=this.fb.group({username:["",[pe.required,pe.minLength(3)]],password:["",[pe.required,pe.minLength(6)]]}),this.signupForm=this.fb.group({username:["",[pe.required,pe.minLength(3)]],email:["",[pe.required,pe.email]],password:["",[pe.required,pe.minLength(6)]],confirmPassword:["",[pe.required]]}),this.forgotPasswordForm=this.fb.group({email:["",[pe.required,pe.email]]})}loginForm;signupForm;forgotPasswordForm;isSignupMode=N(!1);isForgotPasswordMode=N(!1);errorMessage=N("");successMessage=N("");isLoading=N(!1);toggleMode(){this.isSignupMode.set(!this.isSignupMode()),this.isForgotPasswordMode.set(!1),this.errorMessage.set(""),this.successMessage.set(""),this.loginForm.reset(),this.signupForm.reset(),this.forgotPasswordForm.reset()}showForgotPassword(){this.isForgotPasswordMode.set(!0),this.isSignupMode.set(!1),this.errorMessage.set(""),this.successMessage.set(""),this.forgotPasswordForm.reset()}backToLogin(){this.isForgotPasswordMode.set(!1),this.errorMessage.set(""),this.successMessage.set("")}async onLogin(){if(this.loginForm.invalid){this.errorMessage.set("Please fill in all fields correctly");return}this.isLoading.set(!0),this.errorMessage.set("");let{username:t,password:e}=this.loginForm.value,r=await this.authService.signIn(t,e);this.isLoading.set(!1),r.success||this.errorMessage.set(r.error||"Login failed. Please try again.")}async onSignup(){if(this.signupForm.invalid){this.errorMessage.set("Please fill in all fields correctly");return}let{password:t,confirmPassword:e}=this.signupForm.value;if(t!==e){this.errorMessage.set("Passwords do not match");return}this.isLoading.set(!0),this.errorMessage.set("");let{username:r,email:i}=this.signupForm.value,o=await this.authService.signUp(r,i,t);this.isLoading.set(!1),o.success?(this.errorMessage.set(""),this.isSignupMode.set(!1),this.loginForm.patchValue({username:r,password:t}),await this.onLogin()):this.errorMessage.set(o.error||"Signup failed. Please try again.")}async onForgotPassword(){if(this.forgotPasswordForm.invalid){this.errorMessage.set("Please enter a valid email");return}this.isLoading.set(!0),this.errorMessage.set(""),this.successMessage.set("");let{email:t}=this.forgotPasswordForm.value,e=await this.authService.resetPassword(t);this.isLoading.set(!1),e.success?(this.successMessage.set("Password reset email sent! Check your inbox."),this.forgotPasswordForm.reset()):this.errorMessage.set(e.error||"Failed to send reset email. Please try again.")}static \u0275fac=function(e){return new(e||n)(P(fo),P(Fe),P(Ye))};static \u0275cmp=Ee({type:n,selectors:[["app-login"]],decls:11,vars:3,consts:[[1,"login-container"],[1,"login-card"],[1,"logo-section"],[1,"fas","fa-baby-carriage"],[1,"subtitle"],[1,"auth-form",3,"formGroup"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"fas","fa-key"],[1,"reset-info"],[1,"form-group"],["for","reset-email"],[1,"fas","fa-envelope"],["type","email","id","reset-email","formControlName","email","placeholder","Enter your email",1,"form-control"],[1,"error-message"],[1,"success-message"],["type","submit",1,"btn-primary",3,"disabled"],[1,"fas"],[1,"toggle-mode"],["type","button",1,"btn-link",3,"click"],[1,"fas","fa-arrow-left"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-check-circle"],[1,"fas","fa-sign-in-alt"],["for","login-username"],[1,"fas","fa-user"],["type","text","id","login-username","formControlName","username","placeholder","Enter your username",1,"form-control"],["for","login-password"],[1,"fas","fa-lock"],["type","password","id","login-password","formControlName","password","placeholder","Enter your password",1,"form-control"],[1,"forgot-password-link"],[1,"fas","fa-user-plus"],["for","signup-username"],["type","text","id","signup-username","formControlName","username","placeholder","Choose a username",1,"form-control"],["for","signup-email"],["type","email","id","signup-email","formControlName","email","placeholder","Enter your email",1,"form-control"],["for","signup-password"],["type","password","id","signup-password","formControlName","password","placeholder","Choose a password (min 6 characters)",1,"form-control"],["for","signup-confirm-password"],["type","password","id","signup-confirm-password","formControlName","confirmPassword","placeholder","Confirm your password",1,"form-control"]],template:function(e,r){e&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),b(3,"i",3),p(4,"h1"),v(5,"Baby Feeding Tracker"),g(),p(6,"p",4),v(7,"Track your baby's feeding schedule"),g()(),ue(8,lR,20,13,"form",5),ue(9,dR,26,14,"form",5),ue(10,hR,33,18,"form",5),g()()),e&2&&(_(8),de(r.isForgotPasswordMode()?8:-1),_(),de(!r.isSignupMode()&&!r.isForgotPasswordMode()?9:-1),_(),de(r.isSignupMode()?10:-1))},dependencies:[ho,uo,tr,co,lo,Xr,Jr],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:2rem 1rem;background:linear-gradient(135deg,#14151f,#191a27)}.login-card[_ngcontent-%COMP%]{width:100%;max-width:440px;background:radial-gradient(circle at top left,#d6bdff1f,#191a27fa);padding:2.5rem 2rem;border-radius:24px;box-shadow:0 20px 60px #0009,0 0 0 1px #d6bdff4d;border:2px solid rgba(214,189,255,.25);animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.logo-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.logo-section[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3.5rem;color:var(--accent-lavender);filter:drop-shadow(0 4px 12px rgba(214,189,255,.4));margin-bottom:1rem}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#fff;margin:0 0 .5rem;letter-spacing:.5px;display:block}.logo-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-light);margin:0;opacity:.8}.auth-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--accent-beige);margin:0 0 1.75rem;display:flex;align-items:center;gap:.75rem}.auth-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--accent-lavender);filter:drop-shadow(0 2px 4px rgba(214,189,255,.3))}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;margin-bottom:.625rem;color:var(--accent-beige);font-weight:700;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;color:var(--accent-lavender);filter:drop-shadow(0 2px 4px rgba(214,189,255,.3))}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;font-size:1rem;font-weight:500;color:#fff;background:linear-gradient(135deg,#2a2d4199,#23253799);border:2px solid rgba(214,189,255,.15);border-radius:14px;transition:all .25s cubic-bezier(.2,0,.2,1);box-shadow:inset 0 2px 6px #0000004d}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--text-light);opacity:.6}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:hover{border-color:#d6bdff4d;background:linear-gradient(135deg,#2d3046b3,#26283ab3)}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-lavender);background:linear-gradient(135deg,#32354bcc,#2a2d3fcc);box-shadow:inset 0 2px 6px #0000004d,0 0 0 3px #d6bdff33,0 4px 16px #d6bdff4d;transform:translateY(-1px)}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.error[_ngcontent-%COMP%]{border-color:#ff6b6b80}.auth-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.error[_ngcontent-%COMP%]:focus{border-color:#ff6b6bcc;box-shadow:inset 0 2px 6px #0000004d,0 0 0 3px #ff6b6b33,0 4px 16px #ff6b6b4d}.auth-form[_ngcontent-%COMP%]   .reset-info[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--text-light);font-size:.9rem;line-height:1.5;opacity:.9}.auth-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;padding:.875rem 1rem;margin-bottom:1.25rem;background:#ff6b6b26;border:2px solid rgba(255,107,107,.3);border-radius:12px;color:#ff6b6b;font-size:.9rem;font-weight:500}.auth-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.auth-form[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;padding:.875rem 1rem;margin-bottom:1.25rem;background:#6bffae26;border:2px solid rgba(107,255,174,.3);border-radius:12px;color:#6bffae;font-size:.9rem;font-weight:500}.auth-form[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.auth-form[_ngcontent-%COMP%]   .forgot-password-link[_ngcontent-%COMP%]{text-align:center;margin:1rem 0}.auth-form[_ngcontent-%COMP%]   .forgot-password-link[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{background:none;border:none;color:var(--accent-lavender);font-weight:500;font-size:.9rem;cursor:pointer;padding:0;text-decoration:none;transition:all .2s ease;opacity:.8}.auth-form[_ngcontent-%COMP%]   .forgot-password-link[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover{opacity:1;text-decoration:underline}.auth-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{width:100%;padding:1rem 1.5rem;font-size:1.05rem;font-weight:700;color:#fff;background:linear-gradient(135deg,#d6bdffe6,#a48bcde6);border:2px solid rgba(214,189,255,.5);border-radius:14px;cursor:pointer;transition:all .25s cubic-bezier(.2,0,.2,1);display:flex;align-items:center;justify-content:center;gap:.75rem;text-transform:uppercase;letter-spacing:.5px;box-shadow:0 8px 24px #d6bdff4d}.auth-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.auth-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#e0c7ff,#ae95d7);border-color:#d6bdffcc;box-shadow:0 12px 32px #d6bdff66;transform:translateY(-2px)}.auth-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0);box-shadow:0 4px 12px #d6bdff4d}.auth-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.auth-form[_ngcontent-%COMP%]   .toggle-mode[_ngcontent-%COMP%]{margin-top:1.75rem;text-align:center;font-size:.95rem;color:var(--text-light)}.auth-form[_ngcontent-%COMP%]   .toggle-mode[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:.5rem}.auth-form[_ngcontent-%COMP%]   .toggle-mode[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{background:none;border:none;color:var(--accent-lavender);font-weight:600;cursor:pointer;padding:0;text-decoration:underline;transition:all .2s ease}.auth-form[_ngcontent-%COMP%]   .toggle-mode[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover{color:#e0c7ff;text-decoration:none}@media(max-width:480px){.login-card[_ngcontent-%COMP%]{padding:2rem 1.5rem}.logo-section[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.auth-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.35rem}}"]})};function pR(n,t){n&1&&(p(0,"div",5),b(1,"i",7),p(2,"p"),v(3,"Verifying reset link..."),g()())}function gR(n,t){if(n&1){let e=_e();p(0,"div",8),b(1,"i",9),v(2),g(),p(3,"div",10)(4,"button",11),j("click",function(){G(e);let i=x();return q(i.goToLogin())}),b(5,"i",12),v(6," Back to Login "),g()()}if(n&2){let e=x();_(2),J(" ",e.errorMessage()," ")}}function mR(n,t){if(n&1&&(p(0,"div",8),b(1,"i",9),v(2),g()),n&2){let e=x(2);_(2),J(" ",e.errorMessage()," ")}}function vR(n,t){if(n&1&&(p(0,"div",20),b(1,"i",23),v(2),g()),n&2){let e=x(2);_(2),J(" ",e.successMessage()," ")}}function yR(n,t){if(n&1){let e=_e();p(0,"form",13),j("ngSubmit",function(){G(e);let i=x();return q(i.onResetPassword())}),p(1,"div",14)(2,"label",15),b(3,"i",16),v(4," NEW PASSWORD "),g(),b(5,"input",17),g(),p(6,"div",14)(7,"label",18),b(8,"i",16),v(9," CONFIRM PASSWORD "),g(),b(10,"input",19),g(),ue(11,mR,3,1,"div",8),ue(12,vR,3,1,"div",20),p(13,"button",21),b(14,"i",22),v(15),g(),p(16,"div",10)(17,"button",11),j("click",function(){G(e);let i=x();return q(i.goToLogin())}),b(18,"i",12),v(19," Back to Login "),g()()()}if(n&2){let e,r,i=x();L("formGroup",i.resetForm),_(5),ae("error",((e=i.resetForm.get("password"))==null?null:e.invalid)&&((e=i.resetForm.get("password"))==null?null:e.touched)),_(5),ae("error",((r=i.resetForm.get("confirmPassword"))==null?null:r.invalid)&&((r=i.resetForm.get("confirmPassword"))==null?null:r.touched)),_(),de(i.errorMessage()?11:-1),_(),de(i.successMessage()?12:-1),_(),L("disabled",i.isLoading()),_(),ae("fa-spinner",i.isLoading())("fa-spin",i.isLoading())("fa-check",!i.isLoading()),_(),J(" ",i.isLoading()?"Updating...":"Update Password"," ")}}var Ru=class n{constructor(t,e,r,i){this.fb=t;this.authService=e;this.router=r;this.route=i;this.resetForm=this.fb.group({password:["",[pe.required,pe.minLength(6)]],confirmPassword:["",[pe.required]]})}resetForm;errorMessage=N("");successMessage=N("");isLoading=N(!1);hasValidToken=N(!1);async ngOnInit(){setTimeout(async()=>{let t=await this.authService.getSession();!t||!t.user?(this.errorMessage.set("Invalid or expired reset link. Please request a new one."),this.hasValidToken.set(!1)):this.hasValidToken.set(!0)},500)}async onResetPassword(){if(this.resetForm.invalid){this.errorMessage.set("Please fill in all fields correctly");return}let{password:t,confirmPassword:e}=this.resetForm.value;if(t!==e){this.errorMessage.set("Passwords do not match");return}this.isLoading.set(!0),this.errorMessage.set(""),this.successMessage.set("");let r=await this.authService.updatePassword(t);this.isLoading.set(!1),r.success?(this.successMessage.set("Password updated successfully! Redirecting to login..."),this.resetForm.reset(),setTimeout(()=>{this.authService.signOut()},2e3)):this.errorMessage.set(r.error||"Failed to update password. Please try again.")}goToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||n)(P(fo),P(Fe),P(Ye),P(qt))};static \u0275cmp=Ee({type:n,selectors:[["app-reset-password"]],decls:11,vars:3,consts:[[1,"reset-password-container"],[1,"reset-password-card"],[1,"logo-section"],[1,"fas","fa-key"],[1,"subtitle"],[1,"loading-state"],[1,"reset-form",3,"formGroup"],[1,"fas","fa-spinner","fa-spin"],[1,"error-message"],[1,"fas","fa-exclamation-circle"],[1,"back-link"],["type","button",1,"btn-link",3,"click"],[1,"fas","fa-arrow-left"],[1,"reset-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","new-password"],[1,"fas","fa-lock"],["type","password","id","new-password","formControlName","password","placeholder","Enter new password (min 6 characters)",1,"form-control"],["for","confirm-password"],["type","password","id","confirm-password","formControlName","confirmPassword","placeholder","Confirm your new password",1,"form-control"],[1,"success-message"],["type","submit",1,"btn-primary",3,"disabled"],[1,"fas"],[1,"fas","fa-check-circle"]],template:function(e,r){e&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),b(3,"i",3),p(4,"h1"),v(5,"Reset Your Password"),g(),p(6,"p",4),v(7,"Enter your new password below"),g()(),ue(8,pR,4,0,"div",5),ue(9,gR,7,1),ue(10,yR,20,15,"form",6),g()()),e&2&&(_(8),de(!r.hasValidToken()&&!r.errorMessage()?8:-1),_(),de(r.errorMessage()&&!r.hasValidToken()?9:-1),_(),de(r.hasValidToken()?10:-1))},dependencies:[ho,uo,tr,co,lo,Xr,Jr],styles:[".reset-password-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:2rem 1rem;background:linear-gradient(135deg,#14151f,#191a27)}.reset-password-card[_ngcontent-%COMP%]{width:100%;max-width:440px;background:radial-gradient(circle at top left,#d6bdff1f,#191a27fa);padding:2.5rem 2rem;border-radius:24px;box-shadow:0 20px 60px #0009,0 0 0 1px #d6bdff4d;border:2px solid rgba(214,189,255,.25);animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.logo-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.logo-section[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3.5rem;color:var(--accent-lavender);filter:drop-shadow(0 4px 12px rgba(214,189,255,.4));margin-bottom:1rem}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#fff;margin:0 0 .5rem;letter-spacing:.5px;display:block}.logo-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-light);margin:0;opacity:.8}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 2rem;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3.5rem;color:var(--accent-lavender);margin-bottom:1.5rem;filter:drop-shadow(0 4px 20px rgba(214,189,255,.6));animation:_ngcontent-%COMP%_spin 1.5s linear infinite}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.05rem;color:var(--text-light);font-weight:500;letter-spacing:.3px;margin:0}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.85}}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1.25rem;margin-bottom:1.5rem;background:linear-gradient(135deg,#ff6b6b2e,#ff50501f);border:2px solid rgba(255,107,107,.4);border-radius:16px;color:#ff8787;font-size:.95rem;font-weight:600;line-height:1.5;box-shadow:0 4px 20px #ff6b6b26,inset 0 1px #ffffff1a;animation:_ngcontent-%COMP%_slideIn .4s ease-out}.error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;flex-shrink:0;filter:drop-shadow(0 2px 8px rgba(255,107,107,.5))}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.back-link[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem}.back-link[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d6bdff26,#a48bcd1a);border:2px solid rgba(214,189,255,.3);border-radius:12px;padding:.875rem 1.5rem;color:var(--accent-lavender);font-weight:700;font-size:.95rem;cursor:pointer;text-decoration:none;transition:all .25s cubic-bezier(.2,0,.2,1);display:inline-flex;align-items:center;gap:.625rem;text-transform:uppercase;letter-spacing:.5px;box-shadow:0 4px 12px #d6bdff33}.back-link[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;transition:transform .25s ease}.back-link[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#d6bdff40,#a48bcd26);border-color:#d6bdff80;color:#e0c7ff;box-shadow:0 6px 20px #d6bdff4d;transform:translateY(-2px)}.back-link[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:translate(-3px)}.back-link[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 8px #d6bdff33}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;margin-bottom:.625rem;color:var(--accent-beige);font-weight:700;font-size:.85rem;text-transform:uppercase;letter-spacing:.5px}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;color:var(--accent-lavender);filter:drop-shadow(0 2px 4px rgba(214,189,255,.3))}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;font-size:1rem;font-weight:500;color:#fff;background:linear-gradient(135deg,#2a2d4199,#23253799);border:2px solid rgba(214,189,255,.15);border-radius:14px;transition:all .25s cubic-bezier(.2,0,.2,1);box-shadow:inset 0 2px 6px #0000004d}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--text-light);opacity:.6}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:hover{border-color:#d6bdff4d;background:linear-gradient(135deg,#2d3046b3,#26283ab3)}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-lavender);background:linear-gradient(135deg,#32354bcc,#2a2d3fcc);box-shadow:inset 0 2px 6px #0000004d,0 0 0 3px #d6bdff33,0 4px 16px #d6bdff4d;transform:translateY(-1px)}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.error[_ngcontent-%COMP%]{border-color:#ff6b6b80}.reset-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.error[_ngcontent-%COMP%]:focus{border-color:#ff6b6bcc;box-shadow:inset 0 2px 6px #0000004d,0 0 0 3px #ff6b6b33,0 4px 16px #ff6b6b4d}.reset-form[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;padding:.875rem 1rem;margin-bottom:1.25rem;background:#6bffae26;border:2px solid rgba(107,255,174,.3);border-radius:12px;color:#6bffae;font-size:.9rem;font-weight:500}.reset-form[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.reset-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{width:100%;padding:1rem 1.5rem;font-size:1.05rem;font-weight:700;color:#fff;background:linear-gradient(135deg,#d6bdffe6,#a48bcde6);border:2px solid rgba(214,189,255,.5);border-radius:14px;cursor:pointer;transition:all .25s cubic-bezier(.2,0,.2,1);display:flex;align-items:center;justify-content:center;gap:.75rem;text-transform:uppercase;letter-spacing:.5px;box-shadow:0 8px 24px #d6bdff4d}.reset-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.reset-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#e0c7ff,#ae95d7);border-color:#d6bdffcc;box-shadow:0 12px 32px #d6bdff66;transform:translateY(-2px)}.reset-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0);box-shadow:0 4px 12px #d6bdff4d}.reset-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media(max-width:480px){.reset-password-card[_ngcontent-%COMP%]{padding:2rem 1.5rem}.logo-section[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}"]})};var oa=async(n,t)=>{let e=w(Fe),r=w(Ye);return await e.getSession()?!0:(r.navigate(["/login"],{queryParams:{returnUrl:t.url}}),!1)};var eC=[{path:"login",component:Au},{path:"reset-password",component:Ru},{path:"",redirectTo:"/today",pathMatch:"full"},{path:"today",component:xu,canActivate:[oa]},{path:"log",component:Mu,canActivate:[oa]},{path:"statistics",component:Tu,canActivate:[oa]},{path:"settings",component:Ou,canActivate:[oa]},{path:"**",redirectTo:"/login"}];var tC={providers:[gf(),pp(eC),t0("ngsw-worker.js",{enabled:!L_(),registrationStrategy:"registerWhenStable:30000"})]};function _R(n,t){if(n&1){let e=_e();p(0,"div",1)(1,"div",4),b(2,"i",5),p(3,"div",6)(4,"strong"),v(5,"New Version Available!"),g(),p(6,"span"),v(7,"A new version of the app is ready to install."),g()()(),p(8,"div",7)(9,"button",8),j("click",function(){G(e);let i=x();return q(i.activateUpdate())}),b(10,"i",9),v(11," Update Now "),g(),p(12,"button",10),j("click",function(){G(e);let i=x();return q(i.dismissUpdate())}),b(13,"i",11),g()()()}}function bR(n,t){n&1&&(p(0,"nav",3)(1,"a",12),b(2,"i",13),p(3,"span"),v(4,"Today"),g()(),p(5,"a",14),b(6,"i",15),p(7,"span"),v(8,"Log"),g()(),p(9,"a",16),b(10,"i",17),p(11,"span"),v(12,"Stats"),g()(),p(13,"a",18),b(14,"i",19),p(15,"span"),v(16,"Settings"),g()()())}var Nu=class n{authService=w(Fe);router=w(Ye);notificationService=w(Xn);swUpdate=w(vp);title="Baby Feeding Tracker";showUpdateBanner=N(!1);currentUrl=n0(this.router.events.pipe(Q(()=>this.router.url)),{initialValue:this.router.url});showNavigation=Ve(()=>{let t=this.currentUrl(),e=["/login","/reset-password"];return this.authService.isAuthenticated()&&!e.includes(t)});constructor(){this.checkForUpdates()}checkForUpdates(){if(!this.swUpdate.isEnabled){console.log("Service Worker updates are disabled");return}this.swUpdate.versionUpdates.pipe(He(t=>t.type==="VERSION_READY")).subscribe(()=>{console.log("New version available"),this.showUpdateBanner.set(!0)}),this.swUpdate.checkForUpdate().then(t=>{t&&console.log("Update check: new version found")}),setInterval(()=>{this.swUpdate.checkForUpdate()},360*60*1e3)}activateUpdate(){this.showUpdateBanner.set(!1),window.location.reload()}dismissUpdate(){this.showUpdateBanner.set(!1)}async logout(){await this.authService.signOut()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=Ee({type:n,selectors:[["app-root"]],decls:5,vars:4,consts:[[1,"app-container"],[1,"update-banner"],[1,"app-content"],[1,"app-nav"],[1,"update-content"],[1,"fas","fa-download"],[1,"update-text"],[1,"update-actions"],[1,"btn-update",3,"click"],[1,"fas","fa-sync-alt"],[1,"btn-dismiss",3,"click"],[1,"fas","fa-times"],["routerLink","/today","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-home"],["routerLink","/log","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-calendar-days"],["routerLink","/statistics","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-chart-line"],["routerLink","/settings","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-cog"]],template:function(e,r){e&1&&(p(0,"div",0),ue(1,_R,14,0,"div",1),p(2,"main",2),b(3,"router-outlet"),g(),ue(4,bR,17,0,"nav",3),g()),e&2&&(_(),de(r.showUpdateBanner()?1:-1),_(),ae("no-header",!r.showNavigation()),_(2),de(r.showNavigation()?4:-1))},dependencies:[Ms,zi,hp,Ke],styles:[".app-container[_ngcontent-%COMP%]{height:100vh;height:100dvh;max-height:100vh;max-height:100dvh;display:flex;flex-direction:column;overflow:hidden}.update-banner[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;background:linear-gradient(135deg,#b8d4c8f2,#98c0b4f2);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:1rem 1.5rem;display:flex;align-items:center;justify-content:space-between;gap:1rem;box-shadow:0 4px 16px #0000004d,0 0 0 1px #b8d4c880;z-index:1001;animation:_ngcontent-%COMP%_slideDown .4s cubic-bezier(.2,0,.2,1)}.update-banner[_ngcontent-%COMP%]   .update-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1}.update-banner[_ngcontent-%COMP%]   .update-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#1a3a2e;filter:drop-shadow(0 2px 4px rgba(0,0,0,.2))}.update-banner[_ngcontent-%COMP%]   .update-content[_ngcontent-%COMP%]   .update-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.update-banner[_ngcontent-%COMP%]   .update-content[_ngcontent-%COMP%]   .update-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.95rem;color:#1a3a2e;font-weight:700}.update-banner[_ngcontent-%COMP%]   .update-content[_ngcontent-%COMP%]   .update-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.85rem;color:#2d5a4d}.update-banner[_ngcontent-%COMP%]   .update-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.update-banner[_ngcontent-%COMP%]   .update-actions[_ngcontent-%COMP%]   .btn-update[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a3a2e,#2d5a4d);border:2px solid rgba(26,58,46,.4);color:#b8d4c8;padding:.625rem 1rem;border-radius:10px;font-weight:600;font-size:.85rem;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:all .25s cubic-bezier(.2,0,.2,1);box-shadow:0 2px 8px #0003}.update-banner[_ngcontent-%COMP%]   .update-actions[_ngcontent-%COMP%]   .btn-update[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2d5a4d,#3d7a6d);transform:translateY(-1px);box-shadow:0 4px 12px #0000004d;color:#fff}.update-banner[_ngcontent-%COMP%]   .update-actions[_ngcontent-%COMP%]   .btn-update[_ngcontent-%COMP%]:active{transform:translateY(0)}.update-banner[_ngcontent-%COMP%]   .update-actions[_ngcontent-%COMP%]   .btn-dismiss[_ngcontent-%COMP%]{background:#1a3a2e33;border:2px solid rgba(26,58,46,.3);color:#1a3a2e;padding:.625rem;border-radius:8px;width:36px;height:36px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.update-banner[_ngcontent-%COMP%]   .update-actions[_ngcontent-%COMP%]   .btn-dismiss[_ngcontent-%COMP%]:hover{background:#1a3a2e4d;transform:scale(1.1)}.update-banner[_ngcontent-%COMP%]   .update-actions[_ngcontent-%COMP%]   .btn-dismiss[_ngcontent-%COMP%]:active{transform:scale(.95)}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-100%)}to{opacity:1;transform:translateY(0)}}.app-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#35394afa,#252930fa);color:var(--primary-color);padding:.5rem 1rem;text-align:center;box-shadow:0 2px 12px #0006;border-bottom:1px solid var(--border-color);display:flex;align-items:center;justify-content:space-between;gap:.75rem;flex-shrink:0;z-index:99}.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;text-shadow:0 2px 10px rgba(232,213,196,.2);flex:1;font-weight:700}.logout-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d6bdff26,#a48bcd26);border:1.5px solid rgba(214,189,255,.3);color:var(--accent-lavender);padding:.375rem .75rem;border-radius:10px;cursor:pointer;font-weight:600;font-size:.75rem;text-transform:uppercase;letter-spacing:.3px;display:flex;align-items:center;gap:.375rem;transition:all .25s cubic-bezier(.2,0,.2,1);box-shadow:0 2px 8px #0000004d}.logout-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem}.logout-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#d6bdff40,#a48bcd40);border-color:#d6bdff80;box-shadow:0 4px 12px #d6bdff4d;transform:translateY(-1px)}.logout-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 8px #0000004d}.app-nav[_ngcontent-%COMP%]{display:flex;background:linear-gradient(180deg,#222434fa,#191a27fa);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);box-shadow:0 -4px 16px #0006;border-top:1px solid var(--border-subtle);padding:.375rem 0 calc(.375rem + env(safe-area-inset-bottom));flex-shrink:0;z-index:100}.nav-link[_ngcontent-%COMP%]{flex:1;padding:.5rem .375rem;text-align:center;text-decoration:none;color:var(--text-light);font-weight:600;transition:all .2s cubic-bezier(.2,0,.2,1);display:flex;flex-direction:column;align-items:center;gap:.1875rem;position:relative}.nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem;transition:all .3s cubic-bezier(.2,0,.2,1)}.nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.625rem;text-transform:uppercase;letter-spacing:.3px;opacity:.8;transition:opacity .3s ease}.nav-link[_ngcontent-%COMP%]:hover{color:var(--accent-beige)}.nav-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.1)}.nav-link[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{opacity:1}.nav-link.active[_ngcontent-%COMP%]{color:var(--accent-beige)}.nav-link.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:scale(1.15);filter:drop-shadow(0 2px 8px rgba(246,224,207,.4))}.nav-link.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:1;font-weight:700}.app-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;min-height:0}.app-content.no-header[_ngcontent-%COMP%]{padding-bottom:0}@media(min-width:768px){.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.7rem}}"]})};zh(Nu,tC).catch(n=>console.error(n));
